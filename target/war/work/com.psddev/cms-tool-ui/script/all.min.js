/*!
 * jQuery JavaScript Library v1.8.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 */
(function(a2,aB){var w,af,o=a2.document,aI=a2.location,d=a2.navigator,bg=a2.jQuery,I=a2.$,am=Array.prototype.push,a4=Array.prototype.slice,aK=Array.prototype.indexOf,z=Object.prototype.toString,V=Object.prototype.hasOwnProperty,aO=String.prototype.trim,bG=function(e,bZ){return new bG.fn.init(e,bZ,w)
},bx=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,aa=/\S/,aV=/\s+/,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bo=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bf=/^[\],:{}\s]*$/,bi=/(?:^|:|,)(?:\s*\[)+/g,bD=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,a0=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,bP=/^-ms-/,aU=/-([\da-z])/gi,N=function(e,bZ){return(bZ+"").toUpperCase()
},aF=function(){if(o.addEventListener){o.removeEventListener("DOMContentLoaded",aF,false);
bG.ready()
}else{if(o.readyState==="complete"){o.detachEvent("onreadystatechange",aF);
bG.ready()
}}},Z={};
bG.fn=bG.prototype={constructor:bG,init:function(e,b2,b1){var b0,b3,bZ,b4;
if(!e){return this
}if(e.nodeType){this.context=this[0]=e;
this.length=1;
return this
}if(typeof e==="string"){if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){b0=[null,e,null]
}else{b0=bo.exec(e)
}if(b0&&(b0[1]||!b2)){if(b0[1]){b2=b2 instanceof bG?b2[0]:b2;
b4=(b2&&b2.nodeType?b2.ownerDocument||b2:o);
e=bG.parseHTML(b0[1],b4,true);
if(a.test(b0[1])&&bG.isPlainObject(b2)){this.attr.call(e,b2,true)
}return bG.merge(this,e)
}else{b3=o.getElementById(b0[2]);
if(b3&&b3.parentNode){if(b3.id!==b0[2]){return b1.find(e)
}this.length=1;
this[0]=b3
}this.context=o;
this.selector=e;
return this
}}else{if(!b2||b2.jquery){return(b2||b1).find(e)
}else{return this.constructor(b2).find(e)
}}}else{if(bG.isFunction(e)){return b1.ready(e)
}}if(e.selector!==aB){this.selector=e.selector;
this.context=e.context
}return bG.makeArray(e,this)
},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length
},toArray:function(){return a4.call(this)
},get:function(e){return e==null?this.toArray():(e<0?this[this.length+e]:this[e])
},pushStack:function(bZ,b1,e){var b0=bG.merge(this.constructor(),bZ);
b0.prevObject=this;
b0.context=this.context;
if(b1==="find"){b0.selector=this.selector+(this.selector?" ":"")+e
}else{if(b1){b0.selector=this.selector+"."+b1+"("+e+")"
}}return b0
},each:function(bZ,e){return bG.each(this,bZ,e)
},ready:function(e){bG.ready.promise().done(e);
return this
},eq:function(e){e=+e;
return e===-1?this.slice(e):this.slice(e,e+1)
},first:function(){return this.eq(0)
},last:function(){return this.eq(-1)
},slice:function(){return this.pushStack(a4.apply(this,arguments),"slice",a4.call(arguments).join(","))
},map:function(e){return this.pushStack(bG.map(this,function(b0,bZ){return e.call(b0,bZ,b0)
}))
},end:function(){return this.prevObject||this.constructor(null)
},push:am,sort:[].sort,splice:[].splice};
bG.fn.init.prototype=bG.fn;
bG.extend=bG.fn.extend=function(){var b7,b0,e,bZ,b4,b5,b3=arguments[0]||{},b2=1,b1=arguments.length,b6=false;
if(typeof b3==="boolean"){b6=b3;
b3=arguments[1]||{};
b2=2
}if(typeof b3!=="object"&&!bG.isFunction(b3)){b3={}
}if(b1===b2){b3=this;
--b2
}for(;
b2<b1;
b2++){if((b7=arguments[b2])!=null){for(b0 in b7){e=b3[b0];
bZ=b7[b0];
if(b3===bZ){continue
}if(b6&&bZ&&(bG.isPlainObject(bZ)||(b4=bG.isArray(bZ)))){if(b4){b4=false;
b5=e&&bG.isArray(e)?e:[]
}else{b5=e&&bG.isPlainObject(e)?e:{}
}b3[b0]=bG.extend(b6,b5,bZ)
}else{if(bZ!==aB){b3[b0]=bZ
}}}}}return b3
};
bG.extend({noConflict:function(e){if(a2.$===bG){a2.$=I
}if(e&&a2.jQuery===bG){a2.jQuery=bg
}return bG
},isReady:false,readyWait:1,holdReady:function(e){if(e){bG.readyWait++
}else{bG.ready(true)
}},ready:function(e){if(e===true?--bG.readyWait:bG.isReady){return
}if(!o.body){return setTimeout(bG.ready,1)
}bG.isReady=true;
if(e!==true&&--bG.readyWait>0){return
}af.resolveWith(o,[bG]);
if(bG.fn.trigger){bG(o).trigger("ready").off("ready")
}},isFunction:function(e){return bG.type(e)==="function"
},isArray:Array.isArray||function(e){return bG.type(e)==="array"
},isWindow:function(e){return e!=null&&e==e.window
},isNumeric:function(e){return !isNaN(parseFloat(e))&&isFinite(e)
},type:function(e){return e==null?String(e):Z[z.call(e)]||"object"
},isPlainObject:function(b1){if(!b1||bG.type(b1)!=="object"||b1.nodeType||bG.isWindow(b1)){return false
}try{if(b1.constructor&&!V.call(b1,"constructor")&&!V.call(b1.constructor.prototype,"isPrototypeOf")){return false
}}catch(b0){return false
}var bZ;
for(bZ in b1){}return bZ===aB||V.call(b1,bZ)
},isEmptyObject:function(bZ){var e;
for(e in bZ){return false
}return true
},error:function(e){throw new Error(e)
},parseHTML:function(b1,b0,e){var bZ;
if(!b1||typeof b1!=="string"){return null
}if(typeof b0==="boolean"){e=b0;
b0=0
}b0=b0||o;
if((bZ=a.exec(b1))){return[b0.createElement(bZ[1])]
}bZ=bG.buildFragment([b1],b0,e?null:[]);
return bG.merge([],(bZ.cacheable?bG.clone(bZ.fragment):bZ.fragment).childNodes)
},parseJSON:function(e){if(!e||typeof e!=="string"){return null
}e=bG.trim(e);
if(a2.JSON&&a2.JSON.parse){return a2.JSON.parse(e)
}if(bf.test(e.replace(bD,"@").replace(a0,"]").replace(bi,""))){return(new Function("return "+e))()
}bG.error("Invalid JSON: "+e)
},parseXML:function(b1){var bZ,b0;
if(!b1||typeof b1!=="string"){return null
}try{if(a2.DOMParser){b0=new DOMParser();
bZ=b0.parseFromString(b1,"text/xml")
}else{bZ=new ActiveXObject("Microsoft.XMLDOM");
bZ.async="false";
bZ.loadXML(b1)
}}catch(b2){bZ=aB
}if(!bZ||!bZ.documentElement||bZ.getElementsByTagName("parsererror").length){bG.error("Invalid XML: "+b1)
}return bZ
},noop:function(){},globalEval:function(e){if(e&&aa.test(e)){(a2.execScript||function(bZ){a2["eval"].call(a2,bZ)
})(e)
}},camelCase:function(e){return e.replace(bP,"ms-").replace(aU,N)
},nodeName:function(bZ,e){return bZ.nodeName&&bZ.nodeName.toLowerCase()===e.toLowerCase()
},each:function(b3,b4,b0){var bZ,b1=0,b2=b3.length,e=b2===aB||bG.isFunction(b3);
if(b0){if(e){for(bZ in b3){if(b4.apply(b3[bZ],b0)===false){break
}}}else{for(;
b1<b2;
){if(b4.apply(b3[b1++],b0)===false){break
}}}}else{if(e){for(bZ in b3){if(b4.call(b3[bZ],bZ,b3[bZ])===false){break
}}}else{for(;
b1<b2;
){if(b4.call(b3[b1],b1,b3[b1++])===false){break
}}}}return b3
},trim:aO&&!aO.call("\uFEFF\xA0")?function(e){return e==null?"":aO.call(e)
}:function(e){return e==null?"":(e+"").replace(C,"")
},makeArray:function(e,b0){var b1,bZ=b0||[];
if(e!=null){b1=bG.type(e);
if(e.length==null||b1==="string"||b1==="function"||b1==="regexp"||bG.isWindow(e)){am.call(bZ,e)
}else{bG.merge(bZ,e)
}}return bZ
},inArray:function(b1,bZ,b0){var e;
if(bZ){if(aK){return aK.call(bZ,b1,b0)
}e=bZ.length;
b0=b0?b0<0?Math.max(0,e+b0):b0:0;
for(;
b0<e;
b0++){if(b0 in bZ&&bZ[b0]===b1){return b0
}}}return -1
},merge:function(b2,b0){var e=b0.length,b1=b2.length,bZ=0;
if(typeof e==="number"){for(;
bZ<e;
bZ++){b2[b1++]=b0[bZ]
}}else{while(b0[bZ]!==aB){b2[b1++]=b0[bZ++]
}}b2.length=b1;
return b2
},grep:function(bZ,b4,e){var b3,b0=[],b1=0,b2=bZ.length;
e=!!e;
for(;
b1<b2;
b1++){b3=!!b4(bZ[b1],b1);
if(e!==b3){b0.push(bZ[b1])
}}return b0
},map:function(e,b5,b6){var b3,b4,b2=[],b0=0,bZ=e.length,b1=e instanceof bG||bZ!==aB&&typeof bZ==="number"&&((bZ>0&&e[0]&&e[bZ-1])||bZ===0||bG.isArray(e));
if(b1){for(;
b0<bZ;
b0++){b3=b5(e[b0],b0,b6);
if(b3!=null){b2[b2.length]=b3
}}}else{for(b4 in e){b3=b5(e[b4],b4,b6);
if(b3!=null){b2[b2.length]=b3
}}}return b2.concat.apply([],b2)
},guid:1,proxy:function(b2,b1){var b0,e,bZ;
if(typeof b1==="string"){b0=b2[b1];
b1=b2;
b2=b0
}if(!bG.isFunction(b2)){return aB
}e=a4.call(arguments,2);
bZ=function(){return b2.apply(b1,e.concat(a4.call(arguments)))
};
bZ.guid=b2.guid=b2.guid||bG.guid++;
return bZ
},access:function(e,b4,b7,b5,b2,b8,b6){var b0,b3=b7==null,b1=0,bZ=e.length;
if(b7&&typeof b7==="object"){for(b1 in b7){bG.access(e,b4,b1,b7[b1],1,b8,b5)
}b2=1
}else{if(b5!==aB){b0=b6===aB&&bG.isFunction(b5);
if(b3){if(b0){b0=b4;
b4=function(ca,b9,cb){return b0.call(bG(ca),cb)
}
}else{b4.call(e,b5);
b4=null
}}if(b4){for(;
b1<bZ;
b1++){b4(e[b1],b7,b0?b5.call(e[b1],b1,b4(e[b1],b7)):b5,b6)
}}b2=1
}}return b2?e:b3?b4.call(e):bZ?b4(e[0],b7):b8
},now:function(){return(new Date()).getTime()
}});
bG.ready.promise=function(b2){if(!af){af=bG.Deferred();
if(o.readyState==="complete"){setTimeout(bG.ready,1)
}else{if(o.addEventListener){o.addEventListener("DOMContentLoaded",aF,false);
a2.addEventListener("load",bG.ready,false)
}else{o.attachEvent("onreadystatechange",aF);
a2.attachEvent("onload",bG.ready);
var b1=false;
try{b1=a2.frameElement==null&&o.documentElement
}catch(b0){}if(b1&&b1.doScroll){(function bZ(){if(!bG.isReady){try{b1.doScroll("left")
}catch(b3){return setTimeout(bZ,50)
}bG.ready()
}})()
}}}}return af.promise(b2)
};
bG.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(bZ,e){Z["[object "+e+"]"]=e.toLowerCase()
});
w=bG(o);
var bU={};
function ac(bZ){var e=bU[bZ]={};
bG.each(bZ.split(aV),function(b1,b0){e[b0]=true
});
return e
}bG.Callbacks=function(b8){b8=typeof b8==="string"?(bU[b8]||ac(b8)):bG.extend({},b8);
var b1,e,b2,b0,b3,b4,b5=[],b6=!b8.once&&[],bZ=function(b9){b1=b8.memory&&b9;
e=true;
b4=b0||0;
b0=0;
b3=b5.length;
b2=true;
for(;
b5&&b4<b3;
b4++){if(b5[b4].apply(b9[0],b9[1])===false&&b8.stopOnFalse){b1=false;
break
}}b2=false;
if(b5){if(b6){if(b6.length){bZ(b6.shift())
}}else{if(b1){b5=[]
}else{b7.disable()
}}}},b7={add:function(){if(b5){var ca=b5.length;
(function b9(cb){bG.each(cb,function(cd,cc){var ce=bG.type(cc);
if(ce==="function"){if(!b8.unique||!b7.has(cc)){b5.push(cc)
}}else{if(cc&&cc.length&&ce!=="string"){b9(cc)
}}})
})(arguments);
if(b2){b3=b5.length
}else{if(b1){b0=ca;
bZ(b1)
}}}return this
},remove:function(){if(b5){bG.each(arguments,function(cb,b9){var ca;
while((ca=bG.inArray(b9,b5,ca))>-1){b5.splice(ca,1);
if(b2){if(ca<=b3){b3--
}if(ca<=b4){b4--
}}}})
}return this
},has:function(b9){return bG.inArray(b9,b5)>-1
},empty:function(){b5=[];
return this
},disable:function(){b5=b6=b1=aB;
return this
},disabled:function(){return !b5
},lock:function(){b6=aB;
if(!b1){b7.disable()
}return this
},locked:function(){return !b6
},fireWith:function(ca,b9){b9=b9||[];
b9=[ca,b9.slice?b9.slice():b9];
if(b5&&(!e||b6)){if(b2){b6.push(b9)
}else{bZ(b9)
}}return this
},fire:function(){b7.fireWith(this,arguments);
return this
},fired:function(){return !!e
}};
return b7
};
bG.extend({Deferred:function(b0){var bZ=[["resolve","done",bG.Callbacks("once memory"),"resolved"],["reject","fail",bG.Callbacks("once memory"),"rejected"],["notify","progress",bG.Callbacks("memory")]],b1="pending",b2={state:function(){return b1
},always:function(){e.done(arguments).fail(arguments);
return this
},then:function(){var b3=arguments;
return bG.Deferred(function(b4){bG.each(bZ,function(b6,b5){var b8=b5[0],b7=b3[b6];
e[b5[1]](bG.isFunction(b7)?function(){var b9=b7.apply(this,arguments);
if(b9&&bG.isFunction(b9.promise)){b9.promise().done(b4.resolve).fail(b4.reject).progress(b4.notify)
}else{b4[b8+"With"](this===e?b4:this,[b9])
}}:b4[b8])
});
b3=null
}).promise()
},promise:function(b3){return b3!=null?bG.extend(b3,b2):b2
}},e={};
b2.pipe=b2.then;
bG.each(bZ,function(b4,b3){var b6=b3[2],b5=b3[3];
b2[b3[1]]=b6.add;
if(b5){b6.add(function(){b1=b5
},bZ[b4^1][2].disable,bZ[2][2].lock)
}e[b3[0]]=b6.fire;
e[b3[0]+"With"]=b6.fireWith
});
b2.promise(e);
if(b0){b0.call(e,e)
}return e
},when:function(b2){var b0=0,b4=a4.call(arguments),e=b4.length,bZ=e!==1||(b2&&bG.isFunction(b2.promise))?e:0,b7=bZ===1?b2:bG.Deferred(),b1=function(b9,ca,b8){return function(cb){ca[b9]=this;
b8[b9]=arguments.length>1?a4.call(arguments):cb;
if(b8===b6){b7.notifyWith(ca,b8)
}else{if(!(--bZ)){b7.resolveWith(ca,b8)
}}}
},b6,b3,b5;
if(e>1){b6=new Array(e);
b3=new Array(e);
b5=new Array(e);
for(;
b0<e;
b0++){if(b4[b0]&&bG.isFunction(b4[b0].promise)){b4[b0].promise().done(b1(b0,b5,b4)).fail(b7.reject).progress(b1(b0,b3,b6))
}else{--bZ
}}}if(!bZ){b7.resolveWith(b5,b4)
}return b7.promise()
}});
bG.support=(function(){var cb,ca,b8,b9,b2,b7,b6,b4,b3,b1,bZ,b0=o.createElement("div");
b0.setAttribute("className","t");
b0.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
ca=b0.getElementsByTagName("*");
b8=b0.getElementsByTagName("a")[0];
if(!ca||!b8||!ca.length){return{}
}b9=o.createElement("select");
b2=b9.appendChild(o.createElement("option"));
b7=b0.getElementsByTagName("input")[0];
b8.style.cssText="top:1px;float:left;opacity:.5";
cb={leadingWhitespace:(b0.firstChild.nodeType===3),tbody:!b0.getElementsByTagName("tbody").length,htmlSerialize:!!b0.getElementsByTagName("link").length,style:/top/.test(b8.getAttribute("style")),hrefNormalized:(b8.getAttribute("href")==="/a"),opacity:/^0.5/.test(b8.style.opacity),cssFloat:!!b8.style.cssFloat,checkOn:(b7.value==="on"),optSelected:b2.selected,getSetAttribute:b0.className!=="t",enctype:!!o.createElement("form").enctype,html5Clone:o.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:(o.compatMode==="CSS1Compat"),submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};
b7.checked=true;
cb.noCloneChecked=b7.cloneNode(true).checked;
b9.disabled=true;
cb.optDisabled=!b2.disabled;
try{delete b0.test
}catch(b5){cb.deleteExpando=false
}if(!b0.addEventListener&&b0.attachEvent&&b0.fireEvent){b0.attachEvent("onclick",bZ=function(){cb.noCloneEvent=false
});
b0.cloneNode(true).fireEvent("onclick");
b0.detachEvent("onclick",bZ)
}b7=o.createElement("input");
b7.value="t";
b7.setAttribute("type","radio");
cb.radioValue=b7.value==="t";
b7.setAttribute("checked","checked");
b7.setAttribute("name","t");
b0.appendChild(b7);
b6=o.createDocumentFragment();
b6.appendChild(b0.lastChild);
cb.checkClone=b6.cloneNode(true).cloneNode(true).lastChild.checked;
cb.appendChecked=b7.checked;
b6.removeChild(b7);
b6.appendChild(b0);
if(b0.attachEvent){for(b3 in {submit:true,change:true,focusin:true}){b4="on"+b3;
b1=(b4 in b0);
if(!b1){b0.setAttribute(b4,"return;");
b1=(typeof b0[b4]==="function")
}cb[b3+"Bubbles"]=b1
}}bG(function(){var cc,cg,ce,cf,cd="padding:0;margin:0;border:0;display:block;overflow:hidden;",e=o.getElementsByTagName("body")[0];
if(!e){return
}cc=o.createElement("div");
cc.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";
e.insertBefore(cc,e.firstChild);
cg=o.createElement("div");
cc.appendChild(cg);
cg.innerHTML="<table><tr><td></td><td>t</td></tr></table>";
ce=cg.getElementsByTagName("td");
ce[0].style.cssText="padding:0;margin:0;border:0;display:none";
b1=(ce[0].offsetHeight===0);
ce[0].style.display="";
ce[1].style.display="none";
cb.reliableHiddenOffsets=b1&&(ce[0].offsetHeight===0);
cg.innerHTML="";
cg.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";
cb.boxSizing=(cg.offsetWidth===4);
cb.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==1);
if(a2.getComputedStyle){cb.pixelPosition=(a2.getComputedStyle(cg,null)||{}).top!=="1%";
cb.boxSizingReliable=(a2.getComputedStyle(cg,null)||{width:"4px"}).width==="4px";
cf=o.createElement("div");
cf.style.cssText=cg.style.cssText=cd;
cf.style.marginRight=cf.style.width="0";
cg.style.width="1px";
cg.appendChild(cf);
cb.reliableMarginRight=!parseFloat((a2.getComputedStyle(cf,null)||{}).marginRight)
}if(typeof cg.style.zoom!=="undefined"){cg.innerHTML="";
cg.style.cssText=cd+"width:1px;padding:1px;display:inline;zoom:1";
cb.inlineBlockNeedsLayout=(cg.offsetWidth===3);
cg.style.display="block";
cg.style.overflow="visible";
cg.innerHTML="<div></div>";
cg.firstChild.style.width="5px";
cb.shrinkWrapBlocks=(cg.offsetWidth!==3);
cc.style.zoom=1
}e.removeChild(cc);
cc=cg=ce=cf=null
});
b6.removeChild(b0);
ca=b8=b9=b2=b7=b6=b0=null;
return cb
})();
var bt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,aL=/([A-Z])/g;
bG.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(bG.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?bG.cache[e[bG.expando]]:e[bG.expando];
return !!e&&!O(e)
},data:function(b1,bZ,b3,b2){if(!bG.acceptData(b1)){return
}var b4,b6,b7=bG.expando,b5=typeof bZ==="string",b8=b1.nodeType,e=b8?bG.cache:b1,b0=b8?b1[b7]:b1[b7]&&b7;
if((!b0||!e[b0]||(!b2&&!e[b0].data))&&b5&&b3===aB){return
}if(!b0){if(b8){b1[b7]=b0=bG.deletedIds.pop()||bG.guid++
}else{b0=b7
}}if(!e[b0]){e[b0]={};
if(!b8){e[b0].toJSON=bG.noop
}}if(typeof bZ==="object"||typeof bZ==="function"){if(b2){e[b0]=bG.extend(e[b0],bZ)
}else{e[b0].data=bG.extend(e[b0].data,bZ)
}}b4=e[b0];
if(!b2){if(!b4.data){b4.data={}
}b4=b4.data
}if(b3!==aB){b4[bG.camelCase(bZ)]=b3
}if(b5){b6=b4[bZ];
if(b6==null){b6=b4[bG.camelCase(bZ)]
}}else{b6=b4
}return b6
},removeData:function(b1,bZ,b2){if(!bG.acceptData(b1)){return
}var b5,b4,b3,b6=b1.nodeType,e=b6?bG.cache:b1,b0=b6?b1[bG.expando]:bG.expando;
if(!e[b0]){return
}if(bZ){b5=b2?e[b0]:e[b0].data;
if(b5){if(!bG.isArray(bZ)){if(bZ in b5){bZ=[bZ]
}else{bZ=bG.camelCase(bZ);
if(bZ in b5){bZ=[bZ]
}else{bZ=bZ.split(" ")
}}}for(b4=0,b3=bZ.length;
b4<b3;
b4++){delete b5[bZ[b4]]
}if(!(b2?O:bG.isEmptyObject)(b5)){return
}}}if(!b2){delete e[b0].data;
if(!O(e[b0])){return
}}if(b6){bG.cleanData([b1],true)
}else{if(bG.support.deleteExpando||e!=e.window){delete e[b0]
}else{e[b0]=null
}}},_data:function(bZ,e,b0){return bG.data(bZ,e,b0,true)
},acceptData:function(bZ){var e=bZ.nodeName&&bG.noData[bZ.nodeName.toLowerCase()];
return !e||e!==true&&bZ.getAttribute("classid")===e
}});
bG.fn.extend({data:function(b7,b6){var b2,bZ,b5,e,b1,b0=this[0],b4=0,b3=null;
if(b7===aB){if(this.length){b3=bG.data(b0);
if(b0.nodeType===1&&!bG._data(b0,"parsedAttrs")){b5=b0.attributes;
for(b1=b5.length;
b4<b1;
b4++){e=b5[b4].name;
if(!e.indexOf("data-")){e=bG.camelCase(e.substring(5));
bv(b0,e,b3[e])
}}bG._data(b0,"parsedAttrs",true)
}}return b3
}if(typeof b7==="object"){return this.each(function(){bG.data(this,b7)
})
}b2=b7.split(".",2);
b2[1]=b2[1]?"."+b2[1]:"";
bZ=b2[1]+"!";
return bG.access(this,function(b8){if(b8===aB){b3=this.triggerHandler("getData"+bZ,[b2[0]]);
if(b3===aB&&b0){b3=bG.data(b0,b7);
b3=bv(b0,b7,b3)
}return b3===aB&&b2[1]?this.data(b2[0]):b3
}b2[1]=b8;
this.each(function(){var b9=bG(this);
b9.triggerHandler("setData"+bZ,b2);
bG.data(this,b7,b8);
b9.triggerHandler("changeData"+bZ,b2)
})
},null,b6,arguments.length>1,null,false)
},removeData:function(e){return this.each(function(){bG.removeData(this,e)
})
}});
function bv(b1,b0,b2){if(b2===aB&&b1.nodeType===1){var bZ="data-"+b0.replace(aL,"-$1").toLowerCase();
b2=b1.getAttribute(bZ);
if(typeof b2==="string"){try{b2=b2==="true"?true:b2==="false"?false:b2==="null"?null:+b2+""===b2?+b2:bt.test(b2)?bG.parseJSON(b2):b2
}catch(b3){}bG.data(b1,b0,b2)
}else{b2=aB
}}return b2
}function O(bZ){var e;
for(e in bZ){if(e==="data"&&bG.isEmptyObject(bZ[e])){continue
}if(e!=="toJSON"){return false
}}return true
}bG.extend({queue:function(b0,bZ,b1){var e;
if(b0){bZ=(bZ||"fx")+"queue";
e=bG._data(b0,bZ);
if(b1){if(!e||bG.isArray(b1)){e=bG._data(b0,bZ,bG.makeArray(b1))
}else{e.push(b1)
}}return e||[]
}},dequeue:function(b3,b2){b2=b2||"fx";
var bZ=bG.queue(b3,b2),b4=bZ.length,b1=bZ.shift(),e=bG._queueHooks(b3,b2),b0=function(){bG.dequeue(b3,b2)
};
if(b1==="inprogress"){b1=bZ.shift();
b4--
}if(b1){if(b2==="fx"){bZ.unshift("inprogress")
}delete e.stop;
b1.call(b3,b0,e)
}if(!b4&&e){e.empty.fire()
}},_queueHooks:function(b0,bZ){var e=bZ+"queueHooks";
return bG._data(b0,e)||bG._data(b0,e,{empty:bG.Callbacks("once memory").add(function(){bG.removeData(b0,bZ+"queue",true);
bG.removeData(b0,e,true)
})})
}});
bG.fn.extend({queue:function(e,bZ){var b0=2;
if(typeof e!=="string"){bZ=e;
e="fx";
b0--
}if(arguments.length<b0){return bG.queue(this[0],e)
}return bZ===aB?this:this.each(function(){var b1=bG.queue(this,e,bZ);
bG._queueHooks(this,e);
if(e==="fx"&&b1[0]!=="inprogress"){bG.dequeue(this,e)
}})
},dequeue:function(e){return this.each(function(){bG.dequeue(this,e)
})
},delay:function(bZ,e){bZ=bG.fx?bG.fx.speeds[bZ]||bZ:bZ;
e=e||"fx";
return this.queue(e,function(b1,b0){var b2=setTimeout(b1,bZ);
b0.stop=function(){clearTimeout(b2)
}
})
},clearQueue:function(e){return this.queue(e||"fx",[])
},promise:function(b0,b4){var bZ,b1=1,b5=bG.Deferred(),b3=this,e=this.length,b2=function(){if(!(--b1)){b5.resolveWith(b3,[b3])
}};
if(typeof b0!=="string"){b4=b0;
b0=aB
}b0=b0||"fx";
while(e--){bZ=bG._data(b3[e],b0+"queueHooks");
if(bZ&&bZ.empty){b1++;
bZ.empty.add(b2)
}}b2();
return b5.promise(b4)
}});
var a7,bV,n,bJ=/[\t\r\n]/g,ai=/\r/g,j=/^(?:button|input)$/i,aA=/^(?:button|input|object|select|textarea)$/i,D=/^a(?:rea|)$/i,M=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,bL=bG.support.getSetAttribute;
bG.fn.extend({attr:function(e,bZ){return bG.access(this,bG.attr,e,bZ,arguments.length>1)
},removeAttr:function(e){return this.each(function(){bG.removeAttr(this,e)
})
},prop:function(e,bZ){return bG.access(this,bG.prop,e,bZ,arguments.length>1)
},removeProp:function(e){e=bG.propFix[e]||e;
return this.each(function(){try{this[e]=aB;
delete this[e]
}catch(bZ){}})
},addClass:function(b2){var b4,b0,bZ,b1,b3,b5,e;
if(bG.isFunction(b2)){return this.each(function(b6){bG(this).addClass(b2.call(this,b6,this.className))
})
}if(b2&&typeof b2==="string"){b4=b2.split(aV);
for(b0=0,bZ=this.length;
b0<bZ;
b0++){b1=this[b0];
if(b1.nodeType===1){if(!b1.className&&b4.length===1){b1.className=b2
}else{b3=" "+b1.className+" ";
for(b5=0,e=b4.length;
b5<e;
b5++){if(b3.indexOf(" "+b4[b5]+" ")<0){b3+=b4[b5]+" "
}}b1.className=bG.trim(b3)
}}}}return this
},removeClass:function(b4){var b1,b2,b3,b5,bZ,b0,e;
if(bG.isFunction(b4)){return this.each(function(b6){bG(this).removeClass(b4.call(this,b6,this.className))
})
}if((b4&&typeof b4==="string")||b4===aB){b1=(b4||"").split(aV);
for(b0=0,e=this.length;
b0<e;
b0++){b3=this[b0];
if(b3.nodeType===1&&b3.className){b2=(" "+b3.className+" ").replace(bJ," ");
for(b5=0,bZ=b1.length;
b5<bZ;
b5++){while(b2.indexOf(" "+b1[b5]+" ")>=0){b2=b2.replace(" "+b1[b5]+" "," ")
}}b3.className=b4?bG.trim(b2):""
}}}return this
},toggleClass:function(b1,bZ){var b0=typeof b1,e=typeof bZ==="boolean";
if(bG.isFunction(b1)){return this.each(function(b2){bG(this).toggleClass(b1.call(this,b2,this.className,bZ),bZ)
})
}return this.each(function(){if(b0==="string"){var b4,b3=0,b2=bG(this),b5=bZ,b6=b1.split(aV);
while((b4=b6[b3++])){b5=e?b5:!b2.hasClass(b4);
b2[b5?"addClass":"removeClass"](b4)
}}else{if(b0==="undefined"||b0==="boolean"){if(this.className){bG._data(this,"__className__",this.className)
}this.className=this.className||b1===false?"":bG._data(this,"__className__")||""
}}})
},hasClass:function(e){var b1=" "+e+" ",b0=0,bZ=this.length;
for(;
b0<bZ;
b0++){if(this[b0].nodeType===1&&(" "+this[b0].className+" ").replace(bJ," ").indexOf(b1)>=0){return true
}}return false
},val:function(b1){var e,bZ,b2,b0=this[0];
if(!arguments.length){if(b0){e=bG.valHooks[b0.type]||bG.valHooks[b0.nodeName.toLowerCase()];
if(e&&"get" in e&&(bZ=e.get(b0,"value"))!==aB){return bZ
}bZ=b0.value;
return typeof bZ==="string"?bZ.replace(ai,""):bZ==null?"":bZ
}return
}b2=bG.isFunction(b1);
return this.each(function(b4){var b5,b3=bG(this);
if(this.nodeType!==1){return
}if(b2){b5=b1.call(this,b4,b3.val())
}else{b5=b1
}if(b5==null){b5=""
}else{if(typeof b5==="number"){b5+=""
}else{if(bG.isArray(b5)){b5=bG.map(b5,function(b6){return b6==null?"":b6+""
})
}}}e=bG.valHooks[this.type]||bG.valHooks[this.nodeName.toLowerCase()];
if(!e||!("set" in e)||e.set(this,b5,"value")===aB){this.value=b5
}})
}});
bG.extend({valHooks:{option:{get:function(e){var bZ=e.attributes.value;
return !bZ||bZ.specified?e.value:e.text
}},select:{get:function(e){var b4,b0,b6=e.options,b2=e.selectedIndex,b1=e.type==="select-one"||b2<0,b5=b1?null:[],b3=b1?b2+1:b6.length,bZ=b2<0?b3:b1?b2:0;
for(;
bZ<b3;
bZ++){b0=b6[bZ];
if((b0.selected||bZ===b2)&&(bG.support.optDisabled?!b0.disabled:b0.getAttribute("disabled")===null)&&(!b0.parentNode.disabled||!bG.nodeName(b0.parentNode,"optgroup"))){b4=bG(b0).val();
if(b1){return b4
}b5.push(b4)
}}return b5
},set:function(bZ,b0){var e=bG.makeArray(b0);
bG(bZ).find("option").each(function(){this.selected=bG.inArray(bG(this).val(),e)>=0
});
if(!e.length){bZ.selectedIndex=-1
}return e
}}},attrFn:{},attr:function(b4,b1,b5,b3){var b0,e,b2,bZ=b4.nodeType;
if(!b4||bZ===3||bZ===8||bZ===2){return
}if(b3&&bG.isFunction(bG.fn[b1])){return bG(b4)[b1](b5)
}if(typeof b4.getAttribute==="undefined"){return bG.prop(b4,b1,b5)
}b2=bZ!==1||!bG.isXMLDoc(b4);
if(b2){b1=b1.toLowerCase();
e=bG.attrHooks[b1]||(M.test(b1)?bV:a7)
}if(b5!==aB){if(b5===null){bG.removeAttr(b4,b1);
return
}else{if(e&&"set" in e&&b2&&(b0=e.set(b4,b5,b1))!==aB){return b0
}else{b4.setAttribute(b1,b5+"");
return b5
}}}else{if(e&&"get" in e&&b2&&(b0=e.get(b4,b1))!==null){return b0
}else{b0=b4.getAttribute(b1);
return b0===null?aB:b0
}}},removeAttr:function(b1,b3){var b2,b4,bZ,e,b0=0;
if(b3&&b1.nodeType===1){b4=b3.split(aV);
for(;
b0<b4.length;
b0++){bZ=b4[b0];
if(bZ){b2=bG.propFix[bZ]||bZ;
e=M.test(bZ);
if(!e){bG.attr(b1,bZ,"")
}b1.removeAttribute(bL?bZ:b2);
if(e&&b2 in b1){b1[b2]=false
}}}}},attrHooks:{type:{set:function(e,bZ){if(j.test(e.nodeName)&&e.parentNode){bG.error("type property can't be changed")
}else{if(!bG.support.radioValue&&bZ==="radio"&&bG.nodeName(e,"input")){var b0=e.value;
e.setAttribute("type",bZ);
if(b0){e.value=b0
}return bZ
}}}},value:{get:function(bZ,e){if(a7&&bG.nodeName(bZ,"button")){return a7.get(bZ,e)
}return e in bZ?bZ.value:null
},set:function(bZ,b0,e){if(a7&&bG.nodeName(bZ,"button")){return a7.set(bZ,b0,e)
}bZ.value=b0
}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b3,b1,b4){var b0,e,b2,bZ=b3.nodeType;
if(!b3||bZ===3||bZ===8||bZ===2){return
}b2=bZ!==1||!bG.isXMLDoc(b3);
if(b2){b1=bG.propFix[b1]||b1;
e=bG.propHooks[b1]
}if(b4!==aB){if(e&&"set" in e&&(b0=e.set(b3,b4,b1))!==aB){return b0
}else{return(b3[b1]=b4)
}}else{if(e&&"get" in e&&(b0=e.get(b3,b1))!==null){return b0
}else{return b3[b1]
}}},propHooks:{tabIndex:{get:function(bZ){var e=bZ.getAttributeNode("tabindex");
return e&&e.specified?parseInt(e.value,10):aA.test(bZ.nodeName)||D.test(bZ.nodeName)&&bZ.href?0:aB
}}}});
bV={get:function(bZ,e){var b1,b0=bG.prop(bZ,e);
return b0===true||typeof b0!=="boolean"&&(b1=bZ.getAttributeNode(e))&&b1.nodeValue!==false?e.toLowerCase():aB
},set:function(bZ,b1,e){var b0;
if(b1===false){bG.removeAttr(bZ,e)
}else{b0=bG.propFix[e]||e;
if(b0 in bZ){bZ[b0]=true
}bZ.setAttribute(e,e.toLowerCase())
}return e
}};
if(!bL){n={name:true,id:true,coords:true};
a7=bG.valHooks.button={get:function(b0,bZ){var e;
e=b0.getAttributeNode(bZ);
return e&&(n[bZ]?e.value!=="":e.specified)?e.value:aB
},set:function(b0,b1,bZ){var e=b0.getAttributeNode(bZ);
if(!e){e=o.createAttribute(bZ);
b0.setAttributeNode(e)
}return(e.value=b1+"")
}};
bG.each(["width","height"],function(bZ,e){bG.attrHooks[e]=bG.extend(bG.attrHooks[e],{set:function(b0,b1){if(b1===""){b0.setAttribute(e,"auto");
return b1
}}})
});
bG.attrHooks.contenteditable={get:a7.get,set:function(bZ,b0,e){if(b0===""){b0="false"
}a7.set(bZ,b0,e)
}}
}if(!bG.support.hrefNormalized){bG.each(["href","src","width","height"],function(bZ,e){bG.attrHooks[e]=bG.extend(bG.attrHooks[e],{get:function(b1){var b0=b1.getAttribute(e,2);
return b0===null?aB:b0
}})
})
}if(!bG.support.style){bG.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||aB
},set:function(e,bZ){return(e.style.cssText=bZ+"")
}}
}if(!bG.support.optSelected){bG.propHooks.selected=bG.extend(bG.propHooks.selected,{get:function(bZ){var e=bZ.parentNode;
if(e){e.selectedIndex;
if(e.parentNode){e.parentNode.selectedIndex
}}return null
}})
}if(!bG.support.enctype){bG.propFix.enctype="encoding"
}if(!bG.support.checkOn){bG.each(["radio","checkbox"],function(){bG.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value
}}
})
}bG.each(["radio","checkbox"],function(){bG.valHooks[this]=bG.extend(bG.valHooks[this],{set:function(e,bZ){if(bG.isArray(bZ)){return(e.checked=bG.inArray(bG(e).val(),bZ)>=0)
}}})
});
var bE=/^(?:textarea|input|select)$/i,br=/^([^\.]*|)(?:\.(.+)|)$/,ba=/(?:^|\s)hover(\.\S+|)\b/,a3=/^key/,bK=/^(?:mouse|contextmenu)|click/,by=/^(?:focusinfocus|focusoutblur)$/,aq=function(e){return bG.event.special.hover?e:e.replace(ba,"mouseenter$1 mouseleave$1")
};
bG.event={add:function(b1,b5,cc,b3,b2){var b6,b4,cd,cb,ca,b8,e,b9,bZ,b0,b7;
if(b1.nodeType===3||b1.nodeType===8||!b5||!cc||!(b6=bG._data(b1))){return
}if(cc.handler){bZ=cc;
cc=bZ.handler;
b2=bZ.selector
}if(!cc.guid){cc.guid=bG.guid++
}cd=b6.events;
if(!cd){b6.events=cd={}
}b4=b6.handle;
if(!b4){b6.handle=b4=function(ce){return typeof bG!=="undefined"&&(!ce||bG.event.triggered!==ce.type)?bG.event.dispatch.apply(b4.elem,arguments):aB
};
b4.elem=b1
}b5=bG.trim(aq(b5)).split(" ");
for(cb=0;
cb<b5.length;
cb++){ca=br.exec(b5[cb])||[];
b8=ca[1];
e=(ca[2]||"").split(".").sort();
b7=bG.event.special[b8]||{};
b8=(b2?b7.delegateType:b7.bindType)||b8;
b7=bG.event.special[b8]||{};
b9=bG.extend({type:b8,origType:ca[1],data:b3,handler:cc,guid:cc.guid,selector:b2,needsContext:b2&&bG.expr.match.needsContext.test(b2),namespace:e.join(".")},bZ);
b0=cd[b8];
if(!b0){b0=cd[b8]=[];
b0.delegateCount=0;
if(!b7.setup||b7.setup.call(b1,b3,e,b4)===false){if(b1.addEventListener){b1.addEventListener(b8,b4,false)
}else{if(b1.attachEvent){b1.attachEvent("on"+b8,b4)
}}}}if(b7.add){b7.add.call(b1,b9);
if(!b9.handler.guid){b9.handler.guid=cc.guid
}}if(b2){b0.splice(b0.delegateCount++,0,b9)
}else{b0.push(b9)
}bG.event.global[b8]=true
}b1=null
},global:{},remove:function(b1,b6,cc,b2,b5){var cd,ce,b9,b0,bZ,b3,b4,cb,b8,e,ca,b7=bG.hasData(b1)&&bG._data(b1);
if(!b7||!(cb=b7.events)){return
}b6=bG.trim(aq(b6||"")).split(" ");
for(cd=0;
cd<b6.length;
cd++){ce=br.exec(b6[cd])||[];
b9=b0=ce[1];
bZ=ce[2];
if(!b9){for(b9 in cb){bG.event.remove(b1,b9+b6[cd],cc,b2,true)
}continue
}b8=bG.event.special[b9]||{};
b9=(b2?b8.delegateType:b8.bindType)||b9;
e=cb[b9]||[];
b3=e.length;
bZ=bZ?new RegExp("(^|\\.)"+bZ.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;
for(b4=0;
b4<e.length;
b4++){ca=e[b4];
if((b5||b0===ca.origType)&&(!cc||cc.guid===ca.guid)&&(!bZ||bZ.test(ca.namespace))&&(!b2||b2===ca.selector||b2==="**"&&ca.selector)){e.splice(b4--,1);
if(ca.selector){e.delegateCount--
}if(b8.remove){b8.remove.call(b1,ca)
}}}if(e.length===0&&b3!==e.length){if(!b8.teardown||b8.teardown.call(b1,bZ,b7.handle)===false){bG.removeEvent(b1,b9,b7.handle)
}delete cb[b9]
}}if(bG.isEmptyObject(cb)){delete b7.handle;
bG.removeData(b1,"events",true)
}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(bZ,b6,b4,cd){if(b4&&(b4.nodeType===3||b4.nodeType===8)){return
}var e,b1,b7,cb,b3,b2,b9,b8,b5,cc,ca=bZ.type||bZ,b0=[];
if(by.test(ca+bG.event.triggered)){return
}if(ca.indexOf("!")>=0){ca=ca.slice(0,-1);
b1=true
}if(ca.indexOf(".")>=0){b0=ca.split(".");
ca=b0.shift();
b0.sort()
}if((!b4||bG.event.customEvent[ca])&&!bG.event.global[ca]){return
}bZ=typeof bZ==="object"?bZ[bG.expando]?bZ:new bG.Event(ca,bZ):new bG.Event(ca);
bZ.type=ca;
bZ.isTrigger=true;
bZ.exclusive=b1;
bZ.namespace=b0.join(".");
bZ.namespace_re=bZ.namespace?new RegExp("(^|\\.)"+b0.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;
b2=ca.indexOf(":")<0?"on"+ca:"";
if(!b4){e=bG.cache;
for(b7 in e){if(e[b7].events&&e[b7].events[ca]){bG.event.trigger(bZ,b6,e[b7].handle.elem,true)
}}return
}bZ.result=aB;
if(!bZ.target){bZ.target=b4
}b6=b6!=null?bG.makeArray(b6):[];
b6.unshift(bZ);
b9=bG.event.special[ca]||{};
if(b9.trigger&&b9.trigger.apply(b4,b6)===false){return
}b5=[[b4,b9.bindType||ca]];
if(!cd&&!b9.noBubble&&!bG.isWindow(b4)){cc=b9.delegateType||ca;
cb=by.test(cc+ca)?b4:b4.parentNode;
for(b3=b4;
cb;
cb=cb.parentNode){b5.push([cb,cc]);
b3=cb
}if(b3===(b4.ownerDocument||o)){b5.push([b3.defaultView||b3.parentWindow||a2,cc])
}}for(b7=0;
b7<b5.length&&!bZ.isPropagationStopped();
b7++){cb=b5[b7][0];
bZ.type=b5[b7][1];
b8=(bG._data(cb,"events")||{})[bZ.type]&&bG._data(cb,"handle");
if(b8){b8.apply(cb,b6)
}b8=b2&&cb[b2];
if(b8&&bG.acceptData(cb)&&b8.apply&&b8.apply(cb,b6)===false){bZ.preventDefault()
}}bZ.type=ca;
if(!cd&&!bZ.isDefaultPrevented()){if((!b9._default||b9._default.apply(b4.ownerDocument,b6)===false)&&!(ca==="click"&&bG.nodeName(b4,"a"))&&bG.acceptData(b4)){if(b2&&b4[ca]&&((ca!=="focus"&&ca!=="blur")||bZ.target.offsetWidth!==0)&&!bG.isWindow(b4)){b3=b4[b2];
if(b3){b4[b2]=null
}bG.event.triggered=ca;
b4[ca]();
bG.event.triggered=aB;
if(b3){b4[b2]=b3
}}}}return bZ.result
},dispatch:function(e){e=bG.event.fix(e||a2.event);
var b5,b4,ce,b8,b7,bZ,b6,cc,b1,cd,b2=((bG._data(this,"events")||{})[e.type]||[]),b3=b2.delegateCount,ca=a4.call(arguments),b0=!e.exclusive&&!e.namespace,b9=bG.event.special[e.type]||{},cb=[];
ca[0]=e;
e.delegateTarget=this;
if(b9.preDispatch&&b9.preDispatch.call(this,e)===false){return
}if(b3&&!(e.button&&e.type==="click")){for(ce=e.target;
ce!=this;
ce=ce.parentNode||this){if(ce.disabled!==true||e.type!=="click"){b7={};
b6=[];
for(b5=0;
b5<b3;
b5++){cc=b2[b5];
b1=cc.selector;
if(b7[b1]===aB){b7[b1]=cc.needsContext?bG(b1,this).index(ce)>=0:bG.find(b1,this,null,[ce]).length
}if(b7[b1]){b6.push(cc)
}}if(b6.length){cb.push({elem:ce,matches:b6})
}}}}if(b2.length>b3){cb.push({elem:this,matches:b2.slice(b3)})
}for(b5=0;
b5<cb.length&&!e.isPropagationStopped();
b5++){bZ=cb[b5];
e.currentTarget=bZ.elem;
for(b4=0;
b4<bZ.matches.length&&!e.isImmediatePropagationStopped();
b4++){cc=bZ.matches[b4];
if(b0||(!e.namespace&&!cc.namespace)||e.namespace_re&&e.namespace_re.test(cc.namespace)){e.data=cc.data;
e.handleObj=cc;
b8=((bG.event.special[cc.origType]||{}).handle||cc.handler).apply(bZ.elem,ca);
if(b8!==aB){e.result=b8;
if(b8===false){e.preventDefault();
e.stopPropagation()
}}}}}if(b9.postDispatch){b9.postDispatch.call(this,e)
}return e.result
},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(bZ,e){if(bZ.which==null){bZ.which=e.charCode!=null?e.charCode:e.keyCode
}return bZ
}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b1,b0){var b2,b3,e,bZ=b0.button,b4=b0.fromElement;
if(b1.pageX==null&&b0.clientX!=null){b2=b1.target.ownerDocument||o;
b3=b2.documentElement;
e=b2.body;
b1.pageX=b0.clientX+(b3&&b3.scrollLeft||e&&e.scrollLeft||0)-(b3&&b3.clientLeft||e&&e.clientLeft||0);
b1.pageY=b0.clientY+(b3&&b3.scrollTop||e&&e.scrollTop||0)-(b3&&b3.clientTop||e&&e.clientTop||0)
}if(!b1.relatedTarget&&b4){b1.relatedTarget=b4===b1.target?b0.toElement:b4
}if(!b1.which&&bZ!==aB){b1.which=(bZ&1?1:(bZ&2?3:(bZ&4?2:0)))
}return b1
}},fix:function(b0){if(b0[bG.expando]){return b0
}var bZ,b3,e=b0,b1=bG.event.fixHooks[b0.type]||{},b2=b1.props?this.props.concat(b1.props):this.props;
b0=bG.Event(e);
for(bZ=b2.length;
bZ;
){b3=b2[--bZ];
b0[b3]=e[b3]
}if(!b0.target){b0.target=e.srcElement||o
}if(b0.target.nodeType===3){b0.target=b0.target.parentNode
}b0.metaKey=!!b0.metaKey;
return b1.filter?b1.filter(b0,e):b0
},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(b0,bZ,e){if(bG.isWindow(this)){this.onbeforeunload=e
}},teardown:function(bZ,e){if(this.onbeforeunload===e){this.onbeforeunload=null
}}}},simulate:function(b0,b2,b1,bZ){var b3=bG.extend(new bG.Event(),b1,{type:b0,isSimulated:true,originalEvent:{}});
if(bZ){bG.event.trigger(b3,null,b2)
}else{bG.event.dispatch.call(b2,b3)
}if(b3.isDefaultPrevented()){b1.preventDefault()
}}};
bG.event.handle=bG.event.dispatch;
bG.removeEvent=o.removeEventListener?function(bZ,e,b0){if(bZ.removeEventListener){bZ.removeEventListener(e,b0,false)
}}:function(b0,bZ,b1){var e="on"+bZ;
if(b0.detachEvent){if(typeof b0[e]==="undefined"){b0[e]=null
}b0.detachEvent(e,b1)
}};
bG.Event=function(bZ,e){if(!(this instanceof bG.Event)){return new bG.Event(bZ,e)
}if(bZ&&bZ.type){this.originalEvent=bZ;
this.type=bZ.type;
this.isDefaultPrevented=(bZ.defaultPrevented||bZ.returnValue===false||bZ.getPreventDefault&&bZ.getPreventDefault())?R:X
}else{this.type=bZ
}if(e){bG.extend(this,e)
}this.timeStamp=bZ&&bZ.timeStamp||bG.now();
this[bG.expando]=true
};
function X(){return false
}function R(){return true
}bG.Event.prototype={preventDefault:function(){this.isDefaultPrevented=R;
var bZ=this.originalEvent;
if(!bZ){return
}if(bZ.preventDefault){bZ.preventDefault()
}else{bZ.returnValue=false
}},stopPropagation:function(){this.isPropagationStopped=R;
var bZ=this.originalEvent;
if(!bZ){return
}if(bZ.stopPropagation){bZ.stopPropagation()
}bZ.cancelBubble=true
},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=R;
this.stopPropagation()
},isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X};
bG.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(bZ,e){bG.event.special[bZ]={delegateType:e,bindType:e,handle:function(b3){var b1,b5=this,b4=b3.relatedTarget,b2=b3.handleObj,b0=b2.selector;
if(!b4||(b4!==b5&&!bG.contains(b5,b4))){b3.type=b2.origType;
b1=b2.handler.apply(this,arguments);
b3.type=e
}return b1
}}
});
if(!bG.support.submitBubbles){bG.event.special.submit={setup:function(){if(bG.nodeName(this,"form")){return false
}bG.event.add(this,"click._submit keypress._submit",function(b1){var b0=b1.target,bZ=bG.nodeName(b0,"input")||bG.nodeName(b0,"button")?b0.form:aB;
if(bZ&&!bG._data(bZ,"_submit_attached")){bG.event.add(bZ,"submit._submit",function(e){e._submit_bubble=true
});
bG._data(bZ,"_submit_attached",true)
}})
},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;
if(this.parentNode&&!e.isTrigger){bG.event.simulate("submit",this.parentNode,e,true)
}}},teardown:function(){if(bG.nodeName(this,"form")){return false
}bG.event.remove(this,"._submit")
}}
}if(!bG.support.changeBubbles){bG.event.special.change={setup:function(){if(bE.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bG.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true
}});
bG.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false
}bG.event.simulate("change",this,e,true)
})
}return false
}bG.event.add(this,"beforeactivate._change",function(b0){var bZ=b0.target;
if(bE.test(bZ.nodeName)&&!bG._data(bZ,"_change_attached")){bG.event.add(bZ,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){bG.event.simulate("change",this.parentNode,e,true)
}});
bG._data(bZ,"_change_attached",true)
}})
},handle:function(bZ){var e=bZ.target;
if(this!==e||bZ.isSimulated||bZ.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return bZ.handleObj.handler.apply(this,arguments)
}},teardown:function(){bG.event.remove(this,"._change");
return !bE.test(this.nodeName)
}}
}if(!bG.support.focusinBubbles){bG.each({focus:"focusin",blur:"focusout"},function(b1,e){var bZ=0,b0=function(b2){bG.event.simulate(e,b2.target,bG.event.fix(b2),true)
};
bG.event.special[e]={setup:function(){if(bZ++===0){o.addEventListener(b1,b0,true)
}},teardown:function(){if(--bZ===0){o.removeEventListener(b1,b0,true)
}}}
})
}bG.fn.extend({on:function(b0,e,b3,b2,bZ){var b4,b1;
if(typeof b0==="object"){if(typeof e!=="string"){b3=b3||e;
e=aB
}for(b1 in b0){this.on(b1,e,b3,b0[b1],bZ)
}return this
}if(b3==null&&b2==null){b2=e;
b3=e=aB
}else{if(b2==null){if(typeof e==="string"){b2=b3;
b3=aB
}else{b2=b3;
b3=e;
e=aB
}}}if(b2===false){b2=X
}else{if(!b2){return this
}}if(bZ===1){b4=b2;
b2=function(b5){bG().off(b5);
return b4.apply(this,arguments)
};
b2.guid=b4.guid||(b4.guid=bG.guid++)
}return this.each(function(){bG.event.add(this,b0,b2,b3,e)
})
},one:function(bZ,e,b1,b0){return this.on(bZ,e,b1,b0,1)
},off:function(b0,e,b2){var bZ,b1;
if(b0&&b0.preventDefault&&b0.handleObj){bZ=b0.handleObj;
bG(b0.delegateTarget).off(bZ.namespace?bZ.origType+"."+bZ.namespace:bZ.origType,bZ.selector,bZ.handler);
return this
}if(typeof b0==="object"){for(b1 in b0){this.off(b1,e,b0[b1])
}return this
}if(e===false||typeof e==="function"){b2=e;
e=aB
}if(b2===false){b2=X
}return this.each(function(){bG.event.remove(this,b0,b2,e)
})
},bind:function(e,b0,bZ){return this.on(e,null,b0,bZ)
},unbind:function(e,bZ){return this.off(e,null,bZ)
},live:function(e,b0,bZ){bG(this.context).on(e,this.selector,b0,bZ);
return this
},die:function(e,bZ){bG(this.context).off(e,this.selector||"**",bZ);
return this
},delegate:function(e,bZ,b1,b0){return this.on(bZ,e,b1,b0)
},undelegate:function(e,bZ,b0){return arguments.length===1?this.off(e,"**"):this.off(bZ,e||"**",b0)
},trigger:function(e,bZ){return this.each(function(){bG.event.trigger(e,bZ,this)
})
},triggerHandler:function(e,bZ){if(this[0]){return bG.event.trigger(e,bZ,this[0],true)
}},toggle:function(b1){var bZ=arguments,e=b1.guid||bG.guid++,b0=0,b2=function(b3){var b4=(bG._data(this,"lastToggle"+b1.guid)||0)%b0;
bG._data(this,"lastToggle"+b1.guid,b4+1);
b3.preventDefault();
return bZ[b4].apply(this,arguments)||false
};
b2.guid=e;
while(b0<bZ.length){bZ[b0++].guid=e
}return this.click(b2)
},hover:function(e,bZ){return this.mouseenter(e).mouseleave(bZ||e)
}});
bG.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(bZ,e){bG.fn[e]=function(b1,b0){if(b0==null){b0=b1;
b1=null
}return arguments.length>0?this.on(e,null,b1,b0):this.trigger(e)
};
if(a3.test(e)){bG.event.fixHooks[e]=bG.event.keyHooks
}if(bK.test(e)){bG.event.fixHooks[e]=bG.event.mouseHooks
}});
/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
(function(cS,ch){var cX,ca,cL,b0,cm,cA,cd,cg,cc,cJ,b9=true,cu="undefined",cZ=("sizcache"+Math.random()).replace(".",""),b4=String,b8=cS.document,cb=b8.documentElement,cr=0,cf=0,cE=[].pop,cW=[].push,cl=[].slice,co=[].indexOf||function(c8){var c7=0,e=this.length;
for(;
c7<e;
c7++){if(this[c7]===c8){return c7
}}return -1
},c1=function(e,c7){e[cZ]=c7==null||c7;
return e
},c5=function(){var e={},c7=[];
return c1(function(c8,c9){if(c7.push(c8)>cL.cacheLength){delete e[c7.shift()]
}return(e[c8+" "]=c9)
},e)
},cU=c5(),cV=c5(),cn=c5(),cy="[\\x20\\t\\r\\n\\f]",ck="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",ci=ck.replace("w","w#"),c4="([*^$|!~]?=)",cP="\\["+cy+"*("+ck+")"+cy+"*(?:"+c4+cy+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ci+")|)|)"+cy+"*\\]",c6=":("+ck+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+cP+")|[^:]|\\\\.)*|.*))\\)|)",cz=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+cy+"*((?:-\\d)?\\d*)"+cy+"*\\)|)(?=[^-]|$)",cT=new RegExp("^"+cy+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cy+"+$","g"),b5=new RegExp("^"+cy+"*,"+cy+"*"),cH=new RegExp("^"+cy+"*([\\x20\\t\\r\\n\\f>+~])"+cy+"*"),cM=new RegExp(c6),cO=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,cD=/^:not/,cR=/[\x20\t\r\n\f]*[+~]/,c0=/:not\($/,cs=/h\d/i,cN=/input|select|textarea|button/i,ct=/\\(?!\\)/g,cG={ID:new RegExp("^#("+ck+")"),CLASS:new RegExp("^\\.("+ck+")"),NAME:new RegExp("^\\[name=['\"]?("+ck+")['\"]?\\]"),TAG:new RegExp("^("+ck.replace("w","w*")+")"),ATTR:new RegExp("^"+cP),PSEUDO:new RegExp("^"+c6),POS:new RegExp(cz,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+cy+"*(even|odd|(([+-]|)(\\d*)n|)"+cy+"*(?:([+-]|)"+cy+"*(\\d+)|))"+cy+"*\\)|)","i"),needsContext:new RegExp("^"+cy+"*[>+~]|"+cz,"i")},cK=function(c7){var c9=b8.createElement("div");
try{return c7(c9)
}catch(c8){return false
}finally{c9=null
}},b7=cK(function(e){e.appendChild(b8.createComment(""));
return !e.getElementsByTagName("*").length
}),cC=cK(function(e){e.innerHTML="<a href='#'></a>";
return e.firstChild&&typeof e.firstChild.getAttribute!==cu&&e.firstChild.getAttribute("href")==="#"
}),cq=cK(function(c7){c7.innerHTML="<select></select>";
var e=typeof c7.lastChild.getAttribute("multiple");
return e!=="boolean"&&e!=="string"
}),cB=cK(function(e){e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";
if(!e.getElementsByClassName||!e.getElementsByClassName("e").length){return false
}e.lastChild.className="e";
return e.getElementsByClassName("e").length===2
}),bZ=cK(function(c7){c7.id=cZ+0;
c7.innerHTML="<a name='"+cZ+"'></a><div name='"+cZ+"'></div>";
cb.insertBefore(c7,cb.firstChild);
var e=b8.getElementsByName&&b8.getElementsByName(cZ).length===2+b8.getElementsByName(cZ+0).length;
ca=!b8.getElementById(cZ);
cb.removeChild(c7);
return e
});
try{cl.call(cb.childNodes,0)[0].nodeType
}catch(c3){cl=function(c7){var c8,e=[];
for(;
(c8=this[c7]);
c7++){e.push(c8)
}return e
}
}function cQ(c9,e,db,de){db=db||[];
e=e||b8;
var dc,c7,dd,c8,da=e.nodeType;
if(!c9||typeof c9!=="string"){return db
}if(da!==1&&da!==9){return[]
}dd=cm(e);
if(!dd&&!de){if((dc=cO.exec(c9))){if((c8=dc[1])){if(da===9){c7=e.getElementById(c8);
if(c7&&c7.parentNode){if(c7.id===c8){db.push(c7);
return db
}}else{return db
}}else{if(e.ownerDocument&&(c7=e.ownerDocument.getElementById(c8))&&cA(e,c7)&&c7.id===c8){db.push(c7);
return db
}}}else{if(dc[2]){cW.apply(db,cl.call(e.getElementsByTagName(c9),0));
return db
}else{if((c8=dc[3])&&cB&&e.getElementsByClassName){cW.apply(db,cl.call(e.getElementsByClassName(c8),0));
return db
}}}}}return cY(c9.replace(cT,"$1"),e,db,de,dd)
}cQ.matches=function(c7,e){return cQ(c7,null,null,e)
};
cQ.matchesSelector=function(e,c7){return cQ(c7,null,null,[e]).length>0
};
function cI(e){return function(c8){var c7=c8.nodeName.toLowerCase();
return c7==="input"&&c8.type===e
}
}function b3(e){return function(c8){var c7=c8.nodeName.toLowerCase();
return(c7==="input"||c7==="button")&&c8.type===e
}
}function cF(e){return c1(function(c7){c7=+c7;
return c1(function(c8,dc){var da,c9=e([],c8.length,c7),db=c9.length;
while(db--){if(c8[(da=c9[db])]){c8[da]=!(dc[da]=c8[da])
}}})
})
}b0=cQ.getText=function(da){var c9,c7="",c8=0,e=da.nodeType;
if(e){if(e===1||e===9||e===11){if(typeof da.textContent==="string"){return da.textContent
}else{for(da=da.firstChild;
da;
da=da.nextSibling){c7+=b0(da)
}}}else{if(e===3||e===4){return da.nodeValue
}}}else{for(;
(c9=da[c8]);
c8++){c7+=b0(c9)
}}return c7
};
cm=cQ.isXML=function(e){var c7=e&&(e.ownerDocument||e).documentElement;
return c7?c7.nodeName!=="HTML":false
};
cA=cQ.contains=cb.contains?function(c7,e){var c9=c7.nodeType===9?c7.documentElement:c7,c8=e&&e.parentNode;
return c7===c8||!!(c8&&c8.nodeType===1&&c9.contains&&c9.contains(c8))
}:cb.compareDocumentPosition?function(c7,e){return e&&!!(c7.compareDocumentPosition(e)&16)
}:function(c7,e){while((e=e.parentNode)){if(e===c7){return true
}}return false
};
cQ.attr=function(c8,c7){var c9,e=cm(c8);
if(!e){c7=c7.toLowerCase()
}if((c9=cL.attrHandle[c7])){return c9(c8)
}if(e||cq){return c8.getAttribute(c7)
}c9=c8.getAttributeNode(c7);
return c9?typeof c8[c7]==="boolean"?c8[c7]?c7:null:c9.specified?c9.value:null:null
};
cL=cQ.selectors={cacheLength:50,createPseudo:c1,match:cG,attrHandle:cC?{}:{href:function(e){return e.getAttribute("href",2)
},type:function(e){return e.getAttribute("type")
}},find:{ID:ca?function(c9,c8,c7){if(typeof c8.getElementById!==cu&&!c7){var e=c8.getElementById(c9);
return e&&e.parentNode?[e]:[]
}}:function(c9,c8,c7){if(typeof c8.getElementById!==cu&&!c7){var e=c8.getElementById(c9);
return e?e.id===c9||typeof e.getAttributeNode!==cu&&e.getAttributeNode("id").value===c9?[e]:ch:[]
}},TAG:b7?function(e,c7){if(typeof c7.getElementsByTagName!==cu){return c7.getElementsByTagName(e)
}}:function(e,da){var c9=da.getElementsByTagName(e);
if(e==="*"){var db,c8=[],c7=0;
for(;
(db=c9[c7]);
c7++){if(db.nodeType===1){c8.push(db)
}}return c8
}return c9
},NAME:bZ&&function(e,c7){if(typeof c7.getElementsByName!==cu){return c7.getElementsByName(name)
}},CLASS:cB&&function(c8,c7,e){if(typeof c7.getElementsByClassName!==cu&&!e){return c7.getElementsByClassName(c8)
}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(ct,"");
e[3]=(e[4]||e[5]||"").replace(ct,"");
if(e[2]==="~="){e[3]=" "+e[3]+" "
}return e.slice(0,4)
},CHILD:function(e){e[1]=e[1].toLowerCase();
if(e[1]==="nth"){if(!e[2]){cQ.error(e[0])
}e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd"));
e[4]=+((e[6]+e[7])||e[2]==="odd")
}else{if(e[2]){cQ.error(e[0])
}}return e
},PSEUDO:function(c7){var c8,e;
if(cG.CHILD.test(c7[0])){return null
}if(c7[3]){c7[2]=c7[3]
}else{if((c8=c7[4])){if(cM.test(c8)&&(e=b1(c8,true))&&(e=c8.indexOf(")",c8.length-e)-c8.length)){c8=c8.slice(0,e);
c7[0]=c7[0].slice(0,e)
}c7[2]=c8
}}return c7.slice(0,3)
}},filter:{ID:ca?function(e){e=e.replace(ct,"");
return function(c7){return c7.getAttribute("id")===e
}
}:function(e){e=e.replace(ct,"");
return function(c8){var c7=typeof c8.getAttributeNode!==cu&&c8.getAttributeNode("id");
return c7&&c7.value===e
}
},TAG:function(e){if(e==="*"){return function(){return true
}
}e=e.replace(ct,"").toLowerCase();
return function(c7){return c7.nodeName&&c7.nodeName.toLowerCase()===e
}
},CLASS:function(e){var c7=cU[cZ][e+" "];
return c7||(c7=new RegExp("(^|"+cy+")"+e+"("+cy+"|$)"))&&cU(e,function(c8){return c7.test(c8.className||(typeof c8.getAttribute!==cu&&c8.getAttribute("class"))||"")
})
},ATTR:function(c8,c7,e){return function(db,da){var c9=cQ.attr(db,c8);
if(c9==null){return c7==="!="
}if(!c7){return true
}c9+="";
return c7==="="?c9===e:c7==="!="?c9!==e:c7==="^="?e&&c9.indexOf(e)===0:c7==="*="?e&&c9.indexOf(e)>-1:c7==="$="?e&&c9.substr(c9.length-e.length)===e:c7==="~="?(" "+c9+" ").indexOf(e)>-1:c7==="|="?c9===e||c9.substr(0,e.length+1)===e+"-":false
}
},CHILD:function(e,c8,c9,c7){if(e==="nth"){return function(dc){var db,dd,da=dc.parentNode;
if(c9===1&&c7===0){return true
}if(da){dd=0;
for(db=da.firstChild;
db;
db=db.nextSibling){if(db.nodeType===1){dd++;
if(dc===db){break
}}}}dd-=c7;
return dd===c9||(dd%c9===0&&dd/c9>=0)
}
}return function(db){var da=db;
switch(e){case"only":case"first":while((da=da.previousSibling)){if(da.nodeType===1){return false
}}if(e==="first"){return true
}da=db;
case"last":while((da=da.nextSibling)){if(da.nodeType===1){return false
}}return true
}}
},PSEUDO:function(c9,c8){var e,c7=cL.pseudos[c9]||cL.setFilters[c9.toLowerCase()]||cQ.error("unsupported pseudo: "+c9);
if(c7[cZ]){return c7(c8)
}if(c7.length>1){e=[c9,c9,"",c8];
return cL.setFilters.hasOwnProperty(c9.toLowerCase())?c1(function(dc,de){var db,da=c7(dc,c8),dd=da.length;
while(dd--){db=co.call(dc,da[dd]);
dc[db]=!(de[db]=da[dd])
}}):function(da){return c7(da,0,e)
}
}return c7
}},pseudos:{not:c1(function(e){var c7=[],c8=[],c9=cd(e.replace(cT,"$1"));
return c9[cZ]?c1(function(db,dg,de,dc){var df,da=c9(db,null,dc,[]),dd=db.length;
while(dd--){if((df=da[dd])){db[dd]=!(dg[dd]=df)
}}}):function(dc,db,da){c7[0]=dc;
c9(c7,null,da,c8);
return !c8.pop()
}
}),has:c1(function(e){return function(c7){return cQ(e,c7).length>0
}
}),contains:c1(function(e){return function(c7){return(c7.textContent||c7.innerText||b0(c7)).indexOf(e)>-1
}
}),enabled:function(e){return e.disabled===false
},disabled:function(e){return e.disabled===true
},checked:function(e){var c7=e.nodeName.toLowerCase();
return(c7==="input"&&!!e.checked)||(c7==="option"&&!!e.selected)
},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex
}return e.selected===true
},parent:function(e){return !cL.pseudos.empty(e)
},empty:function(c7){var e;
c7=c7.firstChild;
while(c7){if(c7.nodeName>"@"||(e=c7.nodeType)===3||e===4){return false
}c7=c7.nextSibling
}return true
},header:function(e){return cs.test(e.nodeName)
},text:function(c8){var c7,e;
return c8.nodeName.toLowerCase()==="input"&&(c7=c8.type)==="text"&&((e=c8.getAttribute("type"))==null||e.toLowerCase()===c7)
},radio:cI("radio"),checkbox:cI("checkbox"),file:cI("file"),password:cI("password"),image:cI("image"),submit:b3("submit"),reset:b3("reset"),button:function(c7){var e=c7.nodeName.toLowerCase();
return e==="input"&&c7.type==="button"||e==="button"
},input:function(e){return cN.test(e.nodeName)
},focus:function(e){var c7=e.ownerDocument;
return e===c7.activeElement&&(!c7.hasFocus||c7.hasFocus())&&!!(e.type||e.href||~e.tabIndex)
},active:function(e){return e===e.ownerDocument.activeElement
},first:cF(function(){return[0]
}),last:cF(function(e,c7){return[c7-1]
}),eq:cF(function(e,c8,c7){return[c7<0?c7+c8:c7]
}),even:cF(function(e,c8){for(var c7=0;
c7<c8;
c7+=2){e.push(c7)
}return e
}),odd:cF(function(e,c8){for(var c7=1;
c7<c8;
c7+=2){e.push(c7)
}return e
}),lt:cF(function(e,c9,c8){for(var c7=c8<0?c8+c9:c8;
--c7>=0;
){e.push(c7)
}return e
}),gt:cF(function(e,c9,c8){for(var c7=c8<0?c8+c9:c8;
++c7<c9;
){e.push(c7)
}return e
})}};
function b2(c7,e,c8){if(c7===e){return c8
}var c9=c7.nextSibling;
while(c9){if(c9===e){return -1
}c9=c9.nextSibling
}return 1
}cg=cb.compareDocumentPosition?function(c7,e){if(c7===e){cc=true;
return 0
}return(!c7.compareDocumentPosition||!e.compareDocumentPosition?c7.compareDocumentPosition:c7.compareDocumentPosition(e)&4)?-1:1
}:function(de,dd){if(de===dd){cc=true;
return 0
}else{if(de.sourceIndex&&dd.sourceIndex){return de.sourceIndex-dd.sourceIndex
}}var db,c7,c8=[],e=[],da=de.parentNode,dc=dd.parentNode,df=da;
if(da===dc){return b2(de,dd)
}else{if(!da){return -1
}else{if(!dc){return 1
}}}while(df){c8.unshift(df);
df=df.parentNode
}df=dc;
while(df){e.unshift(df);
df=df.parentNode
}db=c8.length;
c7=e.length;
for(var c9=0;
c9<db&&c9<c7;
c9++){if(c8[c9]!==e[c9]){return b2(c8[c9],e[c9])
}}return c9===db?b2(de,e[c9],-1):b2(c8[c9],dd,1)
};
[0,0].sort(cg);
b9=!cc;
cQ.uniqueSort=function(c8){var c9,da=[],c7=1,e=0;
cc=b9;
c8.sort(cg);
if(cc){for(;
(c9=c8[c7]);
c7++){if(c9===c8[c7-1]){e=da.push(c7)
}}while(e--){c8.splice(da[e],1)
}}return c8
};
cQ.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)
};
function b1(da,df){var c7,db,dd,de,dc,c8,e,c9=cV[cZ][da+" "];
if(c9){return df?0:c9.slice(0)
}dc=da;
c8=[];
e=cL.preFilter;
while(dc){if(!c7||(db=b5.exec(dc))){if(db){dc=dc.slice(db[0].length)||dc
}c8.push(dd=[])
}c7=false;
if((db=cH.exec(dc))){dd.push(c7=new b4(db.shift()));
dc=dc.slice(c7.length);
c7.type=db[0].replace(cT," ")
}for(de in cL.filter){if((db=cG[de].exec(dc))&&(!e[de]||(db=e[de](db)))){dd.push(c7=new b4(db.shift()));
dc=dc.slice(c7.length);
c7.type=de;
c7.matches=db
}}if(!c7){break
}}return df?dc.length:dc?cQ.error(da):cV(da,c8).slice(0)
}function cw(da,c8,c9){var e=c8.dir,db=c9&&c8.dir==="parentNode",c7=cf++;
return c8.first?function(de,dd,dc){while((de=de[e])){if(db||de.nodeType===1){return da(de,dd,dc)
}}}:function(df,de,dd){if(!dd){var dc,dg=cr+" "+c7+" ",dh=dg+cX;
while((df=df[e])){if(db||df.nodeType===1){if((dc=df[cZ])===dh){return df.sizset
}else{if(typeof dc==="string"&&dc.indexOf(dg)===0){if(df.sizset){return df
}}else{df[cZ]=dh;
if(da(df,de,dd)){df.sizset=true;
return df
}df.sizset=false
}}}}}else{while((df=df[e])){if(db||df.nodeType===1){if(da(df,de,dd)){return df
}}}}}
}function ce(e){return e.length>1?function(da,c9,c7){var c8=e.length;
while(c8--){if(!e[c8](da,c9,c7)){return false
}}return true
}:e[0]
}function cv(e,c7,c8,c9,dc){var da,df=[],db=0,dd=e.length,de=c7!=null;
for(;
db<dd;
db++){if((da=e[db])){if(!c8||c8(da,c9,dc)){df.push(da);
if(de){c7.push(db)
}}}}return df
}function c2(c8,c7,da,c9,db,e){if(c9&&!c9[cZ]){c9=c2(c9)
}if(db&&!db[cZ]){db=c2(db,e)
}return c1(function(dm,dj,de,dl){var dp,dk,dg,df=[],dn=[],dd=dj.length,dc=dm||cp(c7||"*",de.nodeType?[de]:de,[]),dh=c8&&(dm||!c7)?cv(dc,df,c8,de,dl):dc,di=da?db||(dm?c8:dd||c9)?[]:dj:dh;
if(da){da(dh,di,de,dl)
}if(c9){dp=cv(di,dn);
c9(dp,[],de,dl);
dk=dp.length;
while(dk--){if((dg=dp[dk])){di[dn[dk]]=!(dh[dn[dk]]=dg)
}}}if(dm){if(db||c8){if(db){dp=[];
dk=di.length;
while(dk--){if((dg=di[dk])){dp.push((dh[dk]=dg))
}}db(null,(di=[]),dp,dl)
}dk=di.length;
while(dk--){if((dg=di[dk])&&(dp=db?co.call(dm,dg):df[dk])>-1){dm[dp]=!(dj[dp]=dg)
}}}}else{di=cv(di===dj?di.splice(dd,di.length):di);
if(db){db(null,dj,di,dl)
}else{cW.apply(dj,di)
}}})
}function cx(dc){var c7,da,c8,db=dc.length,df=cL.relative[dc[0].type],dg=df||cL.relative[" "],c9=df?1:0,dd=cw(function(dh){return dh===c7
},dg,true),de=cw(function(dh){return co.call(c7,dh)>-1
},dg,true),e=[function(dj,di,dh){return(!df&&(dh||di!==cJ))||((c7=di).nodeType?dd(dj,di,dh):de(dj,di,dh))
}];
for(;
c9<db;
c9++){if((da=cL.relative[dc[c9].type])){e=[cw(ce(e),da)]
}else{da=cL.filter[dc[c9].type].apply(null,dc[c9].matches);
if(da[cZ]){c8=++c9;
for(;
c8<db;
c8++){if(cL.relative[dc[c8].type]){break
}}return c2(c9>1&&ce(e),c9>1&&dc.slice(0,c9-1).join("").replace(cT,"$1"),da,c9<c8&&cx(dc.slice(c9,c8)),c8<db&&cx((dc=dc.slice(c8))),c8<db&&dc.join(""))
}e.push(da)
}}return ce(e)
}function b6(c9,c8){var e=c8.length>0,da=c9.length>0,c7=function(dk,de,dj,di,dr){var df,dg,dl,dq=[],dp=0,dh="0",db=dk&&[],dm=dr!=null,dn=cJ,dd=dk||da&&cL.find.TAG("*",dr&&de.parentNode||de),dc=(cr+=dn==null?1:Math.E);
if(dm){cJ=de!==b8&&de;
cX=c7.el
}for(;
(df=dd[dh])!=null;
dh++){if(da&&df){for(dg=0;
(dl=c9[dg]);
dg++){if(dl(df,de,dj)){di.push(df);
break
}}if(dm){cr=dc;
cX=++c7.el
}}if(e){if((df=!dl&&df)){dp--
}if(dk){db.push(df)
}}}dp+=dh;
if(e&&dh!==dp){for(dg=0;
(dl=c8[dg]);
dg++){dl(db,dq,de,dj)
}if(dk){if(dp>0){while(dh--){if(!(db[dh]||dq[dh])){dq[dh]=cE.call(di)
}}}dq=cv(dq)
}cW.apply(di,dq);
if(dm&&!dk&&dq.length>0&&(dp+c8.length)>1){cQ.uniqueSort(di)
}}if(dm){cr=dc;
cJ=dn
}return db
};
c7.el=0;
return e?c1(c7):c7
}cd=cQ.compile=function(e,db){var c8,c7=[],da=[],c9=cn[cZ][e+" "];
if(!c9){if(!db){db=b1(e)
}c8=db.length;
while(c8--){c9=cx(db[c8]);
if(c9[cZ]){c7.push(c9)
}else{da.push(c9)
}}c9=cn(e,b6(da,c7))
}return c9
};
function cp(c7,da,c9){var c8=0,e=da.length;
for(;
c8<e;
c8++){cQ(c7,da[c8],c9)
}return c9
}function cY(c8,e,da,de,dd){var db,dh,c7,dg,df,dc=b1(c8),c9=dc.length;
if(!de){if(dc.length===1){dh=dc[0]=dc[0].slice(0);
if(dh.length>2&&(c7=dh[0]).type==="ID"&&e.nodeType===9&&!dd&&cL.relative[dh[1].type]){e=cL.find.ID(c7.matches[0].replace(ct,""),e,dd)[0];
if(!e){return da
}c8=c8.slice(dh.shift().length)
}for(db=cG.POS.test(c8)?-1:dh.length-1;
db>=0;
db--){c7=dh[db];
if(cL.relative[(dg=c7.type)]){break
}if((df=cL.find[dg])){if((de=df(c7.matches[0].replace(ct,""),cR.test(dh[0].type)&&e.parentNode||e,dd))){dh.splice(db,1);
c8=de.length&&dh.join("");
if(!c8){cW.apply(da,cl.call(de,0));
return da
}break
}}}}}cd(c8,dc)(de,e,dd,da,cR.test(c8));
return da
}if(b8.querySelectorAll){(function(){var db,dc=cY,da=/'|\\/g,c8=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,c7=[":focus"],e=[":active"],c9=cb.matchesSelector||cb.mozMatchesSelector||cb.webkitMatchesSelector||cb.oMatchesSelector||cb.msMatchesSelector;
cK(function(dd){dd.innerHTML="<select><option selected=''></option></select>";
if(!dd.querySelectorAll("[selected]").length){c7.push("\\["+cy+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")
}if(!dd.querySelectorAll(":checked").length){c7.push(":checked")
}});
cK(function(dd){dd.innerHTML="<p test=''></p>";
if(dd.querySelectorAll("[test^='']").length){c7.push("[*^$]="+cy+"*(?:\"\"|'')")
}dd.innerHTML="<input type='hidden'/>";
if(!dd.querySelectorAll(":enabled").length){c7.push(":enabled",":disabled")
}});
c7=new RegExp(c7.join("|"));
cY=function(dj,de,dl,dp,dn){if(!dp&&!dn&&!c7.test(dj)){var dh,dm,dg=true,dd=cZ,df=de,dk=de.nodeType===9&&dj;
if(de.nodeType===1&&de.nodeName.toLowerCase()!=="object"){dh=b1(dj);
if((dg=de.getAttribute("id"))){dd=dg.replace(da,"\\$&")
}else{de.setAttribute("id",dd)
}dd="[id='"+dd+"'] ";
dm=dh.length;
while(dm--){dh[dm]=dd+dh[dm].join("")
}df=cR.test(dj)&&de.parentNode||de;
dk=dh.join(",")
}if(dk){try{cW.apply(dl,cl.call(df.querySelectorAll(dk),0));
return dl
}catch(di){}finally{if(!dg){de.removeAttribute("id")
}}}}return dc(dj,de,dl,dp,dn)
};
if(c9){cK(function(de){db=c9.call(de,"div");
try{c9.call(de,"[test!='']:sizzle");
e.push("!=",c6)
}catch(dd){}});
e=new RegExp(e.join("|"));
cQ.matchesSelector=function(de,dg){dg=dg.replace(c8,"='$1']");
if(!cm(de)&&!e.test(dg)&&!c7.test(dg)){try{var dd=c9.call(de,dg);
if(dd||db||de.document&&de.document.nodeType!==11){return dd
}}catch(df){}}return cQ(dg,null,null,[de]).length>0
}
}})()
}cL.pseudos.nth=cL.pseudos.eq;
function cj(){}cL.filters=cj.prototype=cL.pseudos;
cL.setFilters=new cj();
cQ.attr=bG.attr;
bG.find=cQ;
bG.expr=cQ.selectors;
bG.expr[":"]=bG.expr.pseudos;
bG.unique=cQ.uniqueSort;
bG.text=cQ.getText;
bG.isXMLDoc=cQ.isXML;
bG.contains=cQ.contains
})(a2);
var ag=/Until$/,bq=/^(?:parents|prev(?:Until|All))/,al=/^.[^:#\[\.,]*$/,y=bG.expr.match.needsContext,bu={children:true,contents:true,next:true,prev:true};
bG.fn.extend({find:function(e){var b2,bZ,b4,b5,b3,b1,b0=this;
if(typeof e!=="string"){return bG(e).filter(function(){for(b2=0,bZ=b0.length;
b2<bZ;
b2++){if(bG.contains(b0[b2],this)){return true
}}})
}b1=this.pushStack("","find",e);
for(b2=0,bZ=this.length;
b2<bZ;
b2++){b4=b1.length;
bG.find(e,this[b2],b1);
if(b2>0){for(b5=b4;
b5<b1.length;
b5++){for(b3=0;
b3<b4;
b3++){if(b1[b3]===b1[b5]){b1.splice(b5--,1);
break
}}}}}return b1
},has:function(b1){var b0,bZ=bG(b1,this),e=bZ.length;
return this.filter(function(){for(b0=0;
b0<e;
b0++){if(bG.contains(this,bZ[b0])){return true
}}})
},not:function(e){return this.pushStack(aM(this,e,false),"not",e)
},filter:function(e){return this.pushStack(aM(this,e,true),"filter",e)
},is:function(e){return !!e&&(typeof e==="string"?y.test(e)?bG(e,this.context).index(this[0])>=0:bG.filter(e,this).length>0:this.filter(e).length>0)
},closest:function(b2,b1){var b3,b0=0,e=this.length,bZ=[],b4=y.test(b2)||typeof b2!=="string"?bG(b2,b1||this.context):0;
for(;
b0<e;
b0++){b3=this[b0];
while(b3&&b3.ownerDocument&&b3!==b1&&b3.nodeType!==11){if(b4?b4.index(b3)>-1:bG.find.matchesSelector(b3,b2)){bZ.push(b3);
break
}b3=b3.parentNode
}}bZ=bZ.length>1?bG.unique(bZ):bZ;
return this.pushStack(bZ,"closest",b2)
},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1
}if(typeof e==="string"){return bG.inArray(this[0],bG(e))
}return bG.inArray(e.jquery?e[0]:e,this)
},add:function(e,bZ){var b1=typeof e==="string"?bG(e,bZ):bG.makeArray(e&&e.nodeType?[e]:e),b0=bG.merge(this.get(),b1);
return this.pushStack(aR(b1[0])||aR(b0[0])?b0:bG.unique(b0))
},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))
}});
bG.fn.andSelf=bG.fn.addBack;
function aR(e){return !e||!e.parentNode||e.parentNode.nodeType===11
}function aY(bZ,e){do{bZ=bZ[e]
}while(bZ&&bZ.nodeType!==1);
return bZ
}bG.each({parent:function(bZ){var e=bZ.parentNode;
return e&&e.nodeType!==11?e:null
},parents:function(e){return bG.dir(e,"parentNode")
},parentsUntil:function(bZ,e,b0){return bG.dir(bZ,"parentNode",b0)
},next:function(e){return aY(e,"nextSibling")
},prev:function(e){return aY(e,"previousSibling")
},nextAll:function(e){return bG.dir(e,"nextSibling")
},prevAll:function(e){return bG.dir(e,"previousSibling")
},nextUntil:function(bZ,e,b0){return bG.dir(bZ,"nextSibling",b0)
},prevUntil:function(bZ,e,b0){return bG.dir(bZ,"previousSibling",b0)
},siblings:function(e){return bG.sibling((e.parentNode||{}).firstChild,e)
},children:function(e){return bG.sibling(e.firstChild)
},contents:function(e){return bG.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:bG.merge([],e.childNodes)
}},function(e,bZ){bG.fn[e]=function(b2,b0){var b1=bG.map(this,bZ,b2);
if(!ag.test(e)){b0=b2
}if(b0&&typeof b0==="string"){b1=bG.filter(b0,b1)
}b1=this.length>1&&!bu[e]?bG.unique(b1):b1;
if(this.length>1&&bq.test(e)){b1=b1.reverse()
}return this.pushStack(b1,e,a4.call(arguments).join(","))
}
});
bG.extend({filter:function(b0,e,bZ){if(bZ){b0=":not("+b0+")"
}return e.length===1?bG.find.matchesSelector(e[0],b0)?[e[0]]:[]:bG.find.matches(b0,e)
},dir:function(b0,bZ,b2){var e=[],b1=b0[bZ];
while(b1&&b1.nodeType!==9&&(b2===aB||b1.nodeType!==1||!bG(b1).is(b2))){if(b1.nodeType===1){e.push(b1)
}b1=b1[bZ]
}return e
},sibling:function(b0,bZ){var e=[];
for(;
b0;
b0=b0.nextSibling){if(b0.nodeType===1&&b0!==bZ){e.push(b0)
}}return e
}});
function aM(b1,b0,e){b0=b0||0;
if(bG.isFunction(b0)){return bG.grep(b1,function(b3,b2){var b4=!!b0.call(b3,b2,b3);
return b4===e
})
}else{if(b0.nodeType){return bG.grep(b1,function(b3,b2){return(b3===b0)===e
})
}else{if(typeof b0==="string"){var bZ=bG.grep(b1,function(b2){return b2.nodeType===1
});
if(al.test(b0)){return bG.filter(b0,bZ,!e)
}else{b0=bG.filter(b0,bZ)
}}}}return bG.grep(b1,function(b3,b2){return(bG.inArray(b3,b0)>=0)===e
})
}function A(e){var b0=c.split("|"),bZ=e.createDocumentFragment();
if(bZ.createElement){while(b0.length){bZ.createElement(b0.pop())
}}return bZ
}var c="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",av=/ jQuery\d+="(?:null|\d+)"/g,bY=/^\s+/,ay=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,p=/<([\w:]+)/,bT=/<tbody/i,J=/<|&#?\w+;/,aj=/<(?:script|style|link)/i,ap=/<(?:script|object|embed|option|style)/i,K=new RegExp("<(?:"+c+")[\\s/>]","i"),aE=/^(?:checkbox|radio)$/,bR=/checked\s*(?:[^=]|=\s*.checked.)/i,bw=/\/(java|ecma)script/i,aH=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,T={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},aQ=A(o),l=aQ.appendChild(o.createElement("div"));
T.optgroup=T.option;
T.tbody=T.tfoot=T.colgroup=T.caption=T.thead;
T.th=T.td;
if(!bG.support.htmlSerialize){T._default=[1,"X<div>","</div>"]
}bG.fn.extend({text:function(e){return bG.access(this,function(bZ){return bZ===aB?bG.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(bZ))
},null,e,arguments.length)
},wrapAll:function(e){if(bG.isFunction(e)){return this.each(function(b0){bG(this).wrapAll(e.call(this,b0))
})
}if(this[0]){var bZ=bG(e,this[0].ownerDocument).eq(0).clone(true);
if(this[0].parentNode){bZ.insertBefore(this[0])
}bZ.map(function(){var b0=this;
while(b0.firstChild&&b0.firstChild.nodeType===1){b0=b0.firstChild
}return b0
}).append(this)
}return this
},wrapInner:function(e){if(bG.isFunction(e)){return this.each(function(bZ){bG(this).wrapInner(e.call(this,bZ))
})
}return this.each(function(){var bZ=bG(this),b0=bZ.contents();
if(b0.length){b0.wrapAll(e)
}else{bZ.append(e)
}})
},wrap:function(e){var bZ=bG.isFunction(e);
return this.each(function(b0){bG(this).wrapAll(bZ?e.call(this,b0):e)
})
},unwrap:function(){return this.parent().each(function(){if(!bG.nodeName(this,"body")){bG(this).replaceWith(this.childNodes)
}}).end()
},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11){this.appendChild(e)
}})
},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11){this.insertBefore(e,this.firstChild)
}})
},before:function(){if(!aR(this[0])){return this.domManip(arguments,false,function(bZ){this.parentNode.insertBefore(bZ,this)
})
}if(arguments.length){var e=bG.clean(arguments);
return this.pushStack(bG.merge(e,this),"before",this.selector)
}},after:function(){if(!aR(this[0])){return this.domManip(arguments,false,function(bZ){this.parentNode.insertBefore(bZ,this.nextSibling)
})
}if(arguments.length){var e=bG.clean(arguments);
return this.pushStack(bG.merge(this,e),"after",this.selector)
}},remove:function(e,b1){var b0,bZ=0;
for(;
(b0=this[bZ])!=null;
bZ++){if(!e||bG.filter(e,[b0]).length){if(!b1&&b0.nodeType===1){bG.cleanData(b0.getElementsByTagName("*"));
bG.cleanData([b0])
}if(b0.parentNode){b0.parentNode.removeChild(b0)
}}}return this
},empty:function(){var bZ,e=0;
for(;
(bZ=this[e])!=null;
e++){if(bZ.nodeType===1){bG.cleanData(bZ.getElementsByTagName("*"))
}while(bZ.firstChild){bZ.removeChild(bZ.firstChild)
}}return this
},clone:function(bZ,e){bZ=bZ==null?false:bZ;
e=e==null?bZ:e;
return this.map(function(){return bG.clone(this,bZ,e)
})
},html:function(e){return bG.access(this,function(b2){var b1=this[0]||{},b0=0,bZ=this.length;
if(b2===aB){return b1.nodeType===1?b1.innerHTML.replace(av,""):aB
}if(typeof b2==="string"&&!aj.test(b2)&&(bG.support.htmlSerialize||!K.test(b2))&&(bG.support.leadingWhitespace||!bY.test(b2))&&!T[(p.exec(b2)||["",""])[1].toLowerCase()]){b2=b2.replace(ay,"<$1></$2>");
try{for(;
b0<bZ;
b0++){b1=this[b0]||{};
if(b1.nodeType===1){bG.cleanData(b1.getElementsByTagName("*"));
b1.innerHTML=b2
}}b1=0
}catch(b3){}}if(b1){this.empty().append(b2)
}},null,e,arguments.length)
},replaceWith:function(e){if(!aR(this[0])){if(bG.isFunction(e)){return this.each(function(b1){var b0=bG(this),bZ=b0.html();
b0.replaceWith(e.call(this,b1,bZ))
})
}if(typeof e!=="string"){e=bG(e).detach()
}return this.each(function(){var b0=this.nextSibling,bZ=this.parentNode;
bG(this).remove();
if(b0){bG(b0).before(e)
}else{bG(bZ).append(e)
}})
}return this.length?this.pushStack(bG(bG.isFunction(e)?e():e),"replaceWith",e):this
},detach:function(e){return this.remove(e,true)
},domManip:function(b4,b8,b7){b4=[].concat.apply([],b4);
var b0,b2,b3,b6,b1=0,b5=b4[0],bZ=[],e=this.length;
if(!bG.support.checkClone&&e>1&&typeof b5==="string"&&bR.test(b5)){return this.each(function(){bG(this).domManip(b4,b8,b7)
})
}if(bG.isFunction(b5)){return this.each(function(ca){var b9=bG(this);
b4[0]=b5.call(this,ca,b8?b9.html():aB);
b9.domManip(b4,b8,b7)
})
}if(this[0]){b0=bG.buildFragment(b4,this,bZ);
b3=b0.fragment;
b2=b3.firstChild;
if(b3.childNodes.length===1){b3=b2
}if(b2){b8=b8&&bG.nodeName(b2,"tr");
for(b6=b0.cacheable||e-1;
b1<e;
b1++){b7.call(b8&&bG.nodeName(this[b1],"table")?x(this[b1],"tbody"):this[b1],b1===b6?b3:bG.clone(b3,true,true))
}}b3=b2=null;
if(bZ.length){bG.each(bZ,function(b9,ca){if(ca.src){if(bG.ajax){bG.ajax({url:ca.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})
}else{bG.error("no ajax")
}}else{bG.globalEval((ca.text||ca.textContent||ca.innerHTML||"").replace(aH,""))
}if(ca.parentNode){ca.parentNode.removeChild(ca)
}})
}}return this
}});
function x(bZ,e){return bZ.getElementsByTagName(e)[0]||bZ.appendChild(bZ.ownerDocument.createElement(e))
}function ao(b5,bZ){if(bZ.nodeType!==1||!bG.hasData(b5)){return
}var b2,b1,e,b4=bG._data(b5),b3=bG._data(bZ,b4),b0=b4.events;
if(b0){delete b3.handle;
b3.events={};
for(b2 in b0){for(b1=0,e=b0[b2].length;
b1<e;
b1++){bG.event.add(bZ,b2,b0[b2][b1])
}}}if(b3.data){b3.data=bG.extend({},b3.data)
}}function F(bZ,e){var b0;
if(e.nodeType!==1){return
}if(e.clearAttributes){e.clearAttributes()
}if(e.mergeAttributes){e.mergeAttributes(bZ)
}b0=e.nodeName.toLowerCase();
if(b0==="object"){if(e.parentNode){e.outerHTML=bZ.outerHTML
}if(bG.support.html5Clone&&(bZ.innerHTML&&!bG.trim(e.innerHTML))){e.innerHTML=bZ.innerHTML
}}else{if(b0==="input"&&aE.test(bZ.type)){e.defaultChecked=e.checked=bZ.checked;
if(e.value!==bZ.value){e.value=bZ.value
}}else{if(b0==="option"){e.selected=bZ.defaultSelected
}else{if(b0==="input"||b0==="textarea"){e.defaultValue=bZ.defaultValue
}else{if(b0==="script"&&e.text!==bZ.text){e.text=bZ.text
}}}}}e.removeAttribute(bG.expando)
}bG.buildFragment=function(b1,b2,bZ){var b0,e,b3,b4=b1[0];
b2=b2||o;
b2=!b2.nodeType&&b2[0]||b2;
b2=b2.ownerDocument||b2;
if(b1.length===1&&typeof b4==="string"&&b4.length<512&&b2===o&&b4.charAt(0)==="<"&&!ap.test(b4)&&(bG.support.checkClone||!bR.test(b4))&&(bG.support.html5Clone||!K.test(b4))){e=true;
b0=bG.fragments[b4];
b3=b0!==aB
}if(!b0){b0=b2.createDocumentFragment();
bG.clean(b1,b2,b0,bZ);
if(e){bG.fragments[b4]=b3&&b0
}}return{fragment:b0,cacheable:e}
};
bG.fragments={};
bG.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,bZ){bG.fn[e]=function(b0){var b2,b4=0,b3=[],b6=bG(b0),b1=b6.length,b5=this.length===1&&this[0].parentNode;
if((b5==null||b5&&b5.nodeType===11&&b5.childNodes.length===1)&&b1===1){b6[bZ](this[0]);
return this
}else{for(;
b4<b1;
b4++){b2=(b4>0?this.clone(true):this).get();
bG(b6[b4])[bZ](b2);
b3=b3.concat(b2)
}return this.pushStack(b3,e,b6.selector)
}}
});
function m(e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName("*")
}else{if(typeof e.querySelectorAll!=="undefined"){return e.querySelectorAll("*")
}else{return[]
}}}function bS(e){if(aE.test(e.type)){e.defaultChecked=e.checked
}}bG.extend({clone:function(b2,b4,b0){var e,bZ,b1,b3;
if(bG.support.html5Clone||bG.isXMLDoc(b2)||!K.test("<"+b2.nodeName+">")){b3=b2.cloneNode(true)
}else{l.innerHTML=b2.outerHTML;
l.removeChild(b3=l.firstChild)
}if((!bG.support.noCloneEvent||!bG.support.noCloneChecked)&&(b2.nodeType===1||b2.nodeType===11)&&!bG.isXMLDoc(b2)){F(b2,b3);
e=m(b2);
bZ=m(b3);
for(b1=0;
e[b1];
++b1){if(bZ[b1]){F(e[b1],bZ[b1])
}}}if(b4){ao(b2,b3);
if(b0){e=m(b2);
bZ=m(b3);
for(b1=0;
e[b1];
++b1){ao(e[b1],bZ[b1])
}}}e=bZ=null;
return b3
},clean:function(cb,b0,e,b1){var b8,b7,ca,cf,b4,ce,b5,b2,bZ,b9,cd,b6,b3=b0===o&&aQ,cc=[];
if(!b0||typeof b0.createDocumentFragment==="undefined"){b0=o
}for(b8=0;
(ca=cb[b8])!=null;
b8++){if(typeof ca==="number"){ca+=""
}if(!ca){continue
}if(typeof ca==="string"){if(!J.test(ca)){ca=b0.createTextNode(ca)
}else{b3=b3||A(b0);
b5=b0.createElement("div");
b3.appendChild(b5);
ca=ca.replace(ay,"<$1></$2>");
cf=(p.exec(ca)||["",""])[1].toLowerCase();
b4=T[cf]||T._default;
ce=b4[0];
b5.innerHTML=b4[1]+ca+b4[2];
while(ce--){b5=b5.lastChild
}if(!bG.support.tbody){b2=bT.test(ca);
bZ=cf==="table"&&!b2?b5.firstChild&&b5.firstChild.childNodes:b4[1]==="<table>"&&!b2?b5.childNodes:[];
for(b7=bZ.length-1;
b7>=0;
--b7){if(bG.nodeName(bZ[b7],"tbody")&&!bZ[b7].childNodes.length){bZ[b7].parentNode.removeChild(bZ[b7])
}}}if(!bG.support.leadingWhitespace&&bY.test(ca)){b5.insertBefore(b0.createTextNode(bY.exec(ca)[0]),b5.firstChild)
}ca=b5.childNodes;
b5.parentNode.removeChild(b5)
}}if(ca.nodeType){cc.push(ca)
}else{bG.merge(cc,ca)
}}if(b5){ca=b5=b3=null
}if(!bG.support.appendChecked){for(b8=0;
(ca=cc[b8])!=null;
b8++){if(bG.nodeName(ca,"input")){bS(ca)
}else{if(typeof ca.getElementsByTagName!=="undefined"){bG.grep(ca.getElementsByTagName("input"),bS)
}}}}if(e){cd=function(cg){if(!cg.type||bw.test(cg.type)){return b1?b1.push(cg.parentNode?cg.parentNode.removeChild(cg):cg):e.appendChild(cg)
}};
for(b8=0;
(ca=cc[b8])!=null;
b8++){if(!(bG.nodeName(ca,"script")&&cd(ca))){e.appendChild(ca);
if(typeof ca.getElementsByTagName!=="undefined"){b6=bG.grep(bG.merge([],ca.getElementsByTagName("script")),cd);
cc.splice.apply(cc,[b8+1,0].concat(b6));
b8+=b6.length
}}}}return cc
},cleanData:function(bZ,b7){var b2,b0,b1,b6,b3=0,b8=bG.expando,e=bG.cache,b4=bG.support.deleteExpando,b5=bG.event.special;
for(;
(b1=bZ[b3])!=null;
b3++){if(b7||bG.acceptData(b1)){b0=b1[b8];
b2=b0&&e[b0];
if(b2){if(b2.events){for(b6 in b2.events){if(b5[b6]){bG.event.remove(b1,b6)
}else{bG.removeEvent(b1,b6,b2.handle)
}}}if(e[b0]){delete e[b0];
if(b4){delete b1[b8]
}else{if(b1.removeAttribute){b1.removeAttribute(b8)
}else{b1[b8]=null
}}bG.deletedIds.push(b0)
}}}}}});
(function(){var e,bZ;
bG.uaMatch=function(b1){b1=b1.toLowerCase();
var b0=/(chrome)[ \/]([\w.]+)/.exec(b1)||/(webkit)[ \/]([\w.]+)/.exec(b1)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b1)||/(msie) ([\w.]+)/.exec(b1)||b1.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b1)||[];
return{browser:b0[1]||"",version:b0[2]||"0"}
};
e=bG.uaMatch(d.userAgent);
bZ={};
if(e.browser){bZ[e.browser]=true;
bZ.version=e.version
}if(bZ.chrome){bZ.webkit=true
}else{if(bZ.webkit){bZ.safari=true
}}bG.browser=bZ;
bG.sub=function(){function b0(b3,b4){return new b0.fn.init(b3,b4)
}bG.extend(true,b0,this);
b0.superclass=this;
b0.fn=b0.prototype=this();
b0.fn.constructor=b0;
b0.sub=this.sub;
b0.fn.init=function b2(b3,b4){if(b4&&b4 instanceof bG&&!(b4 instanceof b0)){b4=b0(b4)
}return bG.fn.init.call(this,b3,b4,b1)
};
b0.fn.init.prototype=b0.fn;
var b1=b0(o);
return b0
}
})();
var E,az,aW,be=/alpha\([^)]*\)/i,aS=/opacity=([^)]*)/,bk=/^(top|right|bottom|left)$/,G=/^(none|table(?!-c[ea]).+)/,aZ=/^margin/,a8=new RegExp("^("+bx+")(.*)$","i"),W=new RegExp("^("+bx+")(?!px)[a-z%]+$","i"),S=new RegExp("^([-+])=("+bx+")","i"),bh={BODY:"block"},a9={position:"absolute",visibility:"hidden",display:"block"},bA={letterSpacing:0,fontWeight:400},bQ=["Top","Right","Bottom","Left"],ar=["Webkit","O","Moz","ms"],aJ=bG.fn.toggle;
function b(b1,bZ){if(bZ in b1){return bZ
}var b2=bZ.charAt(0).toUpperCase()+bZ.slice(1),e=bZ,b0=ar.length;
while(b0--){bZ=ar[b0]+b2;
if(bZ in b1){return bZ
}}return e
}function Q(bZ,e){bZ=e||bZ;
return bG.css(bZ,"display")==="none"||!bG.contains(bZ.ownerDocument,bZ)
}function s(b3,e){var b2,b4,bZ=[],b0=0,b1=b3.length;
for(;
b0<b1;
b0++){b2=b3[b0];
if(!b2.style){continue
}bZ[b0]=bG._data(b2,"olddisplay");
if(e){if(!bZ[b0]&&b2.style.display==="none"){b2.style.display=""
}if(b2.style.display===""&&Q(b2)){bZ[b0]=bG._data(b2,"olddisplay",bC(b2.nodeName))
}}else{b4=E(b2,"display");
if(!bZ[b0]&&b4!=="none"){bG._data(b2,"olddisplay",b4)
}}}for(b0=0;
b0<b1;
b0++){b2=b3[b0];
if(!b2.style){continue
}if(!e||b2.style.display==="none"||b2.style.display===""){b2.style.display=e?bZ[b0]||"":"none"
}}return b3
}bG.fn.extend({css:function(e,bZ){return bG.access(this,function(b1,b0,b2){return b2!==aB?bG.style(b1,b0,b2):bG.css(b1,b0)
},e,bZ,arguments.length>1)
},show:function(){return s(this,true)
},hide:function(){return s(this)
},toggle:function(b0,bZ){var e=typeof b0==="boolean";
if(bG.isFunction(b0)&&bG.isFunction(bZ)){return aJ.apply(this,arguments)
}return this.each(function(){if(e?b0:Q(this)){bG(this).show()
}else{bG(this).hide()
}})
}});
bG.extend({cssHooks:{opacity:{get:function(b0,bZ){if(bZ){var e=E(b0,"opacity");
return e===""?"1":e
}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":bG.support.cssFloat?"cssFloat":"styleFloat"},style:function(b1,b0,b7,b2){if(!b1||b1.nodeType===3||b1.nodeType===8||!b1.style){return
}var b5,b6,b8,b3=bG.camelCase(b0),bZ=b1.style;
b0=bG.cssProps[b3]||(bG.cssProps[b3]=b(bZ,b3));
b8=bG.cssHooks[b0]||bG.cssHooks[b3];
if(b7!==aB){b6=typeof b7;
if(b6==="string"&&(b5=S.exec(b7))){b7=(b5[1]+1)*b5[2]+parseFloat(bG.css(b1,b0));
b6="number"
}if(b7==null||b6==="number"&&isNaN(b7)){return
}if(b6==="number"&&!bG.cssNumber[b3]){b7+="px"
}if(!b8||!("set" in b8)||(b7=b8.set(b1,b7,b2))!==aB){try{bZ[b0]=b7
}catch(b4){}}}else{if(b8&&"get" in b8&&(b5=b8.get(b1,false,b2))!==aB){return b5
}return bZ[b0]
}},css:function(b4,b2,b3,bZ){var b5,b1,e,b0=bG.camelCase(b2);
b2=bG.cssProps[b0]||(bG.cssProps[b0]=b(b4.style,b0));
e=bG.cssHooks[b2]||bG.cssHooks[b0];
if(e&&"get" in e){b5=e.get(b4,true,bZ)
}if(b5===aB){b5=E(b4,b2)
}if(b5==="normal"&&b2 in bA){b5=bA[b2]
}if(b3||bZ!==aB){b1=parseFloat(b5);
return b3||bG.isNumeric(b1)?b1||0:b5
}return b5
},swap:function(b2,b1,b3){var b0,bZ,e={};
for(bZ in b1){e[bZ]=b2.style[bZ];
b2.style[bZ]=b1[bZ]
}b0=b3.call(b2);
for(bZ in b1){b2.style[bZ]=e[bZ]
}return b0
}});
if(a2.getComputedStyle){E=function(b5,bZ){var e,b2,b1,b4,b3=a2.getComputedStyle(b5,null),b0=b5.style;
if(b3){e=b3.getPropertyValue(bZ)||b3[bZ];
if(e===""&&!bG.contains(b5.ownerDocument,b5)){e=bG.style(b5,bZ)
}if(W.test(e)&&aZ.test(bZ)){b2=b0.width;
b1=b0.minWidth;
b4=b0.maxWidth;
b0.minWidth=b0.maxWidth=b0.width=e;
e=b3.width;
b0.width=b2;
b0.minWidth=b1;
b0.maxWidth=b4
}}return e
}
}else{if(o.documentElement.currentStyle){E=function(b2,b0){var b3,e,bZ=b2.currentStyle&&b2.currentStyle[b0],b1=b2.style;
if(bZ==null&&b1&&b1[b0]){bZ=b1[b0]
}if(W.test(bZ)&&!bk.test(b0)){b3=b1.left;
e=b2.runtimeStyle&&b2.runtimeStyle.left;
if(e){b2.runtimeStyle.left=b2.currentStyle.left
}b1.left=b0==="fontSize"?"1em":bZ;
bZ=b1.pixelLeft+"px";
b1.left=b3;
if(e){b2.runtimeStyle.left=e
}}return bZ===""?"auto":bZ
}
}}function aG(e,b0,b1){var bZ=a8.exec(b0);
return bZ?Math.max(0,bZ[1]-(b1||0))+(bZ[2]||"px"):b0
}function at(b1,bZ,e,b3){var b0=e===(b3?"border":"content")?4:bZ==="width"?1:0,b2=0;
for(;
b0<4;
b0+=2){if(e==="margin"){b2+=bG.css(b1,e+bQ[b0],true)
}if(b3){if(e==="content"){b2-=parseFloat(E(b1,"padding"+bQ[b0]))||0
}if(e!=="margin"){b2-=parseFloat(E(b1,"border"+bQ[b0]+"Width"))||0
}}else{b2+=parseFloat(E(b1,"padding"+bQ[b0]))||0;
if(e!=="padding"){b2+=parseFloat(E(b1,"border"+bQ[b0]+"Width"))||0
}}}return b2
}function u(b1,bZ,e){var b2=bZ==="width"?b1.offsetWidth:b1.offsetHeight,b0=true,b3=bG.support.boxSizing&&bG.css(b1,"boxSizing")==="border-box";
if(b2<=0||b2==null){b2=E(b1,bZ);
if(b2<0||b2==null){b2=b1.style[bZ]
}if(W.test(b2)){return b2
}b0=b3&&(bG.support.boxSizingReliable||b2===b1.style[bZ]);
b2=parseFloat(b2)||0
}return(b2+at(b1,bZ,e||(b3?"border":"content"),b0))+"px"
}function bC(b0){if(bh[b0]){return bh[b0]
}var e=bG("<"+b0+">").appendTo(o.body),bZ=e.css("display");
e.remove();
if(bZ==="none"||bZ===""){az=o.body.appendChild(az||bG.extend(o.createElement("iframe"),{frameBorder:0,width:0,height:0}));
if(!aW||!az.createElement){aW=(az.contentWindow||az.contentDocument).document;
aW.write("<!doctype html><html><body>");
aW.close()
}e=aW.body.appendChild(aW.createElement(b0));
bZ=E(e,"display");
o.body.removeChild(az)
}bh[b0]=bZ;
return bZ
}bG.each(["height","width"],function(bZ,e){bG.cssHooks[e]={get:function(b2,b1,b0){if(b1){if(b2.offsetWidth===0&&G.test(E(b2,"display"))){return bG.swap(b2,a9,function(){return u(b2,e,b0)
})
}else{return u(b2,e,b0)
}}},set:function(b1,b2,b0){return aG(b1,b2,b0?at(b1,e,b0,bG.support.boxSizing&&bG.css(b1,"boxSizing")==="border-box"):0)
}}
});
if(!bG.support.opacity){bG.cssHooks.opacity={get:function(bZ,e){return aS.test((e&&bZ.currentStyle?bZ.currentStyle.filter:bZ.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":e?"1":""
},set:function(b2,b3){var b1=b2.style,bZ=b2.currentStyle,e=bG.isNumeric(b3)?"alpha(opacity="+b3*100+")":"",b0=bZ&&bZ.filter||b1.filter||"";
b1.zoom=1;
if(b3>=1&&bG.trim(b0.replace(be,""))===""&&b1.removeAttribute){b1.removeAttribute("filter");
if(bZ&&!bZ.filter){return
}}b1.filter=be.test(b0)?b0.replace(be,e):b0+" "+e
}}
}bG(function(){if(!bG.support.reliableMarginRight){bG.cssHooks.marginRight={get:function(bZ,e){return bG.swap(bZ,{display:"inline-block"},function(){if(e){return E(bZ,"marginRight")
}})
}}
}if(!bG.support.pixelPosition&&bG.fn.position){bG.each(["top","left"],function(e,bZ){bG.cssHooks[bZ]={get:function(b2,b1){if(b1){var b0=E(b2,bZ);
return W.test(b0)?bG(b2).position()[bZ]+"px":b0
}}}
})
}});
if(bG.expr&&bG.expr.filters){bG.expr.filters.hidden=function(e){return(e.offsetWidth===0&&e.offsetHeight===0)||(!bG.support.reliableHiddenOffsets&&((e.style&&e.style.display)||E(e,"display"))==="none")
};
bG.expr.filters.visible=function(e){return !bG.expr.filters.hidden(e)
}
}bG.each({margin:"",padding:"",border:"Width"},function(e,bZ){bG.cssHooks[e+bZ]={expand:function(b2){var b1,b3=typeof b2==="string"?b2.split(" "):[b2],b0={};
for(b1=0;
b1<4;
b1++){b0[e+bQ[b1]+bZ]=b3[b1]||b3[b1-2]||b3[0]
}return b0
}};
if(!aZ.test(e)){bG.cssHooks[e+bZ].set=aG
}});
var bs=/%20/g,aP=/\[\]$/,U=/\r?\n/g,bz=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aD=/^(?:select|textarea)/i;
bG.fn.extend({serialize:function(){return bG.param(this.serializeArray())
},serializeArray:function(){return this.map(function(){return this.elements?bG.makeArray(this.elements):this
}).filter(function(){return this.name&&!this.disabled&&(this.checked||aD.test(this.nodeName)||bz.test(this.type))
}).map(function(e,bZ){var b0=bG(this).val();
return b0==null?null:bG.isArray(b0)?bG.map(b0,function(b2,b1){return{name:bZ.name,value:b2.replace(U,"\r\n")}
}):{name:bZ.name,value:b0.replace(U,"\r\n")}
}).get()
}});
bG.param=function(e,b0){var b1,bZ=[],b2=function(b3,b4){b4=bG.isFunction(b4)?b4():(b4==null?"":b4);
bZ[bZ.length]=encodeURIComponent(b3)+"="+encodeURIComponent(b4)
};
if(b0===aB){b0=bG.ajaxSettings&&bG.ajaxSettings.traditional
}if(bG.isArray(e)||(e.jquery&&!bG.isPlainObject(e))){bG.each(e,function(){b2(this.name,this.value)
})
}else{for(b1 in e){k(b1,e[b1],b0,b2)
}}return bZ.join("&").replace(bs,"+")
};
function k(b0,b2,bZ,b1){var e;
if(bG.isArray(b2)){bG.each(b2,function(b4,b3){if(bZ||aP.test(b0)){b1(b0,b3)
}else{k(b0+"["+(typeof b3==="object"?b4:"")+"]",b3,bZ,b1)
}})
}else{if(!bZ&&bG.type(b2)==="object"){for(e in b2){k(b0+"["+e+"]",b2[e],bZ,b1)
}}else{b1(b0,b2)
}}}var bX,Y,an=/#.*$/,ad=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,B=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,r=/^(?:GET|HEAD)$/,aC=/^\/\//,bN=/\?/,g=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,P=/([?&])_=[^&]*/,aT=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,bW=bG.fn.load,v={},a6={},aX=["*/"]+["*"];
try{Y=aI.href
}catch(bd){Y=o.createElement("a");
Y.href="";
Y=Y.href
}bX=aT.exec(Y.toLowerCase())||[];
function bI(e){return function(b2,b4){if(typeof b2!=="string"){b4=b2;
b2="*"
}var bZ,b5,b6,b1=b2.toLowerCase().split(aV),b0=0,b3=b1.length;
if(bG.isFunction(b4)){for(;
b0<b3;
b0++){bZ=b1[b0];
b6=/^\+/.test(bZ);
if(b6){bZ=bZ.substr(1)||"*"
}b5=e[bZ]=e[bZ]||[];
b5[b6?"unshift":"push"](b4)
}}}
}function q(bZ,b8,b3,b6,b5,b1){b5=b5||b8.dataTypes[0];
b1=b1||{};
b1[b5]=true;
var b7,b4=bZ[b5],b0=0,e=b4?b4.length:0,b2=(bZ===v);
for(;
b0<e&&(b2||!b7);
b0++){b7=b4[b0](b8,b3,b6);
if(typeof b7==="string"){if(!b2||b1[b7]){b7=aB
}else{b8.dataTypes.unshift(b7);
b7=q(bZ,b8,b3,b6,b7,b1)
}}}if((b2||!b7)&&!b1["*"]){b7=q(bZ,b8,b3,b6,"*",b1)
}return b7
}function t(b0,b1){var bZ,e,b2=bG.ajaxSettings.flatOptions||{};
for(bZ in b1){if(b1[bZ]!==aB){(b2[bZ]?b0:(e||(e={})))[bZ]=b1[bZ]
}}if(e){bG.extend(true,b0,e)
}}bG.fn.load=function(b1,b4,b5){if(typeof b1!=="string"&&bW){return bW.apply(this,arguments)
}if(!this.length){return this
}var e,b2,b0,bZ=this,b3=b1.indexOf(" ");
if(b3>=0){e=b1.slice(b3,b1.length);
b1=b1.slice(0,b3)
}if(bG.isFunction(b4)){b5=b4;
b4=aB
}else{if(b4&&typeof b4==="object"){b2="POST"
}}bG.ajax({url:b1,type:b2,dataType:"html",data:b4,complete:function(b7,b6){if(b5){bZ.each(b5,b0||[b7.responseText,b6,b7])
}}}).done(function(b6){b0=arguments;
bZ.html(e?bG("<div>").append(b6.replace(g,"")).find(e):b6)
});
return this
};
bG.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,bZ){bG.fn[bZ]=function(b0){return this.on(bZ,b0)
}
});
bG.each(["get","post"],function(e,bZ){bG[bZ]=function(b0,b2,b3,b1){if(bG.isFunction(b2)){b1=b1||b3;
b3=b2;
b2=aB
}return bG.ajax({type:bZ,url:b0,data:b2,success:b3,dataType:b1})
}
});
bG.extend({getScript:function(e,bZ){return bG.get(e,aB,bZ,"script")
},getJSON:function(e,bZ,b0){return bG.get(e,bZ,b0,"json")
},ajaxSetup:function(bZ,e){if(e){t(bZ,bG.ajaxSettings)
}else{e=bZ;
bZ=bG.ajaxSettings
}t(bZ,e);
return bZ
},ajaxSettings:{url:Y,isLocal:B.test(bX[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":aX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a2.String,"text html":true,"text json":bG.parseJSON,"text xml":bG.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:bI(v),ajaxTransport:bI(a6),ajax:function(b4,b1){if(typeof b4==="object"){b1=b4;
b4=aB
}b1=b1||{};
var b7,cl,b2,cg,b9,cd,b0,cf,b8=bG.ajaxSetup({},b1),cn=b8.context||b8,cb=cn!==b8&&(cn.nodeType||cn instanceof bG)?bG(cn):bG.event,cm=bG.Deferred(),ci=bG.Callbacks("once memory"),b5=b8.statusCode||{},cc={},cj={},b3=0,b6="canceled",ce={readyState:0,setRequestHeader:function(co,cp){if(!b3){var e=co.toLowerCase();
co=cj[e]=cj[e]||co;
cc[co]=cp
}return this
},getAllResponseHeaders:function(){return b3===2?cl:null
},getResponseHeader:function(co){var e;
if(b3===2){if(!b2){b2={};
while((e=ad.exec(cl))){b2[e[1].toLowerCase()]=e[2]
}}e=b2[co.toLowerCase()]
}return e===aB?null:e
},overrideMimeType:function(e){if(!b3){b8.mimeType=e
}return this
},abort:function(e){e=e||b6;
if(cg){cg.abort(e)
}ca(0,e);
return this
}};
function ca(cs,co,ct,cq){var e,cw,cu,cr,cv,cp=co;
if(b3===2){return
}b3=2;
if(b9){clearTimeout(b9)
}cg=aB;
cl=cq||"";
ce.readyState=cs>0?4:0;
if(ct){cr=h(b8,ce,ct)
}if(cs>=200&&cs<300||cs===304){if(b8.ifModified){cv=ce.getResponseHeader("Last-Modified");
if(cv){bG.lastModified[b7]=cv
}cv=ce.getResponseHeader("Etag");
if(cv){bG.etag[b7]=cv
}}if(cs===304){cp="notmodified";
e=true
}else{e=ae(b8,cr);
cp=e.state;
cw=e.data;
cu=e.error;
e=!cu
}}else{cu=cp;
if(!cp||cs){cp="error";
if(cs<0){cs=0
}}}ce.status=cs;
ce.statusText=(co||cp)+"";
if(e){cm.resolveWith(cn,[cw,cp,ce])
}else{cm.rejectWith(cn,[ce,cp,cu])
}ce.statusCode(b5);
b5=aB;
if(b0){cb.trigger("ajax"+(e?"Success":"Error"),[ce,b8,e?cw:cu])
}ci.fireWith(cn,[ce,cp]);
if(b0){cb.trigger("ajaxComplete",[ce,b8]);
if(!(--bG.active)){bG.event.trigger("ajaxStop")
}}}cm.promise(ce);
ce.success=ce.done;
ce.error=ce.fail;
ce.complete=ci.add;
ce.statusCode=function(co){if(co){var e;
if(b3<2){for(e in co){b5[e]=[b5[e],co[e]]
}}else{e=co[ce.status];
ce.always(e)
}}return this
};
b8.url=((b4||b8.url)+"").replace(an,"").replace(aC,bX[1]+"//");
b8.dataTypes=bG.trim(b8.dataType||"*").toLowerCase().split(aV);
if(b8.crossDomain==null){cd=aT.exec(b8.url.toLowerCase());
b8.crossDomain=!!(cd&&(cd[1]!==bX[1]||cd[2]!==bX[2]||(cd[3]||(cd[1]==="http:"?80:443))!=(bX[3]||(bX[1]==="http:"?80:443))))
}if(b8.data&&b8.processData&&typeof b8.data!=="string"){b8.data=bG.param(b8.data,b8.traditional)
}q(v,b8,b1,ce);
if(b3===2){return ce
}b0=b8.global;
b8.type=b8.type.toUpperCase();
b8.hasContent=!r.test(b8.type);
if(b0&&bG.active++===0){bG.event.trigger("ajaxStart")
}if(!b8.hasContent){if(b8.data){b8.url+=(bN.test(b8.url)?"&":"?")+b8.data;
delete b8.data
}b7=b8.url;
if(b8.cache===false){var bZ=bG.now(),ck=b8.url.replace(P,"$1_="+bZ);
b8.url=ck+((ck===b8.url)?(bN.test(b8.url)?"&":"?")+"_="+bZ:"")
}}if(b8.data&&b8.hasContent&&b8.contentType!==false||b1.contentType){ce.setRequestHeader("Content-Type",b8.contentType)
}if(b8.ifModified){b7=b7||b8.url;
if(bG.lastModified[b7]){ce.setRequestHeader("If-Modified-Since",bG.lastModified[b7])
}if(bG.etag[b7]){ce.setRequestHeader("If-None-Match",bG.etag[b7])
}}ce.setRequestHeader("Accept",b8.dataTypes[0]&&b8.accepts[b8.dataTypes[0]]?b8.accepts[b8.dataTypes[0]]+(b8.dataTypes[0]!=="*"?", "+aX+"; q=0.01":""):b8.accepts["*"]);
for(cf in b8.headers){ce.setRequestHeader(cf,b8.headers[cf])
}if(b8.beforeSend&&(b8.beforeSend.call(cn,ce,b8)===false||b3===2)){return ce.abort()
}b6="abort";
for(cf in {success:1,error:1,complete:1}){ce[cf](b8[cf])
}cg=q(a6,b8,b1,ce);
if(!cg){ca(-1,"No Transport")
}else{ce.readyState=1;
if(b0){cb.trigger("ajaxSend",[ce,b8])
}if(b8.async&&b8.timeout>0){b9=setTimeout(function(){ce.abort("timeout")
},b8.timeout)
}try{b3=1;
cg.send(cc,ca)
}catch(ch){if(b3<2){ca(-1,ch)
}else{throw ch
}}}return ce
},active:0,lastModified:{},etag:{}});
function h(b7,b6,b3){var b2,b4,b1,e,bZ=b7.contents,b5=b7.dataTypes,b0=b7.responseFields;
for(b4 in b0){if(b4 in b3){b6[b0[b4]]=b3[b4]
}}while(b5[0]==="*"){b5.shift();
if(b2===aB){b2=b7.mimeType||b6.getResponseHeader("content-type")
}}if(b2){for(b4 in bZ){if(bZ[b4]&&bZ[b4].test(b2)){b5.unshift(b4);
break
}}}if(b5[0] in b3){b1=b5[0]
}else{for(b4 in b3){if(!b5[0]||b7.converters[b4+" "+b5[0]]){b1=b4;
break
}if(!e){e=b4
}}b1=b1||e
}if(b1){if(b1!==b5[0]){b5.unshift(b1)
}return b3[b1]
}}function ae(b9,b1){var b7,bZ,b5,b3,b6=b9.dataTypes.slice(),b0=b6[0],b8={},b2=0;
if(b9.dataFilter){b1=b9.dataFilter(b1,b9.dataType)
}if(b6[1]){for(b7 in b9.converters){b8[b7.toLowerCase()]=b9.converters[b7]
}}for(;
(b5=b6[++b2]);
){if(b5!=="*"){if(b0!=="*"&&b0!==b5){b7=b8[b0+" "+b5]||b8["* "+b5];
if(!b7){for(bZ in b8){b3=bZ.split(" ");
if(b3[1]===b5){b7=b8[b0+" "+b3[0]]||b8["* "+b3[0]];
if(b7){if(b7===true){b7=b8[bZ]
}else{if(b8[bZ]!==true){b5=b3[0];
b6.splice(b2--,0,b5)
}}break
}}}}if(b7!==true){if(b7&&b9["throws"]){b1=b7(b1)
}else{try{b1=b7(b1)
}catch(b4){return{state:"parsererror",error:b7?b4:"No conversion from "+b0+" to "+b5}
}}}}b0=b5
}}return{state:"success",data:b1}
}var bp=[],aw=/\?/,a5=/(=)\?(?=&|$)|\?\?/,bl=bG.now();
bG.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=bp.pop()||(bG.expando+"_"+(bl++));
this[e]=true;
return e
}});
bG.ajaxPrefilter("json jsonp",function(b8,b3,b7){var b6,e,b5,b1=b8.data,bZ=b8.url,b0=b8.jsonp!==false,b4=b0&&a5.test(bZ),b2=b0&&!b4&&typeof b1==="string"&&!(b8.contentType||"").indexOf("application/x-www-form-urlencoded")&&a5.test(b1);
if(b8.dataTypes[0]==="jsonp"||b4||b2){b6=b8.jsonpCallback=bG.isFunction(b8.jsonpCallback)?b8.jsonpCallback():b8.jsonpCallback;
e=a2[b6];
if(b4){b8.url=bZ.replace(a5,"$1"+b6)
}else{if(b2){b8.data=b1.replace(a5,"$1"+b6)
}else{if(b0){b8.url+=(aw.test(bZ)?"&":"?")+b8.jsonp+"="+b6
}}}b8.converters["script json"]=function(){if(!b5){bG.error(b6+" was not called")
}return b5[0]
};
b8.dataTypes[0]="json";
a2[b6]=function(){b5=arguments
};
b7.always(function(){a2[b6]=e;
if(b8[b6]){b8.jsonpCallback=b3.jsonpCallback;
bp.push(b6)
}if(b5&&bG.isFunction(e)){e(b5[0])
}b5=e=aB
});
return"script"
}});
bG.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){bG.globalEval(e);
return e
}}});
bG.ajaxPrefilter("script",function(e){if(e.cache===aB){e.cache=false
}if(e.crossDomain){e.type="GET";
e.global=false
}});
bG.ajaxTransport("script",function(b0){if(b0.crossDomain){var e,bZ=o.head||o.getElementsByTagName("head")[0]||o.documentElement;
return{send:function(b1,b2){e=o.createElement("script");
e.async="async";
if(b0.scriptCharset){e.charset=b0.scriptCharset
}e.src=b0.url;
e.onload=e.onreadystatechange=function(b4,b3){if(b3||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;
if(bZ&&e.parentNode){bZ.removeChild(e)
}e=aB;
if(!b3){b2(200,"success")
}}};
bZ.insertBefore(e,bZ.firstChild)
},abort:function(){if(e){e.onload(0,1)
}}}
}});
var ah,aN=a2.ActiveXObject?function(){for(var e in ah){ah[e](0,1)
}}:false,au=0;
function bB(){try{return new a2.XMLHttpRequest()
}catch(bZ){}}function bb(){try{return new a2.ActiveXObject("Microsoft.XMLHTTP")
}catch(bZ){}}bG.ajaxSettings.xhr=a2.ActiveXObject?function(){return !this.isLocal&&bB()||bb()
}:bB;
(function(e){bG.extend(bG.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)})
})(bG.ajaxSettings.xhr());
if(bG.support.ajax){bG.ajaxTransport(function(e){if(!e.crossDomain||bG.support.cors){var bZ;
return{send:function(b5,b0){var b3,b2,b4=e.xhr();
if(e.username){b4.open(e.type,e.url,e.async,e.username,e.password)
}else{b4.open(e.type,e.url,e.async)
}if(e.xhrFields){for(b2 in e.xhrFields){b4[b2]=e.xhrFields[b2]
}}if(e.mimeType&&b4.overrideMimeType){b4.overrideMimeType(e.mimeType)
}if(!e.crossDomain&&!b5["X-Requested-With"]){b5["X-Requested-With"]="XMLHttpRequest"
}try{for(b2 in b5){b4.setRequestHeader(b2,b5[b2])
}}catch(b1){}b4.send((e.hasContent&&e.data)||null);
bZ=function(ce,b8){var b9,b7,b6,cc,cb;
try{if(bZ&&(b8||b4.readyState===4)){bZ=aB;
if(b3){b4.onreadystatechange=bG.noop;
if(aN){delete ah[b3]
}}if(b8){if(b4.readyState!==4){b4.abort()
}}else{b9=b4.status;
b6=b4.getAllResponseHeaders();
cc={};
cb=b4.responseXML;
if(cb&&cb.documentElement){cc.xml=cb
}try{cc.text=b4.responseText
}catch(cd){}try{b7=b4.statusText
}catch(cd){b7=""
}if(!b9&&e.isLocal&&!e.crossDomain){b9=cc.text?200:404
}else{if(b9===1223){b9=204
}}}}}catch(ca){if(!b8){b0(-1,ca)
}}if(cc){b0(b9,b7,cc,b6)
}};
if(!e.async){bZ()
}else{if(b4.readyState===4){setTimeout(bZ,0)
}else{b3=++au;
if(aN){if(!ah){ah={};
bG(a2).unload(aN)
}ah[b3]=bZ
}b4.onreadystatechange=bZ
}}},abort:function(){if(bZ){bZ(0,1)
}}}
}})
}var L,ab,bO=/^(?:toggle|show|hide)$/,bH=new RegExp("^(?:([-+])=|)("+bx+")([a-z%]*)$","i"),bM=/queueHooks$/,ax=[i],a1={"*":[function(e,b5){var b1,b6,b7=this.createTween(e,b5),b2=bH.exec(b5),b3=b7.cur(),bZ=+b3||0,b0=1,b4=20;
if(b2){b1=+b2[2];
b6=b2[3]||(bG.cssNumber[e]?"":"px");
if(b6!=="px"&&bZ){bZ=bG.css(b7.elem,e,true)||b1||1;
do{b0=b0||".5";
bZ=bZ/b0;
bG.style(b7.elem,e,bZ+b6)
}while(b0!==(b0=b7.cur()/b3)&&b0!==1&&--b4)
}b7.unit=b6;
b7.start=bZ;
b7.end=b2[1]?bZ+(b2[1]+1)*b1:b1
}return b7
}]};
function bj(){setTimeout(function(){L=aB
},0);
return(L=bG.now())
}function bc(bZ,e){bG.each(e,function(b4,b2){var b3=(a1[b4]||[]).concat(a1["*"]),b0=0,b1=b3.length;
for(;
b0<b1;
b0++){if(b3[b0].call(bZ,b4,b2)){return
}}})
}function f(b0,b4,b7){var b8,b3=0,e=0,bZ=ax.length,b6=bG.Deferred().always(function(){delete b2.elem
}),b2=function(){var ce=L||bj(),cb=Math.max(0,b1.startTime+b1.duration-ce),b9=cb/b1.duration||0,cd=1-b9,ca=0,cc=b1.tweens.length;
for(;
ca<cc;
ca++){b1.tweens[ca].run(cd)
}b6.notifyWith(b0,[b1,cd,cb]);
if(cd<1&&cc){return cb
}else{b6.resolveWith(b0,[b1]);
return false
}},b1=b6.promise({elem:b0,props:bG.extend({},b4),opts:bG.extend(true,{specialEasing:{}},b7),originalProperties:b4,originalOptions:b7,startTime:L||bj(),duration:b7.duration,tweens:[],createTween:function(cc,b9,cb){var ca=bG.Tween(b0,b1.opts,cc,b9,b1.opts.specialEasing[cc]||b1.opts.easing);
b1.tweens.push(ca);
return ca
},stop:function(ca){var b9=0,cb=ca?b1.tweens.length:0;
for(;
b9<cb;
b9++){b1.tweens[b9].run(1)
}if(ca){b6.resolveWith(b0,[b1,ca])
}else{b6.rejectWith(b0,[b1,ca])
}return this
}}),b5=b1.props;
ak(b5,b1.opts.specialEasing);
for(;
b3<bZ;
b3++){b8=ax[b3].call(b1,b0,b5,b1.opts);
if(b8){return b8
}}bc(b1,b5);
if(bG.isFunction(b1.opts.start)){b1.opts.start.call(b0,b1)
}bG.fx.timer(bG.extend(b2,{anim:b1,queue:b1.opts.queue,elem:b0}));
return b1.progress(b1.opts.progress).done(b1.opts.done,b1.opts.complete).fail(b1.opts.fail).always(b1.opts.always)
}function ak(b1,b3){var b0,bZ,b4,b2,e;
for(b0 in b1){bZ=bG.camelCase(b0);
b4=b3[bZ];
b2=b1[b0];
if(bG.isArray(b2)){b4=b2[1];
b2=b1[b0]=b2[0]
}if(b0!==bZ){b1[bZ]=b2;
delete b1[b0]
}e=bG.cssHooks[bZ];
if(e&&"expand" in e){b2=e.expand(b2);
delete b1[bZ];
for(b0 in b2){if(!(b0 in b1)){b1[b0]=b2[b0];
b3[b0]=b4
}}}else{b3[bZ]=b4
}}}bG.Animation=bG.extend(f,{tweener:function(bZ,b2){if(bG.isFunction(bZ)){b2=bZ;
bZ=["*"]
}else{bZ=bZ.split(" ")
}var b1,e=0,b0=bZ.length;
for(;
e<b0;
e++){b1=bZ[e];
a1[b1]=a1[b1]||[];
a1[b1].unshift(b2)
}},prefilter:function(bZ,e){if(e){ax.unshift(bZ)
}else{ax.push(bZ)
}}});
function i(b2,b8,e){var b7,b0,ca,b1,ce,b4,cd,cc,cb,b3=this,bZ=b2.style,b9={},b6=[],b5=b2.nodeType&&Q(b2);
if(!e.queue){cc=bG._queueHooks(b2,"fx");
if(cc.unqueued==null){cc.unqueued=0;
cb=cc.empty.fire;
cc.empty.fire=function(){if(!cc.unqueued){cb()
}}
}cc.unqueued++;
b3.always(function(){b3.always(function(){cc.unqueued--;
if(!bG.queue(b2,"fx").length){cc.empty.fire()
}})
})
}if(b2.nodeType===1&&("height" in b8||"width" in b8)){e.overflow=[bZ.overflow,bZ.overflowX,bZ.overflowY];
if(bG.css(b2,"display")==="inline"&&bG.css(b2,"float")==="none"){if(!bG.support.inlineBlockNeedsLayout||bC(b2.nodeName)==="inline"){bZ.display="inline-block"
}else{bZ.zoom=1
}}}if(e.overflow){bZ.overflow="hidden";
if(!bG.support.shrinkWrapBlocks){b3.done(function(){bZ.overflow=e.overflow[0];
bZ.overflowX=e.overflow[1];
bZ.overflowY=e.overflow[2]
})
}}for(b7 in b8){ca=b8[b7];
if(bO.exec(ca)){delete b8[b7];
b4=b4||ca==="toggle";
if(ca===(b5?"hide":"show")){continue
}b6.push(b7)
}}b1=b6.length;
if(b1){ce=bG._data(b2,"fxshow")||bG._data(b2,"fxshow",{});
if("hidden" in ce){b5=ce.hidden
}if(b4){ce.hidden=!b5
}if(b5){bG(b2).show()
}else{b3.done(function(){bG(b2).hide()
})
}b3.done(function(){var cf;
bG.removeData(b2,"fxshow",true);
for(cf in b9){bG.style(b2,cf,b9[cf])
}});
for(b7=0;
b7<b1;
b7++){b0=b6[b7];
cd=b3.createTween(b0,b5?ce[b0]:0);
b9[b0]=ce[b0]||bG.style(b2,b0);
if(!(b0 in ce)){ce[b0]=cd.start;
if(b5){cd.end=cd.start;
cd.start=b0==="width"||b0==="height"?1:0
}}}}}function H(b0,bZ,b2,e,b1){return new H.prototype.init(b0,bZ,b2,e,b1)
}bG.Tween=H;
H.prototype={constructor:H,init:function(b1,bZ,b3,e,b2,b0){this.elem=b1;
this.prop=b3;
this.easing=b2||"swing";
this.options=bZ;
this.start=this.now=this.cur();
this.end=e;
this.unit=b0||(bG.cssNumber[b3]?"":"px")
},cur:function(){var e=H.propHooks[this.prop];
return e&&e.get?e.get(this):H.propHooks._default.get(this)
},run:function(b0){var bZ,e=H.propHooks[this.prop];
if(this.options.duration){this.pos=bZ=bG.easing[this.easing](b0,this.options.duration*b0,0,1,this.options.duration)
}else{this.pos=bZ=b0
}this.now=(this.end-this.start)*bZ+this.start;
if(this.options.step){this.options.step.call(this.elem,this.now,this)
}if(e&&e.set){e.set(this)
}else{H.propHooks._default.set(this)
}return this
}};
H.prototype.init.prototype=H.prototype;
H.propHooks={_default:{get:function(bZ){var e;
if(bZ.elem[bZ.prop]!=null&&(!bZ.elem.style||bZ.elem.style[bZ.prop]==null)){return bZ.elem[bZ.prop]
}e=bG.css(bZ.elem,bZ.prop,false,"");
return !e||e==="auto"?0:e
},set:function(e){if(bG.fx.step[e.prop]){bG.fx.step[e.prop](e)
}else{if(e.elem.style&&(e.elem.style[bG.cssProps[e.prop]]!=null||bG.cssHooks[e.prop])){bG.style(e.elem,e.prop,e.now+e.unit)
}else{e.elem[e.prop]=e.now
}}}}};
H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now
}}};
bG.each(["toggle","show","hide"],function(bZ,e){var b0=bG.fn[e];
bG.fn[e]=function(b1,b3,b2){return b1==null||typeof b1==="boolean"||(!bZ&&bG.isFunction(b1)&&bG.isFunction(b3))?b0.apply(this,arguments):this.animate(bF(e,true),b1,b3,b2)
}
});
bG.fn.extend({fadeTo:function(e,b1,b0,bZ){return this.filter(Q).css("opacity",0).show().end().animate({opacity:b1},e,b0,bZ)
},animate:function(b4,b1,b3,b2){var b0=bG.isEmptyObject(b4),e=bG.speed(b1,b3,b2),bZ=function(){var b5=f(this,bG.extend({},b4),e);
if(b0){b5.stop(true)
}};
return b0||e.queue===false?this.each(bZ):this.queue(e.queue,bZ)
},stop:function(b0,bZ,e){var b1=function(b2){var b3=b2.stop;
delete b2.stop;
b3(e)
};
if(typeof b0!=="string"){e=bZ;
bZ=b0;
b0=aB
}if(bZ&&b0!==false){this.queue(b0||"fx",[])
}return this.each(function(){var b5=true,b2=b0!=null&&b0+"queueHooks",b4=bG.timers,b3=bG._data(this);
if(b2){if(b3[b2]&&b3[b2].stop){b1(b3[b2])
}}else{for(b2 in b3){if(b3[b2]&&b3[b2].stop&&bM.test(b2)){b1(b3[b2])
}}}for(b2=b4.length;
b2--;
){if(b4[b2].elem===this&&(b0==null||b4[b2].queue===b0)){b4[b2].anim.stop(e);
b5=false;
b4.splice(b2,1)
}}if(b5||!e){bG.dequeue(this,b0)
}})
}});
function bF(b0,b2){var b1,e={height:b0},bZ=0;
b2=b2?1:0;
for(;
bZ<4;
bZ+=2-b2){b1=bQ[bZ];
e["margin"+b1]=e["padding"+b1]=b0
}if(b2){e.opacity=e.width=b0
}return e
}bG.each({slideDown:bF("show"),slideUp:bF("hide"),slideToggle:bF("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,bZ){bG.fn[e]=function(b0,b2,b1){return this.animate(bZ,b0,b2,b1)
}
});
bG.speed=function(b0,b1,bZ){var e=b0&&typeof b0==="object"?bG.extend({},b0):{complete:bZ||!bZ&&b1||bG.isFunction(b0)&&b0,duration:b0,easing:bZ&&b1||b1&&!bG.isFunction(b1)&&b1};
e.duration=bG.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in bG.fx.speeds?bG.fx.speeds[e.duration]:bG.fx.speeds._default;
if(e.queue==null||e.queue===true){e.queue="fx"
}e.old=e.complete;
e.complete=function(){if(bG.isFunction(e.old)){e.old.call(this)
}if(e.queue){bG.dequeue(this,e.queue)
}};
return e
};
bG.easing={linear:function(e){return e
},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2
}};
bG.timers=[];
bG.fx=H.prototype.init;
bG.fx.tick=function(){var b0,bZ=bG.timers,e=0;
L=bG.now();
for(;
e<bZ.length;
e++){b0=bZ[e];
if(!b0()&&bZ[e]===b0){bZ.splice(e--,1)
}}if(!bZ.length){bG.fx.stop()
}L=aB
};
bG.fx.timer=function(e){if(e()&&bG.timers.push(e)&&!ab){ab=setInterval(bG.fx.tick,bG.fx.interval)
}};
bG.fx.interval=13;
bG.fx.stop=function(){clearInterval(ab);
ab=null
};
bG.fx.speeds={slow:600,fast:200,_default:400};
bG.fx.step={};
if(bG.expr&&bG.expr.filters){bG.expr.filters.animated=function(e){return bG.grep(bG.timers,function(bZ){return e===bZ.elem
}).length
}
}var bm=/^(?:body|html)$/i;
bG.fn.offset=function(b8){if(arguments.length){return b8===aB?this:this.each(function(b9){bG.offset.setOffset(this,b8,b9)
})
}var bZ,b4,b5,b2,b6,e,b1,b3={top:0,left:0},b0=this[0],b7=b0&&b0.ownerDocument;
if(!b7){return
}if((b4=b7.body)===b0){return bG.offset.bodyOffset(b0)
}bZ=b7.documentElement;
if(!bG.contains(bZ,b0)){return b3
}if(typeof b0.getBoundingClientRect!=="undefined"){b3=b0.getBoundingClientRect()
}b5=bn(b7);
b2=bZ.clientTop||b4.clientTop||0;
b6=bZ.clientLeft||b4.clientLeft||0;
e=b5.pageYOffset||bZ.scrollTop;
b1=b5.pageXOffset||bZ.scrollLeft;
return{top:b3.top+e-b2,left:b3.left+b1-b6}
};
bG.offset={bodyOffset:function(e){var b0=e.offsetTop,bZ=e.offsetLeft;
if(bG.support.doesNotIncludeMarginInBodyOffset){b0+=parseFloat(bG.css(e,"marginTop"))||0;
bZ+=parseFloat(bG.css(e,"marginLeft"))||0
}return{top:b0,left:bZ}
},setOffset:function(b1,ca,b4){var b5=bG.css(b1,"position");
if(b5==="static"){b1.style.position="relative"
}var b3=bG(b1),bZ=b3.offset(),e=bG.css(b1,"top"),b8=bG.css(b1,"left"),b9=(b5==="absolute"||b5==="fixed")&&bG.inArray("auto",[e,b8])>-1,b7={},b6={},b0,b2;
if(b9){b6=b3.position();
b0=b6.top;
b2=b6.left
}else{b0=parseFloat(e)||0;
b2=parseFloat(b8)||0
}if(bG.isFunction(ca)){ca=ca.call(b1,b4,bZ)
}if(ca.top!=null){b7.top=(ca.top-bZ.top)+b0
}if(ca.left!=null){b7.left=(ca.left-bZ.left)+b2
}if("using" in ca){ca.using.call(b1,b7)
}else{b3.css(b7)
}}};
bG.fn.extend({position:function(){if(!this[0]){return
}var b0=this[0],bZ=this.offsetParent(),b1=this.offset(),e=bm.test(bZ[0].nodeName)?{top:0,left:0}:bZ.offset();
b1.top-=parseFloat(bG.css(b0,"marginTop"))||0;
b1.left-=parseFloat(bG.css(b0,"marginLeft"))||0;
e.top+=parseFloat(bG.css(bZ[0],"borderTopWidth"))||0;
e.left+=parseFloat(bG.css(bZ[0],"borderLeftWidth"))||0;
return{top:b1.top-e.top,left:b1.left-e.left}
},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.body;
while(e&&(!bm.test(e.nodeName)&&bG.css(e,"position")==="static")){e=e.offsetParent
}return e||o.body
})
}});
bG.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b0,bZ){var e=/Y/.test(bZ);
bG.fn[b0]=function(b1){return bG.access(this,function(b2,b5,b4){var b3=bn(b2);
if(b4===aB){return b3?(bZ in b3)?b3[bZ]:b3.document.documentElement[b5]:b2[b5]
}if(b3){b3.scrollTo(!e?b4:bG(b3).scrollLeft(),e?b4:bG(b3).scrollTop())
}else{b2[b5]=b4
}},b0,b1,arguments.length,null)
}
});
function bn(e){return bG.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false
}bG.each({Height:"height",Width:"width"},function(e,bZ){bG.each({padding:"inner"+e,content:bZ,"":"outer"+e},function(b0,b1){bG.fn[b1]=function(b5,b4){var b3=arguments.length&&(b0||typeof b5!=="boolean"),b2=b0||(b5===true||b4===true?"margin":"border");
return bG.access(this,function(b7,b6,b8){var b9;
if(bG.isWindow(b7)){return b7.document.documentElement["client"+e]
}if(b7.nodeType===9){b9=b7.documentElement;
return Math.max(b7.body["scroll"+e],b9["scroll"+e],b7.body["offset"+e],b9["offset"+e],b9["client"+e])
}return b8===aB?bG.css(b7,b6,b8,b2):bG.style(b7,b6,b8,b2)
},bZ,b3?b5:aB,b3,null)
}
})
});
a2.jQuery=a2.$=bG;
if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return bG
})
}})(window);/*! Copyright (c) 2013 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.1.3
 *
 * Requires: 1.2.2+
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)
}else{if(typeof exports==="object"){module.exports=a
}else{a(jQuery)
}}}(function(e){var d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"];
var g="onwheel" in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];
var f,a;
if(e.event.fixHooks){for(var b=d.length;
b;
){e.event.fixHooks[d[--b]]=e.event.mouseHooks
}}e.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var h=g.length;
h;
){this.addEventListener(g[--h],c,false)
}}else{this.onmousewheel=c
}},teardown:function(){if(this.removeEventListener){for(var h=g.length;
h;
){this.removeEventListener(g[--h],c,false)
}}else{this.onmousewheel=null
}}};
e.fn.extend({mousewheel:function(h){return h?this.bind("mousewheel",h):this.trigger("mousewheel")
},unmousewheel:function(h){return this.unbind("mousewheel",h)
}});
function c(h){var i=h||window.event,n=[].slice.call(arguments,1),p=0,k=0,j=0,m=0,l=0,o;
h=e.event.fix(i);
h.type="mousewheel";
if(i.wheelDelta){p=i.wheelDelta
}if(i.detail){p=i.detail*-1
}if(i.deltaY){j=i.deltaY*-1;
p=j
}if(i.deltaX){k=i.deltaX;
p=k*-1
}if(i.wheelDeltaY!==undefined){j=i.wheelDeltaY
}if(i.wheelDeltaX!==undefined){k=i.wheelDeltaX*-1
}m=Math.abs(p);
if(!f||m<f){f=m
}l=Math.max(Math.abs(j),Math.abs(k));
if(!a||l<a){a=l
}o=p>0?"floor":"ceil";
p=Math[o](p/f);
k=Math[o](k/a);
j=Math[o](j/a);
n.unshift(h,p,k,j);
return(e.event.dispatch||e.event.handle).apply(this,n)
}}));(function(b,d,a){var e=b(d),c=d.document;
b.plugin2=function(h,g){var i="plugin-"+h,f=h+"-options";
g._mergeOptions=function(j){return b.extend(true,{},this._defaultOptions,j)
};
g.closestInit=function(){var j=this.$caller.closest("."+i);
return j.length>0?j:b(c)
};
g.option=function(j,l){var k=this.closestInit(),m;
if(typeof j==="undefined"){m=k[0];
return m?b.data(m,f):null
}else{if(typeof l==="undefined"){m=k[0];
return m?b.data(m,f)[j]:null
}else{k.each(function(){b.data(this,f)[j]=l
});
return this.$caller
}}};
g.live=function(j,k){var m=this,l=m.$caller;
k=m._mergeOptions(k);
if(m._init){m._init(j,k)
}l.onCreate(j,function(){var o,n;
if(!b.data(this,f)){o=b(this);
n=b.extend({},m,{"$caller":o});
b.data(this,f,k);
o.addClass(i);
if(n._create){n._create(this,k)
}}});
if(m._createAll){l.bind("create",function(n){m._createAll(n.target,j,k)
})
}return l
};
g.init=function(j){return this.live(null,j)
};
b.fn[h]=function(k){var j=b.extend({},g,{"$caller":this});
if(!k||typeof k==="object"){return j.init(k)
}k=""+k;
if(k.substr(0,1)!=="_"&&j[k]){return j[k].apply(j,Array.prototype.slice.call(arguments,1))
}else{return b.error("["+k+"] method doesn't exist on ["+h+"] plugin!")
}}
};
b.run=function(f){f();
return f
};
b.throttle=function(g,f){var j=0,i,h;
if(g<=0){return f
}return function(){var m,l,k;
h=arguments;
if(i){return
}m=this;
l=+new Date();
k=g-l+j;
if(k<=0){j=l;
f.apply(m,h)
}else{i=setTimeout(function(){j=l;
i=null;
f.apply(m,h)
},k)
}}
};
(function(){var l,o,f,k,p,n,m,j,i,g,h;
l=b("<div/>",{css:{height:"100%",left:0,position:"fixed",top:0,"user-select":"none",width:"100%","z-index":1000000}});
o=function(q){if(p){clearTimeout(p);
p=null
}g=null;
b(c.body).css("user-select","");
if(f){f.unbind(".drag");
f=null
}if(h){h(q);
h=null
}};
b.drag=function(r,s,q,v,u){var t;
if(s.which!==1||s.altKey||s.ctrlKey||s.metaKey||s.shiftKey){return
}t={"$dragCover":l};
o(s);
b(c.body).css("user-select","none");
f=b(r);
f.bind("dragstart.drag",function(){return false
});
n=j=s.pageX;
m=i=s.pageY;
k=function(){var w=function(){g=function(x){return v.call(r,x,t)
};
h=function(x){return u.call(r,x,t)
};
b(c.body).append(l);
q.call(r,s,t)
};
if(s.dragImmediately){w()
}else{p=setTimeout(function(){var y=j-n,x=i-m;
if(Math.sqrt(y*y+x*x)<(s.dragDistance||5)){k();
return
}w()
},(s.dragDelay||100))
}};
k()
};
e.mousemove(b.throttle(50,function(q){if(p){j=q.pageX;
i=q.pageY
}if(g){g(q)
}}));
e.mouseup(function(q){o(q);
l.remove()
})
}());
b.fn.isFixedPosition=function(){var g=this,f;
while(true){if(g.css("position")==="fixed"){return true
}f=g.offsetParent();
if(g.length===0||g[0]===f[0]){break
}else{g=f
}}return false
};
b.fn.zIndex=function(){var h;
for(var g=this;
g.length>0;
g=g.parent()){try{h=parseInt(g.css("z-index"),10)
}catch(f){break
}if(!isNaN(h)&&h!==0){break
}}return h
};
(function(){var f=b.fn.delegate;
b.fn.delegate=function(){if(arguments[0]){return f.apply(this,arguments)
}else{return b.fn.bind.apply(this,Array.prototype.slice.call(arguments,1))
}}
}());
(function(){var f="input-checkInterval";
if(!("oninput" in c.createElement("input"))){b.event.special.input={add:function(i){var j=b(this),g=i.selector,h,k;
h=b.throttle(50,function(){b(this).trigger("input")
});
j.delegate(g,"keyup",function(){setTimeout(h,0)
});
k=function(){var l=b.data(this,f);
if(l){clearInterval(l);
b.removeData(this,f)
}};
j.delegate(g,"focus",function(){k.call(this);
b.data(this,f,setInterval(h,50))
});
j.delegate(g,"blur",k)
}}
}}());
b.elementFromPoint=function(f,h){var g=c.elementFromPoint(f,h);
if(g){if(g.nodeType===3){g=g.parentNode
}if(g){return b(g)
}}return b()
};
b.fn.onCreate=function(f,g){if(f){this.bind("create",function(h){b(h.target).find(f).each(g)
})
}else{this.each(g)
}};
b.easing.easeOutBack=function(g,h,f,k,j,i){if(i===undefined){i=1.70158
}return k*((h=h/j-1)*h*((i+1)*h+i)+1)+f
};
b.addQueryParameters=function(){var g=arguments[0],f=g.indexOf("?"),l,h,k=arguments.length,i,j;
if(f>-1){l="&"+g.substring(f+1);
g=g.substring(0,f)
}else{l=""
}for(h=1;
h<k;
h+=2){i=arguments[h];
j=arguments[h+1];
l=l.replace(new RegExp("&"+i+"=[^&]*","g"),"");
if(j!==undefined&&j!==null){b.each(b.isArray(j)?j:[j],function(n,m){l+="&";
l+=encodeURIComponent(i);
l+="=";
l+=encodeURIComponent(m)
})
}}return l.length>1?g+"?"+l.substring(1):g
};
window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.webkitRequestAnimationFrame||function(f){window.setTimeout(f,1000/60)
}
}(jQuery,window));(function(b,c,a){b.plugin2("autoSubmit",{_create:function(g){var i=b(g),f=b(g).closest("form"),h,d,e;
d=b.throttle(500,function(){var j=f.serialize();
if(h!==j){h=j;
f.submit()
}});
i.data("autoSubmit-submitFunction",d);
if(i[0]===f[0]){f.find(":input").attr("autocomplete","off");
f.delegate(":input","input.autoSubmit change.autoSubmit",d)
}else{i.attr("autocomplete","off");
i.bind("input.autoSubmit change.autoSubmit",d)
}e=b(".frame[name="+f.attr("target")+"]:not(.loading):not(.loaded)");
if(e.length>0){d()
}},submit:function(){this.closestInit().data("autoSubmit-submitFunction")();
return this
}})
}(jQuery,window));(function(e,f,c){var b={dayLabels:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthLabels:["January","February","March","April","May","June","July","August","September","October","November","December"]};
var h=function(i){return i<10?"0"+i:i
};
var a;
var g=function(m){var k=a();
var j=k.data("selectedDate");
k.data("viewDate",m);
var l=m.getMonth();
k.find("> .monthYear > .month").val(l);
k.find("> .monthYear > .year").val(m.getFullYear());
var i=new Date(m.getTime());
i.setDate(1);
i.setDate(i.getDate()-i.getDay());
k.find("> .week > .day").each(function(){var n=e(this);
n.data("date",new Date(i.getTime()));
var o=i.getDate();
n.text(o);
if(l===i.getMonth()){n.removeClass("offMonth")
}else{n.addClass("offMonth")
}if(i.getMonth()===j.getMonth()&&o===j.getDate()){n.addClass("selected")
}else{n.removeClass("selected")
}i.setDate(o+1)
})
};
var d=function(){var l=a();
var k=l.data("selectedDate");
var o=h(k.getDate());
var i=k.getHours();
var m=h(k.getMinutes());
var j="AM";
if(i>=12){i-=12;
j="PM"
}i=i===0?12:h(i);
var n=l.data("$input");
n.val(k.getFullYear()+"-"+h(k.getMonth()+1)+"-"+h(k.getDate())+" "+h(k.getHours())+":"+h(k.getMinutes())+":00");
n.change();
l.data("$calendarButton").toggleClass("calendarButton-empty",!n.val());
l.data("$calendarButton").text(b.dayLabels[k.getDay()]+", "+b.monthLabels[k.getMonth()].substring(0,3)+" "+o+", "+i+":"+m+" "+j)
};
a=function(){var z=e("#calendar");
if(z.length===0){z=e("<div/>",{id:"calendar"});
var k=e("<div/>",{"class":"monthYear"});
var q=e("<select/>",{"class":"month",change:function(){var D=new Date(z.data("viewDate").getTime());
D.setDate(1);
D.setMonth(q.val());
g(D)
}});
k.append(q);
e.each(b.monthLabels,function(D,E){q.append(e("<option/>",{value:D,text:E}))
});
var v=e("<input/>",{type:"text","class":"year",bind:{input:function(){var E=parseInt(v.val(),10)||0;
if(E<1900){v.addClass("invalid")
}else{var D=new Date(z.data("viewDate").getTime());
D.setDate(1);
D.setYear(E);
g(D);
v.removeClass("invalid")
}}}});
k.append(" ");
k.append(v);
var m=e("<span/>",{"class":"previousButton"});
m.bind("click.calendar",function(){var D=new Date(z.data("viewDate").getTime());
D.setDate(1);
D.setMonth(D.getMonth()-1);
g(D)
});
var j=e("<span/>",{"class":"nextButton"});
j.bind("click.calendar",function(){var D=new Date(z.data("viewDate").getTime());
D.setDate(1);
D.setMonth(D.getMonth()+1);
g(D)
});
var l=e("<div/>",{"class":"dayLabels"});
e.each(b.dayLabels,function(D,E){l.append(e("<span/>",{"class":"day day"+D,text:E}))
});
z.append(k);
z.append(m);
z.append(j);
z.append(l);
var w,B,y;
for(w=0;
w<6;
++w){B=e("<div/>",{"class":"week week"+w});
for(y=0;
y<7;
++y){B.append(e("<span/>",{"class":"day day"+y}))
}z.append(B)
}var s=e("<div/>",{"class":"time"});
if(COMMON_TIMES.length>0){var p=e("<select/>",{"class":"timeSelect",change:function(){var D=e(this).find(":selected"),F=D.prop("value")==="_custom",E;
r.add(x).add(t).toggle(F);
if(!F){E=z.data("selectedDate");
E.setHours(parseInt(D.attr("data-hour"),10));
E.setMinutes(parseInt(D.attr("data-minute"),10))
}}});
e.each(COMMON_TIMES,function(){p.append(e("<option/>",{text:this.displayName,"data-hour":this.hour,"data-minute":this.minute}))
});
p.append(e("<option/>",{text:"Custom:",value:"_custom"}))
}var t=e("<select/>",{"class":"meridiem"});
var r=e("<select/>",{"class":"hour"});
var A=function(){z.data("selectedDate").setHours((t.val()==="PM"?12:0)+parseInt(r.val(),10))
};
t.append(e("<option/>",{text:"AM",value:"AM"}));
t.append(e("<option/>",{text:"PM",value:"PM"}));
t.change(A);
var n,o;
for(n=0;
n<12;
++n){o=n===0?12:h(n);
r.append(e("<option/>",{text:o,value:n}))
}r.change(A);
var x=e("<select/>",{"class":"minute"});
var u,i;
for(u=0;
u<60;
++u){i=h(u);
x.append(e("<option/>",{text:i,value:u}))
}x.change(function(){z.data("selectedDate").setMinutes(x.val())
});
s.append(p);
s.append(r);
s.append(x);
s.append(t);
z.append(s);
var C=e("<div/>",{"class":"calendar_actions"});
C.append(e("<span/>",{"class":"calendar_set",text:"Set",click:function(){var D=z.data("$input");
d();
z.popup("close")
}}));
C.append(e("<span/>",{"class":"calendar_clear",text:"Clear",click:function(){var D=z.data("$input");
z.data("selectedDate",new Date());
D.val("");
D.change();
z.data("$calendarButton").toggleClass("calendarButton-empty",!D.val());
z.data("$calendarButton").text(D.val()||D.attr("placeholder")||D.attr("data-emptylabel")||"N/A");
z.popup("close")
}}));
z.append(C);
e("body").append(z);
z.popup();
z.popup("container").attr("id","calendarPopup");
z.popup("close");
z.find(".day").click(function(){var D=e(this).data("date");
z.data("selectedDate",D);
z.find(".timeSelect").change();
g(D)
})
}return z
};
e.plugin2("calendar",{_create:function(i){var k=e(i);
var j=e("<span/>",{"class":"calendarButton",text:k.val()||k.attr("placeholder")||k.attr("data-emptylabel")||"N/A"});
k.bind("input-disable",function(m,l){j.toggleClass("state-disabled",l)
});
j.toggleClass("calendarButton-empty",!k.val());
j.click(function(){if(j.is(".state-disabled")){return
}var q=a();
q.data("$input",k);
q.data("$calendarButton",j);
var p=k.val();
var o=new Date();
if(p){var n=/^(\d\d\d\d)-(\d\d)-(\d\d) (\d\d):(\d\d):(\d\d)?$/.exec(p);
if(n){o.setFullYear(parseInt(n[1],10));
o.setMonth(parseInt(n[2],10)-1);
o.setDate(parseInt(n[3],10));
o.setHours(parseInt(n[4],10));
o.setMinutes(parseInt(n[5],10));
o.setSeconds(parseInt(n[6],10))
}}q.data("selectedDate",o);
g(o);
var l=o.getHours();
var m="AM";
if(l>=12){l-=12;
m="PM"
}q.find("select.hour").val(l);
q.find("select.minute").val(o.getMinutes());
q.find("select.meridiem").val(m);
q.find("select.timeSelect").change();
q.find(".empty").text(k.attr("placeholder")||k.attr("data-emptylabel")||"N/A");
q.popup("source",j);
q.popup("open")
});
k.hide();
k.after(j)
}})
}(jQuery,window));window.CodeMirror=(function(){var bC=/gecko\/\d/i.test(navigator.userAgent);
var ct=/MSIE \d/.test(navigator.userAgent);
var bz=ct&&(document.documentMode==null||document.documentMode<8);
var by=ct&&(document.documentMode==null||document.documentMode<9);
var b2=/WebKit\//.test(navigator.userAgent);
var cw=b2&&/Qt\/\d+\.\d+/.test(navigator.userAgent);
var ca=/Chrome\//.test(navigator.userAgent);
var dO=/Opera\//.test(navigator.userAgent);
var ae=/Apple Computer/.test(navigator.vendor);
var aD=/KHTML\//.test(navigator.userAgent);
var bN=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent);
var b7=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);
var dL=/PhantomJS/.test(navigator.userAgent);
var dm=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);
var cO=dm||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);
var bl=dm||/Mac/.test(navigator.platform);
var am=/windows/i.test(navigator.platform);
var c0=dO&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);
if(c0){c0=Number(c0[1])
}if(c0&&c0>=15){dO=false;
b2=true
}var bb=bl&&(cw||dO&&(c0==null||c0<12.11));
var bR=bC||(ct&&!by);
var ec=false,az=false;
function z(eh,ei){if(!(this instanceof z)){return new z(eh,ei)
}this.options=ei=ei||{};
for(var ej in dp){if(!ei.hasOwnProperty(ej)&&dp.hasOwnProperty(ej)){ei[ej]=dp[ej]
}}bt(ei);
var en=typeof ei.value=="string"?0:ei.value.first;
var em=this.display=f(eh,en);
em.wrapper.CodeMirror=this;
cK(this);
if(ei.autofocus&&!cO){c3(this)
}this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,draggingText:false,highlight:new eg()};
bW(this);
if(ei.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"
}var el=ei.value;
if(typeof el=="string"){el=new Y(ei.value,ei.mode)
}b3(this,cJ)(this,el);
if(ct){setTimeout(bI(dH,this,true),20)
}d1(this);
var eo;
try{eo=(document.activeElement==em.input)
}catch(ek){}if(eo||(ei.autofocus&&!cO)){setTimeout(bI(bM,this),20)
}else{ar(this)
}b3(this,function(){for(var eq in aG){if(aG.propertyIsEnumerable(eq)){aG[eq](this,ei[eq],br)
}}for(var ep=0;
ep<aA.length;
++ep){aA[ep](this)
}})()
}function f(eh,ej){var ek={};
var ei=ek.input=d6("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");
if(b2){ei.style.width="1000px"
}else{ei.setAttribute("wrap","off")
}if(dm){ei.style.border="1px solid black"
}ei.setAttribute("autocorrect","off");
ei.setAttribute("autocapitalize","off");
ei.setAttribute("spellcheck","false");
ek.inputDiv=d6("div",[ei],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");
ek.scrollbarH=d6("div",[d6("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");
ek.scrollbarV=d6("div",[d6("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");
ek.scrollbarFiller=d6("div",null,"CodeMirror-scrollbar-filler");
ek.gutterFiller=d6("div",null,"CodeMirror-gutter-filler");
ek.lineDiv=d6("div",null,"CodeMirror-code");
ek.selectionDiv=d6("div",null,null,"position: relative; z-index: 1");
ek.cursor=d6("div","\u00a0","CodeMirror-cursor");
ek.otherCursor=d6("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor");
ek.measure=d6("div",null,"CodeMirror-measure");
ek.lineSpace=d6("div",[ek.measure,ek.selectionDiv,ek.lineDiv,ek.cursor,ek.otherCursor],null,"position: relative; outline: none");
ek.mover=d6("div",[d6("div",[ek.lineSpace],"CodeMirror-lines")],null,"position: relative");
ek.sizer=d6("div",[ek.mover],"CodeMirror-sizer");
ek.heightForcer=d6("div",null,null,"position: absolute; height: "+aK+"px; width: 1px;");
ek.gutters=d6("div",null,"CodeMirror-gutters");
ek.lineGutter=null;
ek.scroller=d6("div",[ek.sizer,ek.heightForcer,ek.gutters],"CodeMirror-scroll");
ek.scroller.setAttribute("tabIndex","-1");
ek.wrapper=d6("div",[ek.inputDiv,ek.scrollbarH,ek.scrollbarV,ek.scrollbarFiller,ek.gutterFiller,ek.scroller],"CodeMirror");
if(bz){ek.gutters.style.zIndex=-1;
ek.scroller.style.paddingRight=0
}if(eh.appendChild){eh.appendChild(ek.wrapper)
}else{eh(ek.wrapper)
}if(dm){ei.style.width="0px"
}if(!b2){ek.scroller.draggable=true
}if(aD){ek.inputDiv.style.height="1px";
ek.inputDiv.style.position="absolute"
}else{if(bz){ek.scrollbarH.style.minWidth=ek.scrollbarV.style.minWidth="18px"
}}ek.viewOffset=ek.lastSizeC=0;
ek.showingFrom=ek.showingTo=ej;
ek.lineNumWidth=ek.lineNumInnerWidth=ek.lineNumChars=null;
ek.prevInput="";
ek.alignWidgets=false;
ek.pollingFast=false;
ek.poll=new eg();
ek.cachedCharWidth=ek.cachedTextHeight=null;
ek.measureLineCache=[];
ek.measureLineCachePos=0;
ek.inaccurateSelection=false;
ek.maxLine=null;
ek.maxLineLength=0;
ek.maxLineChanged=false;
ek.wheelDX=ek.wheelDY=ek.wheelStartX=ek.wheelStartY=null;
return ek
}function aS(eh){eh.doc.mode=z.getMode(eh.options,eh.doc.modeOption);
eh.doc.iter(function(ei){if(ei.stateAfter){ei.stateAfter=null
}if(ei.styles){ei.styles=null
}});
eh.doc.frontier=eh.doc.first;
cN(eh,100);
eh.state.modeGen++;
if(eh.curOp){O(eh)
}}function db(eh){if(eh.options.lineWrapping){eh.display.wrapper.className+=" CodeMirror-wrap";
eh.display.sizer.style.minWidth=""
}else{eh.display.wrapper.className=eh.display.wrapper.className.replace(" CodeMirror-wrap","");
d8(eh)
}J(eh);
O(eh);
R(eh);
setTimeout(function(){dk(eh)
},100)
}function aF(eh){var ej=au(eh.display),ei=eh.options.lineWrapping;
var ek=ei&&Math.max(5,eh.display.scroller.clientWidth/cr(eh.display)-3);
return function(el){if(dM(eh.doc,el)){return 0
}else{if(ei){return(Math.ceil(el.text.length/ek)||1)*ej
}else{return ej
}}}
}function J(eh){var ej=eh.doc,ei=aF(eh);
ej.iter(function(ek){var el=ei(ek);
if(el!=ek.height){ea(ek,el)
}})
}function ef(eh){var ej=dt[eh.options.keyMap],ei=ej.style;
eh.display.wrapper.className=eh.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(ei?" cm-keymap-"+ei:"");
eh.state.disableInput=ej.disableInput
}function bW(eh){eh.display.wrapper.className=eh.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+eh.options.theme.replace(/(^|\s)\s*/g," cm-s-");
R(eh)
}function cm(eh){cK(eh);
O(eh);
setTimeout(function(){c7(eh)
},20)
}function cK(eh){var ei=eh.display.gutters,em=eh.options.gutters;
cD(ei);
for(var ej=0;
ej<em.length;
++ej){var ek=em[ej];
var el=ei.appendChild(d6("div",null,"CodeMirror-gutter "+ek));
if(ek=="CodeMirror-linenumbers"){eh.display.lineGutter=el;
el.style.width=(eh.display.lineNumWidth||1)+"px"
}}ei.style.display=ej?"":"none"
}function cS(el,ej){if(ej.height==0){return 0
}var ei=ej.text.length,eh,em=ej;
while(eh=de(em)){var ek=eh.find();
em=dw(el,ek.from.line);
ei+=ek.from.ch-ek.to.ch
}em=ej;
while(eh=cX(em)){var ek=eh.find();
ei-=em.text.length-ek.from.ch;
em=dw(el,ek.to.line);
ei+=em.text.length-ek.to.ch
}return ei
}function d8(eh){var ej=eh.display,ei=eh.doc;
ej.maxLine=dw(ei,ei.first);
ej.maxLineLength=cS(ei,ej.maxLine);
ej.maxLineChanged=true;
ei.iter(function(el){var ek=cS(ei,el);
if(ek>ej.maxLineLength){ej.maxLineLength=ek;
ej.maxLine=el
}})
}function bt(eh){var ej=false;
for(var ei=0;
ei<eh.gutters.length;
++ei){if(eh.gutters[ei]=="CodeMirror-linenumbers"){if(eh.lineNumbers){ej=true
}else{eh.gutters.splice(ei--,1)
}}}if(!ej&&eh.lineNumbers){eh.gutters.push("CodeMirror-linenumbers")
}}function dk(eh){var en=eh.display,ei=eh.doc.height;
var ek=ei+a4(en);
en.sizer.style.minHeight=en.heightForcer.style.top=ek+"px";
en.gutters.style.height=Math.max(ek,en.scroller.clientHeight-aK)+"px";
var el=Math.max(ek,en.scroller.scrollHeight);
var em=en.scroller.scrollWidth>(en.scroller.clientWidth+1);
var ej=el>(en.scroller.clientHeight+1);
if(ej){en.scrollbarV.style.display="block";
en.scrollbarV.style.bottom=em?i(en.measure)+"px":"0";
en.scrollbarV.firstChild.style.height=(el-en.scroller.clientHeight+en.scrollbarV.clientHeight)+"px"
}else{en.scrollbarV.style.display=""
}if(em){en.scrollbarH.style.display="block";
en.scrollbarH.style.right=ej?i(en.measure)+"px":"0";
en.scrollbarH.firstChild.style.width=(en.scroller.scrollWidth-en.scroller.clientWidth+en.scrollbarH.clientWidth)+"px"
}else{en.scrollbarH.style.display=""
}if(em&&ej){en.scrollbarFiller.style.display="block";
en.scrollbarFiller.style.height=en.scrollbarFiller.style.width=i(en.measure)+"px"
}else{en.scrollbarFiller.style.display=""
}if(em&&eh.options.coverGutterNextToScrollbar&&eh.options.fixedGutter){en.gutterFiller.style.display="block";
en.gutterFiller.style.height=i(en.measure)+"px";
en.gutterFiller.style.width=en.gutters.offsetWidth+"px"
}else{en.gutterFiller.style.display=""
}if(bN&&i(en.measure)===0){en.scrollbarV.style.minWidth=en.scrollbarH.style.minHeight=b7?"18px":"12px"
}}function bk(em,el,ek){var ej=em.scroller.scrollTop,eh=em.wrapper.clientHeight;
if(typeof ek=="number"){ej=ek
}else{if(ek){ej=ek.top;
eh=ek.bottom-ek.top
}}ej=Math.floor(ej-dr(em));
var ei=Math.ceil(ej+eh);
return{from:a2(el,ej),to:a2(el,ei)}
}function c7(eh){var en=eh.display;
if(!en.alignWidgets&&(!en.gutters.firstChild||!eh.options.fixedGutter)){return
}var ek=cC(en)-en.scroller.scrollLeft+eh.doc.scrollLeft;
var em=en.gutters.offsetWidth,ej=ek+"px";
for(var eo=en.lineDiv.firstChild;
eo;
eo=eo.nextSibling){if(eo.alignable){for(var el=0,ei=eo.alignable;
el<ei.length;
++el){ei[el].style.left=ej
}}}if(eh.options.fixedGutter){en.gutters.style.left=(ek+em)+"px"
}}function cF(eh){if(!eh.options.lineNumbers){return false
}var em=eh.doc,ei=cV(eh.options,em.first+em.size-1),el=eh.display;
if(ei.length!=el.lineNumChars){var en=el.measure.appendChild(d6("div",[d6("div",ei)],"CodeMirror-linenumber CodeMirror-gutter-elt"));
var ej=en.firstChild.offsetWidth,ek=en.offsetWidth-ej;
el.lineGutter.style.width="";
el.lineNumInnerWidth=Math.max(ej,el.lineGutter.offsetWidth-ek);
el.lineNumWidth=el.lineNumInnerWidth+ek;
el.lineNumChars=el.lineNumInnerWidth?ei.length:-1;
el.lineGutter.style.width=el.lineNumWidth+"px";
return true
}return false
}function cV(eh,ei){return String(eh.lineNumberFormatter(ei+eh.firstLineNumber))
}function cC(eh){return al(eh.scroller).left-al(eh.sizer).left
}function cu(eh,ek,em,el){var ej=eh.display.showingFrom,eo=eh.display.showingTo,ei;
var en=bk(eh.display,eh.doc,em);
for(;
;
){if(!cd(eh,ek,en,el)){break
}el=false;
ei=true;
aZ(eh);
dk(eh);
if(em){em=Math.min(eh.display.scroller.scrollHeight-eh.display.scroller.clientHeight,typeof em=="number"?em:em.top)
}en=bk(eh.display,eh.doc,em);
if(en.from>=eh.display.showingFrom&&en.to<=eh.display.showingTo){break
}ek=[]
}if(ei){M(eh,"update",eh);
if(eh.display.showingFrom!=ej||eh.display.showingTo!=eo){M(eh,"viewportChange",eh,eh.display.showingFrom,eh.display.showingTo)
}}return ei
}function cd(el,ez,ei,ex){var er=el.display,eA=el.doc;
if(!er.wrapper.clientWidth){er.showingFrom=er.showingTo=eA.first;
er.viewOffset=0;
return
}if(!ex&&ez.length==0&&ei.from>er.showingFrom&&ei.to<er.showingTo){return
}if(cF(el)){ez=[{from:eA.first,to:eA.first+eA.size}]
}var ew=er.sizer.style.marginLeft=er.gutters.offsetWidth+"px";
er.scrollbarH.style.left=el.options.fixedGutter?ew:"0";
var ej=Infinity;
if(el.options.lineNumbers){for(var es=0;
es<ez.length;
++es){if(ez[es].diff){ej=ez[es].from;
break
}}}var ek=eA.first+eA.size;
var eq=Math.max(ei.from-el.options.viewportMargin,eA.first);
var eh=Math.min(ek,ei.to+el.options.viewportMargin);
if(er.showingFrom<eq&&eq-er.showingFrom<20){eq=Math.max(eA.first,er.showingFrom)
}if(er.showingTo>eh&&er.showingTo-eh<20){eh=Math.min(ek,er.showingTo)
}if(az){eq=a9(t(eA,dw(eA,eq)));
while(eh<ek&&dM(eA,dw(eA,eh))){++eh
}}var eu=[{from:Math.max(er.showingFrom,eA.first),to:Math.min(er.showingTo,ek)}];
if(eu[0].from>=eu[0].to){eu=[]
}else{eu=dG(eu,ez)
}if(az){for(var es=0;
es<eu.length;
++es){var en=eu[es],ev;
while(ev=cX(dw(eA,en.to-1))){var ey=ev.find().from.line;
if(ey>en.from){en.to=ey
}else{eu.splice(es--,1);
break
}}}}var ep=0;
for(var es=0;
es<eu.length;
++es){var en=eu[es];
if(en.from<eq){en.from=eq
}if(en.to>eh){en.to=eh
}if(en.from>=en.to){eu.splice(es--,1)
}else{ep+=en.to-en.from
}}if(!ex&&ep==eh-eq&&eq==er.showingFrom&&eh==er.showingTo){h(el);
return
}eu.sort(function(eC,eB){return eC.from-eB.from
});
try{var em=document.activeElement
}catch(et){}if(ep<(eh-eq)*0.7){er.lineDiv.style.display="none"
}bA(el,eq,eh,eu,ej);
er.lineDiv.style.display="";
if(em&&document.activeElement!=em&&em.offsetHeight){em.focus()
}var eo=eq!=er.showingFrom||eh!=er.showingTo||er.lastSizeC!=er.wrapper.clientHeight;
if(eo){er.lastSizeC=er.wrapper.clientHeight;
cN(el,400)
}er.showingFrom=eq;
er.showingTo=eh;
aB(el);
h(el);
return true
}function aB(ep){var em=ep.display;
var ei=em.lineDiv.offsetTop;
for(var eh=em.lineDiv.firstChild,eq;
eh;
eh=eh.nextSibling){if(eh.lineObj){if(bz){var el=eh.offsetTop+eh.offsetHeight;
eq=el-ei;
ei=el
}else{var ek=al(eh);
eq=ek.bottom-ek.top
}var eo=eh.lineObj.height-eq;
if(eq<2){eq=au(em)
}if(eo>0.001||eo<-0.001){ea(eh.lineObj,eq);
var en=eh.lineObj.widgets;
if(en){for(var ej=0;
ej<en.length;
++ej){en[ej].height=en[ej].node.offsetHeight
}}}}}}function h(eh){var ei=eh.display.viewOffset=a8(eh,dw(eh.doc,eh.display.showingFrom));
eh.display.mover.style.top=ei+"px"
}function dG(eq,eo){for(var el=0,ej=eo.length||0;
el<ej;
++el){var en=eo[el],eh=[],ep=en.diff||0;
for(var ek=0,ei=eq.length;
ek<ei;
++ek){var em=eq[ek];
if(en.to<=em.from&&en.diff){eh.push({from:em.from+ep,to:em.to+ep})
}else{if(en.to<=em.from||en.from>=em.to){eh.push(em)
}else{if(en.from>em.from){eh.push({from:em.from,to:en.from})
}if(en.to<em.to){eh.push({from:en.to+ep,to:em.to+ep})
}}}}eq=eh
}return eq
}function du(eh){var el=eh.display,ek={},ej={};
for(var em=el.gutters.firstChild,ei=0;
em;
em=em.nextSibling,++ei){ek[eh.options.gutters[ei]]=em.offsetLeft;
ej[eh.options.gutters[ei]]=em.offsetWidth
}return{fixedPos:cC(el),gutterTotalWidth:el.gutters.offsetWidth,gutterLeft:ek,gutterWidth:ej,wrapperWidth:el.wrapper.clientWidth}
}function bA(eq,en,eo,et,ei){var ep=du(eq);
var em=eq.display,es=eq.options.lineNumbers;
if(!et.length&&(!b2||!eq.display.currentWheelTarget)){cD(em.lineDiv)
}var eh=em.lineDiv,er=eh.firstChild;
function el(ev){var eu=ev.nextSibling;
if(b2&&bl&&eq.display.currentWheelTarget==ev){ev.style.display="none";
ev.lineObj=null
}else{ev.parentNode.removeChild(ev)
}return eu
}var ej=et.shift(),ek=en;
eq.doc.iter(en,eo,function(eD){if(ej&&ej.to==ek){ej=et.shift()
}if(dM(eq.doc,eD)){if(eD.height!=0){ea(eD,0)
}if(eD.widgets&&er.previousSibling){for(var ey=0;
ey<eD.widgets.length;
++ey){var eA=eD.widgets[ey];
if(eA.showIfHidden){var ew=er.previousSibling;
if(/pre/i.test(ew.nodeName)){var ev=d6("div",null,null,"position: relative");
ew.parentNode.replaceChild(ev,ew);
ev.appendChild(ew);
ew=ev
}var eB=ew.appendChild(d6("div",[eA.node],"CodeMirror-linewidget"));
if(!eA.handleMouseEvents){eB.ignoreEvents=true
}a1(eA,eB,ew,ep)
}}}}else{if(ej&&ej.from<=ek&&ej.to>ek){while(er.lineObj!=eD){er=el(er)
}if(es&&ei<=ek&&er.lineNumber){n(er.lineNumber,cV(eq.options,ek))
}er=er.nextSibling
}else{if(eD.widgets){for(var ex=0,eC=er,ez;
eC&&ex<20;
++ex,eC=eC.nextSibling){if(eC.lineObj==eD&&/div/i.test(eC.nodeName)){ez=eC;
break
}}}var eu=ag(eq,eD,ek,ep,ez);
if(eu!=ez){eh.insertBefore(eu,er)
}else{while(er!=ez){er=el(er)
}er=er.nextSibling
}eu.lineObj=eD
}}++ek
});
while(er){er=el(er)
}}function ag(em,eo,ep,es,ei){var ey=cx(em,eo);
var eB=eo.gutterMarkers,ez=em.display,en;
if(!em.options.lineNumbers&&!eB&&!eo.bgClass&&!eo.wrapClass&&!eo.widgets){return ey
}if(ei){ei.alignable=null;
var eC=true,ek=0,ej=null;
for(var eu=ei.firstChild,et;
eu;
eu=et){et=eu.nextSibling;
if(!/\bCodeMirror-linewidget\b/.test(eu.className)){ei.removeChild(eu)
}else{for(var eA=0;
eA<eo.widgets.length;
++eA){var el=eo.widgets[eA];
if(el.node==eu.firstChild){if(!el.above&&!ej){ej=eu
}a1(el,eu,ei,es);
++ek;
break
}}if(eA==eo.widgets.length){eC=false;
break
}}}ei.insertBefore(ey,ej);
if(eC&&ek==eo.widgets.length){en=ei;
ei.className=eo.wrapClass||""
}}if(!en){en=d6("div",null,eo.wrapClass,"position: relative");
en.appendChild(ey)
}if(eo.bgClass){en.insertBefore(d6("div",null,eo.bgClass+" CodeMirror-linebackground"),en.firstChild)
}if(em.options.lineNumbers||eB){var ew=en.insertBefore(d6("div",null,null,"position: absolute; left: "+(em.options.fixedGutter?es.fixedPos:-es.gutterTotalWidth)+"px"),en.firstChild);
if(em.options.fixedGutter){(en.alignable||(en.alignable=[])).push(ew)
}if(em.options.lineNumbers&&(!eB||!eB["CodeMirror-linenumbers"])){en.lineNumber=ew.appendChild(d6("div",cV(em.options,ep),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+es.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+ez.lineNumInnerWidth+"px"))
}if(eB){for(var ex=0;
ex<em.options.gutters.length;
++ex){var er=em.options.gutters[ex],eq=eB.hasOwnProperty(er)&&eB[er];
if(eq){ew.appendChild(d6("div",[eq],"CodeMirror-gutter-elt","left: "+es.gutterLeft[er]+"px; width: "+es.gutterWidth[er]+"px"))
}}}}if(bz){en.style.zIndex=2
}if(eo.widgets&&en!=ei){for(var eA=0,eh=eo.widgets;
eA<eh.length;
++eA){var el=eh[eA],ev=d6("div",[el.node],"CodeMirror-linewidget");
if(!el.handleMouseEvents){ev.ignoreEvents=true
}a1(el,ev,en,es);
if(el.above){en.insertBefore(ev,em.options.lineNumbers&&eo.height!=0?ew:ey)
}else{en.appendChild(ev)
}M(el,"redraw")
}}return en
}function a1(ek,ej,ei,el){if(ek.noHScroll){(ei.alignable||(ei.alignable=[])).push(ej);
var eh=el.wrapperWidth;
ej.style.left=el.fixedPos+"px";
if(!ek.coverGutter){eh-=el.gutterTotalWidth;
ej.style.paddingLeft=el.gutterTotalWidth+"px"
}ej.style.width=eh+"px"
}if(ek.coverGutter){ej.style.zIndex=5;
ej.style.position="relative";
if(!ek.noHScroll){ej.style.marginLeft=-el.gutterTotalWidth+"px"
}}}function aZ(eh){var ek=eh.display;
var el=dV(eh.doc.sel.from,eh.doc.sel.to);
if(el||eh.options.showCursorWhenSelecting){A(eh)
}else{ek.cursor.style.display=ek.otherCursor.style.display="none"
}if(!el){T(eh)
}else{ek.selectionDiv.style.display="none"
}if(eh.options.moveInputWithCursor){var em=cA(eh,eh.doc.sel.head,"div");
var ei=al(ek.wrapper),ej=al(ek.lineDiv);
ek.inputDiv.style.top=Math.max(0,Math.min(ek.wrapper.clientHeight-10,em.top+ej.top-ei.top))+"px";
ek.inputDiv.style.left=Math.max(0,Math.min(ek.wrapper.clientWidth-10,em.left+ej.left-ei.left))+"px"
}}function A(eh){var ei=eh.display,ej=cA(eh,eh.doc.sel.head,"div");
ei.cursor.style.left=ej.left+"px";
ei.cursor.style.top=ej.top+"px";
ei.cursor.style.height=Math.max(0,ej.bottom-ej.top)*eh.options.cursorHeight+"px";
ei.cursor.style.display="";
if(ej.other){ei.otherCursor.style.display="";
ei.otherCursor.style.left=ej.other.left+"px";
ei.otherCursor.style.top=ej.other.top+"px";
ei.otherCursor.style.height=(ej.other.bottom-ej.other.top)*0.85+"px"
}else{ei.otherCursor.style.display="none"
}}function T(es){var en=es.display,er=es.doc,eh=es.doc.sel;
var el=document.createDocumentFragment();
var eq=en.lineSpace.offsetWidth,ej=at(es.display);
function eu(ey,ex,ew,ev){if(ex<0){ex=0
}el.appendChild(d6("div",null,"CodeMirror-selected","position: absolute; left: "+ey+"px; top: "+ex+"px; width: "+(ew==null?eq-ey:ew)+"px; height: "+(ev-ex)+"px"))
}function ep(ew,ey,eB){var ex=dw(er,ew);
var ez=ex.text.length;
var eC,ev;
function eA(eE,eD){return bT(es,I(ew,eE),"div",ex,eD)
}cE(a(ex),ey||0,eB==null?ez:eB,function(eK,eJ,eD){var eG=eA(eK,"left"),eH,eI,eF;
if(eK==eJ){eH=eG;
eI=eF=eG.left
}else{eH=eA(eJ-1,"right");
if(eD=="rtl"){var eE=eG;
eG=eH;
eH=eE
}eI=eG.left;
eF=eH.right
}if(ey==null&&eK==0){eI=ej
}if(eH.top-eG.top>3){eu(eI,eG.top,null,eG.bottom);
eI=ej;
if(eG.bottom<eH.top){eu(eI,eG.bottom,null,eH.top)
}}if(eB==null&&eJ==ez){eF=eq
}if(!eC||eG.top<eC.top||eG.top==eC.top&&eG.left<eC.left){eC=eG
}if(!ev||eH.bottom>ev.bottom||eH.bottom==ev.bottom&&eH.right>ev.right){ev=eH
}if(eI<ej+1){eI=ej
}eu(eI,eH.top,eF-eI,eH.bottom)
});
return{start:eC,end:ev}
}if(eh.from.line==eh.to.line){ep(eh.from.line,eh.from.ch,eh.to.ch)
}else{var ek=dw(er,eh.from.line),ei=dw(er,eh.to.line);
var em=t(er,ek)==t(er,ei);
var et=ep(eh.from.line,eh.from.ch,em?ek.text.length:null).end;
var eo=ep(eh.to.line,em?0:null,eh.to.ch).start;
if(em){if(et.top<eo.top-2){eu(et.right,et.top,null,et.bottom);
eu(ej,eo.top,eo.left,eo.bottom)
}else{eu(et.right,et.top,eo.left-et.right,et.bottom)
}}if(et.bottom<eo.top){eu(ej,et.bottom,null,eo.top)
}}bd(en.selectionDiv,el);
en.selectionDiv.style.display=""
}function l(eh){if(!eh.state.focused){return
}var ej=eh.display;
clearInterval(ej.blinker);
var ei=true;
ej.cursor.style.visibility=ej.otherCursor.style.visibility="";
ej.blinker=setInterval(function(){ej.cursor.style.visibility=ej.otherCursor.style.visibility=(ei=!ei)?"":"hidden"
},eh.options.cursorBlinkRate)
}function cN(eh,ei){if(eh.doc.mode.startState&&eh.doc.frontier<eh.display.showingTo){eh.state.highlight.set(ei,bI(bX,eh))
}}function bX(eh){var ek=eh.doc;
if(ek.frontier<ek.first){ek.frontier=ek.first
}if(ek.frontier>=eh.display.showingTo){return
}var ei=+new Date+eh.options.workTime;
var ej=bj(ek.mode,cp(eh,ek.frontier));
var em=[],el;
ek.iter(ek.frontier,Math.min(ek.first+ek.size,eh.display.showingTo+500),function(en){if(ek.frontier>=eh.display.showingFrom){var ep=en.styles;
en.styles=dR(eh,en,ej);
var eq=!ep||ep.length!=en.styles.length;
for(var eo=0;
!eq&&eo<ep.length;
++eo){eq=ep[eo]!=en.styles[eo]
}if(eq){if(el&&el.end==ek.frontier){el.end++
}else{em.push(el={start:ek.frontier,end:ek.frontier+1})
}}en.stateAfter=bj(ek.mode,ej)
}else{cn(eh,en,ej);
en.stateAfter=ek.frontier%5==0?bj(ek.mode,ej):null
}++ek.frontier;
if(+new Date>ei){cN(eh,eh.options.workDelay);
return true
}});
if(em.length){b3(eh,function(){for(var en=0;
en<em.length;
++en){O(this,em[en].start,em[en].end)
}})()
}}function bK(en,eh,ek){var ei,el,em=en.doc;
for(var eq=eh,ej=eh-100;
eq>ej;
--eq){if(eq<=em.first){return em.first
}var ep=dw(em,eq-1);
if(ep.stateAfter&&(!ek||eq<=em.frontier)){return eq
}var eo=bc(ep.text,null,en.options.tabSize);
if(el==null||ei>eo){el=eq-1;
ei=eo
}}return el
}function cp(eh,en,ei){var el=eh.doc,ek=eh.display;
if(!el.mode.startState){return true
}var em=bK(eh,en,ei),ej=em>el.first&&dw(el,em-1).stateAfter;
if(!ej){ej=bi(el.mode)
}else{ej=bj(el.mode,ej)
}el.iter(em,en,function(eo){cn(eh,eo,ej);
var ep=em==en-1||em%5==0||em>=ek.showingFrom&&em<ek.showingTo;
eo.stateAfter=ep?bj(el.mode,ej):null;
++em
});
return ej
}function dr(eh){return eh.lineSpace.offsetTop
}function a4(eh){return eh.mover.offsetHeight-eh.lineSpace.offsetHeight
}function at(ei){var eh=bd(ei.measure,d6("pre",null,null,"text-align: left")).appendChild(d6("span","x"));
return eh.offsetLeft
}function cP(eh,ei,el,en,ej){var ek=-1;
en=en||a5(eh,ei);
for(var eo=el;
;
eo+=ek){var em=en[eo];
if(em){break
}if(ek<0&&eo==0){ek=1
}}ej=eo>el?"left":eo<el?"right":ej;
if(ej=="left"&&em.leftSide){em=em.leftSide
}else{if(ej=="right"&&em.rightSide){em=em.rightSide
}}return{left:eo<el?em.right:em.left,right:eo>el?em.left:em.right,top:em.top,bottom:em.bottom}
}function dq(eh,ei){var ek=eh.display.measureLineCache;
for(var el=0;
el<ek.length;
++el){var ej=ek[el];
if(ej.text==ei.text&&ej.markedSpans==ei.markedSpans&&eh.display.scroller.clientWidth==ej.width&&ej.classes==ei.textClass+"|"+ei.bgClass+"|"+ei.wrapClass){return ej
}}}function dZ(eh,ei){var ej=dq(eh,ei);
if(ej){ej.text=ej.measure=ej.markedSpans=null
}}function a5(eh,ei){var em=dq(eh,ei);
if(em){return em.measure
}var el=cc(eh,ei);
var ek=eh.display.measureLineCache;
var ej={text:ei.text,width:eh.display.scroller.clientWidth,markedSpans:ei.markedSpans,measure:el,classes:ei.textClass+"|"+ei.bgClass+"|"+ei.wrapClass};
if(ek.length==16){ek[++eh.display.measureLineCachePos%16]=ej
}else{ek.push(ej)
}return el
}function cc(eo,eq){var ew=eo.display,em=S(eq.text.length);
var et=cx(eo,eq,em,true);
if(ct&&!bz&&!eo.options.lineWrapping&&et.childNodes.length>100){var ej=document.createDocumentFragment();
var er=10,eu=et.childNodes.length;
for(var ey=0,es=Math.ceil(eu/er);
ey<es;
++ey){var ep=d6("div",null,null,"display: inline-block");
for(var ex=0;
ex<er&&eu;
++ex){ep.appendChild(et.firstChild);
--eu
}ej.appendChild(ep)
}et.appendChild(ej)
}bd(ew.measure,et);
var ei=al(ew.lineDiv);
var eh=[],eB=S(eq.text.length),eA=et.offsetHeight;
if(by&&ew.measure.first!=et){bd(ew.measure,et)
}function ez(eE){var eG=eE.top-ei.top,eI=eE.bottom-ei.top;
if(eI>eA){eI=eA
}if(eG<0){eG=0
}for(var eD=eh.length-2;
eD>=0;
eD-=2){var eF=eh[eD],eH=eh[eD+1];
if(eF>eI||eH<eG){continue
}if(eF<=eG&&eH>=eI||eG<=eF&&eI>=eH||Math.min(eI,eH)-Math.max(eG,eF)>=(eI-eG)>>1){eh[eD]=Math.min(eG,eF);
eh[eD+1]=Math.max(eI,eH);
break
}}if(eD<0){eD=eh.length;
eh.push(eG,eI)
}return{left:eE.left-ei.left,right:eE.right-ei.left,top:eD,bottom:null}
}function eC(eD){eD.bottom=eh[eD.top+1];
eD.top=eh[eD.top]
}for(var ey=0,el;
ey<em.length;
++ey){if(el=em[ey]){var ev=el,ek=null;
if(/\bCodeMirror-widget\b/.test(el.className)&&el.getClientRects){if(el.firstChild.nodeType==1){ev=el.firstChild
}var en=ev.getClientRects();
if(en.length>1){ek=eB[ey]=ez(en[0]);
ek.rightSide=ez(en[en.length-1])
}}if(!ek){ek=eB[ey]=ez(al(ev))
}if(el.measureRight){ek.right=al(el.measureRight).left
}if(el.leftSide){ek.leftSide=ez(al(el.leftSide))
}}}for(var ey=0,el;
ey<eB.length;
++ey){if(el=eB[ey]){eC(el);
if(el.leftSide){eC(el.leftSide)
}if(el.rightSide){eC(el.rightSide)
}}}return eB
}function c8(eh,ej){var eo=false;
if(ej.markedSpans){for(var ek=0;
ek<ej.markedSpans;
++ek){var em=ej.markedSpans[ek];
if(em.collapsed&&(em.to==null||em.to==ej.text.length)){eo=true
}}}var el=!eo&&dq(eh,ej);
if(el){return cP(eh,ej,ej.text.length,el.measure,"right").right
}var en=cx(eh,ej,null,true);
var ei=en.appendChild(aP(eh.display.measure));
bd(eh.display.measure,en);
return al(ei).right-al(eh.display.lineDiv).left
}function R(eh){eh.display.measureLineCache.length=eh.display.measureLineCachePos=0;
eh.display.cachedCharWidth=eh.display.cachedTextHeight=null;
if(!eh.options.lineWrapping){eh.display.maxLineChanged=true
}eh.display.lineNumChars=null
}function bH(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft
}function bG(){return window.pageYOffset||(document.documentElement||document.body).scrollTop
}function df(en,ek,em,ei){if(ek.widgets){for(var ej=0;
ej<ek.widgets.length;
++ej){if(ek.widgets[ej].above){var ep=b0(ek.widgets[ej]);
em.top+=ep;
em.bottom+=ep
}}}if(ei=="line"){return em
}if(!ei){ei="local"
}var el=a8(en,ek);
if(ei=="local"){el+=dr(en.display)
}else{el-=en.display.viewOffset
}if(ei=="page"||ei=="window"){var eh=al(en.display.lineSpace);
el+=eh.top+(ei=="window"?0:bG());
var eo=eh.left+(ei=="window"?0:bH());
em.left+=eo;
em.right+=eo
}em.top+=el;
em.bottom+=el;
return em
}function ee(ei,el,ej){if(ej=="div"){return el
}var en=el.left,em=el.top;
if(ej=="page"){en-=bH();
em-=bG()
}else{if(ej=="local"||!ej){var ek=al(ei.display.sizer);
en+=ek.left;
em+=ek.top
}}var eh=al(ei.display.lineSpace);
return{left:en-eh.left,top:em-eh.top}
}function bT(eh,el,ek,ej,ei){if(!ej){ej=dw(eh.doc,el.line)
}return df(eh,ej,cP(eh,ej,el.ch,null,ei),ek)
}function cA(eq,ep,ej,eo,em){eo=eo||dw(eq.doc,ep.line);
if(!em){em=a5(eq,eo)
}function el(eu,et){var es=cP(eq,eo,eu,em,et?"right":"left");
if(et){es.left=es.right
}else{es.right=es.left
}return df(eq,eo,es,ej)
}function er(ev,es){var et=en[es],eu=et.level%2;
if(ev==co(et)&&es&&et.level<en[es-1].level){et=en[--es];
ev=ed(et)-(et.level%2?0:1);
eu=true
}else{if(ev==ed(et)&&es<en.length-1&&et.level<en[es+1].level){et=en[++es];
ev=co(et)-et.level%2;
eu=false
}}if(eu&&ev==et.to&&ev>et.from){return el(ev-1)
}return el(ev,eu)
}var en=a(eo),eh=ep.ch;
if(!en){return el(eh)
}var ei=ah(en,eh);
var ek=er(eh,ei);
if(dn!=null){ek.other=er(eh,dn)
}return ek
}function d5(eh,ei,ej,el){var ek=new I(eh,ei);
ek.xRel=el;
if(ej){ek.outside=true
}return ek
}function d0(eo,el,ek){var en=eo.doc;
ek+=eo.display.viewOffset;
if(ek<0){return d5(en.first,0,true,-1)
}var ei=a2(en,ek),ep=en.first+en.size-1;
if(ei>ep){return d5(en.first+en.size-1,dw(en,ep).text.length,true,1)
}if(el<0){el=0
}for(;
;
){var ej=dw(en,ei);
var eq=b1(eo,ej,ei,el,ek);
var em=cX(ej);
var eh=em&&em.find();
if(em&&(eq.ch>eh.from.ch||eq.ch==eh.from.ch&&eq.xRel>0)){ei=eh.to.line
}else{return eq
}}}function b1(er,ej,eu,et,es){var eq=es-a8(er,ej);
var en=false,eA=2*er.display.wrapper.clientWidth;
var ez=a5(er,ej);
function eE(eG){var eH=cA(er,I(eu,eG),"line",ej,ez);
en=true;
if(eq>eH.bottom){return eH.left-eA
}else{if(eq<eH.top){return eH.left+eA
}else{en=false
}}return eH.left
}var ew=a(ej),ey=ej.text.length;
var eB=bO(ej),ek=bY(ej);
var ex=eE(eB),eh=en,ei=eE(ek),em=en;
if(et>ei){return d5(eu,ek,em,1)
}for(;
;
){if(ew?ek==eB||ek==q(ej,eB,1):ek-eB<=1){var ev=et<ex||et-ex<=ei-et?eB:ek;
var eD=et-(ev==eB?ex:ei);
while(dI.test(ej.text.charAt(ev))){++ev
}var ep=d5(eu,ev,ev==eB?eh:em,eD<0?-1:eD?1:0);
return ep
}var eo=Math.ceil(ey/2),eF=eB+eo;
if(ew){eF=eB;
for(var eC=0;
eC<eo;
++eC){eF=q(ej,eF,1)
}}var el=eE(eF);
if(el>et){ek=eF;
ei=el;
if(em=en){ei+=1000
}ey=eo
}else{eB=eF;
ex=el;
eh=en;
ey-=eo
}}}var ai;
function au(ej){if(ej.cachedTextHeight!=null){return ej.cachedTextHeight
}if(ai==null){ai=d6("pre");
for(var ei=0;
ei<49;
++ei){ai.appendChild(document.createTextNode("x"));
ai.appendChild(d6("br"))
}ai.appendChild(document.createTextNode("x"))
}bd(ej.measure,ai);
var eh=ai.offsetHeight/50;
if(eh>3){ej.cachedTextHeight=eh
}cD(ej.measure);
return eh||1
}function cr(ek){if(ek.cachedCharWidth!=null){return ek.cachedCharWidth
}var eh=d6("span","x");
var ej=d6("pre",[eh]);
bd(ek.measure,ej);
var ei=eh.offsetWidth;
if(ei>2){ek.cachedCharWidth=ei
}return ei||10
}var cH=0;
function bS(eh){eh.curOp={changes:[],forceUpdate:false,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:false,cursorActivity:false,updateMaxLine:false,updateScrollPos:false,id:++cH};
if(!bF++){aO=[]
}}function U(et){var eo=et.curOp,es=et.doc,ep=et.display;
et.curOp=null;
if(eo.updateMaxLine){d8(et)
}if(ep.maxLineChanged&&!et.options.lineWrapping&&ep.maxLine){var ei=c8(et,ep.maxLine);
ep.sizer.style.minWidth=Math.max(0,ei+3+aK)+"px";
ep.maxLineChanged=false;
var eq=Math.max(0,ep.sizer.offsetLeft+ep.sizer.offsetWidth-ep.scroller.clientWidth);
if(eq<es.scrollLeft&&!eo.updateScrollPos){a0(et,Math.min(ep.scroller.scrollLeft,eq),true)
}}var ej,em;
if(eo.updateScrollPos){ej=eo.updateScrollPos
}else{if(eo.selectionChanged&&ep.scroller.clientHeight){var er=cA(et,es.sel.head);
ej=y(et,er.left,er.top,er.left,er.bottom)
}}if(eo.changes.length||eo.forceUpdate||ej&&ej.scrollTop!=null){em=cu(et,eo.changes,ej&&ej.scrollTop,eo.forceUpdate);
if(et.display.scroller.offsetHeight){et.doc.scrollTop=et.display.scroller.scrollTop
}}if(!em&&eo.selectionChanged){aZ(et)
}if(eo.updateScrollPos){ep.scroller.scrollTop=ep.scrollbarV.scrollTop=es.scrollTop=ej.scrollTop;
ep.scroller.scrollLeft=ep.scrollbarH.scrollLeft=es.scrollLeft=ej.scrollLeft;
c7(et);
if(eo.scrollToPos){v(et,dW(et.doc,eo.scrollToPos),eo.scrollToPosMargin)
}}else{if(ej){ac(et)
}}if(eo.selectionChanged){l(et)
}if(et.state.focused&&eo.updateInput){dH(et,eo.userSelChange)
}var en=eo.maybeHiddenMarkers,eh=eo.maybeUnhiddenMarkers;
if(en){for(var el=0;
el<en.length;
++el){if(!en[el].lines.length){af(en[el],"hide")
}}}if(eh){for(var el=0;
el<eh.length;
++el){if(eh[el].lines.length){af(eh[el],"unhide")
}}}var ek;
if(!--bF){ek=aO;
aO=null
}if(eo.textChanged){af(et,"change",et,eo.textChanged)
}if(eo.cursorActivity){af(et,"cursorActivity",et)
}if(ek){for(var el=0;
el<ek.length;
++el){ek[el]()
}}}function b3(eh,ei){return function(){var ek=eh||this,el=!ek.curOp;
if(el){bS(ek)
}try{var ej=ei.apply(ek,arguments)
}finally{if(el){U(ek)
}}return ej
}
}function dQ(eh){return function(){var ej=this.cm&&!this.cm.curOp,ei;
if(ej){bS(this.cm)
}try{ei=eh.apply(this,arguments)
}finally{if(ej){U(this.cm)
}}return ei
}
}function bV(ei,ek){var ej=!ei.curOp,eh;
if(ej){bS(ei)
}try{eh=ek()
}finally{if(ej){U(ei)
}}return eh
}function O(eh,ek,ej,ei){if(ek==null){ek=eh.doc.first
}if(ej==null){ej=eh.doc.first+eh.doc.size
}eh.curOp.changes.push({from:ek,to:ej,diff:ei})
}function aN(eh){if(eh.display.pollingFast){return
}eh.display.poll.set(eh.options.pollInterval,function(){bv(eh);
if(eh.state.focused){aN(eh)
}})
}function u(eh){var ei=false;
eh.display.pollingFast=true;
function ej(){var ek=bv(eh);
if(!ek&&!ei){ei=true;
eh.display.poll.set(60,ej)
}else{eh.display.pollingFast=false;
aN(eh)
}}eh.display.poll.set(20,ej)
}function bv(es){var en=es.display.input,ek=es.display.prevInput,er=es.doc,eh=er.sel;
if(!es.state.focused||aT(en)||Q(es)||es.state.disableInput){return false
}var et=en.value;
if(et==ek&&dV(eh.from,eh.to)){return false
}if(ct&&!by&&es.display.inputHasSelection===et){dH(es,true);
return false
}var ej=!es.curOp;
if(ej){bS(es)
}eh.shift=false;
var em=0,ei=Math.min(ek.length,et.length);
while(em<ei&&ek.charCodeAt(em)==et.charCodeAt(em)){++em
}var eq=eh.from,ep=eh.to;
if(em<ek.length){eq=I(eq.line,eq.ch-(ek.length-em))
}else{if(es.state.overwrite&&dV(eq,ep)&&!es.state.pasteIncoming){ep=I(ep.line,Math.min(dw(er,ep.line).text.length,ep.ch+(et.length-em)))
}}var el=es.curOp.updateInput;
var eo={from:eq,to:ep,text:aw(et.slice(em)),origin:es.state.pasteIncoming?"paste":"+input"};
aH(es.doc,eo,"end");
es.curOp.updateInput=el;
M(es,"inputRead",es,eo);
if(et.length>1000||et.indexOf("\n")>-1){en.value=es.display.prevInput=""
}else{es.display.prevInput=et
}if(ej){U(es)
}es.state.pasteIncoming=false;
return true
}function dH(eh,ej){var ei,ek,em=eh.doc;
if(!dV(em.sel.from,em.sel.to)){eh.display.prevInput="";
ei=b9&&(em.sel.to.line-em.sel.from.line>100||(ek=eh.getSelection()).length>1000);
var el=ei?"-":ek||eh.getSelection();
eh.display.input.value=el;
if(eh.state.focused){cv(eh.display.input)
}if(ct&&!by){eh.display.inputHasSelection=el
}}else{if(ej){eh.display.prevInput=eh.display.input.value="";
if(ct&&!by){eh.display.inputHasSelection=null
}}}eh.display.inaccurateSelection=ei
}function c3(eh){if(eh.options.readOnly!="nocursor"&&(!cO||document.activeElement!=eh.display.input)){eh.display.input.focus()
}}function Q(eh){return eh.options.readOnly||eh.doc.cantEdit
}function d1(ei){var en=ei.display;
bg(en.scroller,"mousedown",b3(ei,cW));
if(ct){bg(en.scroller,"dblclick",b3(ei,function(eq){if(ap(ei,eq)){return
}var er=bB(ei,eq);
if(!er||k(ei,eq)||aC(ei.display,eq)){return
}bP(eq);
var ep=Z(dw(ei.doc,er.line).text,er);
d3(ei.doc,ep.from,ep.to)
}))
}else{bg(en.scroller,"dblclick",function(ep){ap(ei,ep)||bP(ep)
})
}bg(en.lineSpace,"selectstart",function(ep){if(!aC(en,ep)){bP(ep)
}});
if(!bR){bg(en.scroller,"contextmenu",function(ep){ab(ei,ep)
})
}bg(en.scroller,"scroll",function(){if(en.scroller.clientHeight){D(ei,en.scroller.scrollTop);
a0(ei,en.scroller.scrollLeft,true);
af(ei,"scroll",ei)
}});
bg(en.scrollbarV,"scroll",function(){if(en.scroller.clientHeight){D(ei,en.scrollbarV.scrollTop)
}});
bg(en.scrollbarH,"scroll",function(){if(en.scroller.clientHeight){a0(ei,en.scrollbarH.scrollLeft)
}});
bg(en.scroller,"mousewheel",function(ep){b(ei,ep)
});
bg(en.scroller,"DOMMouseScroll",function(ep){b(ei,ep)
});
function eo(){if(ei.state.focused){setTimeout(bI(c3,ei),0)
}}bg(en.scrollbarH,"mousedown",eo);
bg(en.scrollbarV,"mousedown",eo);
bg(en.wrapper,"scroll",function(){en.wrapper.scrollTop=en.wrapper.scrollLeft=0
});
var eh;
function el(){if(eh==null){eh=setTimeout(function(){eh=null;
en.cachedCharWidth=en.cachedTextHeight=cY=null;
R(ei);
bV(ei,bI(O,ei))
},100)
}}bg(window,"resize",el);
function ek(){for(var ep=en.wrapper.parentNode;
ep&&ep!=document.body;
ep=ep.parentNode){}if(ep){setTimeout(ek,5000)
}else{cM(window,"resize",el)
}}setTimeout(ek,5000);
bg(en.input,"keyup",b3(ei,function(ep){if(ap(ei,ep)||ei.options.onKeyEvent&&ei.options.onKeyEvent(ei,W(ep))){return
}if(ep.keyCode==16){ei.doc.sel.shift=false
}}));
bg(en.input,"input",bI(u,ei));
bg(en.input,"keydown",b3(ei,m));
bg(en.input,"keypress",b3(ei,bJ));
bg(en.input,"focus",bI(bM,ei));
bg(en.input,"blur",bI(ar,ei));
function ej(ep){if(ap(ei,ep)||ei.options.onDragEvent&&ei.options.onDragEvent(ei,W(ep))){return
}cU(ep)
}if(ei.options.dragDrop){bg(en.scroller,"dragstart",function(ep){G(ei,ep)
});
bg(en.scroller,"dragenter",ej);
bg(en.scroller,"dragover",ej);
bg(en.scroller,"drop",b3(ei,aJ))
}bg(en.scroller,"paste",function(ep){if(aC(en,ep)){return
}c3(ei);
u(ei)
});
bg(en.input,"paste",function(){ei.state.pasteIncoming=true;
u(ei)
});
function em(){if(en.inaccurateSelection){en.prevInput="";
en.inaccurateSelection=false;
en.input.value=ei.getSelection();
cv(en.input)
}}bg(en.input,"cut",em);
bg(en.input,"copy",em);
if(aD){bg(en.sizer,"mouseup",function(){if(document.activeElement==en.input){en.input.blur()
}c3(ei)
})
}}function aC(ei,eh){for(var ej=B(eh);
ej!=ei.wrapper;
ej=ej.parentNode){if(!ej||ej.ignoreEvents||ej.parentNode==ei.sizer&&ej!=ei.mover){return true
}}}function bB(ei,en,ek){var em=ei.display;
if(!ek){var el=B(en);
if(el==em.scrollbarH||el==em.scrollbarH.firstChild||el==em.scrollbarV||el==em.scrollbarV.firstChild||el==em.scrollbarFiller||el==em.gutterFiller){return null
}}var eh,eo,ej=al(em.lineSpace);
try{eh=en.clientX;
eo=en.clientY
}catch(en){return null
}return d0(ei,eh-ej.left,eo-ej.top)
}var cg,cb;
function cW(ez){if(ap(this,ez)){return
}var ek=this,eu=ek.display,eB=ek.doc,es=eB.sel;
es.shift=ez.shiftKey;
if(aC(eu,ez)){if(!b2){eu.scroller.draggable=false;
setTimeout(function(){eu.scroller.draggable=true
},100)
}return
}if(k(ek,ez)){return
}var ej=bB(ek,ez);
switch(dY(ez)){case 3:if(bR){ab.call(ek,ek,ez)
}return;
case 2:if(ej){d3(ek.doc,ej)
}setTimeout(bI(c3,ek),20);
bP(ez);
return
}if(!ej){if(B(ez)==eu.scroller){bP(ez)
}return
}if(!ek.state.focused){bM(ek)
}var eh=+new Date,ei="single";
if(cb&&cb.time>eh-400&&dV(cb.pos,ej)){ei="triple";
bP(ez);
setTimeout(bI(c3,ek),20);
aM(ek,ej.line)
}else{if(cg&&cg.time>eh-400&&dV(cg.pos,ej)){ei="double";
cb={time:eh,pos:ej};
bP(ez);
var ew=Z(dw(eB,ej.line).text,ej);
d3(ek.doc,ew.from,ew.to)
}else{cg={time:eh,pos:ej}
}}var el=ej;
if(ek.options.dragDrop&&dd&&!Q(ek)&&!dV(es.from,es.to)&&!dx(ej,es.from)&&!dx(es.to,ej)&&ei=="single"){var ev=b3(ek,function(eC){if(b2){eu.scroller.draggable=false
}ek.state.draggingText=false;
cM(document,"mouseup",ev);
cM(eu.scroller,"drop",ev);
if(Math.abs(ez.clientX-eC.clientX)+Math.abs(ez.clientY-eC.clientY)<10){bP(eC);
d3(ek.doc,ej);
c3(ek)
}});
if(b2){eu.scroller.draggable=true
}ek.state.draggingText=ev;
if(eu.scroller.dragDrop){eu.scroller.dragDrop()
}bg(document,"mouseup",ev);
bg(eu.scroller,"drop",ev);
return
}bP(ez);
if(ei=="single"){d3(ek.doc,dW(eB,ej))
}var eA=es.from,ep=es.to,et=ej;
function ex(eD){if(dV(et,eD)){return
}et=eD;
if(ei=="single"){d3(ek.doc,dW(eB,ej),eD);
return
}eA=dW(eB,eA);
ep=dW(eB,ep);
if(ei=="double"){var eC=Z(dw(eB,eD.line).text,eD);
if(dx(eD,eA)){d3(ek.doc,eC.from,ep)
}else{d3(ek.doc,eA,eC.to)
}}else{if(ei=="triple"){if(dx(eD,eA)){d3(ek.doc,ep,dW(eB,I(eD.line,0)))
}else{d3(ek.doc,eA,dW(eB,I(eD.line+1,0)))
}}}}var eq=al(eu.wrapper);
var em=0;
function ey(eE){var eC=++em;
var eG=bB(ek,eE,true);
if(!eG){return
}if(!dV(eG,el)){if(!ek.state.focused){bM(ek)
}el=eG;
ex(eG);
var eF=bk(eu,eB);
if(eG.line>=eF.to||eG.line<eF.from){setTimeout(b3(ek,function(){if(em==eC){ey(eE)
}}),150)
}}else{var eD=eE.clientY<eq.top?-20:eE.clientY>eq.bottom?20:0;
if(eD){setTimeout(b3(ek,function(){if(em!=eC){return
}eu.scroller.scrollTop+=eD;
ey(eE)
}),50)
}}}function eo(eC){em=Infinity;
bP(eC);
c3(ek);
cM(document,"mousemove",er);
cM(document,"mouseup",en)
}var er=b3(ek,function(eC){if(!ct&&!dY(eC)){eo(eC)
}else{ey(eC)
}});
var en=b3(ek,eo);
bg(document,"mousemove",er);
bg(document,"mouseup",en)
}function k(ep,en){var eo=ep.display;
try{var ei=en.clientX,eh=en.clientY
}catch(en){return false
}if(ei>=Math.floor(al(eo.gutters).right)){return false
}bP(en);
if(!dC(ep,"gutterClick")){return true
}var em=al(eo.lineDiv);
if(eh>em.bottom){return true
}eh-=em.top-eo.viewOffset;
for(var ek=0;
ek<ep.options.gutters.length;
++ek){var el=eo.gutters.childNodes[ek];
if(el&&al(el).right>=ei){var eq=a2(ep.doc,eh);
var ej=ep.options.gutters[ek];
M(ep,"gutterClick",ep,eq,ej,en);
break
}}return true
}var N=0;
function aJ(en){var ep=this;
if(ap(ep,en)||aC(ep.display,en)||(ep.options.onDragEvent&&ep.options.onDragEvent(ep,W(en)))){return
}bP(en);
if(ct){N=+new Date
}var eo=bB(ep,en,true),eh=en.dataTransfer.files;
if(!eo||Q(ep)){return
}if(eh&&eh.length&&window.FileReader&&window.File){var ej=eh.length,er=Array(ej),ei=0;
var ek=function(eu,et){var es=new FileReader;
es.onload=function(){er[et]=es.result;
if(++ei==ej){eo=dW(ep.doc,eo);
aH(ep.doc,{from:eo,to:eo,text:aw(er.join("\n")),origin:"paste"},"around")
}};
es.readAsText(eu)
};
for(var el=0;
el<ej;
++el){ek(eh[el],el)
}}else{if(ep.state.draggingText&&!(dx(eo,ep.doc.sel.from)||dx(ep.doc.sel.to,eo))){ep.state.draggingText(en);
setTimeout(bI(c3,ep),20);
return
}try{var er=en.dataTransfer.getData("Text");
if(er){var eq=ep.doc.sel.from,em=ep.doc.sel.to;
be(ep.doc,eo,eo);
if(ep.state.draggingText){ax(ep.doc,"",eq,em,"paste")
}ep.replaceSelection(er,null,"paste");
c3(ep);
bM(ep)
}}catch(en){}}}function G(ei,ek){if(ct&&(!ei.state.draggingText||+new Date-N<100)){cU(ek);
return
}if(ap(ei,ek)||aC(ei.display,ek)){return
}var eh=ei.getSelection();
ek.dataTransfer.setData("Text",eh);
if(ek.dataTransfer.setDragImage&&!ae){var ej=d6("img",null,null,"position: fixed; left: 0; top: 0;");
if(dO){ej.width=ej.height=1;
ei.display.wrapper.appendChild(ej);
ej._top=ej.offsetTop
}ek.dataTransfer.setDragImage(ej,0,0);
if(dO){ej.parentNode.removeChild(ej)
}}}function D(eh,ei){if(Math.abs(eh.doc.scrollTop-ei)<2){return
}eh.doc.scrollTop=ei;
if(!bC){cu(eh,[],ei)
}if(eh.display.scroller.scrollTop!=ei){eh.display.scroller.scrollTop=ei
}if(eh.display.scrollbarV.scrollTop!=ei){eh.display.scrollbarV.scrollTop=ei
}if(bC){cu(eh,[])
}cN(eh,100)
}function a0(eh,ej,ei){if(ei?ej==eh.doc.scrollLeft:Math.abs(eh.doc.scrollLeft-ej)<2){return
}ej=Math.min(ej,eh.display.scroller.scrollWidth-eh.display.scroller.clientWidth);
eh.doc.scrollLeft=ej;
c7(eh);
if(eh.display.scroller.scrollLeft!=ej){eh.display.scroller.scrollLeft=ej
}if(eh.display.scrollbarH.scrollLeft!=ej){eh.display.scrollbarH.scrollLeft=ej
}}var dD=0,bu=null;
if(ct){bu=-0.53
}else{if(bC){bu=15
}else{if(ca){bu=-0.7
}else{if(ae){bu=-1/3
}}}}function b(en,ei){var eq=ei.wheelDeltaX,ep=ei.wheelDeltaY;
if(eq==null&&ei.detail&&ei.axis==ei.HORIZONTAL_AXIS){eq=ei.detail
}if(ep==null&&ei.detail&&ei.axis==ei.VERTICAL_AXIS){ep=ei.detail
}else{if(ep==null){ep=ei.wheelDelta
}}var ek=en.display,em=ek.scroller;
if(!(eq&&em.scrollWidth>em.clientWidth||ep&&em.scrollHeight>em.clientHeight)){return
}if(ep&&bl&&b2){for(var eo=ei.target;
eo!=em;
eo=eo.parentNode){if(eo.lineObj){en.display.currentWheelTarget=eo;
break
}}}if(eq&&!bC&&!dO&&bu!=null){if(ep){D(en,Math.max(0,Math.min(em.scrollTop+ep*bu,em.scrollHeight-em.clientHeight)))
}a0(en,Math.max(0,Math.min(em.scrollLeft+eq*bu,em.scrollWidth-em.clientWidth)));
bP(ei);
ek.wheelStartX=null;
return
}if(ep&&bu!=null){var eh=ep*bu;
var el=en.doc.scrollTop,ej=el+ek.wrapper.clientHeight;
if(eh<0){el=Math.max(0,el+eh-50)
}else{ej=Math.min(en.doc.height,ej+eh+50)
}cu(en,[],{top:el,bottom:ej})
}if(dD<20){if(ek.wheelStartX==null){ek.wheelStartX=em.scrollLeft;
ek.wheelStartY=em.scrollTop;
ek.wheelDX=eq;
ek.wheelDY=ep;
setTimeout(function(){if(ek.wheelStartX==null){return
}var er=em.scrollLeft-ek.wheelStartX;
var et=em.scrollTop-ek.wheelStartY;
var es=(et&&ek.wheelDY&&et/ek.wheelDY)||(er&&ek.wheelDX&&er/ek.wheelDX);
ek.wheelStartX=ek.wheelStartY=null;
if(!es){return
}bu=(bu*dD+es)/(dD+1);
++dD
},200)
}else{ek.wheelDX+=eq;
ek.wheelDY+=ep
}}}function d2(ei,el,eh){if(typeof el=="string"){el=c5[el];
if(!el){return false
}}if(ei.display.pollingFast&&bv(ei)){ei.display.pollingFast=false
}var em=ei.doc,ek=em.sel.shift,ej=false;
try{if(Q(ei)){ei.state.suppressEdits=true
}if(eh){em.sel.shift=false
}ej=el(ei)!=bq
}finally{em.sel.shift=ek;
ei.state.suppressEdits=false
}return ej
}function ck(eh){var ei=eh.state.keyMaps.slice(0);
if(eh.options.extraKeys){ei.push(eh.options.extraKeys)
}ei.push(eh.options.keyMap);
return ei
}var X;
function dA(eh,en){var ei=d4(eh.options.keyMap),el=ei.auto;
clearTimeout(X);
if(el&&!c4(en)){X=setTimeout(function(){if(d4(eh.options.keyMap)==ei){eh.options.keyMap=(el.call?el.call(null,eh):el);
ef(eh)
}},50)
}var ek=dJ(en,true),em=false;
if(!ek){return false
}var ej=ck(eh);
if(en.shiftKey){em=g("Shift-"+ek,ej,function(eo){return d2(eh,eo,true)
})||g(ek,ej,function(eo){if(typeof eo=="string"?/^go[A-Z]/.test(eo):eo.motion){return d2(eh,eo)
}})
}else{em=g(ek,ej,function(eo){return d2(eh,eo)
})
}if(em){bP(en);
l(eh);
if(by){en.oldKeyCode=en.keyCode;
en.keyCode=0
}M(eh,"keyHandled",eh,ek,en)
}return em
}function cQ(eh,ek,ei){var ej=g("'"+ei+"'",ck(eh),function(el){return d2(eh,el,true)
});
if(ej){bP(ek);
l(eh);
M(eh,"keyHandled",eh,"'"+ei+"'",ek)
}return ej
}var cf=null;
function m(ek){var eh=this;
if(!eh.state.focused){bM(eh)
}if(ct&&ek.keyCode==27){ek.returnValue=false
}if(ap(eh,ek)||eh.options.onKeyEvent&&eh.options.onKeyEvent(eh,W(ek))){return
}var ei=ek.keyCode;
eh.doc.sel.shift=ei==16||ek.shiftKey;
var ej=dA(eh,ek);
if(dO){cf=ej?ei:null;
if(!ej&&ei==88&&!b9&&(bl?ek.metaKey:ek.ctrlKey)){eh.replaceSelection("")
}}}function bJ(el){var eh=this;
if(ap(eh,el)||eh.options.onKeyEvent&&eh.options.onKeyEvent(eh,W(el))){return
}var ek=el.keyCode,ei=el.charCode;
if(dO&&ek==cf){cf=null;
bP(el);
return
}if(((dO&&(!el.which||el.which<10))||aD)&&dA(eh,el)){return
}var ej=String.fromCharCode(ei==null?ek:ei);
if(this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!Q(this)&&this.doc.mode.electricChars.indexOf(ej)>-1){setTimeout(b3(eh,function(){L(eh,eh.doc.sel.to.line,"smart")
}),75)
}if(cQ(eh,el,ej)){return
}if(ct&&!by){eh.display.inputHasSelection=null
}u(eh)
}function bM(eh){if(eh.options.readOnly=="nocursor"){return
}if(!eh.state.focused){af(eh,"focus",eh);
eh.state.focused=true;
if(eh.display.wrapper.className.search(/\bCodeMirror-focused\b/)==-1){eh.display.wrapper.className+=" CodeMirror-focused"
}dH(eh,true)
}aN(eh);
l(eh)
}function ar(eh){if(eh.state.focused){af(eh,"blur",eh);
eh.state.focused=false;
eh.display.wrapper.className=eh.display.wrapper.className.replace(" CodeMirror-focused","")
}clearInterval(eh.display.blinker);
setTimeout(function(){if(!eh.state.focused){eh.doc.sel.shift=false
}},150)
}var dS;
function ab(eq,el){if(ap(eq,el,"contextmenu")){return
}var en=eq.display,ei=eq.doc.sel;
if(aC(en,el)){return
}var ep=bB(eq,el),eh=en.scroller.scrollTop;
if(!ep||dO){return
}if(dV(ei.from,ei.to)||dx(ep,ei.from)||!dx(ep,ei.to)){b3(eq,be)(eq.doc,ep,ep)
}var em=en.input.style.cssText;
en.inputDiv.style.position="absolute";
en.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(el.clientY-5)+"px; left: "+(el.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);";
c3(eq);
dH(eq,true);
if(dV(ei.from,ei.to)){en.input.value=en.prevInput=" "
}function ek(){if(en.input.selectionStart!=null){var er=en.input.value=" "+(dV(ei.from,ei.to)?"":en.input.value);
en.prevInput=" ";
en.input.selectionStart=1;
en.input.selectionEnd=er.length
}}function eo(){en.inputDiv.style.position="relative";
en.input.style.cssText=em;
if(by){en.scrollbarV.scrollTop=en.scroller.scrollTop=eh
}aN(eq);
if(en.input.selectionStart!=null){if(!ct||by){ek()
}clearTimeout(dS);
var er=0,es=function(){if(en.prevInput==" "&&en.input.selectionStart==0){b3(eq,c5.selectAll)(eq)
}else{if(er++<10){dS=setTimeout(es,500)
}else{dH(eq)
}}};
dS=setTimeout(es,200)
}}if(ct&&!by){ek()
}if(bR){cU(el);
var ej=function(){cM(window,"mouseup",ej);
setTimeout(eo,20)
};
bg(window,"mouseup",ej)
}else{setTimeout(eo,50)
}}var bZ=z.changeEnd=function(eh){if(!eh.text){return eh.to
}return I(eh.from.line+eh.text.length-1,dU(eh.text).length+(eh.text.length==1?eh.from.ch:0))
};
function c6(el,en,em){if(!dx(en.from,em)){return dW(el,em)
}var ek=(en.text.length-1)-(en.to.line-en.from.line);
if(em.line>en.to.line+ek){var ej=em.line-ek,ei=el.first+el.size-1;
if(ej>ei){return I(ei,dw(el,ei).text.length)
}return dK(em,dw(el,ej).text.length)
}if(em.line==en.to.line+ek){return dK(em,dU(en.text).length+(en.text.length==1?en.from.ch:0)+dw(el,en.to.line).text.length-en.to.ch)
}var eh=em.line-en.from.line;
return dK(em,en.text[eh].length+(eh?0:en.from.ch))
}function dB(ei,el,ej){if(ej&&typeof ej=="object"){return{anchor:c6(ei,el,ej.anchor),head:c6(ei,el,ej.head)}
}if(ej=="start"){return{anchor:el.from,head:el.from}
}var eh=bZ(el);
if(ej=="around"){return{anchor:el.from,head:eh}
}if(ej=="end"){return{anchor:eh,head:eh}
}var ek=function(eo){if(dx(eo,el.from)){return eo
}if(!dx(el.to,eo)){return eh
}var em=eo.line+el.text.length-(el.to.line-el.from.line)-1,en=eo.ch;
if(eo.line==el.to.line){en+=eh.ch-el.to.ch
}return I(em,en)
};
return{anchor:ek(ei.sel.anchor),head:ek(ei.sel.head)}
}function cz(ei,ek,ej){var eh={canceled:false,from:ek.from,to:ek.to,text:ek.text,origin:ek.origin,cancel:function(){this.canceled=true
}};
if(ej){eh.update=function(eo,en,em,el){if(eo){this.from=dW(ei,eo)
}if(en){this.to=dW(ei,en)
}if(em){this.text=em
}if(el!==undefined){this.origin=el
}}
}af(ei,"beforeChange",ei,eh);
if(ei.cm){af(ei.cm,"beforeChange",ei.cm,eh)
}if(eh.canceled){return null
}return{from:eh.from,to:eh.to,text:eh.text,origin:eh.origin}
}function aH(ek,em,el,ej){if(ek.cm){if(!ek.cm.curOp){return b3(ek.cm,aH)(ek,em,el,ej)
}if(ek.cm.state.suppressEdits){return
}}if(dC(ek,"beforeChange")||ek.cm&&dC(ek.cm,"beforeChange")){em=cz(ek,em,true);
if(!em){return
}}var ei=ec&&!ej&&bQ(ek,em.from,em.to);
if(ei){for(var eh=ei.length-1;
eh>=1;
--eh){an(ek,{from:ei[eh].from,to:ei[eh].to,text:[""]})
}if(ei.length){an(ek,{from:ei[0].from,to:ei[0].to,text:em.text},el)
}}else{an(ek,em,el)
}}function an(ej,el,ek){var ei=dB(ej,el,ek);
da(ej,el,ei,ej.cm?ej.cm.curOp.id:NaN);
cL(ej,el,ei,cR(ej,el));
var eh=[];
cG(ej,function(en,em){if(!em&&ce(eh,en.history)==-1){cs(en.history,el);
eh.push(en.history)
}cL(en,el,null,cR(en,el))
})
}function bn(eq,en){if(eq.cm&&eq.cm.state.suppressEdits){return
}var em=eq.history;
var ei=(en=="undo"?em.done:em.undone).pop();
if(!ei){return
}var eo={changes:[],anchorBefore:ei.anchorAfter,headBefore:ei.headAfter,anchorAfter:ei.anchorBefore,headAfter:ei.headBefore,generation:em.generation};
(en=="undo"?em.undone:em.done).push(eo);
em.generation=ei.generation||++em.maxGeneration;
var ej=dC(eq,"beforeChange")||eq.cm&&dC(eq.cm,"beforeChange");
for(var ek=ei.changes.length-1;
ek>=0;
--ek){var ep=ei.changes[ek];
ep.origin=en;
if(ej&&!cz(eq,ep,false)){(en=="undo"?em.done:em.undone).length=0;
return
}eo.changes.push(cl(eq,ep));
var eh=ek?dB(eq,ep,null):{anchor:ei.anchorBefore,head:ei.headBefore};
cL(eq,ep,eh,cI(eq,ep));
var el=[];
cG(eq,function(es,er){if(!er&&ce(el,es.history)==-1){cs(es.history,ep);
el.push(es.history)
}cL(es,ep,null,cI(es,ep))
})
}}function dE(eh,ej){function ei(ek){return I(ek.line+ej,ek.ch)
}eh.first+=ej;
if(eh.cm){O(eh.cm,eh.first,eh.first,ej)
}eh.sel.head=ei(eh.sel.head);
eh.sel.anchor=ei(eh.sel.anchor);
eh.sel.from=ei(eh.sel.from);
eh.sel.to=ei(eh.sel.to)
}function cL(el,em,ek,ei){if(el.cm&&!el.cm.curOp){return b3(el.cm,cL)(el,em,ek,ei)
}if(em.to.line<el.first){dE(el,em.text.length-1-(em.to.line-em.from.line));
return
}if(em.from.line>el.lastLine()){return
}if(em.from.line<el.first){var eh=em.text.length-1-(el.first-em.from.line);
dE(el,eh);
em={from:I(el.first,0),to:I(em.to.line+eh,em.to.ch),text:[dU(em.text)],origin:em.origin}
}var ej=el.lastLine();
if(em.to.line>ej){em={from:em.from,to:I(ej,dw(el,ej).text.length),text:[em.text[0]],origin:em.origin}
}em.removed=d7(el,em.from,em.to);
if(!ek){ek=dB(el,em,null)
}if(el.cm){aj(el.cm,em,ei,ek)
}else{dP(el,em,ei,ek)
}}function aj(er,en,ek,eh){var eq=er.doc,em=er.display,eo=en.from,ep=en.to;
var ei=false,ej=eo.line;
if(!er.options.lineWrapping){ej=a9(t(eq,dw(eq,eo.line)));
eq.iter(ej,ep.line+1,function(eu){if(eu==em.maxLine){ei=true;
return true
}})
}if(!dx(eq.sel.head,en.from)&&!dx(en.to,eq.sel.head)){er.curOp.cursorActivity=true
}dP(eq,en,ek,eh,aF(er));
if(!er.options.lineWrapping){eq.iter(ej,eo.line+en.text.length,function(ev){var eu=cS(eq,ev);
if(eu>em.maxLineLength){em.maxLine=ev;
em.maxLineLength=eu;
em.maxLineChanged=true;
ei=false
}});
if(ei){er.curOp.updateMaxLine=true
}}eq.frontier=Math.min(eq.frontier,eo.line);
cN(er,400);
var et=en.text.length-(ep.line-eo.line)-1;
O(er,eo.line,ep.line+1,et);
if(dC(er,"change")){var el={from:eo,to:ep,text:en.text,removed:en.removed,origin:en.origin};
if(er.curOp.textChanged){for(var es=er.curOp.textChanged;
es.next;
es=es.next){}es.next=el
}else{er.curOp.textChanged=el
}}}function ax(ek,ej,em,el,eh){if(!el){el=em
}if(dx(el,em)){var ei=el;
el=em;
em=ei
}if(typeof ej=="string"){ej=aw(ej)
}aH(ek,{from:em,to:el,text:ej,origin:eh},null)
}function I(eh,ei){if(!(this instanceof I)){return new I(eh,ei)
}this.line=eh;
this.ch=ei
}z.Pos=I;
function dV(ei,eh){return ei.line==eh.line&&ei.ch==eh.ch
}function dx(ei,eh){return ei.line<eh.line||(ei.line==eh.line&&ei.ch<eh.ch)
}function bw(eh){return I(eh.line,eh.ch)
}function b5(eh,ei){return Math.max(eh.first,Math.min(ei,eh.first+eh.size-1))
}function dW(ei,ej){if(ej.line<ei.first){return I(ei.first,0)
}var eh=ei.first+ei.size-1;
if(ej.line>eh){return I(eh,dw(ei,eh).text.length)
}return dK(ej,dw(ei,ej.line).text.length)
}function dK(ej,ei){var eh=ej.ch;
if(eh==null||eh>ei){return I(ej.line,ei)
}else{if(eh<0){return I(ej.line,0)
}else{return ej
}}}function bo(ei,eh){return eh>=ei.first&&eh<ei.first+ei.size
}function d3(el,em,eh,ei){if(el.sel.shift||el.sel.extend){var ek=el.sel.anchor;
if(eh){var ej=dx(em,ek);
if(ej!=dx(eh,ek)){ek=em;
em=eh
}else{if(ej!=dx(em,eh)){em=eh
}}}be(el,ek,em,ei)
}else{be(el,em,eh||em,ei)
}if(el.cm){el.cm.curOp.userSelChange=true
}}function c(ek,eh,ei){var ej={anchor:eh,head:ei};
af(ek,"beforeSelectionChange",ek,ej);
if(ek.cm){af(ek.cm,"beforeSelectionChange",ek.cm,ej)
}ej.anchor=dW(ek,ej.anchor);
ej.head=dW(ek,ej.head);
return ej
}function be(eo,el,em,ej,ei){if(!ei&&dC(eo,"beforeSelectionChange")||eo.cm&&dC(eo.cm,"beforeSelectionChange")){var ek=c(eo,el,em);
em=ek.head;
el=ek.anchor
}var en=eo.sel;
en.goalColumn=null;
if(ei||!dV(el,en.anchor)){el=bf(eo,el,ej,ei!="push")
}if(ei||!dV(em,en.head)){em=bf(eo,em,ej,ei!="push")
}if(dV(en.anchor,el)&&dV(en.head,em)){return
}en.anchor=el;
en.head=em;
var eh=dx(em,el);
en.from=eh?em:el;
en.to=eh?el:em;
if(eo.cm){eo.cm.curOp.updateInput=eo.cm.curOp.selectionChanged=eo.cm.curOp.cursorActivity=true
}M(eo,"cursorActivity",eo)
}function cZ(eh){be(eh.doc,eh.doc.sel.from,eh.doc.sel.to,null,"push")
}function bf(eq,ep,em,en){var er=false,ej=ep;
var ek=em||1;
eq.cantEdit=false;
search:for(;
;
){var es=dw(eq,ej.line);
if(es.markedSpans){for(var el=0;
el<es.markedSpans.length;
++el){var eh=es.markedSpans[el],ei=eh.marker;
if((eh.from==null||(ei.inclusiveLeft?eh.from<=ej.ch:eh.from<ej.ch))&&(eh.to==null||(ei.inclusiveRight?eh.to>=ej.ch:eh.to>ej.ch))){if(en){af(ei,"beforeCursorEnter");
if(ei.explicitlyCleared){if(!es.markedSpans){break
}else{--el;
continue
}}}if(!ei.atomic){continue
}var eo=ei.find()[ek<0?"from":"to"];
if(dV(eo,ej)){eo.ch+=ek;
if(eo.ch<0){if(eo.line>eq.first){eo=dW(eq,I(eo.line-1))
}else{eo=null
}}else{if(eo.ch>es.text.length){if(eo.line<eq.first+eq.size-1){eo=I(eo.line+1,0)
}else{eo=null
}}}if(!eo){if(er){if(!en){return bf(eq,ep,em,true)
}eq.cantEdit=true;
return I(eq.first,0)
}er=true;
eo=ep;
ek=-ek
}}ej=eo;
continue search
}}}return ej
}}function ac(ei){var el=v(ei,ei.doc.sel.head,ei.options.cursorScrollMargin);
if(!ei.state.focused){return
}var em=ei.display,ej=al(em.sizer),eh=null;
if(el.top+ej.top<0){eh=true
}else{if(el.bottom+ej.top>(window.innerHeight||document.documentElement.clientHeight)){eh=false
}}if(eh!=null&&!dL){var ek=em.cursor.style.display=="none";
if(ek){em.cursor.style.display="";
em.cursor.style.left=el.left+"px";
em.cursor.style.top=(el.top-em.viewOffset)+"px"
}em.cursor.scrollIntoView(eh);
if(ek){em.cursor.style.display="none"
}}}function v(eh,eo,el){if(el==null){el=0
}for(;
;
){var em=false,ek=cA(eh,eo);
var en=y(eh,ek.left,ek.top-el,ek.left,ek.bottom+el);
var ei=eh.doc.scrollTop,ej=eh.doc.scrollLeft;
if(en.scrollTop!=null){D(eh,en.scrollTop);
if(Math.abs(eh.doc.scrollTop-ei)>1){em=true
}}if(en.scrollLeft!=null){a0(eh,en.scrollLeft);
if(Math.abs(eh.doc.scrollLeft-ej)>1){em=true
}}if(!em){return ek
}}}function x(eh,ej,el,ei,ek){var em=y(eh,ej,el,ei,ek);
if(em.scrollTop!=null){D(eh,em.scrollTop)
}if(em.scrollLeft!=null){a0(eh,em.scrollLeft)
}}function y(en,ev,ek,eu,ej){var es=en.display,er=au(en.display);
if(ek<0){ek=0
}var ei=es.scroller.clientHeight-aK,eq=es.scroller.scrollTop,ep={};
var ex=en.doc.height+a4(es);
var ey=ek<er,et=ej>ex-er;
if(ek<eq){ep.scrollTop=ey?0:ek
}else{if(ej>eq+ei){var eo=Math.min(ek,(et?ex:ej)-ei);
if(eo!=eq){ep.scrollTop=eo
}}}var em=es.scroller.clientWidth-aK,eh=es.scroller.scrollLeft;
ev+=es.gutters.offsetWidth;
eu+=es.gutters.offsetWidth;
var el=es.gutters.offsetWidth;
var ew=ev<el+10;
if(ev<eh+el||ew){if(ew){ev=0
}ep.scrollLeft=Math.max(0,ev-10-el)
}else{if(eu>em+eh-3){ep.scrollLeft=eu+10-em
}}return ep
}function w(eh,ej,ei){eh.curOp.updateScrollPos={scrollLeft:ej==null?eh.doc.scrollLeft:ej,scrollTop:ei==null?eh.doc.scrollTop:ei}
}function bU(ei,ek,ej){var el=ei.curOp.updateScrollPos||(ei.curOp.updateScrollPos={scrollLeft:ei.doc.scrollLeft,scrollTop:ei.doc.scrollTop});
var eh=ei.display.scroller;
el.scrollTop=Math.max(0,Math.min(eh.scrollHeight-eh.clientHeight,el.scrollTop+ej));
el.scrollLeft=Math.max(0,Math.min(eh.scrollWidth-eh.clientWidth,el.scrollLeft+ek))
}function L(et,ek,es,ej){var er=et.doc;
if(es==null){es="add"
}if(es=="smart"){if(!et.doc.mode.indent){es="prev"
}else{var ei=cp(et,ek)
}}var en=et.options.tabSize;
var eu=dw(er,ek),em=bc(eu.text,null,en);
var eh=eu.text.match(/^\s*/)[0],ep;
if(es=="smart"){ep=et.doc.mode.indent(ei,eu.text.slice(eh.length),eu.text);
if(ep==bq){if(!ej){return
}es="prev"
}}if(es=="prev"){if(ek>er.first){ep=bc(dw(er,ek-1).text,null,en)
}else{ep=0
}}else{if(es=="add"){ep=em+et.options.indentUnit
}else{if(es=="subtract"){ep=em-et.options.indentUnit
}else{if(typeof es=="number"){ep=em+es
}}}}ep=Math.max(0,ep);
var eq="",eo=0;
if(et.options.indentWithTabs){for(var el=Math.floor(ep/en);
el;
--el){eo+=en;
eq+="\t"
}}if(eo<ep){eq+=bD(ep-eo)
}if(eq!=eh){ax(et.doc,eq,I(ek,0),I(ek,eh.length),"+input")
}eu.stateAfter=null
}function c1(eh,ej,em){var el=ej,ei=ej,ek=eh.doc;
if(typeof ej=="number"){ei=dw(ek,b5(ek,ej))
}else{el=a9(ej)
}if(el==null){return null
}if(em(ei,el)){O(eh,el,el+1)
}else{return null
}return ei
}function aV(ey,ek,es,er,em){var ep=ek.line,eq=ek.ch,ex=es;
var eh=dw(ey,ep);
var ev=true;
function ew(){var ez=ep+es;
if(ez<ey.first||ez>=ey.first+ey.size){return(ev=false)
}ep=ez;
return eh=dw(ey,ez)
}function eu(eA){var ez=(em?q:P)(eh,eq,es,true);
if(ez==null){if(!eA&&ew()){if(em){eq=(es<0?bY:bO)(eh)
}else{eq=es<0?eh.text.length:0
}}else{return(ev=false)
}}else{eq=ez
}return true
}if(er=="char"){eu()
}else{if(er=="column"){eu(true)
}else{if(er=="word"||er=="group"){var et=null,en=er=="group";
for(var el=true;
;
el=false){if(es<0&&!eu(!el)){break
}var ei=eh.text.charAt(eq)||"\n";
var ej=bL(ei)?"w":!en?null:/\s/.test(ei)?null:"p";
if(et&&et!=ej){if(es<0){es=1;
eu()
}break
}if(ej){et=ej
}if(es>0&&!eu(!el)){break
}}}}}var eo=bf(ey,I(ep,eq),ex,true);
if(!ev){eo.hitSide=true
}return eo
}function aR(ep,ek,eh,eo){var en=ep.doc,em=ek.left,el;
if(eo=="page"){var ej=Math.min(ep.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);
el=ek.top+eh*(ej-(eh<0?1.5:0.5)*au(ep.display))
}else{if(eo=="line"){el=eh>0?ek.bottom+3:ek.top-3
}}for(;
;
){var ei=d0(ep,em,el);
if(!ei.outside){break
}if(eh<0?el<=0:el>=en.height){ei.hitSide=true;
break
}el+=eh*5
}return ei
}function Z(ek,em){var el=em.ch,ej=em.ch;
if(ek){if((em.xRel<0||ej==ek.length)&&el){--el
}else{++ej
}var ei=ek.charAt(el);
var eh=bL(ei)?bL:/\s/.test(ei)?function(en){return/\s/.test(en)
}:function(en){return !/\s/.test(en)&&!bL(en)
};
while(el>0&&eh(ek.charAt(el-1))){--el
}while(ej<ek.length&&eh(ek.charAt(ej))){++ej
}}return{from:I(em.line,el),to:I(em.line,ej)}
}function aM(eh,ei){d3(eh.doc,I(ei,0),dW(eh.doc,I(ei+1,0)))
}z.prototype={constructor:z,focus:function(){window.focus();
c3(this);
bM(this);
u(this)
},setOption:function(ej,ek){var ei=this.options,eh=ei[ej];
if(ei[ej]==ek&&ej!="mode"){return
}ei[ej]=ek;
if(aG.hasOwnProperty(ej)){b3(this,aG[ej])(this,ek,eh)
}},getOption:function(eh){return this.options[eh]
},getDoc:function(){return this.doc
},addKeyMap:function(ei,eh){this.state.keyMaps[eh?"push":"unshift"](ei)
},removeKeyMap:function(ei){var ej=this.state.keyMaps;
for(var eh=0;
eh<ej.length;
++eh){if(ej[eh]==ei||(typeof ej[eh]!="string"&&ej[eh].name==ei)){ej.splice(eh,1);
return true
}}},addOverlay:b3(null,function(eh,ei){var ej=eh.token?eh:z.getMode(this.options,eh);
if(ej.startState){throw new Error("Overlays may not be stateful.")
}this.state.overlays.push({mode:ej,modeSpec:eh,opaque:ei&&ei.opaque});
this.state.modeGen++;
O(this)
}),removeOverlay:b3(null,function(eh){var ej=this.state.overlays;
for(var ei=0;
ei<ej.length;
++ei){var ek=ej[ei].modeSpec;
if(ek==eh||typeof eh=="string"&&ek.name==eh){ej.splice(ei,1);
this.state.modeGen++;
O(this);
return
}}}),indentLine:b3(null,function(ej,eh,ei){if(typeof eh!="string"&&typeof eh!="number"){if(eh==null){eh=this.options.smartIndent?"smart":"prev"
}else{eh=eh?"add":"subtract"
}}if(bo(this.doc,ej)){L(this,ej,eh,ei)
}}),indentSelection:b3(null,function(ei){var ej=this.doc.sel;
if(dV(ej.from,ej.to)){return L(this,ej.from.line,ei)
}var ek=ej.to.line-(ej.to.ch?0:1);
for(var eh=ej.from.line;
eh<=ek;
++eh){L(this,eh,ei)
}}),getTokenAt:function(eo,ei){var el=this.doc;
eo=dW(el,eo);
var ek=cp(this,eo.line,ei),en=this.doc.mode;
var eh=dw(el,eo.line);
var em=new dh(eh.text,this.options.tabSize);
while(em.pos<eo.ch&&!em.eol()){em.start=em.pos;
var ej=en.token(em,ek)
}return{start:em.start,end:em.pos,string:em.current(),className:ej||null,type:ej||null,state:ek}
},getTokenTypeAt:function(em){em=dW(this.doc,em);
var ej=b8(this,dw(this.doc,em.line));
var ek=0,el=(ej.length-1)/2,ei=em.ch;
if(ei==0){return ej[2]
}for(;
;
){var eh=(ek+el)>>1;
if((eh?ej[eh*2-1]:0)>=ei){el=eh
}else{if(ej[eh*2+1]<ei){ek=eh+1
}else{return ej[eh*2+2]
}}}},getModeAt:function(ei){var eh=this.doc.mode;
if(!eh.innerMode){return eh
}return z.innerMode(eh,this.getTokenAt(ei).state).mode
},getHelper:function(ek,ei){if(!dF.hasOwnProperty(ei)){return
}var eh=dF[ei],ej=this.getModeAt(ek);
return ej[ei]&&eh[ej[ei]]||ej.helperType&&eh[ej.helperType]||eh[ej.name]
},getStateAfter:function(ei,eh){var ej=this.doc;
ei=b5(ej,ei==null?ej.first+ej.size-1:ei);
return cp(this,ei+1,eh)
},cursorCoords:function(ek,ei){var ej,eh=this.doc.sel;
if(ek==null){ej=eh.head
}else{if(typeof ek=="object"){ej=dW(this.doc,ek)
}else{ej=ek?eh.from:eh.to
}}return cA(this,ej,ei||"page")
},charCoords:function(ei,eh){return bT(this,dW(this.doc,ei),eh||"page")
},coordsChar:function(eh,ei){eh=ee(this,eh,ei||"page");
return d0(this,eh.left,eh.top)
},lineAtHeight:function(eh,ei){eh=ee(this,{top:eh,left:0},ei||"page").top;
return a2(this.doc,eh+this.display.viewOffset)
},heightAtLine:function(ei,el){var eh=false,ek=this.doc.first+this.doc.size-1;
if(ei<this.doc.first){ei=this.doc.first
}else{if(ei>ek){ei=ek;
eh=true
}}var ej=dw(this.doc,ei);
return df(this,dw(this.doc,ei),{top:0,left:0},el||"page").top+(eh?ej.height:0)
},defaultTextHeight:function(){return au(this.display)
},defaultCharWidth:function(){return cr(this.display)
},setGutterMarker:b3(null,function(eh,ei,ej){return c1(this,eh,function(ek){var el=ek.gutterMarkers||(ek.gutterMarkers={});
el[ei]=ej;
if(!ej&&di(el)){ek.gutterMarkers=null
}return true
})
}),clearGutter:b3(null,function(ej){var eh=this,ek=eh.doc,ei=ek.first;
ek.iter(function(el){if(el.gutterMarkers&&el.gutterMarkers[ej]){el.gutterMarkers[ej]=null;
O(eh,ei,ei+1);
if(di(el.gutterMarkers)){el.gutterMarkers=null
}}++ei
})
}),addLineClass:b3(null,function(ej,ei,eh){return c1(this,ej,function(ek){var el=ei=="text"?"textClass":ei=="background"?"bgClass":"wrapClass";
if(!ek[el]){ek[el]=eh
}else{if(new RegExp("(?:^|\\s)"+eh+"(?:$|\\s)").test(ek[el])){return false
}else{ek[el]+=" "+eh
}}return true
})
}),removeLineClass:b3(null,function(ej,ei,eh){return c1(this,ej,function(el){var eo=ei=="text"?"textClass":ei=="background"?"bgClass":"wrapClass";
var en=el[eo];
if(!en){return false
}else{if(eh==null){el[eo]=null
}else{var em=en.match(new RegExp("(?:^|\\s+)"+eh+"(?:$|\\s+)"));
if(!em){return false
}var ek=em.index+em[0].length;
el[eo]=en.slice(0,em.index)+(!em.index||ek==en.length?"":" ")+en.slice(ek)||null
}}return true
})
}),addLineWidget:b3(null,function(ej,ei,eh){return a3(this,ej,ei,eh)
}),removeLineWidget:function(eh){eh.clear()
},lineInfo:function(eh){if(typeof eh=="number"){if(!bo(this.doc,eh)){return null
}var ei=eh;
eh=dw(this.doc,eh);
if(!eh){return null
}}else{var ei=a9(eh);
if(ei==null){return null
}}return{line:ei,handle:eh,text:eh.text,gutterMarkers:eh.gutterMarkers,textClass:eh.textClass,bgClass:eh.bgClass,wrapClass:eh.wrapClass,widgets:eh.widgets}
},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}
},addWidget:function(em,ej,eo,ek,eq){var el=this.display;
em=cA(this,dW(this.doc,em));
var en=em.bottom,ei=em.left;
ej.style.position="absolute";
el.sizer.appendChild(ej);
if(ek=="over"){en=em.top
}else{if(ek=="above"||ek=="near"){var eh=Math.max(el.wrapper.clientHeight,this.doc.height),ep=Math.max(el.sizer.clientWidth,el.lineSpace.clientWidth);
if((ek=="above"||em.bottom+ej.offsetHeight>eh)&&em.top>ej.offsetHeight){en=em.top-ej.offsetHeight
}else{if(em.bottom+ej.offsetHeight<=eh){en=em.bottom
}}if(ei+ej.offsetWidth>ep){ei=ep-ej.offsetWidth
}}}ej.style.top=en+"px";
ej.style.left=ej.style.right="";
if(eq=="right"){ei=el.sizer.clientWidth-ej.offsetWidth;
ej.style.right="0px"
}else{if(eq=="left"){ei=0
}else{if(eq=="middle"){ei=(el.sizer.clientWidth-ej.offsetWidth)/2
}}ej.style.left=ei+"px"
}if(eo){x(this,ei,en,ei+ej.offsetWidth,en+ej.offsetHeight)
}},triggerOnKeyDown:b3(null,m),execCommand:function(eh){return c5[eh](this)
},findPosH:function(en,ek,el,ei){var eh=1;
if(ek<0){eh=-1;
ek=-ek
}for(var ej=0,em=dW(this.doc,en);
ej<ek;
++ej){em=aV(this.doc,em,eh,el,ei);
if(em.hitSide){break
}}return em
},moveH:b3(null,function(eh,ei){var ej=this.doc.sel,ek;
if(ej.shift||ej.extend||dV(ej.from,ej.to)){ek=aV(this.doc,ej.head,eh,ei,this.options.rtlMoveVisually)
}else{ek=eh<0?ej.from:ej.to
}d3(this.doc,ek,ek,eh)
}),deleteH:b3(null,function(eh,ei){var ej=this.doc.sel;
if(!dV(ej.from,ej.to)){ax(this.doc,"",ej.from,ej.to,"+delete")
}else{ax(this.doc,"",ej.from,aV(this.doc,ej.head,eh,ei,false),"+delete")
}this.curOp.userSelChange=true
}),findPosV:function(em,ej,en,ep){var eh=1,el=ep;
if(ej<0){eh=-1;
ej=-ej
}for(var ei=0,eo=dW(this.doc,em);
ei<ej;
++ei){var ek=cA(this,eo,"div");
if(el==null){el=ek.left
}else{ek.left=el
}eo=aR(this,ek,eh,en);
if(eo.hitSide){break
}}return eo
},moveV:b3(null,function(eh,ei){var ej=this.doc.sel;
var el=cA(this,ej.head,"div");
if(ej.goalColumn!=null){el.left=ej.goalColumn
}var ek=aR(this,el,eh,ei);
if(ei=="page"){bU(this,0,bT(this,ek,"div").top-el.top)
}d3(this.doc,ek,ek,eh);
ej.goalColumn=el.left
}),toggleOverwrite:function(eh){if(eh!=null&&eh==this.state.overwrite){return
}if(this.state.overwrite=!this.state.overwrite){this.display.cursor.className+=" CodeMirror-overwrite"
}else{this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")
}},hasFocus:function(){return this.state.focused
},scrollTo:b3(null,function(eh,ei){w(this,eh,ei)
}),getScrollInfo:function(){var eh=this.display.scroller,ei=aK;
return{left:eh.scrollLeft,top:eh.scrollTop,height:eh.scrollHeight-ei,width:eh.scrollWidth-ei,clientHeight:eh.clientHeight-ei,clientWidth:eh.clientWidth-ei}
},scrollIntoView:b3(null,function(ek,ej){if(typeof ek=="number"){ek=I(ek,0)
}if(!ej){ej=0
}var ei=ek;
if(!ek||ek.line!=null){this.curOp.scrollToPos=ek?dW(this.doc,ek):this.doc.sel.head;
this.curOp.scrollToPosMargin=ej;
ei=cA(this,this.curOp.scrollToPos)
}var eh=y(this,ei.left,ei.top-ej,ei.right,ei.bottom+ej);
w(this,eh.scrollLeft,eh.scrollTop)
}),setSize:b3(null,function(ej,eh){function ei(ek){return typeof ek=="number"||/^\d+$/.test(String(ek))?ek+"px":ek
}if(ej!=null){this.display.wrapper.style.width=ei(ej)
}if(eh!=null){this.display.wrapper.style.height=ei(eh)
}if(this.options.lineWrapping){this.display.measureLineCache.length=this.display.measureLineCachePos=0
}this.curOp.forceUpdate=true
}),operation:function(eh){return bV(this,eh)
},refresh:b3(null,function(){R(this);
w(this,this.doc.scrollLeft,this.doc.scrollTop);
O(this)
}),swapDoc:b3(null,function(ei){var eh=this.doc;
eh.cm=null;
cJ(this,ei);
R(this);
dH(this,true);
w(this,ei.scrollLeft,ei.scrollTop);
return eh
}),getInputField:function(){return this.display.input
},getWrapperElement:function(){return this.display.wrapper
},getScrollerElement:function(){return this.display.scroller
},getGutterElement:function(){return this.display.gutters
}};
aW(z);
var aG=z.optionHandlers={};
var dp=z.defaults={};
function o(eh,ek,ej,ei){z.defaults[eh]=ek;
if(ej){aG[eh]=ei?function(el,en,em){if(em!=br){ej(el,en,em)
}}:ej
}}var br=z.Init={toString:function(){return"CodeMirror.Init"
}};
o("value","",function(eh,ei){eh.setValue(ei)
},true);
o("mode",null,function(eh,ei){eh.doc.modeOption=ei;
aS(eh)
},true);
o("indentUnit",2,aS,true);
o("indentWithTabs",false);
o("smartIndent",true);
o("tabSize",4,function(eh){aS(eh);
R(eh);
O(eh)
},true);
o("electricChars",true);
o("rtlMoveVisually",!am);
o("theme","default",function(eh){bW(eh);
cm(eh)
},true);
o("keyMap","default",ef);
o("extraKeys",null);
o("onKeyEvent",null);
o("onDragEvent",null);
o("lineWrapping",false,db,true);
o("gutters",[],function(eh){bt(eh.options);
cm(eh)
},true);
o("fixedGutter",true,function(eh,ei){eh.display.gutters.style.left=ei?cC(eh.display)+"px":"0";
eh.refresh()
},true);
o("coverGutterNextToScrollbar",false,dk,true);
o("lineNumbers",false,function(eh){bt(eh.options);
cm(eh)
},true);
o("firstLineNumber",1,cm,true);
o("lineNumberFormatter",function(eh){return eh
},cm,true);
o("showCursorWhenSelecting",false,aZ,true);
o("readOnly",false,function(eh,ei){if(ei=="nocursor"){ar(eh);
eh.display.input.blur()
}else{if(!ei){dH(eh,true)
}}});
o("dragDrop",true);
o("cursorBlinkRate",530);
o("cursorScrollMargin",0);
o("cursorHeight",1);
o("workTime",100);
o("workDelay",100);
o("flattenSpans",true);
o("pollInterval",100);
o("undoDepth",40,function(eh,ei){eh.doc.history.undoDepth=ei
});
o("historyEventDelay",500);
o("viewportMargin",10,function(eh){eh.refresh()
},true);
o("maxHighlightLength",10000,function(eh){aS(eh);
eh.refresh()
},true);
o("moveInputWithCursor",true,function(eh,ei){if(!ei){eh.display.inputDiv.style.top=eh.display.inputDiv.style.left=0
}});
o("tabindex",null,function(eh,ei){eh.display.input.tabIndex=ei||""
});
o("autofocus",null);
var cj=z.modes={},aq=z.mimeModes={};
z.defineMode=function(eh,ej){if(!z.defaults.mode&&eh!="null"){z.defaults.mode=eh
}if(arguments.length>2){ej.dependencies=[];
for(var ei=2;
ei<arguments.length;
++ei){ej.dependencies.push(arguments[ei])
}}cj[eh]=ej
};
z.defineMIME=function(ei,eh){aq[ei]=eh
};
z.resolveMode=function(eh){if(typeof eh=="string"&&aq.hasOwnProperty(eh)){eh=aq[eh]
}else{if(eh&&typeof eh.name=="string"&&aq.hasOwnProperty(eh.name)){var ei=aq[eh.name];
eh=bx(ei,eh);
eh.name=ei.name
}else{if(typeof eh=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(eh)){return z.resolveMode("application/xml")
}}}if(typeof eh=="string"){return{name:eh}
}else{return eh||{name:"null"}
}};
z.getMode=function(ei,eh){var eh=z.resolveMode(eh);
var ek=cj[eh.name];
if(!ek){return z.getMode(ei,"text/plain")
}var el=ek(ei,eh);
if(ch.hasOwnProperty(eh.name)){var ej=ch[eh.name];
for(var em in ej){if(!ej.hasOwnProperty(em)){continue
}if(el.hasOwnProperty(em)){el["_"+em]=el[em]
}el[em]=ej[em]
}}el.name=eh.name;
return el
};
z.defineMode("null",function(){return{token:function(eh){eh.skipToEnd()
}}
});
z.defineMIME("text/plain","null");
var ch=z.modeExtensions={};
z.extendMode=function(ej,ei){var eh=ch.hasOwnProperty(ej)?ch[ej]:(ch[ej]={});
ak(ei,eh)
};
z.defineExtension=function(eh,ei){z.prototype[eh]=ei
};
z.defineDocExtension=function(eh,ei){Y.prototype[eh]=ei
};
z.defineOption=o;
var aA=[];
z.defineInitHook=function(eh){aA.push(eh)
};
var dF=z.helpers={};
z.registerHelper=function(ei,eh,ej){if(!dF.hasOwnProperty(ei)){dF[ei]=z[ei]={}
}dF[ei][eh]=ej
};
z.isWordChar=bL;
function bj(ek,eh){if(eh===true){return eh
}if(ek.copyState){return ek.copyState(eh)
}var ej={};
for(var el in eh){var ei=eh[el];
if(ei instanceof Array){ei=ei.concat([])
}ej[el]=ei
}return ej
}z.copyState=bj;
function bi(ej,ei,eh){return ej.startState?ej.startState(ei,eh):true
}z.startState=bi;
z.innerMode=function(ej,eh){while(ej.innerMode){var ei=ej.innerMode(eh);
if(!ei||ei.mode==ej){break
}eh=ei.state;
ej=ei.mode
}return ei||{mode:ej,state:eh}
};
var c5=z.commands={selectAll:function(eh){eh.setSelection(I(eh.firstLine(),0),I(eh.lastLine()))
},killLine:function(eh){var ek=eh.getCursor(true),ej=eh.getCursor(false),ei=!dV(ek,ej);
if(!ei&&eh.getLine(ek.line).length==ek.ch){eh.replaceRange("",ek,I(ek.line+1,0),"+delete")
}else{eh.replaceRange("",ek,ei?ej:I(ek.line),"+delete")
}},deleteLine:function(eh){var ei=eh.getCursor().line;
eh.replaceRange("",I(ei,0),I(ei),"+delete")
},delLineLeft:function(eh){var ei=eh.getCursor();
eh.replaceRange("",I(ei.line,0),ei,"+delete")
},undo:function(eh){eh.undo()
},redo:function(eh){eh.redo()
},goDocStart:function(eh){eh.extendSelection(I(eh.firstLine(),0))
},goDocEnd:function(eh){eh.extendSelection(I(eh.lastLine()))
},goLineStart:function(eh){eh.extendSelection(aU(eh,eh.getCursor().line))
},goLineStartSmart:function(ei){var em=ei.getCursor(),en=aU(ei,em.line);
var ej=ei.getLineHandle(en.line);
var eh=a(ej);
if(!eh||eh[0].level==0){var el=Math.max(0,ej.text.search(/\S/));
var ek=em.line==en.line&&em.ch<=el&&em.ch;
ei.extendSelection(I(en.line,ek?0:el))
}else{ei.extendSelection(en)
}},goLineEnd:function(eh){eh.extendSelection(cy(eh,eh.getCursor().line))
},goLineRight:function(eh){var ei=eh.charCoords(eh.getCursor(),"div").top+5;
eh.extendSelection(eh.coordsChar({left:eh.display.lineDiv.offsetWidth+100,top:ei},"div"))
},goLineLeft:function(eh){var ei=eh.charCoords(eh.getCursor(),"div").top+5;
eh.extendSelection(eh.coordsChar({left:0,top:ei},"div"))
},goLineUp:function(eh){eh.moveV(-1,"line")
},goLineDown:function(eh){eh.moveV(1,"line")
},goPageUp:function(eh){eh.moveV(-1,"page")
},goPageDown:function(eh){eh.moveV(1,"page")
},goCharLeft:function(eh){eh.moveH(-1,"char")
},goCharRight:function(eh){eh.moveH(1,"char")
},goColumnLeft:function(eh){eh.moveH(-1,"column")
},goColumnRight:function(eh){eh.moveH(1,"column")
},goWordLeft:function(eh){eh.moveH(-1,"word")
},goGroupRight:function(eh){eh.moveH(1,"group")
},goGroupLeft:function(eh){eh.moveH(-1,"group")
},goWordRight:function(eh){eh.moveH(1,"word")
},delCharBefore:function(eh){eh.deleteH(-1,"char")
},delCharAfter:function(eh){eh.deleteH(1,"char")
},delWordBefore:function(eh){eh.deleteH(-1,"word")
},delWordAfter:function(eh){eh.deleteH(1,"word")
},delGroupBefore:function(eh){eh.deleteH(-1,"group")
},delGroupAfter:function(eh){eh.deleteH(1,"group")
},indentAuto:function(eh){eh.indentSelection("smart")
},indentMore:function(eh){eh.indentSelection("add")
},indentLess:function(eh){eh.indentSelection("subtract")
},insertTab:function(eh){eh.replaceSelection("\t","end","+input")
},defaultTab:function(eh){if(eh.somethingSelected()){eh.indentSelection("add")
}else{eh.replaceSelection("\t","end","+input")
}},transposeChars:function(eh){var ej=eh.getCursor(),ei=eh.getLine(ej.line);
if(ej.ch>0&&ej.ch<ei.length-1){eh.replaceRange(ei.charAt(ej.ch)+ei.charAt(ej.ch-1),I(ej.line,ej.ch-1),I(ej.line,ej.ch+1))
}},newlineAndIndent:function(eh){b3(eh,function(){eh.replaceSelection("\n","end","+input");
eh.indentLine(eh.getCursor().line,null,true)
})()
},toggleOverwrite:function(eh){eh.toggleOverwrite()
}};
var dt=z.keyMap={};
dt.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};
dt.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};
dt.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]};
dt["default"]=bl?dt.macDefault:dt.pcDefault;
dt.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};
function d4(eh){if(typeof eh=="string"){return dt[eh]
}else{return eh
}}function g(ei,em,ek){function el(es){es=d4(es);
var eq=es[ei];
if(eq===false){return"stop"
}if(eq!=null&&ek(eq)){return true
}if(es.nofallthrough){return"stop"
}var ep=es.fallthrough;
if(ep==null){return false
}if(Object.prototype.toString.call(ep)!="[object Array]"){return el(ep)
}for(var eo=0,er=ep.length;
eo<er;
++eo){var en=el(ep[eo]);
if(en){return en
}}return false
}for(var ej=0;
ej<em.length;
++ej){var eh=el(em[ej]);
if(eh){return eh!="stop"
}}}function c4(ei){var eh=dy[ei.keyCode];
return eh=="Ctrl"||eh=="Alt"||eh=="Shift"||eh=="Mod"
}function dJ(ei,ej){if(dO&&ei.keyCode==34&&ei["char"]){return false
}var eh=dy[ei.keyCode];
if(eh==null||ei.altGraphKey){return false
}if(ei.altKey){eh="Alt-"+eh
}if(bb?ei.metaKey:ei.ctrlKey){eh="Ctrl-"+eh
}if(bb?ei.ctrlKey:ei.metaKey){eh="Cmd-"+eh
}if(!ej&&ei.shiftKey){eh="Shift-"+eh
}return eh
}z.lookupKey=g;
z.isModifierKey=c4;
z.keyName=dJ;
z.fromTextArea=function(eo,ep){if(!ep){ep={}
}ep.value=eo.value;
if(!ep.tabindex&&eo.tabindex){ep.tabindex=eo.tabindex
}if(!ep.placeholder&&eo.placeholder){ep.placeholder=eo.placeholder
}if(ep.autofocus==null){var eh=document.body;
try{eh=document.activeElement
}catch(ej){}ep.autofocus=eh==eo||eo.getAttribute("autofocus")!=null&&eh==document.body
}function el(){eo.value=en.getValue()
}if(eo.form){bg(eo.form,"submit",el);
if(!ep.leaveSubmitMethodAlone){var ei=eo.form,em=ei.submit;
try{var ek=ei.submit=function(){el();
ei.submit=em;
ei.submit();
ei.submit=ek
}
}catch(ej){}}}eo.style.display="none";
var en=z(function(eq){eo.parentNode.insertBefore(eq,eo.nextSibling)
},ep);
en.save=el;
en.getTextArea=function(){return eo
};
en.toTextArea=function(){el();
eo.parentNode.removeChild(en.getWrapperElement());
eo.style.display="";
if(eo.form){cM(eo.form,"submit",el);
if(typeof eo.form.submit=="function"){eo.form.submit=em
}}};
return en
};
function dh(eh,ei){this.pos=this.start=0;
this.string=eh;
this.tabSize=ei||8;
this.lastColumnPos=this.lastColumnValue=0
}dh.prototype={eol:function(){return this.pos>=this.string.length
},sol:function(){return this.pos==0
},peek:function(){return this.string.charAt(this.pos)||undefined
},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)
}},eat:function(eh){var ej=this.string.charAt(this.pos);
if(typeof eh=="string"){var ei=ej==eh
}else{var ei=ej&&(eh.test?eh.test(ej):eh(ej))
}if(ei){++this.pos;
return ej
}},eatWhile:function(eh){var ei=this.pos;
while(this.eat(eh)){}return this.pos>ei
},eatSpace:function(){var eh=this.pos;
while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos
}return this.pos>eh
},skipToEnd:function(){this.pos=this.string.length
},skipTo:function(eh){var ei=this.string.indexOf(eh,this.pos);
if(ei>-1){this.pos=ei;
return true
}},backUp:function(eh){this.pos-=eh
},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=bc(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);
this.lastColumnPos=this.start
}return this.lastColumnValue
},indentation:function(){return bc(this.string,null,this.tabSize)
},match:function(el,ei,eh){if(typeof el=="string"){var em=function(en){return eh?en.toLowerCase():en
};
var ek=this.string.substr(this.pos,el.length);
if(em(ek)==em(el)){if(ei!==false){this.pos+=el.length
}return true
}}else{var ej=this.string.slice(this.pos).match(el);
if(ej&&ej.index>0){return null
}if(ej&&ei!==false){this.pos+=ej[0].length
}return ej
}},current:function(){return this.string.slice(this.start,this.pos)
}};
z.StringStream=dh;
function F(ei,eh){this.lines=[];
this.type=eh;
this.doc=ei
}z.TextMarker=F;
aW(F);
F.prototype.clear=function(){if(this.explicitlyCleared){return
}var eo=this.doc.cm,ei=eo&&!eo.curOp;
if(ei){bS(eo)
}if(dC(this,"clear")){var ep=this.find();
if(ep){M(this,"clear",ep.from,ep.to)
}}var ej=null,em=null;
for(var ek=0;
ek<this.lines.length;
++ek){var eq=this.lines[ek];
var en=ds(eq.markedSpans,this);
if(en.to!=null){em=a9(eq)
}eq.markedSpans=dc(eq.markedSpans,en);
if(en.from!=null){ej=a9(eq)
}else{if(this.collapsed&&!dM(this.doc,eq)&&eo){ea(eq,au(eo.display))
}}}if(eo&&this.collapsed&&!eo.options.lineWrapping){for(var ek=0;
ek<this.lines.length;
++ek){var eh=t(eo.doc,this.lines[ek]),el=cS(eo.doc,eh);
if(el>eo.display.maxLineLength){eo.display.maxLine=eh;
eo.display.maxLineLength=el;
eo.display.maxLineChanged=true
}}}if(ej!=null&&eo){O(eo,ej,em+1)
}this.lines.length=0;
this.explicitlyCleared=true;
if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;
if(eo){cZ(eo)
}}if(ei){U(eo)
}};
F.prototype.find=function(){var em,el;
for(var ei=0;
ei<this.lines.length;
++ei){var eh=this.lines[ei];
var ej=ds(eh.markedSpans,this);
if(ej.from!=null||ej.to!=null){var ek=a9(eh);
if(ej.from!=null){em=I(ek,ej.from)
}if(ej.to!=null){el=I(ek,ej.to)
}}}if(this.type=="bookmark"){return em
}return em&&{from:em,to:el}
};
F.prototype.changed=function(){var ek=this.find(),eh=this.doc.cm;
if(!ek||!eh){return
}var ei=dw(this.doc,ek.from.line);
dZ(eh,ei);
if(ek.from.line>=eh.display.showingFrom&&ek.from.line<eh.display.showingTo){for(var ej=eh.display.lineDiv.firstChild;
ej;
ej=ej.nextSibling){if(ej.lineObj==ei){if(ej.offsetHeight!=ei.height){ea(ei,ej.offsetHeight)
}break
}}bV(eh,function(){eh.curOp.selectionChanged=eh.curOp.forceUpdate=eh.curOp.updateMaxLine=true
})
}};
F.prototype.attachLine=function(eh){if(!this.lines.length&&this.doc.cm){var ei=this.doc.cm.curOp;
if(!ei.maybeHiddenMarkers||ce(ei.maybeHiddenMarkers,this)==-1){(ei.maybeUnhiddenMarkers||(ei.maybeUnhiddenMarkers=[])).push(this)
}}this.lines.push(eh)
};
F.prototype.detachLine=function(eh){this.lines.splice(ce(this.lines,eh),1);
if(!this.lines.length&&this.doc.cm){var ei=this.doc.cm.curOp;
(ei.maybeHiddenMarkers||(ei.maybeHiddenMarkers=[])).push(this)
}};
function c9(eq,eo,ep,es,em){if(es&&es.shared){return E(eq,eo,ep,es,em)
}if(eq.cm&&!eq.cm.curOp){return b3(eq.cm,c9)(eq,eo,ep,es,em)
}var el=new F(eq,em);
if(em=="range"&&!dx(eo,ep)){return el
}if(es){ak(es,el)
}if(el.replacedWith){el.collapsed=true;
el.replacedWith=d6("span",[el.replacedWith],"CodeMirror-widget");
if(!es.handleMouseEvents){el.replacedWith.ignoreEvents=true
}}if(el.collapsed){az=true
}if(el.addToHistory){da(eq,{from:eo,to:ep,origin:"markText"},{head:eq.sel.head,anchor:eq.sel.anchor},NaN)
}var ei=eo.line,er=0,ek,ej,en=eq.cm,eh;
eq.iter(ei,ep.line+1,function(et){if(en&&el.collapsed&&!en.options.lineWrapping&&t(eq,et)==en.display.maxLine){eh=true
}var eu={from:null,to:null,marker:el};
er+=et.text.length;
if(ei==eo.line){eu.from=eo.ch;
er-=eo.ch
}if(ei==ep.line){eu.to=ep.ch;
er-=et.text.length-ep.ch
}if(el.collapsed){if(ei==ep.line){ej=aX(et,ep.ch)
}if(ei==eo.line){ek=aX(et,eo.ch)
}else{ea(et,0)
}}bs(et,eu);
++ei
});
if(el.collapsed){eq.iter(eo.line,ep.line+1,function(et){if(dM(eq,et)){ea(et,0)
}})
}if(el.clearOnEnter){bg(el,"beforeCursorEnter",function(){el.clear()
})
}if(el.readOnly){ec=true;
if(eq.history.done.length||eq.history.undone.length){eq.clearHistory()
}}if(el.collapsed){if(ek!=ej){throw new Error("Inserting collapsed marker overlapping an existing one")
}el.size=er;
el.atomic=true
}if(en){if(eh){en.curOp.updateMaxLine=true
}if(el.className||el.title||el.startStyle||el.endStyle||el.collapsed){O(en,eo.line,ep.line+1)
}if(el.atomic){cZ(en)
}}return el
}function s(ek,ei){this.markers=ek;
this.primary=ei;
for(var eh=0,ej=this;
eh<ek.length;
++eh){ek[eh].parent=this;
bg(ek[eh],"clear",function(){ej.clear()
})
}}z.SharedTextMarker=s;
aW(s);
s.prototype.clear=function(){if(this.explicitlyCleared){return
}this.explicitlyCleared=true;
for(var eh=0;
eh<this.markers.length;
++eh){this.markers[eh].clear()
}M(this,"clear")
};
s.prototype.find=function(){return this.primary.find()
};
function E(el,eo,en,eh,ej){eh=ak(eh);
eh.shared=false;
var em=[c9(el,eo,en,eh,ej)],ei=em[0];
var ek=eh.replacedWith;
cG(el,function(eq){if(ek){eh.replacedWith=ek.cloneNode(true)
}em.push(c9(eq,dW(eq,eo),dW(eq,en),eh,ej));
for(var ep=0;
ep<eq.linked.length;
++ep){if(eq.linked[ep].isParent){return
}}ei=dU(em)
});
return new s(em,ei)
}function ds(ej,eh){if(ej){for(var ei=0;
ei<ej.length;
++ei){var ek=ej[ei];
if(ek.marker==eh){return ek
}}}}function dc(ei,ej){for(var ek,eh=0;
eh<ei.length;
++eh){if(ei[eh]!=ej){(ek||(ek=[])).push(ei[eh])
}}return ek
}function bs(eh,ei){eh.markedSpans=eh.markedSpans?eh.markedSpans.concat([ei]):[ei];
ei.marker.attachLine(eh)
}function ao(ei,ej,en){if(ei){for(var el=0,eo;
el<ei.length;
++el){var ep=ei[el],em=ep.marker;
var eh=ep.from==null||(em.inclusiveLeft?ep.from<=ej:ep.from<ej);
if(eh||em.type=="bookmark"&&ep.from==ej&&(!en||!ep.marker.insertLeft)){var ek=ep.to==null||(em.inclusiveRight?ep.to>=ej:ep.to>ej);
(eo||(eo=[])).push({from:ep.from,to:ek?null:ep.to,marker:em})
}}}return eo
}function ad(ei,ek,en){if(ei){for(var el=0,eo;
el<ei.length;
++el){var ep=ei[el],em=ep.marker;
var ej=ep.to==null||(em.inclusiveRight?ep.to>=ek:ep.to>ek);
if(ej||em.type=="bookmark"&&ep.from==ek&&(!en||ep.marker.insertLeft)){var eh=ep.from==null||(em.inclusiveLeft?ep.from<=ek:ep.from<ek);
(eo||(eo=[])).push({from:eh?null:ep.from-ek,to:ep.to==null?null:ep.to-ek,marker:em})
}}}return eo
}function cR(et,eq){var ep=bo(et,eq.from.line)&&dw(et,eq.from.line).markedSpans;
var ew=bo(et,eq.to.line)&&dw(et,eq.to.line).markedSpans;
if(!ep&&!ew){return null
}var ei=eq.from.ch,el=eq.to.ch,eo=dV(eq.from,eq.to);
var en=ao(ep,ei,eo);
var ev=ad(ew,el,eo);
var eu=eq.text.length==1,ej=dU(eq.text).length+(eu?ei:0);
if(en){for(var ek=0;
ek<en.length;
++ek){var es=en[ek];
if(es.to==null){var ex=ds(ev,es.marker);
if(!ex){es.to=ei
}else{if(eu){es.to=ex.to==null?null:ex.to+ej
}}}}}if(ev){for(var ek=0;
ek<ev.length;
++ek){var es=ev[ek];
if(es.to!=null){es.to+=ej
}if(es.from==null){var ex=ds(en,es.marker);
if(!ex){es.from=ej;
if(eu){(en||(en=[])).push(es)
}}}else{es.from+=ej;
if(eu){(en||(en=[])).push(es)
}}}}if(eu&&en){for(var ek=0;
ek<en.length;
++ek){if(en[ek].from!=null&&en[ek].from==en[ek].to&&en[ek].marker.type!="bookmark"){en.splice(ek--,1)
}}if(!en.length){en=null
}}var em=[en];
if(!eu){var er=eq.text.length-2,eh;
if(er>0&&en){for(var ek=0;
ek<en.length;
++ek){if(en[ek].to==null){(eh||(eh=[])).push({from:null,to:null,marker:en[ek].marker})
}}}for(var ek=0;
ek<er;
++ek){em.push(eh)
}em.push(ev)
}return em
}function cI(ep,en){var eh=bm(ep,en);
var eq=cR(ep,en);
if(!eh){return eq
}if(!eq){return eh
}for(var ek=0;
ek<eh.length;
++ek){var el=eh[ek],em=eq[ek];
if(el&&em){spans:for(var ej=0;
ej<em.length;
++ej){var eo=em[ej];
for(var ei=0;
ei<el.length;
++ei){if(el[ei].marker==eo.marker){continue spans
}}el.push(eo)
}}else{if(em){eh[ek]=em
}}}return eh
}function bQ(er,ep,eq){var ek=null;
er.iter(ep.line,eq.line+1,function(es){if(es.markedSpans){for(var et=0;
et<es.markedSpans.length;
++et){var eu=es.markedSpans[et].marker;
if(eu.readOnly&&(!ek||ce(ek,eu)==-1)){(ek||(ek=[])).push(eu)
}}}});
if(!ek){return null
}var el=[{from:ep,to:eq}];
for(var em=0;
em<ek.length;
++em){var en=ek[em],ei=en.find();
for(var ej=0;
ej<el.length;
++ej){var eh=el[ej];
if(dx(eh.to,ei.from)||dx(ei.to,eh.from)){continue
}var eo=[ej,1];
if(dx(eh.from,ei.from)||!en.inclusiveLeft&&dV(eh.from,ei.from)){eo.push({from:eh.from,to:ei.from})
}if(dx(ei.to,eh.to)||!en.inclusiveRight&&dV(eh.to,ei.to)){eo.push({from:ei.to,to:eh.to})
}el.splice.apply(el,eo);
ej+=eo.length-1
}}return el
}function aX(ei,ek){var eh=az&&ei.markedSpans,em;
if(eh){for(var el,ej=0;
ej<eh.length;
++ej){el=eh[ej];
if(!el.marker.collapsed){continue
}if((el.from==null||el.from<ek)&&(el.to==null||el.to>ek)&&(!em||em.width<el.marker.width)){em=el.marker
}}}return em
}function de(eh){return aX(eh,-1)
}function cX(eh){return aX(eh,eh.text.length+1)
}function t(ej,ei){var eh;
while(eh=de(ei)){ei=dw(ej,eh.find().from.line)
}return ei
}function dM(el,ei){var eh=az&&ei.markedSpans;
if(eh){for(var ek,ej=0;
ej<eh.length;
++ej){ek=eh[ej];
if(!ek.marker.collapsed){continue
}if(ek.from==null){return true
}if(ek.marker.replacedWith){continue
}if(ek.from==0&&ek.marker.inclusiveLeft&&H(el,ei,ek)){return true
}}}}function H(en,ei,ek){if(ek.to==null){var eh=ek.marker.find().to,el=dw(en,eh.line);
return H(en,el,ds(el.markedSpans,ek.marker))
}if(ek.marker.inclusiveRight&&ek.to==ei.text.length){return true
}for(var em,ej=0;
ej<ei.markedSpans.length;
++ej){em=ei.markedSpans[ej];
if(em.marker.collapsed&&!em.marker.replacedWith&&em.from==ek.to&&(em.marker.inclusiveLeft||ek.marker.inclusiveRight)&&H(en,ei,em)){return true
}}}function eb(eh){var ej=eh.markedSpans;
if(!ej){return
}for(var ei=0;
ei<ej.length;
++ei){ej[ei].marker.detachLine(eh)
}eh.markedSpans=null
}function b4(eh,ej){if(!ej){return
}for(var ei=0;
ei<ej.length;
++ei){ej[ei].marker.attachLine(eh)
}eh.markedSpans=ej
}var cq=z.LineWidget=function(eh,ek,ei){if(ei){for(var ej in ei){if(ei.hasOwnProperty(ej)){this[ej]=ei[ej]
}}}this.cm=eh;
this.node=ek
};
aW(cq);
function C(eh){return function(){var ej=!this.cm.curOp;
if(ej){bS(this.cm)
}try{var ei=eh.apply(this,arguments)
}finally{if(ej){U(this.cm)
}}return ei
}
}cq.prototype.clear=C(function(){var ei=this.line.widgets,ek=a9(this.line);
if(ek==null||!ei){return
}for(var ej=0;
ej<ei.length;
++ej){if(ei[ej]==this){ei.splice(ej--,1)
}}if(!ei.length){this.line.widgets=null
}var eh=a8(this.cm,this.line)<this.cm.doc.scrollTop;
ea(this.line,Math.max(0,this.line.height-b0(this)));
if(eh){bU(this.cm,0,-this.height)
}O(this.cm,ek,ek+1)
});
cq.prototype.changed=C(function(){var eh=this.height;
this.height=null;
var ei=b0(this)-eh;
if(!ei){return
}ea(this.line,this.line.height+ei);
var ej=a9(this.line);
O(this.cm,ej,ej+1)
});
function b0(eh){if(eh.height!=null){return eh.height
}if(!eh.node.parentNode||eh.node.parentNode.nodeType!=1){bd(eh.cm.display.measure,d6("div",[eh.node],null,"position: relative"))
}return eh.height=eh.node.offsetHeight
}function a3(eh,el,ej,ei){var ek=new cq(eh,ej,ei);
if(ek.noHScroll){eh.display.alignWidgets=true
}c1(eh,el,function(en){var eo=en.widgets||(en.widgets=[]);
if(ek.insertAt==null){eo.push(ek)
}else{eo.splice(Math.min(eo.length-1,Math.max(0,ek.insertAt)),0,ek)
}ek.line=en;
if(!dM(eh.doc,en)||ek.showIfHidden){var em=a8(eh,en)<eh.doc.scrollTop;
ea(en,en.height+b0(ek));
if(em){bU(eh,0,ek.height)
}}return true
});
return ek
}var d9=z.Line=function(ej,ei,eh){this.text=ej;
b4(this,ei);
this.height=eh?eh(this):1
};
aW(d9);
function cT(ei,el,ej,eh){ei.text=el;
if(ei.stateAfter){ei.stateAfter=null
}if(ei.styles){ei.styles=null
}if(ei.order!=null){ei.order=null
}eb(ei);
b4(ei,ej);
var ek=eh?eh(ei):1;
if(ek!=ei.height){ea(ei,ek)
}}function aY(eh){eh.parent=null;
eb(eh)
}function r(eo,eq,ek,ei,el){var ej=ek.flattenSpans;
if(ej==null){ej=eo.options.flattenSpans
}var en=0,em=null;
var ep=new dh(eq,eo.options.tabSize),eh;
if(eq==""&&ek.blankLine){ek.blankLine(ei)
}while(!ep.eol()){if(ep.pos>eo.options.maxHighlightLength){ej=false;
ep.pos=Math.min(eq.length,ep.start+50000);
eh=null
}else{eh=ek.token(ep,ei)
}if(!ej||em!=eh){if(en<ep.start){el(ep.start,em)
}en=ep.start;
em=eh
}ep.start=ep.pos
}if(en<ep.pos){el(ep.pos,em)
}}function dR(ei,ej,en){var el=[ei.state.modeGen];
r(ei,ej.text,ei.doc.mode,en,function(ep,eq){el.push(ep,eq)
});
for(var eo=0;
eo<ei.state.overlays.length;
++eo){var ek=ei.state.overlays[eo],em=1,eh=0;
r(ei,ej.text,ek.mode,true,function(ep,er){var et=em;
while(eh<ep){var eq=el[em];
if(eq>ep){el.splice(em,1,ep,el[em+1],eq)
}em+=2;
eh=Math.min(ep,eq)
}if(!er){return
}if(ek.opaque){el.splice(et,em-et,ep,er);
em=et+2
}else{for(;
et<em;
et+=2){var es=el[et+1];
el[et+1]=es?es+" "+er:er
}}})
}return el
}function b8(eh,ei){if(!ei.styles||ei.styles[0]!=eh.state.modeGen){ei.styles=dR(eh,ei,ei.stateAfter=cp(eh,a9(ei)))
}return ei.styles
}function cn(eh,ei,ej){var el=eh.doc.mode;
var ek=new dh(ei.text,eh.options.tabSize);
if(ei.text==""&&el.blankLine){el.blankLine(ej)
}while(!ek.eol()&&ek.pos<=eh.options.maxHighlightLength){el.token(ek,ej);
ek.start=ek.pos
}}var cB={};
function j(eh){if(!eh){return null
}return cB[eh]||(cB[eh]="cm-"+eh.replace(/ +/g," cm-"))
}function cx(ep,et,eh,es){var eq,eu=et,em=true;
while(eq=de(eu)){eu=dw(ep.doc,eq.find().from.line)
}var en={pre:d6("pre"),col:0,pos:0,measure:null,measuredSomething:false,cm:ep,copyWidgets:es};
if(eu.textClass){en.pre.className=eu.textClass
}do{if(eu.text){em=false
}en.measure=eu==et&&eh;
en.pos=0;
en.addToken=en.measure?e:p;
if((ct||b2)&&ep.getOption("lineWrapping")){en.addToken=dT(en.addToken)
}var el=aQ(eu,en,b8(ep,eu));
if(eh&&eu==et&&!en.measuredSomething){eh[0]=en.pre.appendChild(aP(ep.display.measure));
en.measuredSomething=true
}if(el){eu=dw(ep.doc,el.to.line)
}}while(el);
if(eh&&!en.measuredSomething&&!eh[0]){eh[0]=en.pre.appendChild(em?d6("span","\u00a0"):aP(ep.display.measure))
}if(!en.pre.firstChild&&!dM(ep.doc,et)){en.pre.appendChild(document.createTextNode("\u00a0"))
}var ei;
if(eh&&ct&&(ei=a(eu))){var ek=ei.length-1;
if(ei[ek].from==ei[ek].to){--ek
}var er=ei[ek],ej=ei[ek-1];
if(er.from+1==er.to&&ej&&er.level<ej.level){var eo=eh[en.pos-1];
if(eo){eo.parentNode.insertBefore(eo.measureRight=aP(ep.display.measure),eo.nextSibling)
}}}af(ep,"renderLine",ep,et,en.pre);
return en.pre
}var b6=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;
function p(el,et,eh,ek,eu,es){if(!et){return
}if(!b6.test(et)){el.col+=et.length;
var eo=document.createTextNode(et)
}else{var eo=document.createDocumentFragment(),eq=0;
while(true){b6.lastIndex=eq;
var ei=b6.exec(et);
var en=ei?ei.index-eq:et.length-eq;
if(en){eo.appendChild(document.createTextNode(et.slice(eq,eq+en)));
el.col+=en
}if(!ei){break
}eq+=en+1;
if(ei[0]=="\t"){var em=el.cm.options.tabSize,ep=em-el.col%em;
eo.appendChild(d6("span",bD(ep),"cm-tab"));
el.col+=ep
}else{var ej=d6("span","\u2022","cm-invalidchar");
ej.title="\\u"+ei[0].charCodeAt(0).toString(16);
eo.appendChild(ej);
el.col+=1
}}}if(eh||ek||eu||el.measure){var er=eh||"";
if(ek){er+=ek
}if(eu){er+=eu
}var ej=d6("span",[eo],er);
if(es){ej.title=es
}return el.pre.appendChild(ej)
}el.pre.appendChild(eo)
}function e(eo,eq,ei,el,er){var en=eo.cm.options.lineWrapping;
for(var em=0;
em<eq.length;
++em){var eh=eq.charAt(em),ej=em==0;
if(eh>="\ud800"&&eh<"\udbff"&&em<eq.length-1){eh=eq.slice(em,em+2);
++em
}else{if(em&&en&&bp(eq,em)){eo.pre.appendChild(d6("wbr"))
}}var ek=eo.measure[eo.pos];
var ep=eo.measure[eo.pos]=p(eo,eh,ei,ej&&el,em==eq.length-1&&er);
if(ek){ep.leftSide=ek.leftSide||ek
}if(ct&&en&&eh==" "&&em&&!/\s/.test(eq.charAt(em-1))&&em<eq.length-1&&!/\s/.test(eq.charAt(em+1))){ep.style.whiteSpace="normal"
}eo.pos+=eh.length
}if(eq.length){eo.measuredSomething=true
}}function dT(eh){function ei(ej){var ek=" ";
for(var el=0;
el<ej.length-2;
++el){ek+=el%2?" ":"\u00a0"
}ek+=" ";
return ek
}return function(ek,eo,el,ej,en,em){return eh(ek,eo.replace(/ {3,}/,ei),el,ej,en,em)
}
}function K(ei,el,eh,ek){var em=!ek&&eh.replacedWith;
if(em){if(ei.copyWidgets){em=em.cloneNode(true)
}ei.pre.appendChild(em);
if(ei.measure){if(el){ei.measure[ei.pos]=em
}else{var ej=ei.measure[ei.pos]=aP(ei.cm.display.measure);
if(eh.type!="bookmark"||eh.insertLeft){ei.pre.insertBefore(ej,em)
}else{ei.pre.appendChild(ej)
}}ei.measuredSomething=true
}}ei.pos+=el
}function aQ(ep,ew,eo){var em=ep.markedSpans,en=ep.text,eu=0;
if(!em){for(var ez=1;
ez<eo.length;
ez+=2){ew.addToken(ew,en.slice(eu,eu=eo[ez]),j(eo[ez+1]))
}return
}var eA=en.length,el=0,ez=1,es="",eB;
var eD=0,eh,eC,et,eE,ej;
for(;
;
){if(eD==el){eh=eC=et=eE="";
ej=null;
eD=Infinity;
var eq=null;
for(var ex=0;
ex<em.length;
++ex){var ey=em[ex],ev=ey.marker;
if(ey.from<=el&&(ey.to==null||ey.to>el)){if(ey.to!=null&&eD>ey.to){eD=ey.to;
eC=""
}if(ev.className){eh+=" "+ev.className
}if(ev.startStyle&&ey.from==el){et+=" "+ev.startStyle
}if(ev.endStyle&&ey.to==eD){eC+=" "+ev.endStyle
}if(ev.title&&!eE){eE=ev.title
}if(ev.collapsed&&(!ej||ej.marker.size<ev.size)){ej=ey
}}else{if(ey.from>el&&eD>ey.from){eD=ey.from
}}if(ev.type=="bookmark"&&ey.from==el&&ev.replacedWith){eq=ev
}}if(ej&&(ej.from||0)==el){K(ew,(ej.to==null?eA:ej.to)-el,ej.marker,ej.from==null);
if(ej.to==null){return ej.marker.find()
}}if(eq&&!ej){K(ew,0,eq)
}}if(el>=eA){break
}var er=Math.min(eA,eD);
while(true){if(es){var ei=el+es.length;
if(!ej){var ek=ei>er?es.slice(0,er-el):es;
ew.addToken(ew,ek,eB?eB+eh:eh,et,el+ek.length==eD?eC:"",eE)
}if(ei>=er){es=es.slice(er-el);
el=er;
break
}el=ei;
et=""
}es=en.slice(eu,eu=eo[ez++]);
eB=j(eo[ez++])
}}}function dP(ey,ep,el,et,en){function ek(ez){return el?el[ez]:null
}function eo(ez,eB,eA){cT(ez,eB,eA,en);
M(ez,"change",ez,ep)
}var eu=ep.from,ei=ep.to,er=ep.text;
var eq=dw(ey,eu.line),eh=dw(ey,ei.line);
var ej=dU(er),ew=ek(er.length-1),es=ei.line-eu.line;
if(eu.ch==0&&ei.ch==0&&ej==""){for(var ev=0,ex=er.length-1,em=[];
ev<ex;
++ev){em.push(new d9(er[ev],ek(ev),en))
}eo(eh,eh.text,ew);
if(es){ey.remove(eu.line,es)
}if(em.length){ey.insert(eu.line,em)
}}else{if(eq==eh){if(er.length==1){eo(eq,eq.text.slice(0,eu.ch)+ej+eq.text.slice(ei.ch),ew)
}else{for(var em=[],ev=1,ex=er.length-1;
ev<ex;
++ev){em.push(new d9(er[ev],ek(ev),en))
}em.push(new d9(ej+eq.text.slice(ei.ch),ew,en));
eo(eq,eq.text.slice(0,eu.ch)+er[0],ek(0));
ey.insert(eu.line+1,em)
}}else{if(er.length==1){eo(eq,eq.text.slice(0,eu.ch)+er[0]+eh.text.slice(ei.ch),ek(0));
ey.remove(eu.line+1,es)
}else{eo(eq,eq.text.slice(0,eu.ch)+er[0],ek(0));
eo(eh,ej+eh.text.slice(ei.ch),ew);
for(var ev=1,ex=er.length-1,em=[];
ev<ex;
++ev){em.push(new d9(er[ev],ek(ev),en))
}if(es>1){ey.remove(eu.line+1,es-1)
}ey.insert(eu.line+1,em)
}}}M(ey,"change",ey,ep);
be(ey,et.anchor,et.head,null,true)
}function dl(ei){this.lines=ei;
this.parent=null;
for(var ej=0,ek=ei.length,eh=0;
ej<ek;
++ej){ei[ej].parent=this;
eh+=ei[ej].height
}this.height=eh
}dl.prototype={chunkSize:function(){return this.lines.length
},removeInner:function(eh,el){for(var ej=eh,ek=eh+el;
ej<ek;
++ej){var ei=this.lines[ej];
this.height-=ei.height;
aY(ei);
M(ei,"delete")
}this.lines.splice(eh,el)
},collapse:function(eh){eh.splice.apply(eh,[eh.length,0].concat(this.lines))
},insertInner:function(ei,ej,eh){this.height+=eh;
this.lines=this.lines.slice(0,ei).concat(ej).concat(this.lines.slice(ei));
for(var ek=0,el=ej.length;
ek<el;
++ek){ej[ek].parent=this
}},iterN:function(eh,ek,ej){for(var ei=eh+ek;
eh<ei;
++eh){if(ej(this.lines[eh])){return true
}}}};
function dN(ek){this.children=ek;
var ej=0,eh=0;
for(var ei=0,em=ek.length;
ei<em;
++ei){var el=ek[ei];
ej+=el.chunkSize();
eh+=el.height;
el.parent=this
}this.size=ej;
this.height=eh;
this.parent=null
}dN.prototype={chunkSize:function(){return this.size
},removeInner:function(eh,eo){this.size-=eo;
for(var ej=0;
ej<this.children.length;
++ej){var en=this.children[ej],el=en.chunkSize();
if(eh<el){var ek=Math.min(eo,el-eh),em=en.height;
en.removeInner(eh,ek);
this.height-=em-en.height;
if(el==ek){this.children.splice(ej--,1);
en.parent=null
}if((eo-=ek)==0){break
}eh=0
}else{eh-=el
}}if(this.size-eo<25){var ei=[];
this.collapse(ei);
this.children=[new dl(ei)];
this.children[0].parent=this
}},collapse:function(eh){for(var ei=0,ej=this.children.length;
ei<ej;
++ei){this.children[ei].collapse(eh)
}},insertInner:function(ei,ep,eo){this.size+=ep.length;
this.height+=eo;
for(var ej=0,el=this.children.length;
ej<el;
++ej){var eh=this.children[ej],em=eh.chunkSize();
if(ei<=em){eh.insertInner(ei,ep,eo);
if(eh.lines&&eh.lines.length>50){while(eh.lines.length>50){var ek=eh.lines.splice(eh.lines.length-25,25);
var en=new dl(ek);
eh.height-=en.height;
this.children.splice(ej+1,0,en);
en.parent=this
}this.maybeSpill()
}break
}ei-=em
}},maybeSpill:function(){if(this.children.length<=10){return
}var ek=this;
do{var ei=ek.children.splice(ek.children.length-5,5);
var ej=new dN(ei);
if(!ek.parent){var el=new dN(ek.children);
el.parent=ek;
ek.children=[el,ej];
ek=el
}else{ek.size-=ej.size;
ek.height-=ej.height;
var eh=ce(ek.parent.children,ek);
ek.parent.children.splice(eh+1,0,ej)
}ej.parent=ek.parent
}while(ek.children.length>10);
ek.parent.maybeSpill()
},iterN:function(eh,eo,en){for(var ei=0,el=this.children.length;
ei<el;
++ei){var em=this.children[ei],ek=em.chunkSize();
if(eh<ek){var ej=Math.min(eo,ek-eh);
if(em.iterN(eh,ej,en)){return true
}if((eo-=ej)==0){break
}eh=0
}else{eh-=ek
}}}};
var bE=0;
var Y=z.Doc=function(ej,ei,eh){if(!(this instanceof Y)){return new Y(ej,ei,eh)
}if(eh==null){eh=0
}dN.call(this,[new dl([new d9("",null)])]);
this.first=eh;
this.scrollTop=this.scrollLeft=0;
this.cantEdit=false;
this.history=aa();
this.cleanGeneration=1;
this.frontier=eh;
var ek=I(eh,0);
this.sel={from:ek,to:ek,head:ek,anchor:ek,shift:false,extend:false,goalColumn:null};
this.id=++bE;
this.modeOption=ei;
if(typeof ej=="string"){ej=aw(ej)
}dP(this,{from:ek,to:ek,text:ej},null,{head:ek,anchor:ek})
};
Y.prototype=bx(dN.prototype,{constructor:Y,iter:function(ej,ei,eh){if(eh){this.iterN(ej-this.first,ei-ej,eh)
}else{this.iterN(this.first,this.first+this.size,ej)
}},insert:function(ei,ej){var eh=0;
for(var ek=0,el=ej.length;
ek<el;
++ek){eh+=ej[ek].height
}this.insertInner(ei-this.first,ej,eh)
},remove:function(eh,ei){this.removeInner(eh-this.first,ei)
},getValue:function(ei){var eh=ay(this,this.first,this.first+this.size);
if(ei===false){return eh
}return eh.join(ei||"\n")
},setValue:function(ei){var ej=I(this.first,0),eh=this.first+this.size-1;
aH(this,{from:ej,to:I(eh,dw(this,eh).text.length),text:aw(ei),origin:"setValue"},{head:ej,anchor:ej},true)
},replaceRange:function(ei,ek,ej,eh){ek=dW(this,ek);
ej=ej?dW(this,ej):ek;
ax(this,ei,ek,ej,eh)
},getRange:function(ek,ej,ei){var eh=d7(this,dW(this,ek),dW(this,ej));
if(ei===false){return eh
}return eh.join(ei||"\n")
},getLine:function(ei){var eh=this.getLineHandle(ei);
return eh&&eh.text
},setLine:function(eh,ei){if(bo(this,eh)){ax(this,ei,I(eh,0),dW(this,I(eh)))
}},removeLine:function(eh){if(eh){ax(this,"",dW(this,I(eh-1)),dW(this,I(eh)))
}else{ax(this,"",I(0,0),dW(this,I(1,0)))
}},getLineHandle:function(eh){if(bo(this,eh)){return dw(this,eh)
}},getLineNumber:function(eh){return a9(eh)
},getLineHandleVisualStart:function(eh){if(typeof eh=="number"){eh=dw(this,eh)
}return t(this,eh)
},lineCount:function(){return this.size
},firstLine:function(){return this.first
},lastLine:function(){return this.first+this.size-1
},clipPos:function(eh){return dW(this,eh)
},getCursor:function(ej){var eh=this.sel,ei;
if(ej==null||ej=="head"){ei=eh.head
}else{if(ej=="anchor"){ei=eh.anchor
}else{if(ej=="end"||ej===false){ei=eh.to
}else{ei=eh.from
}}}return bw(ei)
},somethingSelected:function(){return !dV(this.sel.head,this.sel.anchor)
},setCursor:dQ(function(eh,ei,ek){var ej=dW(this,typeof eh=="number"?I(eh,ei||0):eh);
if(ek){d3(this,ej)
}else{be(this,ej,ej)
}}),setSelection:dQ(function(eh,ei){be(this,dW(this,eh),dW(this,ei||eh))
}),extendSelection:dQ(function(ei,eh){d3(this,dW(this,ei),eh&&dW(this,eh))
}),getSelection:function(eh){return this.getRange(this.sel.from,this.sel.to,eh)
},replaceSelection:function(ei,ej,eh){aH(this,{from:this.sel.from,to:this.sel.to,text:aw(ei),origin:eh},ej||"around")
},undo:dQ(function(){bn(this,"undo")
}),redo:dQ(function(){bn(this,"redo")
}),setExtending:function(eh){this.sel.extend=eh
},historySize:function(){var eh=this.history;
return{undo:eh.done.length,redo:eh.undone.length}
},clearHistory:function(){this.history=aa(this.history.maxGeneration)
},markClean:function(){this.cleanGeneration=this.changeGeneration()
},changeGeneration:function(){this.history.lastOp=this.history.lastOrigin=null;
return this.history.generation
},isClean:function(eh){return this.history.generation==(eh||this.cleanGeneration)
},getHistory:function(){return{done:ba(this.history.done),undone:ba(this.history.undone)}
},setHistory:function(ei){var eh=this.history=aa(this.history.maxGeneration);
eh.done=ei.done.slice(0);
eh.undone=ei.undone.slice(0)
},markText:function(ej,ei,eh){return c9(this,dW(this,ej),dW(this,ei),eh,"range")
},setBookmark:function(ej,eh){var ei={replacedWith:eh&&(eh.nodeType==null?eh.widget:eh),insertLeft:eh&&eh.insertLeft};
ej=dW(this,ej);
return c9(this,ej,ej,ei,"bookmark")
},findMarksAt:function(el){el=dW(this,el);
var ek=[],ei=dw(this,el.line).markedSpans;
if(ei){for(var eh=0;
eh<ei.length;
++eh){var ej=ei[eh];
if((ej.from==null||ej.from<=el.ch)&&(ej.to==null||ej.to>=el.ch)){ek.push(ej.marker.parent||ej.marker)
}}}return ek
},getAllMarks:function(){var eh=[];
this.iter(function(ej){var ei=ej.markedSpans;
if(ei){for(var ek=0;
ek<ei.length;
++ek){if(ei[ek].from!=null){eh.push(ei[ek].marker)
}}}});
return eh
},posFromIndex:function(ei){var eh,ej=this.first;
this.iter(function(ek){var el=ek.text.length+1;
if(el>ei){eh=ei;
return true
}ei-=el;
++ej
});
return dW(this,I(ej,eh))
},indexFromPos:function(ei){ei=dW(this,ei);
var eh=ei.ch;
if(ei.line<this.first||ei.ch<0){return 0
}this.iter(this.first,ei.line,function(ej){eh+=ej.text.length+1
});
return eh
},copy:function(eh){var ei=new Y(ay(this,this.first,this.first+this.size),this.modeOption,this.first);
ei.scrollTop=this.scrollTop;
ei.scrollLeft=this.scrollLeft;
ei.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:false,goalColumn:this.sel.goalColumn};
if(eh){ei.history.undoDepth=this.history.undoDepth;
ei.setHistory(this.getHistory())
}return ei
},linkedDoc:function(eh){if(!eh){eh={}
}var ek=this.first,ej=this.first+this.size;
if(eh.from!=null&&eh.from>ek){ek=eh.from
}if(eh.to!=null&&eh.to<ej){ej=eh.to
}var ei=new Y(ay(this,ek,ej),eh.mode||this.modeOption,ek);
if(eh.sharedHist){ei.history=this.history
}(this.linked||(this.linked=[])).push({doc:ei,sharedHist:eh.sharedHist});
ei.linked=[{doc:this,isParent:true,sharedHist:eh.sharedHist}];
return ei
},unlinkDoc:function(ei){if(ei instanceof z){ei=ei.doc
}if(this.linked){for(var ej=0;
ej<this.linked.length;
++ej){var ek=this.linked[ej];
if(ek.doc!=ei){continue
}this.linked.splice(ej,1);
ei.unlinkDoc(this);
break
}}if(ei.history==this.history){var eh=[ei.id];
cG(ei,function(el){eh.push(el.id)
},true);
ei.history=aa();
ei.history.done=ba(this.history.done,eh);
ei.history.undone=ba(this.history.undone,eh)
}},iterLinkedDocs:function(eh){cG(this,eh)
},getMode:function(){return this.mode
},getEditor:function(){return this.cm
}});
Y.prototype.eachLine=Y.prototype.iter;
var d="iter insert remove copy getEditor".split(" ");
for(var a6 in Y.prototype){if(Y.prototype.hasOwnProperty(a6)&&ce(d,a6)<0){z.prototype[a6]=(function(eh){return function(){return eh.apply(this.doc,arguments)
}
})(Y.prototype[a6])
}}aW(Y);
function cG(ek,ej,ei){function eh(eq,eo,em){if(eq.linked){for(var en=0;
en<eq.linked.length;
++en){var el=eq.linked[en];
if(el.doc==eo){continue
}var ep=em&&el.sharedHist;
if(ei&&!ep){continue
}ej(el.doc,ep);
eh(el.doc,eq,ep)
}}}eh(ek,null,true)
}function cJ(eh,ei){if(ei.cm){throw new Error("This document is already in use.")
}eh.doc=ei;
ei.cm=eh;
J(eh);
aS(eh);
if(!eh.options.lineWrapping){d8(eh)
}eh.options.mode=ei.modeOption;
O(eh)
}function dw(eh,el){el-=eh.first;
while(!eh.lines){for(var ei=0;
;
++ei){var ek=eh.children[ei],ej=ek.chunkSize();
if(el<ej){eh=ek;
break
}el-=ej
}}return eh.lines[el]
}function d7(ej,el,eh){var ei=[],ek=el.line;
ej.iter(el.line,eh.line+1,function(em){var en=em.text;
if(ek==eh.line){en=en.slice(0,eh.ch)
}if(ek==el.line){en=en.slice(el.ch)
}ei.push(en);
++ek
});
return ei
}function ay(ei,ek,ej){var eh=[];
ei.iter(ek,ej,function(el){eh.push(el.text)
});
return eh
}function ea(ei,eh){var ej=eh-ei.height;
for(var ek=ei;
ek;
ek=ek.parent){ek.height+=ej
}}function a9(eh){if(eh.parent==null){return null
}var el=eh.parent,ek=ce(el.lines,eh);
for(var ei=el.parent;
ei;
el=ei,ei=ei.parent){for(var ej=0;
;
++ej){if(ei.children[ej]==el){break
}ek+=ei.children[ej].chunkSize()
}}return ek+el.first
}function a2(en,el){var ej=en.first;
outer:do{for(var ek=0,em=en.children.length;
ek<em;
++ek){var ei=en.children[ek],eh=ei.height;
if(el<eh){en=ei;
continue outer
}el-=eh;
ej+=ei.chunkSize()
}return ej
}while(!en.lines);
for(var ek=0,em=en.lines.length;
ek<em;
++ek){var ep=en.lines[ek],eo=ep.height;
if(el<eo){break
}el-=eo
}return ej+ek
}function a8(eh,ek){ek=t(eh.doc,ek);
var em=0,ej=ek.parent;
for(var el=0;
el<ej.lines.length;
++el){var ei=ej.lines[el];
if(ei==ek){break
}else{em+=ei.height
}}for(var en=ej.parent;
en;
ej=en,en=ej.parent){for(var el=0;
el<en.children.length;
++el){var eo=en.children[el];
if(eo==ej){break
}else{em+=eo.height
}}}return em
}function a(ei){var eh=ei.order;
if(eh==null){eh=ei.order=aI(ei.text)
}return eh
}function aa(eh){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,generation:eh||1,maxGeneration:eh||1}
}function bh(ei,em,el,ek){var eh=em["spans_"+ei.id],ej=0;
ei.iter(Math.max(ei.first,el),Math.min(ei.first+ei.size,ek),function(en){if(en.markedSpans){(eh||(eh=em["spans_"+ei.id]={}))[ej]=en.markedSpans
}++ej
})
}function cl(eh,ek){var ej={line:ek.from.line,ch:ek.from.ch};
var ei={from:ej,to:bZ(ek),text:d7(eh,ek.from,ek.to)};
bh(eh,ei,ek.from.line,ek.to.line+1);
cG(eh,function(el){bh(el,ei,ek.from.line,ek.to.line+1)
},true);
return ei
}function da(em,eo,el,eh){var ek=em.history;
ek.undone.length=0;
var ej=+new Date,en=dU(ek.done);
if(en&&(ek.lastOp==eh||ek.lastOrigin==eo.origin&&eo.origin&&((eo.origin.charAt(0)=="+"&&em.cm&&ek.lastTime>ej-em.cm.options.historyEventDelay)||eo.origin.charAt(0)=="*"))){var ei=dU(en.changes);
if(dV(eo.from,eo.to)&&dV(eo.from,ei.to)){ei.to=bZ(eo)
}else{en.changes.push(cl(em,eo))
}en.anchorAfter=el.anchor;
en.headAfter=el.head
}else{en={changes:[cl(em,eo)],generation:ek.generation,anchorBefore:em.sel.anchor,headBefore:em.sel.head,anchorAfter:el.anchor,headAfter:el.head};
ek.done.push(en);
ek.generation=++ek.maxGeneration;
while(ek.done.length>ek.undoDepth){ek.done.shift()
}}ek.lastTime=ej;
ek.lastOp=eh;
ek.lastOrigin=eo.origin
}function aL(ej){if(!ej){return null
}for(var ei=0,eh;
ei<ej.length;
++ei){if(ej[ei].marker.explicitlyCleared){if(!eh){eh=ej.slice(0,ei)
}}else{if(eh){eh.push(ej[ei])
}}}return !eh?ej:eh.length?eh:null
}function bm(ek,el){var ej=el["spans_"+ek.id];
if(!ej){return null
}for(var ei=0,eh=[];
ei<el.text.length;
++ei){eh.push(aL(ej[ei]))
}return eh
}function ba(er,ek){for(var en=0,ei=[];
en<er.length;
++en){var ej=er[en],ep=ej.changes,eq=[];
ei.push({changes:eq,anchorBefore:ej.anchorBefore,headBefore:ej.headBefore,anchorAfter:ej.anchorAfter,headAfter:ej.headAfter});
for(var em=0;
em<ep.length;
++em){var eo=ep[em],el;
eq.push({from:eo.from,to:eo.to,text:eo.text});
if(ek){for(var eh in eo){if(el=eh.match(/^spans_(\d+)$/)){if(ce(ek,Number(el[1]))>-1){dU(eq)[eh]=eo[eh];
delete eo[eh]
}}}}}}return ei
}function dj(ek,ej,ei,eh){if(ei<ek.line){ek.line+=eh
}else{if(ej<ek.line){ek.line=ej;
ek.ch=0
}}}function dz(ek,em,en,eo){for(var ej=0;
ej<ek.length;
++ej){var eh=ek[ej],el=true;
for(var ei=0;
ei<eh.changes.length;
++ei){var ep=eh.changes[ei];
if(!eh.copied){ep.from=bw(ep.from);
ep.to=bw(ep.to)
}if(en<ep.from.line){ep.from.line+=eo;
ep.to.line+=eo
}else{if(em<=ep.to.line){el=false;
break
}}}if(!eh.copied){eh.anchorBefore=bw(eh.anchorBefore);
eh.headBefore=bw(eh.headBefore);
eh.anchorAfter=bw(eh.anchorAfter);
eh.readAfter=bw(eh.headAfter);
eh.copied=true
}if(!el){ek.splice(0,ej+1);
ej=0
}else{dj(eh.anchorBefore);
dj(eh.headBefore);
dj(eh.anchorAfter);
dj(eh.headAfter)
}}}function cs(ei,el){var ek=el.from.line,ej=el.to.line,eh=el.text.length-(ej-ek)-1;
dz(ei.done,ek,ej,eh);
dz(ei.undone,ek,ej,eh)
}function dg(){cU(this)
}function W(eh){if(!eh.stop){eh.stop=dg
}return eh
}function bP(eh){if(eh.preventDefault){eh.preventDefault()
}else{eh.returnValue=false
}}function ci(eh){if(eh.stopPropagation){eh.stopPropagation()
}else{eh.cancelBubble=true
}}function a7(eh){return eh.defaultPrevented!=null?eh.defaultPrevented:eh.returnValue==false
}function cU(eh){bP(eh);
ci(eh)
}z.e_stop=cU;
z.e_preventDefault=bP;
z.e_stopPropagation=ci;
function B(eh){return eh.target||eh.srcElement
}function dY(ei){var eh=ei.which;
if(eh==null){if(ei.button&1){eh=1
}else{if(ei.button&2){eh=3
}else{if(ei.button&4){eh=2
}}}}if(bl&&ei.ctrlKey&&eh==1){eh=3
}return eh
}function bg(ek,ei,ej){if(ek.addEventListener){ek.addEventListener(ei,ej,false)
}else{if(ek.attachEvent){ek.attachEvent("on"+ei,ej)
}else{var el=ek._handlers||(ek._handlers={});
var eh=el[ei]||(el[ei]=[]);
eh.push(ej)
}}}function cM(el,ej,ek){if(el.removeEventListener){el.removeEventListener(ej,ek,false)
}else{if(el.detachEvent){el.detachEvent("on"+ej,ek)
}else{var eh=el._handlers&&el._handlers[ej];
if(!eh){return
}for(var ei=0;
ei<eh.length;
++ei){if(eh[ei]==ek){eh.splice(ei,1);
break
}}}}}function af(el,ek){var eh=el._handlers&&el._handlers[ek];
if(!eh){return
}var ei=Array.prototype.slice.call(arguments,2);
for(var ej=0;
ej<eh.length;
++ej){eh[ej].apply(null,ei)
}}var aO,bF=0;
function M(em,el){var eh=em._handlers&&em._handlers[el];
if(!eh){return
}var ej=Array.prototype.slice.call(arguments,2);
if(!aO){++bF;
aO=[];
setTimeout(c2,0)
}function ei(en){return function(){en.apply(null,ej)
}
}for(var ek=0;
ek<eh.length;
++ek){aO.push(ei(eh[ek]))
}}function ap(eh,ej,ei){af(eh,ei||ej.type,eh,ej);
return a7(ej)||ej.codemirrorIgnore
}function c2(){--bF;
var eh=aO;
aO=null;
for(var ei=0;
ei<eh.length;
++ei){eh[ei]()
}}function dC(ej,ei){var eh=ej._handlers&&ej._handlers[ei];
return eh&&eh.length>0
}z.on=bg;
z.off=cM;
z.signal=af;
function aW(eh){eh.prototype.on=function(ei,ej){bg(this,ei,ej)
};
eh.prototype.off=function(ei,ej){cM(this,ei,ej)
}
}var aK=30;
var bq=z.Pass={toString:function(){return"CodeMirror.Pass"
}};
function eg(){this.id=null
}eg.prototype={set:function(eh,ei){clearTimeout(this.id);
this.id=setTimeout(ei,eh)
}};
function bc(ej,eh,el,em,ei){if(eh==null){eh=ej.search(/[^\s\u00a0]/);
if(eh==-1){eh=ej.length
}}for(var ek=em||0,en=ei||0;
ek<eh;
++ek){if(ej.charAt(ek)=="\t"){en+=el-(en%el)
}else{++en
}}return en
}z.countColumn=bc;
var av=[""];
function bD(eh){while(av.length<=eh){av.push(dU(av)+" ")
}return av[eh]
}function dU(eh){return eh[eh.length-1]
}function cv(ei){if(dm){ei.selectionStart=0;
ei.selectionEnd=ei.value.length
}else{try{ei.select()
}catch(eh){}}}function ce(ek,eh){if(ek.indexOf){return ek.indexOf(eh)
}for(var ei=0,ej=ek.length;
ei<ej;
++ei){if(ek[ei]==eh){return ei
}}return -1
}function bx(ek,ei){function eh(){}eh.prototype=ek;
var ej=new eh();
if(ei){ak(ei,ej)
}return ej
}function ak(ei,eh){if(!eh){eh={}
}for(var ej in ei){if(ei.hasOwnProperty(ej)){eh[ej]=ei[ej]
}}return eh
}function S(ej){for(var eh=[],ei=0;
ei<ej;
++ei){eh.push(undefined)
}return eh
}function bI(ei){var eh=Array.prototype.slice.call(arguments,1);
return function(){return ei.apply(null,eh)
}
}var aE=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
function bL(eh){return/\w/.test(eh)||eh>"\x80"&&(eh.toUpperCase()!=eh.toLowerCase()||aE.test(eh))
}function di(eh){for(var ei in eh){if(eh.hasOwnProperty(ei)&&eh[ei]){return false
}}return true
}var dI=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;
function d6(eh,el,ek,ej){var em=document.createElement(eh);
if(ek){em.className=ek
}if(ej){em.style.cssText=ej
}if(typeof el=="string"){n(em,el)
}else{if(el){for(var ei=0;
ei<el.length;
++ei){em.appendChild(el[ei])
}}}return em
}function cD(ei){for(var eh=ei.childNodes.length;
eh>0;
--eh){ei.removeChild(ei.firstChild)
}return ei
}function bd(eh,ei){return cD(eh).appendChild(ei)
}function n(eh,ei){if(by){eh.innerHTML="";
eh.appendChild(document.createTextNode(ei))
}else{eh.textContent=ei
}}function al(eh){return eh.getBoundingClientRect()
}z.replaceGetRect=function(eh){al=eh
};
var dd=function(){if(by){return false
}var eh=d6("div");
return"draggable" in eh||"dragDrop" in eh
}();
function bp(){return false
}if(bC){bp=function(ei,eh){return ei.charCodeAt(eh-1)==36&&ei.charCodeAt(eh)==39
}
}else{if(ae&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)){bp=function(ei,eh){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(ei.slice(eh-1,eh+1))
}
}else{if(b2&&!/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)){bp=function(ei,eh){if(eh>1&&ei.charCodeAt(eh-1)==45){if(/\w/.test(ei.charAt(eh-2))&&/[^\-?\.]/.test(ei.charAt(eh))){return true
}if(eh>2&&/[\d\.,]/.test(ei.charAt(eh-2))&&/[\d\.,]/.test(ei.charAt(eh))){return false
}}return/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|[\w~`@#$%\^&*(_=+{[><]/.test(ei.slice(eh-1,eh+1))
}
}}}var cY;
function i(eh){if(cY!=null){return cY
}var ei=d6("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");
bd(eh,ei);
if(ei.offsetWidth){cY=ei.offsetHeight-ei.clientHeight
}return cY||0
}var dX;
function aP(eh){if(dX==null){var ei=d6("span","\u200b");
bd(eh,d6("span",[ei,document.createTextNode("x")]));
if(eh.firstChild.offsetHeight!=0){dX=ei.offsetWidth<=1&&ei.offsetHeight>2&&!bz
}}if(dX){return d6("span","\u200b")
}else{return d6("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")
}}var aw="\n\nb".split(/\n/).length!=3?function(em){var en=0,eh=[],el=em.length;
while(en<=el){var ek=em.indexOf("\n",en);
if(ek==-1){ek=em.length
}var ej=em.slice(en,em.charAt(ek-1)=="\r"?ek-1:ek);
var ei=ej.indexOf("\r");
if(ei!=-1){eh.push(ej.slice(0,ei));
en+=ei+1
}else{eh.push(ej);
en=ek+1
}}return eh
}:function(eh){return eh.split(/\r\n?|\n/)
};
z.splitLines=aw;
var aT=window.getSelection?function(ei){try{return ei.selectionStart!=ei.selectionEnd
}catch(eh){return false
}}:function(ej){try{var eh=ej.ownerDocument.selection.createRange()
}catch(ei){}if(!eh||eh.parentElement()!=ej){return false
}return eh.compareEndPoints("StartToEnd",eh)!=0
};
var b9=(function(){var eh=d6("div");
if("oncopy" in eh){return true
}eh.setAttribute("oncopy","return;");
return typeof eh.oncopy=="function"
})();
var dy={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};
z.keyNames=dy;
(function(){for(var eh=0;
eh<10;
eh++){dy[eh+48]=String(eh)
}for(var eh=65;
eh<=90;
eh++){dy[eh]=String.fromCharCode(eh)
}for(var eh=1;
eh<=12;
eh++){dy[eh+111]=dy[eh+63235]="F"+eh
}})();
function cE(eh,en,em,el){if(!eh){return el(en,em,"ltr")
}var ek=false;
for(var ej=0;
ej<eh.length;
++ej){var ei=eh[ej];
if(ei.from<em&&ei.to>en||en==em&&ei.to==en){el(Math.max(ei.from,en),Math.min(ei.to,em),ei.level==1?"rtl":"ltr");
ek=true
}}if(!ek){el(en,em,"ltr")
}}function co(eh){return eh.level%2?eh.to:eh.from
}function ed(eh){return eh.level%2?eh.from:eh.to
}function bO(ei){var eh=a(ei);
return eh?co(eh[0]):0
}function bY(ei){var eh=a(ei);
if(!eh){return ei.text.length
}return ed(dU(eh))
}function aU(ei,el){var ej=dw(ei.doc,el);
var em=t(ei.doc,ej);
if(em!=ej){el=a9(em)
}var eh=a(em);
var ek=!eh?0:eh[0].level%2?bY(em):bO(em);
return I(el,ek)
}function cy(ej,em){var ei,ek;
while(ei=cX(ek=dw(ej.doc,em))){em=ei.find().to.line
}var eh=a(ek);
var el=!eh?ek.text.length:eh[0].level%2?bO(ek):bY(ek);
return I(em,el)
}function V(ei,ej,eh){var ek=ei[0].level;
if(ej==ek){return true
}if(eh==ek){return false
}return ej<eh
}var dn;
function ah(eh,el){for(var ei=0,ej;
ei<eh.length;
++ei){var ek=eh[ei];
if(ek.from<el&&ek.to>el){dn=null;
return ei
}if(ek.from==el||ek.to==el){if(ej==null){ej=ei
}else{if(V(eh,ek.level,eh[ej].level)){dn=ej;
return ei
}else{dn=ei;
return ej
}}}}dn=null;
return ej
}function dv(eh,ek,ei,ej){if(!ej){return ek+ei
}do{ek+=ei
}while(ek>0&&dI.test(eh.text.charAt(ek)));
return ek
}function q(eh,eo,ej,ek){var el=a(eh);
if(!el){return P(eh,eo,ej,ek)
}var en=ah(el,eo),ei=el[en];
var em=dv(eh,eo,ei.level%2?-ej:ej,ek);
for(;
;
){if(em>ei.from&&em<ei.to){return em
}if(em==ei.from||em==ei.to){if(ah(el,em)==en){return em
}ei=el[en+=ej];
return(ej>0)==ei.level%2?ei.to:ei.from
}else{ei=el[en+=ej];
if(!ei){return null
}if((ej>0)==ei.level%2){em=dv(eh,ei.to,-1,ek)
}else{em=dv(eh,ei.from,1,ek)
}}}}function P(eh,el,ei,ej){var ek=el+ei;
if(ej){while(ek>0&&dI.test(eh.text.charAt(ek))){ek+=ei
}}return ek<0||ek>eh.text.length?null:ek
}var aI=(function(){var en="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL";
var el="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr";
function ek(eq){if(eq<=255){return en.charAt(eq)
}else{if(1424<=eq&&eq<=1524){return"R"
}else{if(1536<=eq&&eq<=1791){return el.charAt(eq-1536)
}else{if(1792<=eq&&eq<=2220){return"r"
}else{return"L"
}}}}}var eh=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;
var ep=/[stwN]/,ej=/[LRr]/,ei=/[Lb1n]/,em=/[1n]/;
var eo="L";
return function(eA){if(!eh.test(eA)){return false
}var eG=eA.length,ew=[];
for(var eF=0,es;
eF<eG;
++eF){ew.push(es=ek(eA.charCodeAt(eF)))
}for(var eF=0,ez=eo;
eF<eG;
++eF){var es=ew[eF];
if(es=="m"){ew[eF]=ez
}else{ez=es
}}for(var eF=0,eq=eo;
eF<eG;
++eF){var es=ew[eF];
if(es=="1"&&eq=="r"){ew[eF]="n"
}else{if(ej.test(es)){eq=es;
if(es=="r"){ew[eF]="R"
}}}}for(var eF=1,ez=ew[0];
eF<eG-1;
++eF){var es=ew[eF];
if(es=="+"&&ez=="1"&&ew[eF+1]=="1"){ew[eF]="1"
}else{if(es==","&&ez==ew[eF+1]&&(ez=="1"||ez=="n")){ew[eF]=ez
}}ez=es
}for(var eF=0;
eF<eG;
++eF){var es=ew[eF];
if(es==","){ew[eF]="N"
}else{if(es=="%"){for(var et=eF+1;
et<eG&&ew[et]=="%";
++et){}var eH=(eF&&ew[eF-1]=="!")||(et<eG-1&&ew[et]=="1")?"1":"N";
for(var eD=eF;
eD<et;
++eD){ew[eD]=eH
}eF=et-1
}}}for(var eF=0,eq=eo;
eF<eG;
++eF){var es=ew[eF];
if(eq=="L"&&es=="1"){ew[eF]="L"
}else{if(ej.test(es)){eq=es
}}}for(var eF=0;
eF<eG;
++eF){if(ep.test(ew[eF])){for(var et=eF+1;
et<eG&&ep.test(ew[et]);
++et){}var ex=(eF?ew[eF-1]:eo)=="L";
var er=(et<eG-1?ew[et]:eo)=="L";
var eH=ex||er?"L":"R";
for(var eD=eF;
eD<et;
++eD){ew[eD]=eH
}eF=et-1
}}var eE=[],eB;
for(var eF=0;
eF<eG;
){if(ei.test(ew[eF])){var eu=eF;
for(++eF;
eF<eG&&ei.test(ew[eF]);
++eF){}eE.push({from:eu,to:eF,level:0})
}else{var ev=eF,ey=eE.length;
for(++eF;
eF<eG&&ew[eF]!="L";
++eF){}for(var eD=ev;
eD<eF;
){if(em.test(ew[eD])){if(ev<eD){eE.splice(ey,0,{from:ev,to:eD,level:1})
}var eC=eD;
for(++eD;
eD<eF&&em.test(ew[eD]);
++eD){}eE.splice(ey,0,{from:eC,to:eD,level:2});
ev=eD
}else{++eD
}}if(ev<eF){eE.splice(ey,0,{from:ev,to:eF,level:1})
}}}if(eE[0].level==1&&(eB=eA.match(/^\s+/))){eE[0].from=eB[0].length;
eE.unshift({from:0,to:eB[0].length,level:0})
}if(dU(eE).level==1&&(eB=eA.match(/\s+$/))){dU(eE).to-=eB[0].length;
eE.push({from:eG-eB[0].length,to:eG,level:0})
}if(eE[0].level!=dU(eE).level){eE.push({from:eG,to:eG,level:eE[0].level})
}return eE
}
})();
z.version="3.15.0";
return z
})();CodeMirror.defineMode("clike",function(q,d){var k=q.indentUnit,i=d.statementIndentUnit||k,l=d.dontAlignCalls,f=d.keywords||{},r=d.builtin||{},m=d.blockKeywords||{},b=d.atoms||{},a=d.hooks||{},h=d.multiLineStrings;
var g=/[+\-*&%=<>!?|\/]/;
var o;
function s(x,v){var u=x.next();
if(a[u]){var t=a[u](x,v);
if(t!==false){return t
}}if(u=='"'||u=="'"){v.tokenize=e(u);
return v.tokenize(x,v)
}if(/[\[\]{}\(\),;\:\.]/.test(u)){o=u;
return null
}if(/\d/.test(u)){x.eatWhile(/[\w\.]/);
return"number"
}if(u=="/"){if(x.eat("*")){v.tokenize=j;
return j(x,v)
}if(x.eat("/")){x.skipToEnd();
return"comment"
}}if(g.test(u)){x.eatWhile(g);
return"operator"
}x.eatWhile(/[\w\$_]/);
var w=x.current();
if(f.propertyIsEnumerable(w)){if(m.propertyIsEnumerable(w)){o="newstatement"
}return"keyword"
}if(r.propertyIsEnumerable(w)){if(m.propertyIsEnumerable(w)){o="newstatement"
}return"builtin"
}if(b.propertyIsEnumerable(w)){return"atom"
}return"variable"
}function e(t){return function(y,w){var x=false,v,u=false;
while((v=y.next())!=null){if(v==t&&!x){u=true;
break
}x=!x&&v=="\\"
}if(u||!(x||h)){w.tokenize=null
}return"string"
}
}function j(w,v){var t=false,u;
while(u=w.next()){if(u=="/"&&t){v.tokenize=null;
break
}t=(u=="*")
}return"comment"
}function n(x,u,t,w,v){this.indented=x;
this.column=u;
this.type=t;
this.align=w;
this.prev=v
}function c(w,u,v){var t=w.indented;
if(w.context&&w.context.type=="statement"){t=w.context.indented
}return w.context=new n(t,u,v,null,w.context)
}function p(v){var u=v.context.type;
if(u==")"||u=="]"||u=="}"){v.indented=v.context.indented
}return v.context=v.context.prev
}return{startState:function(t){return{tokenize:null,context:new n((t||0)-k,0,"top",false),indented:0,startOfLine:true}
},token:function(w,v){var t=v.context;
if(w.sol()){if(t.align==null){t.align=false
}v.indented=w.indentation();
v.startOfLine=true
}if(w.eatSpace()){return null
}o=null;
var u=(v.tokenize||s)(w,v);
if(u=="comment"||u=="meta"){return u
}if(t.align==null){t.align=true
}if((o==";"||o==":"||o==",")&&t.type=="statement"){p(v)
}else{if(o=="{"){c(v,w.column(),"}")
}else{if(o=="["){c(v,w.column(),"]")
}else{if(o=="("){c(v,w.column(),")")
}else{if(o=="}"){while(t.type=="statement"){t=p(v)
}if(t.type=="}"){t=p(v)
}while(t.type=="statement"){t=p(v)
}}else{if(o==t.type){p(v)
}else{if(((t.type=="}"||t.type=="top")&&o!=";")||(t.type=="statement"&&o=="newstatement")){c(v,w.column(),"statement")
}}}}}}}v.startOfLine=false;
return u
},indent:function(x,u){if(x.tokenize!=s&&x.tokenize!=null){return CodeMirror.Pass
}var t=x.context,w=u&&u.charAt(0);
if(t.type=="statement"&&w=="}"){t=t.prev
}var v=w==t.type;
if(t.type=="statement"){return t.indented+(w=="{"?0:i)
}else{if(t.align&&(!l||t.type!=")")){return t.column+(v?0:1)
}else{if(t.type==")"&&!v){return t.indented+i
}else{return t.indented+(v?0:k)
}}}},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}
});
(function(){function d(j){var g={},h=j.split(" ");
for(var f=0;
f<h.length;
++f){g[h[f]]=true
}return g
}var b="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";
function e(g,f){if(!f.startOfLine){return false
}for(;
;
){if(g.skipTo("\\")){g.next();
if(g.eol()){f.tokenize=e;
break
}}else{g.skipToEnd();
f.tokenize=null;
break
}}return"meta"
}function c(h,g){var f;
while((f=h.next())!=null){if(f=='"'&&!h.eat('"')){g.tokenize=null;
break
}}return"string"
}function a(f,h){for(var g=0;
g<f.length;
++g){CodeMirror.defineMIME(f[g],h)
}}a(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:d(b),blockKeywords:d("case do else for if switch while struct"),atoms:d("null"),hooks:{"#":e}});
a(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:d(b+" asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t"),blockKeywords:d("catch class do else finally for if struct switch try while"),atoms:d("true false null"),hooks:{"#":e}});
CodeMirror.defineMIME("text/x-java",{name:"clike",keywords:d("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:d("catch class do else finally for if switch try while"),atoms:d("true false null"),hooks:{"@":function(f){f.eatWhile(/[\w\$_]/);
return"meta"
}}});
CodeMirror.defineMIME("text/x-csharp",{name:"clike",keywords:d("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:d("catch class do else finally for foreach if struct switch try while"),builtin:d("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:d("true false null"),hooks:{"@":function(g,f){if(g.eat('"')){f.tokenize=c;
return c(g,f)
}g.eatWhile(/[\w\$_]/);
return"meta"
}}});
CodeMirror.defineMIME("text/x-scala",{name:"clike",keywords:d("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:d("catch class do else finally for forSome if match switch try while"),atoms:d("true false null"),hooks:{"@":function(f){f.eatWhile(/[\w\$_]/);
return"meta"
}}});
a(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:d("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadowconst attribute uniform varying break continue discard return for while do if else struct in out inout"),blockKeywords:d("for while do if else struct"),builtin:d("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smootstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:d("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragColor gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),hooks:{"#":e}})
}());CodeMirror.defineMode("xml",function(B,l){var s=B.indentUnit;
var A=l.multilineTagIndentFactor||1;
var c=l.multilineTagIndentPastTag||true;
var y=l.htmlMode?{autoSelfClosers:{area:true,base:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true},implicitlyClosed:{dd:true,li:true,optgroup:true,option:true,p:true,rp:true,rt:true,tbody:true,td:true,tfoot:true,th:true,tr:true},contextGrabbers:{dd:{dd:true,dt:true},dt:{dd:true,dt:true},li:{li:true},option:{option:true,optgroup:true},optgroup:{optgroup:true},p:{address:true,article:true,aside:true,blockquote:true,dir:true,div:true,dl:true,fieldset:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,menu:true,nav:true,ol:true,p:true,pre:true,section:true,table:true,ul:true},rp:{rp:true,rt:true},rt:{rp:true,rt:true},tbody:{tbody:true,tfoot:true},td:{td:true,th:true},tfoot:{tbody:true},th:{td:true,th:true},thead:{tbody:true,tfoot:true},tr:{tr:true}},doNotIndent:{pre:true},allowUnquoted:true,allowMissing:true}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false};
var b=l.alignCDATA;
var g,h;
function p(I,H){function F(K){H.tokenize=K;
return K(I,H)
}var G=I.next();
if(G=="<"){if(I.eat("!")){if(I.eat("[")){if(I.match("CDATA[")){return F(x("atom","]]>"))
}else{return null
}}else{if(I.match("--")){return F(x("comment","-->"))
}else{if(I.match("DOCTYPE",true,true)){I.eatWhile(/[\w\._\-]/);
return F(C(1))
}else{return null
}}}}else{if(I.eat("?")){I.eatWhile(/[\w\._\-]/);
H.tokenize=x("meta","?>");
return"meta"
}else{var D=I.eat("/");
g="";
var J;
while((J=I.eat(/[^\s\u00a0=<>\"\'\/?]/))){g+=J
}if(!g){return"error"
}h=D?"closeTag":"openTag";
H.tokenize=o;
return"tag"
}}}else{if(G=="&"){var E;
if(I.eat("#")){if(I.eat("x")){E=I.eatWhile(/[a-fA-F\d]/)&&I.eat(";")
}else{E=I.eatWhile(/[\d]/)&&I.eat(";")
}}else{E=I.eatWhile(/[\w\.\-:]/)&&I.eat(";")
}return E?"atom":"error"
}else{I.eatWhile(/[^&<]/);
return null
}}}function o(F,E){var D=F.next();
if(D==">"||(D=="/"&&F.eat(">"))){E.tokenize=p;
h=D==">"?"endTag":"selfcloseTag";
return"tag"
}else{if(D=="="){h="equals";
return null
}else{if(D=="<"){return"error"
}else{if(/[\'\"]/.test(D)){E.tokenize=k(D);
E.stringStartCol=F.column();
return E.tokenize(F,E)
}else{F.eatWhile(/[^\s\u00a0=<>\"\']/);
return"word"
}}}}}function k(D){var E=function(G,F){while(!G.eol()){if(G.next()==D){F.tokenize=o;
break
}}return"string"
};
E.isInAttribute=true;
return E
}function x(E,D){return function(G,F){while(!G.eol()){if(G.match(D)){F.tokenize=p;
break
}G.next()
}return E
}
}function C(D){return function(G,F){var E;
while((E=G.next())!=null){if(E=="<"){F.tokenize=C(D+1);
return F.tokenize(G,F)
}else{if(E==">"){if(D==1){F.tokenize=p;
break
}else{F.tokenize=C(D-1);
return F.tokenize(G,F)
}}}}return"meta"
}
}var m,z,i;
function a(){for(var D=arguments.length-1;
D>=0;
D--){m.cc.push(arguments[D])
}}function f(){a.apply(null,arguments);
return true
}function j(D,F){var E=y.doNotIndent.hasOwnProperty(D)||(m.context&&m.context.noIndent);
m.context={prev:m.context,tagName:D,indent:m.indented,startOfLine:F,noIndent:E}
}function v(){if(m.context){m.context=m.context.prev
}}function e(D){if(D=="openTag"){m.tagName=g;
m.tagStart=z.column();
return f(n,d(m.startOfLine))
}else{if(D=="closeTag"){var E=false;
if(m.context){if(m.context.tagName!=g){if(y.implicitlyClosed.hasOwnProperty(m.context.tagName.toLowerCase())){v()
}E=!m.context||m.context.tagName!=g
}}else{E=true
}if(E){i="error"
}return f(t(E))
}}return f()
}function d(D){return function(F){var E=m.tagName;
m.tagName=m.tagStart=null;
if(F=="selfcloseTag"||(F=="endTag"&&y.autoSelfClosers.hasOwnProperty(E.toLowerCase()))){r(E.toLowerCase());
return f()
}if(F=="endTag"){r(E.toLowerCase());
j(E,D);
return f()
}return f()
}
}function t(D){return function(E){if(D){i="error"
}if(E=="endTag"){v();
return f()
}i="error";
return f(arguments.callee)
}
}function r(E){var D;
while(true){if(!m.context){return
}D=m.context.tagName.toLowerCase();
if(!y.contextGrabbers.hasOwnProperty(D)||!y.contextGrabbers[D].hasOwnProperty(E)){return
}v()
}}function n(D){if(D=="word"){i="attribute";
return f(q,n)
}if(D=="endTag"||D=="selfcloseTag"){return a()
}i="error";
return f(n)
}function q(D){if(D=="equals"){return f(w,n)
}if(!y.allowMissing){i="error"
}else{if(D=="word"){i="attribute"
}}return(D=="endTag"||D=="selfcloseTag")?a():f()
}function w(D){if(D=="string"){return f(u)
}if(D=="word"&&y.allowUnquoted){i="string";
return f()
}i="error";
return(D=="endTag"||D=="selfCloseTag")?a():f()
}function u(D){if(D=="string"){return f(u)
}else{return a()
}}return{startState:function(){return{tokenize:p,cc:[],indented:0,startOfLine:true,tagName:null,tagStart:null,context:null}
},token:function(G,F){if(!F.tagName&&G.sol()){F.startOfLine=true;
F.indented=G.indentation()
}if(G.eatSpace()){return null
}i=h=g=null;
var E=F.tokenize(G,F);
F.type=h;
if((E||h)&&E!="comment"){m=F;
z=G;
while(true){var D=F.cc.pop()||e;
if(D(h||E)){break
}}}F.startOfLine=false;
return i||E
},indent:function(G,D,F){var E=G.context;
if(G.tokenize.isInAttribute){return G.stringStartCol+1
}if((G.tokenize!=o&&G.tokenize!=p)||E&&E.noIndent){return F?F.match(/^(\s*)/)[0].length:0
}if(G.tagName){if(c){return G.tagStart+G.tagName.length+2
}else{return G.tagStart+s*A
}}if(b&&/<!\[CDATA\[/.test(D)){return 0
}if(E&&/^<\//.test(D)){E=E.prev
}while(E&&!E.startOfLine){E=E.prev
}if(E){return E.indent+s
}else{return 0
}},electricChars:"/",blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml"}
});
CodeMirror.defineMIME("text/xml","xml");
CodeMirror.defineMIME("application/xml","xml");
if(!CodeMirror.mimeModes.hasOwnProperty("text/html")){CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true})
};CodeMirror.defineMode("javascript",function(P,U){var x=P.indentUnit;
var Z=U.statementIndent;
var Y=U.json;
var B=U.typescript;
var b=function(){function al(an){return{type:an,style:"keyword"}
}var ag=al("keyword a"),ae=al("keyword b"),ad=al("keyword c");
var af=al("operator"),aj={type:"atom",style:"atom"};
var ah={"if":al("if"),"while":ag,"with":ag,"else":ae,"do":ae,"try":ae,"finally":ae,"return":ad,"break":ad,"continue":ad,"new":ad,"delete":ad,"throw":ad,"var":al("var"),"const":al("var"),let:al("var"),"function":al("function"),"catch":al("catch"),"for":al("for"),"switch":al("switch"),"case":al("case"),"default":al("default"),"in":af,"typeof":af,"instanceof":af,"true":aj,"false":aj,"null":aj,"undefined":aj,"NaN":aj,"Infinity":aj,"this":al("this")};
if(B){var am={type:"variable",style:"variable-3"};
var ai={"interface":al("interface"),"class":al("class"),"extends":al("extends"),constructor:al("constructor"),"public":al("public"),"private":al("private"),"protected":al("protected"),"static":al("static"),"super":al("super"),string:am,number:am,bool:am,any:am};
for(var ak in ai){ah[ak]=ai[ak]
}}return ah
}();
var V=/[+\-*&%=<>!?|~^]/;
function ab(af,ae,ad){ae.tokenize=ad;
return ad(af,ae)
}function h(ag,ad){var af=false,ae;
while((ae=ag.next())!=null){if(ae==ad&&!af){return false
}af=!af&&ae=="\\"
}return af
}var ac,q;
function I(af,ae,ad){ac=af;
q=ad;
return ae
}function m(ah,af){var ad=ah.next();
if(ad=='"'||ad=="'"){return ab(ah,af,C(ad))
}else{if(/[\[\]{}\(\),;\:\.]/.test(ad)){return I(ad)
}else{if(ad=="0"&&ah.eat(/x/i)){ah.eatWhile(/[\da-f]/i);
return I("number","number")
}else{if(/\d/.test(ad)||ad=="-"&&ah.eat(/\d/)){ah.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);
return I("number","number")
}else{if(ad=="/"){if(ah.eat("*")){return ab(ah,af,f)
}else{if(ah.eat("/")){ah.skipToEnd();
return I("comment","comment")
}else{if(af.lastType=="operator"||af.lastType=="keyword c"||/^[\[{}\(,;:]$/.test(af.lastType)){h(ah,"/");
ah.eatWhile(/[gimy]/);
return I("regexp","string-2")
}else{ah.eatWhile(V);
return I("operator",null,ah.current())
}}}}else{if(ad=="#"){ah.skipToEnd();
return I("error","error")
}else{if(V.test(ad)){ah.eatWhile(V);
return I("operator",null,ah.current())
}else{ah.eatWhile(/[\w\$_]/);
var ag=ah.current(),ae=b.propertyIsEnumerable(ag)&&b[ag];
return(ae&&af.lastType!=".")?I(ae.type,ae.style,ag):I("variable","variable",ag)
}}}}}}}}function C(ad){return function(af,ae){if(!h(af,ad)){ae.tokenize=m
}return I("string","string")
}
}function f(ag,af){var ad=false,ae;
while(ae=ag.next()){if(ae=="/"&&ad){af.tokenize=m;
break
}ad=(ae=="*")
}return I("comment","comment")
}var l={atom:true,number:true,variable:true,string:true,regexp:true,"this":true};
function v(ai,ae,ad,ah,af,ag){this.indented=ai;
this.column=ae;
this.type=ad;
this.prev=af;
this.info=ag;
if(ah!=null){this.align=ah
}}function y(af,ae){for(var ad=af.localVars;
ad;
ad=ad.next){if(ad.name==ae){return true
}}}function K(ah,ae,ad,ag,ai){var aj=ah.cc;
w.state=ah;
w.stream=ai;
w.marked=null,w.cc=aj;
if(!ah.lexical.hasOwnProperty("align")){ah.lexical.align=true
}while(true){var af=aj.length?aj.pop():Y?z:A;
if(af(ad,ag)){while(aj.length&&aj[aj.length-1].lex){aj.pop()()
}if(w.marked){return w.marked
}if(ad=="variable"&&y(ah,ag)){return"variable-2"
}return ae
}}}var w={state:null,column:null,marked:null,cc:null};
function a(){for(var ad=arguments.length-1;
ad>=0;
ad--){w.cc.push(arguments[ad])
}}function N(){a.apply(null,arguments);
return true
}function n(ae){function ad(ah){for(var ag=ah;
ag;
ag=ag.next){if(ag.name==ae){return true
}}return false
}var af=w.state;
if(af.context){w.marked="def";
if(ad(af.localVars)){return
}af.localVars={name:ae,next:af.localVars}
}else{if(ad(af.globalVars)){return
}af.globalVars={name:ae,next:af.globalVars}
}}var J={name:"this",next:{name:"arguments"}};
function u(){w.state.context={prev:w.state.context,vars:w.state.localVars};
w.state.localVars=J
}function t(){w.state.localVars=w.state.context.vars;
w.state.context=w.state.context.prev
}function k(ae,af){var ad=function(){var ah=w.state,ag=ah.indented;
if(ah.lexical.type=="stat"){ag=ah.lexical.indented
}ah.lexical=new v(ag,w.stream.column(),ae,null,ah.lexical,af)
};
ad.lex=true;
return ad
}function M(){var ad=w.state;
if(ad.lexical.prev){if(ad.lexical.type==")"){ad.indented=ad.lexical.indented
}ad.lexical=ad.lexical.prev
}}M.lex=true;
function c(ad){return function(ae){if(ae==ad){return N()
}else{if(ad==";"){return a()
}else{return N(arguments.callee)
}}}
}function A(ad){if(ad=="var"){return N(k("vardef"),Q,c(";"),M)
}if(ad=="keyword a"){return N(k("form"),z,A,M)
}if(ad=="keyword b"){return N(k("form"),A,M)
}if(ad=="{"){return N(k("}"),o,M)
}if(ad==";"){return N()
}if(ad=="if"){return N(k("form"),z,A,M,L)
}if(ad=="function"){return N(i)
}if(ad=="for"){return N(k("form"),c("("),k(")"),g,c(")"),M,A,M)
}if(ad=="variable"){return N(k("stat"),H)
}if(ad=="switch"){return N(k("form"),z,k("}","switch"),c("{"),o,M,M)
}if(ad=="case"){return N(z,c(":"))
}if(ad=="default"){return N(c(":"))
}if(ad=="catch"){return N(k("form"),u,c("("),r,c(")"),A,M,t)
}return a(k("stat"),z,c(";"),M)
}function z(ad){return S(ad,false)
}function T(ad){return S(ad,true)
}function S(ad,af){var ae=af?j:F;
if(l.hasOwnProperty(ad)){return N(ae)
}if(ad=="function"){return N(i)
}if(ad=="keyword c"){return N(af?E:G)
}if(ad=="("){return N(k(")"),G,c(")"),M,ae)
}if(ad=="operator"){return N(af?T:z)
}if(ad=="["){return N(k("]"),W(T,"]"),M,ae)
}if(ad=="{"){return N(k("}"),W(p,"}"),M,ae)
}return N()
}function G(ad){if(ad.match(/[;\}\)\],]/)){return a()
}return a(z)
}function E(ad){if(ad.match(/[;\}\)\],]/)){return a()
}return a(T)
}function F(ad,ae){if(ad==","){return N(z)
}return j(ad,ae,false)
}function j(ad,af,ah){var ae=ah==false?F:j;
var ag=ah==false?z:T;
if(ad=="operator"){if(/\+\+|--/.test(af)){return N(ae)
}if(af=="?"){return N(z,c(":"),ag)
}return N(ag)
}if(ad==";"){return
}if(ad=="("){return N(k(")","call"),W(T,")"),M,ae)
}if(ad=="."){return N(X,ae)
}if(ad=="["){return N(k("]"),G,c("]"),M,ae)
}}function H(ad){if(ad==":"){return N(M,A)
}return a(F,c(";"),M)
}function X(ad){if(ad=="variable"){w.marked="property";
return N()
}}function p(ad,ae){if(ad=="variable"){w.marked="property";
if(ae=="get"||ae=="set"){return N(D)
}}else{if(ad=="number"||ad=="string"){w.marked=ad+" property"
}}if(l.hasOwnProperty(ad)){return N(c(":"),T)
}}function D(ad){if(ad==":"){return N(z)
}if(ad!="variable"){return N(c(":"),z)
}w.marked="property";
return N(i)
}function W(af,ad){function ae(ah){if(ah==","){var ag=w.state.lexical;
if(ag.info=="call"){ag.pos=(ag.pos||0)+1
}return N(af,ae)
}if(ah==ad){return N()
}return N(c(ad))
}return function(ag){if(ag==ad){return N()
}else{return a(af,ae)
}}
}function o(ad){if(ad=="}"){return N()
}return a(A,o)
}function s(ad){if(ad==":"){return N(aa)
}return a()
}function aa(ad){if(ad=="variable"){w.marked="variable-3";
return N()
}return a()
}function Q(ad,ae){if(ad=="variable"){n(ae);
return B?N(s,O):N(O)
}return a()
}function O(ad,ae){if(ae=="="){return N(T,O)
}if(ad==","){return N(Q)
}}function L(ad,ae){if(ad=="keyword b"&&ae=="else"){return N(k("form"),A,M)
}}function g(ad){if(ad=="var"){return N(Q,c(";"),e)
}if(ad==";"){return N(e)
}if(ad=="variable"){return N(R)
}return a(z,c(";"),e)
}function R(ad,ae){if(ae=="in"){return N(z)
}return N(F,e)
}function e(ad,ae){if(ad==";"){return N(d)
}if(ae=="in"){return N(z)
}return a(z,c(";"),d)
}function d(ad){if(ad!=")"){N(z)
}}function i(ad,ae){if(ad=="variable"){n(ae);
return N(i)
}if(ad=="("){return N(k(")"),u,W(r,")"),M,A,t)
}}function r(ad,ae){if(ad=="variable"){n(ae);
return B?N(s):N()
}}return{startState:function(ad){return{tokenize:m,lastType:null,cc:[],lexical:new v((ad||0)-x,0,"block",false),localVars:U.localVars,globalVars:U.globalVars,context:U.localVars&&{vars:U.localVars},indented:0}
},token:function(af,ae){if(af.sol()){if(!ae.lexical.hasOwnProperty("align")){ae.lexical.align=false
}ae.indented=af.indentation()
}if(ae.tokenize!=f&&af.eatSpace()){return null
}var ad=ae.tokenize(af,ae);
if(ac=="comment"){return ad
}ae.lastType=ac=="operator"&&(q=="++"||q=="--")?"incdec":ac;
return K(ae,ad,ac,q,af)
},indent:function(aj,ad){if(aj.tokenize==f){return CodeMirror.Pass
}if(aj.tokenize!=m){return 0
}var ai=ad&&ad.charAt(0),ag=aj.lexical;
for(var af=aj.cc.length-1;
af>=0;
--af){var ak=aj.cc[af];
if(ak==M){ag=ag.prev
}else{if(ak!=L||/^else\b/.test(ad)){break
}}}if(ag.type=="stat"&&ai=="}"){ag=ag.prev
}if(Z&&ag.type==")"&&ag.prev.type=="stat"){ag=ag.prev
}var ah=ag.type,ae=ai==ah;
if(ah=="vardef"){return ag.indented+(aj.lastType=="operator"||aj.lastType==","?4:0)
}else{if(ah=="form"&&ai=="{"){return ag.indented
}else{if(ah=="form"){return ag.indented+x
}else{if(ah=="stat"){return ag.indented+(aj.lastType=="operator"||aj.lastType==","?Z||x:0)
}else{if(ag.info=="switch"&&!ae&&U.doubleIndentSwitch!=false){return ag.indented+(/^(?:case|default)\b/.test(ad)?x:2*x)
}else{if(ag.align){return ag.column+(ae?0:1)
}else{return ag.indented+(ae?0:x)
}}}}}}},electricChars:":{}",blockCommentStart:Y?null:"/*",blockCommentEnd:Y?null:"*/",lineComment:Y?null:"//",fold:"brace",helperType:Y?"json":"javascript",jsonMode:Y}
});
CodeMirror.defineMIME("text/javascript","javascript");
CodeMirror.defineMIME("text/ecmascript","javascript");
CodeMirror.defineMIME("application/javascript","javascript");
CodeMirror.defineMIME("application/ecmascript","javascript");
CodeMirror.defineMIME("application/json",{name:"javascript",json:true});
CodeMirror.defineMIME("application/x-json",{name:"javascript",json:true});
CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:true});
CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:true});CodeMirror.defineMode("css",function(a){return CodeMirror.getMode(a,"text/css")
});
CodeMirror.defineMode("css-base",function(b,d){var e=b.indentUnit,o=d.hooks||{},n=d.atMediaTypes||{},k=d.atMediaFeatures||{},j=d.propertyKeywords||{},l=d.colorKeywords||{},h=d.valueKeywords||{},a=!!d.allowNested,i=null;
function g(p,q){i=q;
return p
}function c(s,r){var q=s.next();
if(o[q]){var p=o[q](s,r);
if(p!==false){return p
}}if(q=="@"){s.eatWhile(/[\w\\\-]/);
return g("def",s.current())
}else{if(q=="="){g(null,"compare")
}else{if((q=="~"||q=="|")&&s.eat("=")){return g(null,"compare")
}else{if(q=='"'||q=="'"){r.tokenize=m(q);
return r.tokenize(s,r)
}else{if(q=="#"){s.eatWhile(/[\w\\\-]/);
return g("atom","hash")
}else{if(q=="!"){s.match(/^\s*\w*/);
return g("keyword","important")
}else{if(/\d/.test(q)){s.eatWhile(/[\w.%]/);
return g("number","unit")
}else{if(q==="-"){if(/\d/.test(s.peek())){s.eatWhile(/[\w.%]/);
return g("number","unit")
}else{if(s.match(/^[^-]+-/)){return g("meta","meta")
}}}else{if(/[,+>*\/]/.test(q)){return g(null,"select-op")
}else{if(q=="."&&s.match(/^-?[_a-z][_a-z0-9-]*/i)){return g("qualifier","qualifier")
}else{if(q==":"){return g("operator",q)
}else{if(/[;{}\[\]\(\)]/.test(q)){return g(null,q)
}else{if(q=="u"&&s.match("rl(")){s.backUp(1);
r.tokenize=f;
return g("property","variable")
}else{s.eatWhile(/[\w\\\-]/);
return g("property","variable")
}}}}}}}}}}}}}}function m(p,q){return function(u,s){var t=false,r;
while((r=u.next())!=null){if(r==p&&!t){break
}t=!t&&r=="\\"
}if(!t){if(q){u.backUp(1)
}s.tokenize=c
}return g("string","string")
}
}function f(q,p){q.next();
if(!q.match(/\s*[\"\']/,false)){p.tokenize=m(")",true)
}else{p.tokenize=c
}return g(null,"(")
}return{startState:function(p){return{tokenize:c,baseIndent:p||0,stack:[],lastToken:null}
},token:function(t,r){r.tokenize=r.tokenize||c;
if(r.tokenize==c&&t.eatSpace()){return null
}var q=r.tokenize(t,r);
if(q&&typeof q!="string"){q=g(q[0],q[1])
}var p=r.stack[r.stack.length-1];
if(q=="variable"){if(i=="variable-definition"){r.stack.push("propertyValue")
}return r.lastToken="variable-2"
}else{if(q=="property"){var s=t.current().toLowerCase();
if(p=="propertyValue"){if(h.hasOwnProperty(s)){q="string-2"
}else{if(l.hasOwnProperty(s)){q="keyword"
}else{q="variable-2"
}}}else{if(p=="rule"){if(!j.hasOwnProperty(s)){q+=" error"
}}else{if(p=="block"){if(j.hasOwnProperty(s)){q="property"
}else{if(l.hasOwnProperty(s)){q="keyword"
}else{if(h.hasOwnProperty(s)){q="string-2"
}else{q="tag"
}}}}else{if(!p||p=="@media{"){q="tag"
}else{if(p=="@media"){if(n[t.current()]){q="attribute"
}else{if(/^(only|not)$/.test(s)){q="keyword"
}else{if(s=="and"){q="error"
}else{if(k.hasOwnProperty(s)){q="error"
}else{q="attribute error"
}}}}}else{if(p=="@mediaType"){if(n.hasOwnProperty(s)){q="attribute"
}else{if(s=="and"){q="operator"
}else{if(/^(only|not)$/.test(s)){q="error"
}else{q="error"
}}}}else{if(p=="@mediaType("){if(j.hasOwnProperty(s)){}else{if(n.hasOwnProperty(s)){q="error"
}else{if(s=="and"){q="operator"
}else{if(/^(only|not)$/.test(s)){q="error"
}else{q+=" error"
}}}}}else{if(p=="@import"){q="tag"
}else{q="error"
}}}}}}}}}else{if(q=="atom"){if(!p||p=="@media{"||p=="block"){q="builtin"
}else{if(p=="propertyValue"){if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){q+=" error"
}}else{q="error"
}}}else{if(p=="@media"&&i=="{"){q="error"
}}}}if(i=="{"){if(p=="@media"||p=="@mediaType"){r.stack[r.stack.length-1]="@media{"
}else{var u=a?"block":"rule";
r.stack.push(u)
}}else{if(i=="}"){if(p=="interpolation"){q="operator"
}r.stack.pop();
if(p=="propertyValue"){r.stack.pop()
}}else{if(i=="interpolation"){r.stack.push("interpolation")
}else{if(i=="@media"){r.stack.push("@media")
}else{if(i=="@import"){r.stack.push("@import")
}else{if(p=="@media"&&/\b(keyword|attribute)\b/.test(q)){r.stack[r.stack.length-1]="@mediaType"
}else{if(p=="@mediaType"&&t.current()==","){r.stack[r.stack.length-1]="@media"
}else{if(i=="("){if(p=="@media"||p=="@mediaType"){r.stack[r.stack.length-1]="@mediaType";
r.stack.push("@mediaType(")
}}else{if(i==")"){if(p=="propertyValue"&&r.stack[r.stack.length-2]=="@mediaType("){r.stack.pop();
r.stack.pop()
}else{if(p=="@mediaType("){r.stack.pop()
}}}else{if(i==":"&&r.lastToken=="property"){r.stack.push("propertyValue")
}else{if(p=="propertyValue"&&i==";"){r.stack.pop()
}else{if(p=="@import"&&i==";"){r.stack.pop()
}}}}}}}}}}}}return r.lastToken=q
},indent:function(q,p){var r=q.stack.length;
if(/^\}/.test(p)){r-=q.stack[r-1]=="propertyValue"?2:1
}return q.baseIndent+r*e
},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}
});
(function(){function b(k){var j={};
for(var h=0;
h<k.length;
++h){j[k[h]]=true
}return j
}var e=b(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]);
var g=b(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]);
var d=b(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","zoom","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-profile","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","kerning","text-anchor","writing-mode"]);
var c=b(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]);
var f=b(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"]);
function a(k,j){var h=false,i;
while((i=k.next())!=null){if(h&&i=="/"){j.tokenize=null;
break
}h=(i=="*")
}return["comment","comment"]
}CodeMirror.defineMIME("text/css",{atMediaTypes:e,atMediaFeatures:g,propertyKeywords:d,colorKeywords:c,valueKeywords:f,hooks:{"<":function(j,i){function h(n,m){var l=0,k;
while((k=n.next())!=null){if(l>=2&&k==">"){m.tokenize=null;
break
}l=(k=="-")?l+1:0
}return["comment","comment"]
}if(j.eat("!")){i.tokenize=h;
return h(j,i)
}},"/":function(i,h){if(i.eat("*")){h.tokenize=a;
return a(i,h)
}return false
}},name:"css-base"});
CodeMirror.defineMIME("text/x-scss",{atMediaTypes:e,atMediaFeatures:g,propertyKeywords:d,colorKeywords:c,valueKeywords:f,allowNested:true,hooks:{"$":function(h){h.match(/^[\w-]+/);
if(h.peek()==":"){return["variable","variable-definition"]
}return["variable","variable"]
},"/":function(i,h){if(i.eat("/")){i.skipToEnd();
return["comment","comment"]
}else{if(i.eat("*")){h.tokenize=a;
return a(i,h)
}else{return["operator","operator"]
}}},"#":function(h){if(h.eat("{")){return["operator","interpolation"]
}else{h.eatWhile(/[\w\\\-]/);
return["atom","hash"]
}}},name:"css-base"})
})();CodeMirror.defineMode("htmlmixed",function(b,c){var a=CodeMirror.getMode(b,{name:"xml",htmlMode:true});
var m=CodeMirror.getMode(b,"css");
var k=[],j=c&&c.scriptTypes;
k.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:CodeMirror.getMode(b,"javascript")});
if(j){for(var d=0;
d<j.length;
++d){var h=j[d];
k.push({matches:h.matches,mode:h.mode&&CodeMirror.getMode(b,h.mode)})
}}k.push({matches:/./,mode:CodeMirror.getMode(b,"text/plain")});
function e(s,q){var o=q.htmlState.tagName;
var p=a.token(s,q.htmlState);
if(o=="script"&&/\btag\b/.test(p)&&s.current()==">"){var t=s.string.slice(Math.max(0,s.pos-100),s.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);
t=t?t[1]:"";
if(t&&/[\"\']/.test(t.charAt(0))){t=t.slice(1,t.length-1)
}for(var n=0;
n<k.length;
++n){var r=k[n];
if(typeof r.matches=="string"?t==r.matches:r.matches.test(t)){if(r.mode){q.token=l;
q.localMode=r.mode;
q.localState=r.mode.startState&&r.mode.startState(a.indent(q.htmlState,""))
}break
}}}else{if(o=="style"&&/\btag\b/.test(p)&&s.current()==">"){q.token=f;
q.localMode=m;
q.localState=m.startState(a.indent(q.htmlState,""))
}}return p
}function g(r,n,o){var q=r.current();
var p=q.search(n),i;
if(p>-1){r.backUp(q.length-p)
}else{if(i=q.match(/<\/?$/)){r.backUp(q.length);
if(!r.match(n,false)){r.match(q[0])
}}}return o
}function l(n,i){if(n.match(/^<\/\s*script\s*>/i,false)){i.token=e;
i.localState=i.localMode=null;
return e(n,i)
}return g(n,/<\/\s*script\s*>/,i.localMode.token(n,i.localState))
}function f(n,i){if(n.match(/^<\/\s*style\s*>/i,false)){i.token=e;
i.localState=i.localMode=null;
return e(n,i)
}return g(n,/<\/\s*style\s*>/,m.token(n,i.localState))
}return{startState:function(){var i=a.startState();
return{token:e,localMode:null,localState:null,htmlState:i}
},copyState:function(n){if(n.localState){var i=CodeMirror.copyState(n.localMode,n.localState)
}return{token:n.token,localMode:n.localMode,localState:i,htmlState:CodeMirror.copyState(a,n.htmlState)}
},token:function(n,i){return i.token(n,i)
},indent:function(n,i){if(!n.localMode||/^\s*<\//.test(i)){return a.indent(n.htmlState,i)
}else{if(n.localMode.indent){return n.localMode.indent(n.localState,i)
}else{return CodeMirror.Pass
}}},electricChars:"/{}:",innerMode:function(i){return{state:i.localState||i.htmlState,mode:i.localMode||a}
}}
},"xml","javascript","css");
CodeMirror.defineMIME("text/html","htmlmixed");CodeMirror.defineMode("htmlembedded",function(c,e){var a=e.scriptStartRegex||/^<%/i,b=e.scriptEndRegex||/^%>/i;
var h,f;
function g(j,i){if(j.match(a,false)){i.token=d;
return h.token(j,i.scriptState)
}else{return f.token(j,i.htmlState)
}}function d(j,i){if(j.match(b,false)){i.token=g;
return f.token(j,i.htmlState)
}else{return h.token(j,i.scriptState)
}}return{startState:function(){h=h||CodeMirror.getMode(c,e.scriptingModeSpec);
f=f||CodeMirror.getMode(c,"htmlmixed");
return{token:e.startOpen?d:g,htmlState:CodeMirror.startState(f),scriptState:CodeMirror.startState(h)}
},token:function(j,i){return i.token(j,i)
},indent:function(j,i){if(j.token==g){return f.indent(j.htmlState,i)
}else{if(h.indent){return h.indent(j.scriptState,i)
}}},copyState:function(i){return{token:i.token,htmlState:CodeMirror.copyState(f,i.htmlState),scriptState:CodeMirror.copyState(h,i.scriptState)}
},electricChars:"/{}:",innerMode:function(i){if(i.token==d){return{state:i.scriptState,mode:h}
}else{return{state:i.htmlState,mode:f}
}}}
},"htmlmixed");
CodeMirror.defineMIME("application/x-ejs",{name:"htmlembedded",scriptingModeSpec:"javascript"});
CodeMirror.defineMIME("application/x-aspx",{name:"htmlembedded",scriptingModeSpec:"text/x-csharp"});
CodeMirror.defineMIME("application/x-jsp",{name:"htmlembedded",scriptingModeSpec:"text/x-java"});
CodeMirror.defineMIME("application/x-erb",{name:"htmlembedded",scriptingModeSpec:"ruby"});(function(d,c,f){var e=d(c),a=d(),b=[];
d.plugin2("code",{_create:function(g){a=a.add(d(g))
}});
setInterval(function(){a.each(function(){var h=d(this),g;
if(h.is(":visible")){a=a.not(h);
g=CodeMirror.fromTextArea(this,{indentUnit:4,lineNumbers:true,lineWrapping:true,mode:h.attr("data-code-type")});
g.on("change",function(){h.closest(".inputContainer").scrollTop(0)
});
b.push(g)
}})
},100);
e.resize(function(){d.each(b,function(g,h){h.refresh()
})
})
})(jQuery,window);(function(d,f,b){var h=d(f),e=f.document,g=d(e),c,a;
d.plugin2("dropDown",{_defaultOptions:{classPrefix:"dropDown-"},className:function(i){return this.option("classPrefix")+i
},_create:function(k){var p=this,v=d(k),t=v.isFixedPosition(),o=v.is("[multiple]"),l=v.is('[data-searchable="true"]'),u=v.attr("placeholder"),s,r,q,j,i,x,n,m,w;
if(!o&&v.find("option:selected").length===0){v.find("option:first").prop("selected",true)
}v.bind("input-disable",function(z,y){s.toggleClass("state-disabled",y)
});
s=d("<div/>",{"class":p.className("input"),css:{"margin-bottom":v.css("margin-bottom"),"margin-left":v.css("margin-left"),"margin-right":v.css("margin-right"),"margin-top":v.css("margin-top"),position:"relative",width:v.outerWidth()}});
s.click(function(){if(r.is(":visible")){r.click()
}else{if(s.hasClass(p.className("list-open"))){m.trigger("dropDown-close")
}else{q.click()
}}return false
});
r=d("<a/>",{"class":p.className("label"),href:"#",click:function(){if(!s.is(".state-disabled")){if(a&&a[0]===m[0]){m.trigger("dropDown-close")
}else{m.trigger("dropDown-open")
}}return false
}});
r.bind("dropDown-update",function(){var y=d.map(v.find("option:selected"),function(z){return d(z).text()
}).join(", ");
r.html(y||u||"&nbsp;");
r.toggleClass("state-placeholder",!y)
});
j={display:"none",position:t?"fixed":"absolute","z-index":v.zIndex()};
i=d("<div/>",{css:j});
x=d("<div/>",{"class":p.className("marker")});
n=d("<div/>",{css:j});
m=d("<div/>",{"class":p.className("list")});
m.bind("dropDown-open",function(){var z=s.offset(),y=s.outerWidth(true)>n.outerWidth(true);
z.top+=s.outerHeight();
if(t){z.top-=h.scrollTop()
}n.css(z);
i.css(z);
i.css("width",s.outerWidth());
s.add(x).add(m).toggleClass(p.className("input-larger"),y);
s.addClass(p.className("list-open"));
m.find("."+p.className("listItem")).removeClass("state-hover");
m.find("."+p.className("listItem")+(o?":first":":has(:checked)")).addClass("state-hover");
if(a){a.trigger("dropDown-close")
}c=v;
a=m;
i.show();
n.show()
});
m.bind("dropDown-close",function(){s.removeClass(p.className("list-open"));
c=null;
a=null;
i.hide();
n.hide();
if(o){v.change()
}});
m.bind("dropDown-hover",function(z,y){m.find("."+p.className("listItem")).removeClass("state-hover");
if(y){y.addClass("state-hover")
}});
m.bind("mousewheel",function(B,D,z,y){var A=d(this),C=d.data(this,"dropDown-maxScrollTop");
if(typeof C==="undefined"){C=A.prop("scrollHeight")-A.innerHeight();
d.data(this,"dropDown-maxScrollTop",C)
}if((y>0&&A.scrollTop()===0)||(y<0&&A.scrollTop()>=C)){B.preventDefault()
}});
g.mousedown(function(y){if(n.is(":visible")&&!d.contains(n[0],y.target)&&s[0]!==y.target&&!d.contains(s[0],y.target)){m.trigger("dropDown-close")
}});
w=function(z){var y,A;
y=d("<div/>",{"class":p.className("listItem"),html:z.text()||"&nbsp;"});
A=d("<input/>",{type:o?"checkbox":"radio"});
if(z.is(":selected")){A.prop("checked",true);
y.addClass(p.className("listItem-selected"))
}y.mouseenter(function(){m.trigger("dropDown-hover",[y])
});
y.mouseleave(function(){m.trigger("dropDown-hover")
});
y.click(o?function(){if(z.is(":selected")){z.prop("selected",false);
y.find(":checkbox").prop("checked",false);
y.removeClass(p.className("listItem-selected"))
}else{z.prop("selected",true);
y.find(":checkbox").prop("checked",true);
y.addClass(p.className("listItem-selected"))
}r.trigger("dropDown-update");
return false
}:function(){if(!z.is(":selected")){v.find("option").prop("selected",false);
m.find(":radio").prop("checked",false);
m.find("."+p.className("listItem")).removeClass(p.className("listItem-selected"));
z.prop("selected",true);
A.prop("checked",true);
y.addClass(p.className("listItem-selected"));
r.trigger("dropDown-update");
v.change()
}m.trigger("dropDown-close");
return false
});
y.prepend(" ");
y.prepend(A);
m.append(y)
};
v.find("> optgroup, > option").each(function(){var y=d(this);
if(y.is("option")){w(y)
}else{m.append(d("<div/>",{"class":p.className("listGroupLabel"),text:y.attr("label")}));
y.find("> option").each(function(){w(d(this))
})
}});
r.trigger("dropDown-update");
s.append(r);
v.before(s);
v.hide();
n.append(m);
d(e.body).append(n);
n.css("min-width",n.outerWidth());
i.append(x);
d(e.body).append(i);
if(l){q=d("<input/>",{"class":p.className("search"),type:"text"});
q.bind("input",function(){var y=new RegExp(q.val().replace(/\s/,"").split("").join("(?:.*\\W)?"),"i"),z;
m.find("."+p.className("listItem")).each(function(){var A=d(this);
if(y.test(A.text())){A.show();
if(!z){z=A
}}else{A.hide()
}});
m.trigger("dropDown-hover",[z])
});
q.click(function(){return false
});
m.bind("dropDown-open",function(){r.hide();
m.find("."+p.className("listItem")).show();
q.val(r.text());
q.show();
q.focus();
q.select()
});
m.bind("dropDown-close",function(){r.show();
q.hide()
});
q.hide();
s.append(q)
}}});
g.keydown(function(k){var o,m,n,j,l,i,p;
if(a){o=k.which;
m=o===38;
if(!(k.altKey||k.ctrlKey||k.metaKey||k.shiftKey)){n=c.dropDown("className","listItem");
if(m||o===40){j=a.find(".state-hover:visible."+n).eq(0);
if(j.length===0){j=a.find(":visible."+n).eq(m?-1:0)
}else{j=j[m?"prevAll":"nextAll"](":visible."+n).eq(0)
}if(j.length>0){a.trigger("dropDown-hover",[j]);
l=j.position().top;
i=j.outerHeight();
if(m){if(l<0){a.scrollTop(a.scrollTop()+l)
}}else{p=l+i-a.height();
if(p>0){a.scrollTop(a.scrollTop()+p)
}}}return false
}else{if(o===13){a.find(".state-hover."+n).click();
return false
}else{if(o===27){a.trigger("dropDown-close");
return false
}}}}}return true
})
}(jQuery,window));(function(b,a,c){b.plugin2("editablePlaceholder",{_init:function(d){var e=this;
function f(g){return g.attr("data-editable-placeholder")||g.prop("placeholder")
}e.$caller.delegate(d,"focus.editablePlaceholder mouseenter.editablePlaceholder",function(){var g=b(this);
if(!g.val()){g.val(f(g))
}});
e.$caller.delegate(d,"blur.editablePlaceholder",function(){var g=b(this);
if(g.val()===f(g)){g.val("")
}});
e.$caller.delegate(d,"mouseleave.editablePlaceholder",function(){var g=b(this);
if(!g.is(":focus")&&g.val()===f(g)){g.val("")
}})
}})
})(jQuery,window);(function(f,g,c){var a=f(g),h=g.document,e=f(h),b,i,d="expandable-shadow";
i=function(j){j.each(function(){var l=f.data(this,d),k;
if(l){k=this.getBoundingClientRect();
l.width=k.width;
l.height=k.height
}});
j.each(function(){var n=f.data(this,d),m,l,k;
if(n){m=f(this);
l=m.val();
k=n.display==="block"?" foo foo foo":" foo";
n.$element.text(l?l+k:(m.prop("placeholder")||k))
}});
j.each(function(){var k=f.data(this,d);
if(k&&k.display==="block"){k.$element.css("width",k.width)
}});
j.each(function(){var l=f.data(this,d),k;
if(l){k=l.$element[0].getBoundingClientRect();
if(l.display==="block"){l.height=k.height
}else{l.width=k.width
}}});
j.each(function(){var l=f.data(this,d),k;
if(l){k=f(this);
k.css("overflow","hidden");
if(l.display==="block"){k.css("height",l.height)
}else{k.css("width",l.width)
}}})
};
f.plugin2("expandable",{_init:function(j,k){var l=this;
l.$caller.delegate(j,"expand.expandable input.expandable",function(){i(f(this))
})
},_create:function(j,k){var n,l,m;
if(f.data(j,d)){return
}n=f(j);
l=n.css("display");
m=n.css("box-sizing");
f.data(j,d,{display:l,"$element":f("<div/>",{"class":k.shadowClass+" "+n.attr("data-expandable-class"),css:{display:l,"border-width":m==="border-box"?"":0,padding:m==="border-box"?"":0}})})
},_createAll:function(m,j,k){var l=f(m).find(j);
if(!b){f(h.body).append(b=f("<div/>",{"class":"expandable-shadows",css:{left:-10000,position:"absolute",top:0,visibility:"hidden"}}))
}l.each(function(){b.append(f.data(this,d).$element)
});
i(l)
}});
a.resize(f.throttle(200,function(){i(e.find(".plugin-expandable:visible"))
}))
}(jQuery,window));(function(b,d,a){var e=b(d),c=d.document;
b.plugin2("popup",{_defaultOptions:{padding:{left:35,right:35,top:20}},_create:function(i){var m=b(i);
var h=this.option();
var l=b("<div/>",{"class":"popup"});
var g=b("<div/>",{"class":"content"});
var k=b("<div/>",{"class":"closeButton"});
var f=m.attr("name");
if(f){l.attr("name",f)
}l.bind("open.popup",function(){var n=b(this);
var p=n.data("popup-scrollLeft");
var o=n.data("popup-scrollTop");
if(typeof p!=="number"&&typeof o!=="number"){n.data("popup-scrollLeft",e.scrollLeft());
n.data("popup-scrollTop",e.scrollTop())
}n.show()
});
l.bind("restoreOriginalPosition.popup",function(){var n=b(this);
var p=n.data("popup-scrollLeft");
var o=n.data("popup-scrollTop");
n.removeData("popup-scrollLeft");
n.removeData("popup-scrollTop");
if(typeof p==="number"&&typeof o==="number"){e.scrollLeft(p);
e.scrollTop(o)
}});
l.bind("close.popup",function(){var n=b(this);
n.hide();
b(".popup").each(function(){var o=b(this);
var p=o.popup("source");
if(p&&b.contains(n[0],p[0])){o.popup("close")
}})
});
k.bind("click.popup",function(){b(this).popup("close")
});
var j=b(c.body);
g.append(m);
g.append(k);
l.append(g);
j.append(l)
},open:function(){this.$caller.popup("container").trigger("open");
return this.$caller
},restoreOriginalPosition:function(){this.$caller.popup("container").trigger("restoreOriginalPosition");
return this.$caller
},close:function(){this.container().trigger("close");
return this.$caller
},container:function(){return this.$caller.closest(".popup")
},content:function(){return this.$caller.popup("container").find("> .content")
},source:function(f,i){var u=this.option();
if(i&&(f.height()<30||typeof i.pageX!=="number"||typeof i.pageY!=="number")){i=a
}if(typeof f==="undefined"){var j=this.$caller.popup("container")[0];
return j?b.data(j,"popup-$source"):null
}else{var q=this.$caller.popup("container");
q.attr("data-popup-source-class",f.prop("class"));
q.each(function(){b.data(this,"popup-$source",f)
});
var m=f.offset();
var p=q.outerWidth();
var r=0;
var l=i?i.pageX-p/2:m.left+(f.outerWidth()-p)/2;
if(l<u.padding.left){r=l-u.padding.left;
l=u.padding.left
}else{var h=l+p-b(c).width()+u.padding.right;
if(h>0){r=h;
l-=h
}}var g=q.popup("content");
var t=g.find("> .marker");
if(t.length===0){t=b("<div/>",{"class":"marker"});
g.append(t)
}var s=(p-t.outerWidth())/2+r;
t.css("left",s<5?5:s);
var n=i?i.pageY:m.top+f.outerHeight();
if(n<30){n=30
}var o=f.isFixedPosition();
if(o){l-=b(window).scrollLeft();
n-=b(window).scrollTop()
}var k=f.closest(".popup");
if(k.length===0){k=f.parent()
}q.css({left:l,margin:0,position:o?"fixed":"absolute",top:n,"z-index":f.parent().zIndex()+1});
return this.$caller
}}});
e.click(function(g){var h=g.target,f=b(h);
if(f.closest("#context-menu-layer, .context-menu-root, .search-reset").length>0){return
}if(f.popup("container").length===0){b(".popup").each(function(){var j=b(this);
var k=j.popup("source");
if(k&&k.length>0){var i=k[0];
if(!(i==h||b.contains(i,h))){j.popup("close")
}}})
}});
e.keydown(function(g){if(g.which===27){var f=b(".popup");
if(f.length>0){f.popup("close");
return false
}else{return true
}}})
}(jQuery,window));(function(c,b,f){var e=c(b);
function d(g){return g.css("position")==="fixed"
}function a(){var h=c(this),j=h.closest(".popup"),i,g;
if(!d(j)){h.removeClass("fixedScrollableArea");
return
}h.addClass("fixedScrollableArea");
h.css("max-height","");
i=h.offset().top;
g=j.outerHeight(true)-h.outerHeight(true)-i+j.offset().top;
h.css("max-height",e.height()-i+e.scrollTop()-g-20)
}c.plugin2("fixedScrollable",{_init:function(g){var h=this;
h.$caller.on("mousewheel",g,function(l,n,j,i){var k=c(this),m;
if(!d(k.closest(".popup"))){return
}m=c.data(this,"dropDown-maxScrollTop");
if(typeof m==="undefined"){m=k.prop("scrollHeight")-k.innerHeight();
c.data(this,"dropDown-maxScrollTop",m)
}if((i>0&&k.scrollTop()===0)||(i<0&&k.scrollTop()>=m)){l.preventDefault()
}});
e.resize(c.throttle(100,function(){h.$caller.find(g).each(a)
}))
},_create:function(g){a.call(c(g))
}})
})(jQuery,window);(function(b,d,a){var f=b(d),c=d.document,e=0;
b.plugin2("frame",{_defaultOptions:{frameClassName:"dari-frame",loadingClassName:"dari-frame-loading",loadedClassName:"dari-frame-loaded",bodyClassName:"dari-frame-body",setBody:function(g){b(this).html(g)
}},_init:function(i,r){var k=this,o=k.$caller,n=r.frameClassName,m=r.loadingClassName,l=r.loadedClassName,h=r.bodyClassName,j,q,g,p;
j=function(t,w){var s=b(t),v=s.attr("target"),u;
if(v&&b('frame[name="'+v+'"], iframe[name="'+v+'"]').length>0){return true
}if(v!=="_top"&&v!=="_blank"){if(v==="_parent"){u=s.frame("container").parent().frame("container")
}else{if(v){u=b("."+n+'[name="'+v+'"]');
if(u.length===0){u=b("<div/>",{"class":n,name:v});
b(c.body).append(u);
u.popup()
}}else{u=s.frame("container")
}}if(u.length>0&&u[0]!==c){return w(s,u)
}}return true
};
q=function(u,w,t){var s=(u.data("frame-loadVersion")||0)+1,v=u.popup("container");
u.add(v).removeClass(l).addClass(m);
u.data("frame-loadVersion",s);
u.data("frame-$source",w);
if(v[0]&&w[0]&&!b.contains(v[0],w[0])){u.popup("source",w,t);
u.empty()
}u.popup("open");
return s
};
g=function(v,t,x){var y,w,u,s;
if(t>=v.data("frame-loadVersion")){y=v.popup("container");
s=x;
s=s.replace(/^[^]*?<body[^>]*>/ig,"");
s=s.replace(/<\/body>[^]*?$/ig,"");
v.add(y).removeClass(m).addClass(l);
r.setBody.call(v[0],s);
v.trigger("create");
v.trigger("load");
f.resize()
}};
p=function(v,z,s,u,x,t){var y=this,A=q(v,z,t),w=v.attr("data-extra-form-data");
if(w){u+=(u.indexOf("?")<0?"?":"&")+w
}b.ajax({cache:false,type:s,url:u,data:x,complete:function(B){g(v,A,B.responseText)
}})
};
o.delegate("a","click.frame",function(s){return j(this,function(u,t){p(t,u,"get",u.attr("href"),null,s);
return false
})
});
o.delegate("form","click.frame",function(s){if(!b(s.target).is('button, input[type="submit"]')){return
}b.data(this,"frame-clicked",s.target)
});
o.delegate("form","submit.frame",function(){return j(this,function(C,s){var w=C.attr("action"),v=s.attr("data-extra-form-data"),A=b.data(C[0],"frame-clicked"),B,t;
if(A){B=b(A).prop("name");
t=b(A).prop("value");
if(B&&t){w+=(w.indexOf("?")>-1?"&":"?")+encodeURIComponent(B)+"="+encodeURIComponent(t)
}}if(C.attr("enctype")!=="multipart/form-data"){p(s,C,C.attr("method"),w,C.serialize());
return false
}C.attr("action",w+(w.indexOf("?")<0?"?":"&")+v);
if(C.find('input[type="hidden"][name="_frame"]').length===0){C.prepend(b("<input/>",{name:"_frame",type:"hidden",value:"true"}))
}var y=C.attr("target");
var z=true;
if(!y){e+=1;
y="frameTarget"+e+(+new Date());
C.attr("target",y);
z=false
}var u=b("iframe[name="+y+"]");
if(u.length===0){u=b("<iframe/>",{name:y});
u.hide();
b(c.body).append(u)
}var x=q(s,C);
u.unbind(".frame");
u.bind("load.frame",function(){C.attr("action",w);
g(s,x,u.contents().find("textarea#frameBody").val()||u.contents().find("body").html());
if(!z){C.removeAttr("target");
setTimeout(function(){u.remove()
},0)
}});
return true
})
});
o.onCreate("."+n,function(){var t=b(this),s;
if(t.is(":not(."+m+"):not(."+l+")")){s=t.find("a:only-child:not([target])");
if(s.length>0){s.click()
}else{t.find("form:only-child:not([target])").submit()
}}});
return o
},container:function(){return this.$caller.closest("."+this.option("frameClassName"))
},source:function(){return this.container().data("frame-$source")
}})
}(jQuery,window));(function(c,e,b){var f="x y width height texts textSizes textXs textYs textWidths".split(" "),a="aaaf7c5a9e604daaa126f11e23e321d8",d=e.document;
c.plugin2("imageEditor",{_create:function(k){var r=c(k);
var q=r.closest("form");
var l=r.find(".imageEditor-image img");
var D=l.attr("src");
var B=l;
var m=l.clone();
var w=m[0];
r.find("> .imageEditor-aside").bind("mousewheel",function(I,K,H,G){var F=c(this),J=c.data(this,"imageEditor-maxScrollTop");
if(typeof J==="undefined"){J=F.prop("scrollHeight")-F.innerHeight();
c.data(this,"imageEditor-maxScrollTop",J)
}if((G>0&&F.scrollTop()===0)||(G<0&&F.scrollTop()>=J)){I.preventDefault()
}});
var t=r.find(".imageEditor-tools ul");
var A=r.find(".imageEditor-edit");
var C=c("<li/>",{html:c("<a/>",{"class":"action-image-edit",text:"Edit Image",click:function(){A.popup("source",c(this));
A.popup("open");
return false
}})});
t.prepend(C);
var i=c("<div/>");
C.append(i);
var u;
var E;
var j=function(){var H={};
A.find(":input").each(function(){var N=c(this);
var M=N.is(":checkbox")?N.is(":checked"):parseFloat(N.val());
if(M===false||isNaN(M)){return
}var L=/.([^.]+)$/.exec(N.attr("name"));
L=L?L[1]:null;
if(L==="brightness"){H.brightness=H.brightness||{};
H.brightness.brightness=M*150;
H.brightness.legacy=true
}else{if(L==="contrast"){H.brightness=H.brightness||{};
H.brightness.contrast=M<0?M:M*3
}else{if(L==="flipH"){H.fliph=H.fliph||{}
}else{if(L==="flipV"){H.flipv=H.flipv||{}
}else{if(L==="grayscale"){H.desaturate=H.desaturate||{}
}else{if(L==="invert"){H.invert=H.invert||{}
}else{if(L==="rotate"){H.rotate=H.rotate||{};
H.rotate.angle=-M
}else{if(L==="sepia"){H.sepia=H.sepia||{}
}}}}}}}}});
var J=JSON.stringify(H);
if(J!==u){u=J;
i.empty();
A.find(":input").each(function(){var L=c(this);
if(!L.is(":checkbox")||L.is(":checked")){i.append(c("<input/>",{type:"hidden",name:L.attr("name"),value:L.val()}))
}});
var G=[];
var K=0;
for(var I in H){if(H.hasOwnProperty(I)){G[G.length]=I
}}var F=function(L,M){if(M<G.length){var N=G[M];
Pixastic.process(L,N,H[N],function(O){++M;
F(O,M)
})
}else{if(l!==B){l.remove()
}B.before(L);
B.hide();
l=c(L);
E=setTimeout(j,100)
}};
F(w,0)
}else{E=setTimeout(j,100)
}};
j();
A.popup("container").bind("open",function(){j()
});
A.popup("container").bind("close",function(){if(E){clearTimeout(E)
}});
var s=c("<button/>",{text:"Reset",click:function(){A.find(":input").each(function(){var F=c(this);
if(F.is(":checkbox")){F.removeAttr("checked")
}else{F.val(0)
}});
j();
return false
}});
A.append(s);
A.popup();
A.popup("container").addClass("imageEditor-editPopup");
A.popup("close");
var z=c("<div/>",{"class":"imageEditor-cover",css:{display:"none",left:"0",position:"absolute",top:"0"}});
var p=z.clone(true);
var h=z.clone(true);
var x=z.clone(true);
r.append(z);
r.append(p);
r.append(h);
r.append(x);
var y=function(J){var H=l.width();
var F=l.height();
var G=J.left+J.width;
var I=J.top+J.height;
z.css({height:J.top,width:H});
p.css({height:J.height,top:J.top,width:J.left});
h.css({height:J.height,left:G,top:J.top,width:H-G});
x.css({height:F-I,top:I,width:H});
z.show();
p.show();
h.show();
x.show()
};
var v=r.find(".imageEditor-sizes table");
var g=c("<ul/>",{"class":"imageEditor-sizeSelectors"});
var o={};
v.find("th").each(function(){var I=c(this);
var Y=I.closest("tr");
var K=Y.attr("data-size-name");
var W=I.popup("source");
if(W){var F=W.closest(".inputContainer").attr("data-standard-image-sizes");
if(F){if(c.inArray(K,F.split(" "))<0){return
}}}var O=Y.attr("data-size-independent")==="true";
var T=parseFloat(Y.attr("data-size-width"));
var Q=parseFloat(Y.attr("data-size-height"));
var U=T/Q;
var G={};
c.each(f,function(aa,Z){G[Z]=Y.find(':input[name$=".'+Z+'"]')
});
var N=Math.floor(U*100)/100;
var S=o[""+N];
if(!O){if(S){S["$sizeLabel"].html(S["$sizeLabel"].html()+'<br><span title="'+I.text()+'">'+I.text()+"</span>");
c.each(f,function(aa,Z){S[Z]=S[Z].add(G[Z])
});
return
}else{o[""+(N-0.02)]=G;
o[""+(N-0.01)]=G;
o[""+N]=G;
o[""+(N+0.01)]=G;
o[""+(N+0.02)]=G
}}var X=c("<div/>",{"class":"imageEditor-sizeBox",css:{position:"absolute"}});
X.hide();
r.append(X);
var P=function(ad){var ab=ad.width();
var aa=ad.height();
var af=parseFloat(G.x.val())||0;
var ae=parseFloat(G.y.val())||0;
var ac=parseFloat(G.width.val())||0;
var Z=parseFloat(G.height.val())||0;
if(ac===0||Z===0){ac=aa*U;
Z=ab/U;
if(ac>ab){ac=Z*U
}else{Z=ac/U
}af=(ab-ac)/2;
ae=0
}else{af*=ab;
ae*=aa;
ac*=ab;
Z*=aa
}return{left:af,top:ae,width:ac,height:Z}
};
var R=c("<li/>",{"class":"imageEditor-sizeButton",click:function(){var Z=c(this).closest("li");
if(Z.is(".imageEditor-sizeSelected")){Z.removeClass("imageEditor-sizeSelected");
z.hide();
p.hide();
h.hide();
x.hide();
X.hide();
return false
}else{Z.closest("ul").find("li").removeClass("imageEditor-sizeSelected");
Z.addClass("imageEditor-sizeSelected")
}r.find(".imageEditor-sizeBox").hide();
var aa=P(l);
y(aa);
X.css(aa);
X.show();
X.find(".imageEditor-textOverlay").each(function(ad){var ae=c(this);
ae.trigger("resizeTextOverlayFont");
var af=parseFloat(G.textWidths.val().split(a)[ad+1])||0;
if(af!==0){var ac=parseFloat(G.textXs.val().split(a)[ad+1])||0;
var ab=parseFloat(G.textYs.val().split(a)[ad+1])||0;
ae.css({left:(ac*100)+"%",top:(ab*100)+"%",width:(af*100)+"%"})
}});
return false
}});
g.append(R);
var V=function(){var aa=c(d.body);
aa.append(m);
var Z=P(m);
m.remove();
Pixastic.process(w,"crop",Z,function(ac){var ab=R.find(".imageEditor-sizePreview");
ab.empty();
ab.append(ac)
})
};
var J=function(Z){return function(ae){var ac=X.position();
var ad={left:ac.left,top:ac.top,width:X.width(),height:X.height(),pageX:ae.pageX,pageY:ae.pageY};
var ab=l.width();
var aa=l.height();
c.drag(this,ae,function(af){},function(ai){var ag=ai.pageX-ad.pageX;
var af=ai.pageY-ad.pageY;
var ah=Z(ai,ad,{x:ag,y:af,constrainedX:Math.max(ag,af*U),constrainedY:Math.max(af,ag/U)});
for(key in ad){ah[key]=ah[key]||ad[key]
}var aj;
if(ah.moving){if(ah.left<0){ah.left=0
}if(ah.top<0){ah.top=0
}aj=ah.left+ah.width-ab;
if(aj>0){ah.left-=aj
}aj=ah.top+ah.height-aa;
if(aj>0){ah.top-=aj
}}else{if(ah.width<10||ah.height<10){if(U>1){ah.width=U*10;
ah.height=10
}else{ah.width=10;
ah.height=10/U
}}if(ah.left<0){ah.width+=ah.left;
ah.height=ah.width/U;
ah.top-=ah.left/U;
ah.left=0
}if(ah.top<0){ah.height+=ah.top;
ah.width=ah.height*U;
ah.left-=ah.top*U;
ah.top=0
}aj=ah.left+ah.width-ab;
if(aj>0){ah.width-=aj;
ah.height=ah.width/U
}aj=ah.top+ah.height-aa;
if(aj>0){ah.height-=aj;
ah.width=ah.height*U
}}y(ah);
X.css(ah);
X.find(".imageEditor-textOverlay").trigger("resizeTextOverlayFont")
},function(){var ag=X.position();
var af=X.width();
var ah=X.height();
G.x.val(ag.left/ab);
G.y.val(ag.top/aa);
G.width.val(af/ab);
G.height.val(af/U/aa);
V();
X.find(".imageEditor-textOverlay").trigger("resizeTextOverlayFont")
});
return false
}
};
X.mousedown(J(function(aa,Z,ab){return{moving:true,left:Z.left+ab.x,top:Z.top+ab.y}
}));
X.append(c("<div/>",{"class":"imageEditor-resizer imageEditor-resizer-topLeft",mousedown:J(function(aa,Z,ab){return{left:Z.left+ab.constrainedX,top:Z.top+ab.constrainedY,width:Z.width-ab.constrainedX,height:Z.height-ab.constrainedY}
})}));
X.append(c("<div/>",{"class":"imageEditor-resizer imageEditor-resizer-bottomRight",mousedown:J(function(aa,Z,ab){return{width:Z.width+ab.constrainedX,height:Z.height+ab.constrainedY}
})}));
var H=c("<span/>",{"class":"imageEditor-sizeLabel",html:'<span title="'+I.text()+'">'+I.text()+"</span>"});
G["$sizeLabel"]=H;
R.append(H);
var L=c("<div/>",{"class":"imageEditor-sizePreview",html:c("<img/>",{alt:I.text(),src:D,load:function(){V()
}})});
R.append(L);
var M=0;
H.after(c("<a/>",{"class":"imageEditor-addTextOverlay",text:"Add Text",click:function(Z,ao){++M;
var ad=c("<div/>",{"class":"imageEditor-textOverlay",css:{left:((G.textXs.val().split(a)[M]||0.25)*100)+"%",position:"absolute",top:((G.textYs.val().split(a)[M]||0.25)*100)+"%",width:((G.textWidths.val().split(a)[M]||0.5)*100)+"%","z-index":1}});
X.append(ad);
var ab=c("<div/>",{"class":"imageEditor-textOverlayLabel",text:"Text #"+M});
var ai=function(){if(!X.is(":visible")){return
}var ap="";
X.find(".imageEditor-textOverlay").each(function(){var av=c(this),au=c(av.find(".rte-container iframe")[0].contentDocument.body),ar=c.data(this,"imageEditor-originalFontSize"),at,aq;
if(!ar&&au.is(".rte-loaded")){ar=parseFloat(au.css("font-size"));
c.data(this,"imageEditor-originalFontSize",ar)
}ap+=a;
if(ar>0){at=1/Q*ar;
ap+=at;
au.css("font-size",X.height()*at)
}});
G.textSizes.val(ap)
};
ad.bind("resizeTextOverlayFont",ai);
var am=function(ap){return function(au){ai();
var at=ad.position();
var ar={left:at.left,top:at.top,width:ad.width(),height:ad.height(),pageX:au.pageX,pageY:au.pageY};
var aq=X.width();
var av=X.height();
au.dragImmediately=true;
c.drag(this,au,function(aw){},function(az){var ax=az.pageX-ar.pageX;
var aw=az.pageY-ar.pageY;
var ay=ap(az,ar,{x:ax,y:aw});
for(key in ar){ay[key]=ay[key]||ar[key]
}ay.left=((ay.left/aq)*100)+"%";
ay.top=((ay.top/av)*100)+"%";
ay.width=((ay.width/aq)*100)+"%";
ay.height="auto";
ad.css(ay)
},function(){var az="",aw="",ax="",ay="";
X.find(".imageEditor-textOverlay").each(function(){var aD=c(this),aC=aD.position(),aB=aD.width(),aA=aD.height();
az+=a+(aD.find(".imageEditor-textOverlayInput").val());
aw+=a+(aC.left/aq);
ax+=a+(aC.top/av);
ay+=a+(aB/aq)
});
G.texts.val(az);
G.textXs.val(aw);
G.textYs.val(ax);
G.textWidths.val(ay)
});
return false
}
};
ab.mousedown(am(function(aq,ap,ar){return{moving:true,left:ap.left+ar.x,top:ap.top+ar.y}
}));
ad.append(ab);
var al=c("<div/>",{"class":"imageEditor-textOverlayRemove",text:"Remove",click:function(){ad.remove();
return false
}});
ad.append(al);
ad.append(c("<div/>",{"class":"imageEditor-resizer imageEditor-resizer-left",mousedown:am(function(aq,ap,ar){return{left:ap.left+ar.x,width:ap.width-ar.x}
})}));
ad.append(c("<div/>",{"class":"imageEditor-resizer imageEditor-resizer-right",mousedown:am(function(aq,ap,ar){return{left:ap.left,width:ap.width+ar.x}
})}));
var ac=c("<input/>",{"class":"imageEditor-textOverlayInput",type:"text",value:G.texts.val().split(a)[M]||""});
ad.append(ac);
ac.rte({initImmediately:true,useLineBreaks:true});
r.before(ad.find(".rte-toolbar-container"));
if(!ao){ac.focus()
}var aj=5000;
var ak=function(){var ap=c(ad.find(".rte-container iframe")[0].contentDocument.body);
if(ap.is(".rte-loaded")){ai()
}else{aj-=100;
if(aj>0){setTimeout(ak,100)
}}};
ak();
q.submit(function(){var ap="";
X.find(".imageEditor-textOverlay").each(function(){ap+=a+c(this).find(".imageEditor-textOverlayInput").val()
});
G.texts.val(ap)
});
if(!ao){var aa=X.width();
var ae=X.height();
var ah="",af="",an="",ag="";
X.find(".imageEditor-textOverlay").each(function(){var at=c(this),ar=at.position(),aq=at.width(),ap=at.height();
ah+=a+(at.find(".imageEditor-textOverlayInput").val());
af+=a+(ar.left/aa);
an+=a+(ar.top/ae);
ag+=a+(aq/aa)
});
G.texts.val(ah);
G.textXs.val(af);
G.textYs.val(an);
G.textWidths.val(ag)
}return false
}}));
c.each(G.texts.val().split(a),function(Z,aa){if(Z>0){R.find(".imageEditor-addTextOverlay").trigger("click",true)
}})
});
v.before(g);
v.hide();
var n=g.find(".imageEditor-sizeButton");
if(n.length==1){n.click()
}}})
}(jQuery,window));(function(c,b,d){var a=c();
c.plugin2("lazyLoad",{_create:function(f){var e=c(f);
if(e.attr("href")){a=a.add(e)
}}});
setInterval(function(){a.filter(":visible").each(function(){var e=c(this);
a=a.not(e);
c.ajax({cache:false,type:"get",url:e.attr("href"),complete:function(f){var g=c("<div/>");
g.append(f.responseText);
e.after(g);
g.trigger("create");
e.remove()
}})
})
},100)
})(jQuery,window);(function(b,d,a){var c=d.document,e=b(d);
b.plugin2("locationMap",{_create:function(l){var j=this;
var f=L.map(l,{scrollWheelZoom:false});
new L.TileLayer.MapQuestOpenOSM().addTo(f);
var h=b(l).find(".locationMapLatitude");
var m=b(l).find(".locationMapLongitude");
var p=b(l).find(".locationMapZoom");
var k=b(h).val();
var n=b(m).val();
var o=b(p).val();
var i=true;
if((!k||k===""||k.length===0)||(!n||n===""||n.length===0)){k=39.8282;
n=-98.5795;
o=4;
i=false
}f.setView([k,n],o);
f.on("zoomend",function(q){p.val(f.getZoom())
});
var g=null;
if(i){g=L.marker([k,n],{draggable:true}).addTo(f);
g.on("dragend",function(q){j.updateLatLng(q.target,f,h,m,p)
})
}new L.Control.GeoSearch({zoomLevel:16,provider:new L.GeoSearch.Provider.OpenStreetMap(),success:function(q){if(g!==null&&q!==g){f.removeLayer(g)
}g=q;
g.dragging.enable();
g.on("dragend",function(r){j.updateLatLng(r.target,f,h,m,p)
});
j.updateLatLng(g,f,h,m,p)
}}).addTo(f)
},updateLatLng:function(h,k,j,i,g){var f=h.getLatLng();
j.val(f.lat);
i.val(f.lng);
g.val(k.getZoom())
}})
}(jQuery,window));(function(e,f,c){var b,d="objectId-shadow",g="objectId-target",a=0;
b=function(h){h.each(function(){var n=e(this),r=e.data(this,d),j,m,k,l,i,o,q,p;
if(!r){return
}j=r.$select;
m=r.$edit;
k=r.$clear;
l=n.attr("data-preview");
o=n.attr("data-label");
i=n.attr("data-visibility");
p=n.val();
if(l){j.html(e("<figure/>",{html:[e("<img/>",{src:l}),e("<figcaption>",{text:o})]}))
}else{if(o){j.text(o);
if(i){j.prepend(" ");
j.prepend(e("<span/>",{"class":"visibilityLabel",text:i}))
}}else{q=n.attr("placeholder");
if(q){j.html(e("<span/>",{"class":"objectId-placeholder",text:q}))
}else{j.text("\u00a0")
}}}m.toggle(n.attr("data-editable")!=="false"&&!!p);
k.toggle(k.is(".restore")||(n.attr("data-clearable")!=="false"&&n.closest(".repeatableObjectId").length===0&&!!p));
m.attr("href",CONTEXT_PATH+"content/edit.jsp?id="+(p||"")+"&"+(((/[&?](variationId=[^&]+)/).exec(f.location.search)||[])[1]||""))
})
};
e.plugin2("objectId",{_init:function(h){this.$caller.on("change.objectId",h,function(){b(e(this))
});
this.$caller.on("close",function(j){var i=f.document.body,k=e(i),l=e.data(i,"objectId-target");
if(l&&e(j.target).is('[name="'+l+'"]')){k.animate({scrollTop:e.data(i,"objectId-scrollTop")});
k.removeClass("objectEditing");
e.removeData(i,"objectId-target");
e.removeData(i,"objectId-scrollTop")
}})
},_create:function(n){var m,p,k,h,q,i,l,j,o;
if(e.data(n,d)){return
}m=e(n);
p=n.form?e(n.form):m.closest("form");
k=e.data(p[0],g);
if(!k){++a;
k="objectId-"+a;
e.data(p[0],g,k)
}h=m.attr("data-typeIds");
q=p.attr("action");
i=e("<a/>",{"class":"objectId-select",target:k,click:function(){return !e(this).is(".state-disabled")
},href:(m.attr("data-searcher-path")||(CONTEXT_PATH+"content/objectId.jsp"))+"?pt="+encodeURIComponent((/id=([^&]+)/.exec(q)||[])[1]||"")+"&p="+encodeURIComponent(m.attr("data-pathed"))+"&"+(h?e.map(h.split(","),function(r){return"rt="+r
}).join("&"):"")+"&aq="+encodeURIComponent(m.attr("data-additional-query")||"")+"&sg="+encodeURIComponent(m.attr("data-suggestions")||"")});
l=e("<a/>",{"class":"objectId-edit",target:k,text:"Edit",click:function(){var r=e(f.document.body);
if(!r.is(".objectEditing")){e.data(r[0],"objectId-scrollTop",r.scrollTop());
e.data(r[0],"objectId-target",k);
r.addClass("objectEditing")
}r.animate({scrollTop:(l.closest(".inputContainer").offset().top-e(".toolHeader:visible").outerHeight(true))})
}});
j=e("<a/>",{"class":"objectId-clear",text:"Clear",click:function(){var t=e(this),u=e.data(t[0],d),s=u.$select,r=u.$edit;
if(m.val()){if(m.attr("data-restorable")==="false"){m.removeAttr("data-label");
m.removeAttr("data-preview")
}else{s.addClass("toBeRemoved");
r.addClass("toBeRemoved");
t.addClass("restore");
t.text("Restore")
}m.val("")
}else{s.removeClass("toBeRemoved");
r.removeClass("toBeRemoved");
t.removeClass("restore");
t.text("Clear");
m.val(m[0].defaultValue)
}m.change();
return false
}});
o={"$input":m,"$select":i,"$edit":l,"$clear":j};
e.data(n,d,o);
e.data(i[0],d,o);
e.data(l[0],d,o);
e.data(j[0],d,o)
},_createAll:function(j,h){var i=e(j).find(h);
i.each(function(){var l=e(this),k=e.data(this,d);
l.hide();
l.after(k.$clear);
l.after(k.$edit);
l.after(k.$select)
});
i.bind("input-disable",function(l,k){var n=e(this),m=e.data(this,d);
if(m){m.$clear.toggleClass("state-disabled",k);
m.$select.toggleClass("state-disabled",k)
}});
b(i)
}});
e(f.document).onCreate("[data-o-id]",function(){var h=e(this),j=h.popup("source"),i;
if(j&&(j.is(".objectId-select")||j.is(".objectId-edit"))){i=j.parent().find(":input.objectId");
i.attr("data-label",h.attr("data-o-label"));
i.attr("data-preview",h.attr("data-o-preview"));
i.val(h.attr("data-o-id"));
i.change()
}})
}(jQuery,window));(function(b,d,a){var c=d.document,e=b(d);
b.plugin2("pageLayout",{_create:function(q){var k=b(q);
var h=k.attr("data-pageid");
var m;
var f;
var p=false;
var i;
var o=b("<div/>",{"class":"pageLayout-visual"});
o.bind("updateJson",function(){k.val(JSON.stringify(m,null,2))
});
var j=function(){o.empty();
i(o,m.outermostSection);
o.find(".section > .hat").hide();
o.trigger("updateJson")
};
o.mousemove(b.throttle(100,function(t){if(!p){var u=o.find(".section > .hat");
var s;
var r=c.elementFromPoint(t.pageX-e.scrollLeft(),t.pageY-e.scrollTop());
if(r){s=b(r).closest(".section").find("> .hat");
u=u.not(s)
}u.hide();
if(s){s.show()
}}}));
i=function(F,v,w){var D=b("<div/>",{"class":"section","data-flex":1});
v.page=v.page||h;
D.data("definition",v);
var A=b("<div/>",{"class":"hat"});
var C=b("<div/>",{"class":"heading"});
var s=b("<div/>",{"class":"content","data-flex":1});
if(w){var u=w.children;
if(u){var y=u.length;
if(y>1){var x={};
b.each(["Up","Down","Left","Right"],function(G,H){A.append(x[H]=b("<span/>",{"class":"move"+H+"Button",text:H}))
});
x.Up.add(x.Left).click(function(){for(var G=1;
G<y;
++G){if(u[G]===v){var H=u[G-1];
u[G-1]=v;
u[G]=H;
j();
break
}}});
x.Down.add(x.Right).click(function(){for(var G=0;
G<y-1;
++G){if(u[G]===v){var H=u[G+1];
u[G+1]=v;
u[G]=H;
j();
break
}}})
}}}A.append(b("<a/>",{"class":"settingsButton",text:"Settings",click:function(){f(b(this),v);
return false
}}));
var z=b("<span/>",{"class":"removeButton",text:"Remove",click:function(){if(D.is(".toBeRemoved")){v._isIgnore=false;
o.trigger("updateJson");
D.removeClass("toBeRemoved");
b(this).text("Remove").attr("src",CONTEXT_PATH+"style/icon/delete.png")
}else{v._isIgnore=true;
o.trigger("updateJson");
D.addClass("toBeRemoved");
b(this).text("Restore").attr("src",CONTEXT_PATH+"style/icon/add.png")
}}});
A.append(z);
if(v._isIgnore){z.click()
}var t=true;
if(v._type==="com.psddev.cms.db.HorizontalContainerSection"){D.add(s).addClass("horizontal")
}else{if(v._type==="com.psddev.cms.db.VerticalContainerSection"){D.add(s).addClass("vertical")
}else{if(v._type==="com.psddev.cms.db.MainSection"){D.addClass("main")
}t=false
}}if(v.isShareable){D.addClass("shared")
}var E=b("<div/>",{"class":"name"});
if(v.name){E.text(v.name)
}else{E.addClass("anonymous");
E.text("Unnamed "+(t?"Container":"Section"))
}C.append(E);
if(v._type==="com.psddev.cms.db.ContentSection"){var B=b("<a/>",{"class":"contentButton",text:v.contentTypeLabel&&v.contentLabel?v.contentTypeLabel+": "+v.contentLabel:"Select Content"});
if(F.closest(".contentForm").length>0&&v.content){var r=location.href.replace(/&contentId=[^&]*/,"");
r=r.replace(/\?contentId=[^&]*/,"?");
r+="&contentId="+v.content;
B.attr("href",r);
B.attr("target","_top")
}else{B.attr("href",CONTEXT_PATH+"content/sectionContent.jsp?id="+(v.content||""));
B.attr("target","contentSectionContent")
}C.append(B);
if(v.contentTypeLabel&&v.contentLabel){C.append(b("<a/>",{"class":"removeContentButton",text:"Remove",click:function(){v.content=null;
v.contentTypeLabel=null;
v.contentLabel=null;
j()
}}))
}}D.append(A);
D.append(C);
D.append(s);
F.append(D);
if(t){C.append(b("<span/>",{"class":"addButton",click:function(){var G={_type:"com.psddev.cms.db.ScriptSection"};
(v.children=v.children||[]).push(G);
j()
}}));
if(v.children){b.each(v.children,function(H,G){i(s,G,v)
})
}}if(v._type==="com.psddev.cms.db.MainSection"){D.parentsUntil(".pageLayout-visual").add(D).filter("[data-flex]").attr("data-flex",2.5)
}};
f=function(u,s){var r=b("#sectionSettings");
if(r.length===0){var t='<option value=""></option><option value="JSP">JSP</option><option value="RawText">Raw Text</option>';
r=b('<div id="sectionSettings"><h1>Section: <strong class="name"></strong></h1><div class="inputContainer"><div class="inputLabel">Shareable?</div><div class="inputSmall"><input name="isShareable" type="checkbox"></div></div><div class="inputContainer"><div class="inputLabel">Cache Duration (in Milliseconds)</div><div class="inputSmall"><input name="cacheDuration" type="text"></div></div><div class="inputContainer"><div class="inputLabel">Type</div><div class="inputSmall"><select class="toggleable" name="_type"><option data-hide="#sectionSettings .i" data-show="#sectionSettings .hc" value="com.psddev.cms.db.HorizontalContainerSection">Container (Horizontal)</option><option data-hide="#sectionSettings .i" data-show="#sectionSettings .vc" value="com.psddev.cms.db.VerticalContainerSection">Container (Vertical)</option><option data-hide="#sectionSettings .i" data-show="#sectionSettings .s" value="com.psddev.cms.db.ScriptSection">Script</option><option data-hide="#sectionSettings .i" data-show="#sectionSettings .c" value="com.psddev.cms.db.ContentSection">Script (with Content)</option><option data-hide="#sectionSettings .i" data-show="#sectionSettings .s" value="com.psddev.cms.db.MainSection">Script (with Main Content)</option></select></div></div><div class="inputContainer i hc vc s c"><div class="inputLabel">Name</div><div class="inputSmall"><input name="name" type="text"></div></div><div class="inputContainer i s c"><div class="inputLabel">Engine</div><div class="inputSmall"><select name="engine">'+t+'</select></div></div><div class="inputContainer i s c"><div class="inputLabel">Script</div><div class="inputSmall"><input name="script" type="text"></div></div><div class="inputContainer i hc vc"><div class="inputLabel">Begin Engine</div><div class="inputSmall"><select name="beginEngine">'+t+'</select></div></div><div class="inputContainer i hc vc"><div class="inputLabel">Begin Script</div><div class="inputSmall"><input name="beginScript" type="text"></div></div><div class="inputContainer i hc vc"><div class="inputLabel">End Engine</div><div class="inputSmall"><select name="endEngine">'+t+'</select></div></div><div class="inputContainer i hc vc"><div class="inputLabel">End Script</div><div class="inputSmall"><input name="endScript" type="text"></div></div><div class="buttons"><a class="button continueButton" href="#">Continue Editing</a></div></div>');
r.find(".continueButton").click(function(){r.popup("close");
return false
});
b("body").append(r);
r.popup()
}r.popup("source",u);
r.popup("open");
p=true;
r.find("> h1 > .name").text(s.name||"Unnamed");
b.each("isShareable cacheDuration _type name engine script beginEngine beginScript endEngine endScript".split(" "),function(x,w){var y=r.find(":input[name="+w+"]");
if(y.is(":checkbox")){if(s[w]){y.attr("checked","checked")
}else{y.removeAttr("checked")
}}else{y.val(s[w]||"")
}y.change()
});
var v=r.popup("container");
v.unbind("close.section");
v.bind("close.section",function(){b.each("isShareable cacheDuration _type name engine script beginEngine beginScript endEngine endScript".split(" "),function(x,w){var y=r.find(":input[name="+w+"]");
if(y.is(":checkbox")){s[w]=y.is(":checked")
}else{if(w==="cacheDuration"){s[w]=y.val()||0
}else{s[w]=y.val()
}}});
j();
p=false
})
};
var n=b("<div/>",{"class":"pageLayout-tabs"});
var l=b("<span/>",{"class":"visualButton",text:"Visual",click:function(){try{m=b.parseJSON(k.val())
}catch(r){}m=b.extend(true,{outermostSection:{_type:"com.psddev.cms.db.ScriptSection"}},m);
k.hide();
g.removeClass("selected");
o.show();
l.addClass("selected");
j()
}});
var g=b("<span/>",{"class":"jsonButton",text:"JSON",click:function(){o.hide();
l.removeClass("selected");
k.show();
g.addClass("selected")
}});
n.append(l);
n.append(g);
k.before(n);
k.before(o);
l.click()
}})
}(jQuery,window));(function(h,i,f){var c=h(i),k=i.document,g=h(k),j=h(),e,d,b,a;
h.plugin2("pageThumbnails",{_create:function(l){var q=this,v=h(l),p=h(k.body),t,o,u,r,s,x,n,m,w;
j=j.add(v);
v.bind("hidePreview.pageThumbnails",function(){if(a){a.remove();
a=null
}t=false;
if(o){o.remove();
o=null
}if(d){clearTimeout(d);
d=null
}});
v.delegate('[data-preview-url]:not([data-preview-url=""])',"mouseenter.pageThumbnails",function(){var A,y,z;
if(e&&e!==v){e.trigger("hidePreview")
}e=v;
r=h(this);
s=r.attr("data-preview-url");
if(!a){a=h("<div/>",{"class":"pageThumbnails_toggle",text:"Preview"});
a.bind("click.pageThumbnails",function(B){t=!t;
a.toggleClass("pageThumbnails_toggle-enabled",t);
u();
return false
});
p.append(a)
}x=r.find("[data-preview-anchor]");
if(x.length===0){x=v
}A=r.offset().top;
y=r.outerHeight();
n=x.offset();
m=x.outerWidth();
w=n.left>g.width()-n.left-m;
if(w){if(x[0]===v[0]||x.prev().length===0){z=n.left-h.css(x[0],"padding-left",true)-h.css(x[0],"border-left-width",true)-h.css(x[0],"margin-left",true)
}else{z=n.left-a.outerWidth(true)
}}else{z=n.left+m-a.outerWidth(true)
}a.toggleClass("pageThumbnails_toggle-right",w);
u(function(){a.css({height:y,left:z,"line-height":y+"px",position:"absolute",top:A})
})
});
u=function(y){var z;
if(t){if(!o){o=h("<div/>",{"class":"pageThumbnails_preview"});
o.hide();
p.append(o)
}if(d){clearTimeout(d);
d=null
}z=function(){var D,C,B,A;
if(y){y()
}o.html(h("<a/>",{"class":"pageThumbnails_preview_livePage",href:s,target:"_blank",text:"Live Page",click:function(){i.open(h(this).attr("href"));
return false
}}).add(h("<iframe/>",{"class":"pageThumbnails_preview_frame",src:s,load:function(){D();
if(C){clearTimeout(C);
C=null
}}})));
D=function(){var E;
if(o&&o.is(":visible")){E=o.find("iframe");
E.height(E.contents().find("body").height()+50);
C=setTimeout(D,100)
}};
D();
B=parseInt(r.attr("data-preview-embed-width"),10);
o.toggleClass("pageThumbnailsPreview-embed",!!B);
o.css({top:!!B?r.offset().top-50:"",width:!!B?B:""});
if(w){if(x[0]===v[0]||x.prev().length===0){A=n.left-h.css(x[0],"padding-left",true)-h.css(x[0],"border-left-width",true)-h.css(x[0],"margin-left",true)
}else{A=n.left-a.outerWidth(true)
}A-=o.outerWidth(true)
}else{A=n.left+m
}o.toggleClass("pageThumbnails_preview-right",w);
o.css("left",A);
o.show()
};
if(o.is(":visible")){d=setTimeout(function(){z();
d=null
},500)
}else{z()
}}else{if(y){y()
}if(o){o.remove();
o=null
}}}
}});
c.bind("mousemove.pageThumbnails",h.throttle(100,function(n){var l=h(n.target),o,m;
if(l.length===0){return
}if(l.closest(".pageThumbnails_preview").length>0){o=true;
if(d){clearTimeout(d);
d=null
}}else{if(l.closest(".pageThumbnails_toggle").length>0){o=true
}}if(!o&&e&&!h.contains(e[0],l[0])){m=e;
if(!b){b=setTimeout(function(){m.trigger("hidePreview");
b=null;
if(e===m){e=null
}},200)
}return
}if(b){clearTimeout(b);
b=null
}}))
}(jQuery,window));(function(b,d,a){var c=d.document,e=b(d);
b.plugin2("regionMap",{_create:function(s){var k=this;
var v=L.map(s,{scrollWheelZoom:false});
new L.TileLayer.MapQuestOpenOSM().addTo(v);
var h=b(s).find(".regionMapZoom");
var r=b(s).find(".regionMapCenter");
var l=b(s).find(".regionMapGeoJson");
var i=b.parseJSON(b(l).val());
var n={color:"#3a87ad",opacity:1,weight:4,fillColor:"#3a87ad",fillOpacity:0.5};
var m=39.8282;
var y=-98.5795;
var g=h.val();
var u=b.parseJSON(r.val());
v.setView([u.lat,u.lng],g);
var t=new L.FeatureGroup();
v.addLayer(t);
var j=L.GeoJSON.geometryToLayer(i,n);
for(x in j.getLayers()){var w=j.getLayers()[x];
if(w instanceof L.MultiPolygon){var f=w.getLatLngs();
for(x in f){var q=new L.Polygon(f[x],{shapeOptions:n});
t.addLayer(q)
}}else{w.setStyle(n);
t.addLayer(w)
}}t.setStyle(n);
var o=new L.Control.Draw({draw:{polyline:false,rectangle:false,marker:false,polygon:{allowIntersection:false,shapeOptions:n},circle:{shapeOptions:n}},edit:{featureGroup:t,remove:true}});
v.addControl(o);
var p=function(A){var z=t.toGeoJSON();
l.val(JSON.stringify(z))
};
v.on("dragend",function(z){h.val(v.getZoom());
r.val(JSON.stringify(v.getCenter()))
});
v.on("zoomend",function(z){h.val(v.getZoom());
r.val(JSON.stringify(v.getCenter()))
});
v.on("draw:created",function(z){t.addLayer(z.layer);
p(z)
});
v.on("draw:edited",p);
v.on("draw:deleted",p)
}})
}(jQuery,window));(function(b,d,a){var e=b(d),c=0;
b.plugin2("repeatable",{_defaultOptions:{addButtonText:"Add",removeButtonText:"Remove",restoreButtonText:"Restore",sortableOptions:{delay:300}},_create:function(h){var o=b(h),p=this.option();
o.addClass("event-input-disable");
o.bind("input-disable",function(r,q){o.toggleClass("state-disabled",q)
});
var i=function(){var r=b(this);
var t=r.attr("data-type");
if(t){var s=r.attr("data-label");
var u=r.find(" > .repeatableLabel");
u.removeClass("repeatableLabel");
if(r.find(".message-error").length===0){r.addClass("collapsed")
}var q=b("<div/>",{"class":"repeatableLabel",text:t+(s?": "+s:""),"data-object-id":r.find('> input[type="hidden"][name$=".id"]').val(),"data-dynamic-text":"${content.state.getType().label}: ${content.label}",click:function(){r.toggleClass("collapsed");
r.resize()
}});
if(u.size()!==0){q.append(u);
q.find(":input").click(function(v){v.stopPropagation()
})
}r.prepend(q)
}r.find(':input[name$=".toggle"]').hide();
r.append(b("<span/>",{"class":"removeButton",text:p.removeButtonText}))
};
var l=o.find("> ul:first");
if(l.length===0){l=o.find("> ol:first");
if(l.length===0){return
}else{l.sortable(p.sortableOptions)
}}var m=l.find("> li.template").remove();
l.find("> li").each(i);
var j=b("<div/>",{"class":"addButtonContainer"});
o.append(j);
var k;
if(!p.addButtonText&&m.length==1){var g=m.find(":input");
var f=m.find(':input[name$=".toggle"]');
g=g.not(f);
if(g.length==1){k=g.clone();
k.removeAttr("id");
k.keydown(function(q){if(q.which==13){j.find(".addButton").trigger("click");
return false
}});
j.append(b("<input/>",{name:f.attr("name"),type:"hidden",value:f.attr("value")}));
j.append(k)
}}var n=0;
m.each(function(){var q=b(this);
j.append(b("<span/>",{"class":"addButton",text:p.addButtonText?p.addButtonText+" "+(q.attr("data-type")||"Item"):"",click:function(t,r){if(k&&!k.val()){return false
}var u=q.clone();
u.removeClass("template");
u.find(':input[name$=".toggle"]').attr("checked","checked");
var v=function(){l.append(u);
u.each(i);
u.removeClass("collapsed");
if(k){u.find(':input:not([name$=".toggle"])').val(k.val());
k.val("")
}u.find("*[id]").attr("id",function(y,x){n+=1;
var z=x+"r"+n;
u.find("*[for="+x+"]").attr("for",z);
u.find("*[data-show=#"+x+"]").attr("data-show","#"+z);
return z
});
u.change();
u.trigger("create");
e.resize();
var w=u.find(".objectId-select");
if(w.length>0&&w.closest(".repeatableObjectId").length>0){}if(r){r.call(u[0])
}};
var s;
if(u.find(":input").length===0&&(s=u.find("a")).length>0){++c;
b.ajax({cache:false,url:s.attr("href"),data:{_nonce:c},complete:function(w){u.html(w.responseText);
v()
}})
}else{v()
}return false
}}))
});
l.delegate("> li > .removeButton","click",function(){var s=b(this);
var q=s.closest("li");
var r=q.find(":input");
if(q.is(".toBeRemoved")){q.removeClass("toBeRemoved");
r.removeAttr("disabled");
if(p.removeButtonText){s.text(p.removeButtonText)
}}else{q.addClass("toBeRemoved");
r.attr("disabled","disabled");
if(p.restoreButtonText){s.text(p.restoreButtonText)
}}q.change()
})
},add:function(f){this.$caller.closest(".addButton").trigger("click",[f]);
return this.$caller
}})
}(jQuery,window));(function(b,d,a){var e=b(d),c=d.document;
b.plugin2("sortable",{_defaultOptions:{itemSelector:"> *"},_create:function(f){var h=b(f),g=this.option();
h.addClass("_sortable");
h.find(g.itemSelector).addClass("_sortable-item");
h.delegate(g.itemSelector,"mousedown.sortable",function(j){var i=b(j.target);
if(i.closest("._sortable")[0]!=f){return
}if(i.is(":input")||i.closest(".CodeMirror").length>0){return
}if(j.pageX>(i.offset().left+i.outerWidth()-20)){return
}b.drag(this,j,function(l,m){var k=b(this),n=k.offset();
m.originalStyle=k.attr("style");
k.css({height:k.height(),width:k.width()});
m.$placeholder=k.clone().empty();
k.before(m.$placeholder);
m.adjustX=n.left-l.pageX;
m.adjustY=n.top-l.pageY;
k.css({display:"block",left:l.pageX-e.scrollLeft()+m.adjustX,position:"fixed",top:l.pageY-e.scrollTop()+m.adjustY,"z-index":1000000})
},function(n,o){var m=b(this),p,q,k,l;
m.css({left:n.pageX-e.scrollLeft()+o.adjustX,top:n.pageY-e.scrollTop()+o.adjustY});
m.hide();
o.$dragCover.hide();
p=b.elementFromPoint(n.clientX,n.clientY).closest("._sortable-item");
if(p.closest("._sortable")[0]!=f){p=b()
}if(p.length>0&&p[0]!==o.$placeholder[0]){q=h.find(g.itemSelector);
k=Array.prototype.indexOf.call(q,o.$placeholder[0]);
l=Array.prototype.indexOf.call(q,p[0]);
p[k>l?"before":"after"](o.$placeholder)
}m.show();
o.$dragCover.show()
},function(l,m){var k=b(this);
if(m.originalStyle){k.attr("style",m.originalStyle)
}else{k.removeAttr("style")
}k.find(".richtext").each(function(){var n=b(this);
var o=n.closest(".inputContainer").find(".rte-container iframe");
if(o.length===0){return
}n.val(b(o[0].contentDocument.body).html())
});
if(m.$placeholder.next()[0]!==k[0]){m.$placeholder.after(k)
}m.$placeholder.remove();
k.find(".richtext").each(function(){var q=b(this);
var r=q.closest(".inputContainer").find(".rte-container iframe");
if(r.length===0){return
}var n=q.val();
var o=q.closest(".inputContainer");
q=q.clone();
var p=o.find(".rte-container");
q.val(n);
p.after(q);
p.remove();
q.removeClass("plugin-expandable plugin-rte rte-textarea rte-source");
q.show();
o.trigger("create")
})
})
})
}})
}(jQuery,window));(function(i,e,g){var n={beforeShow:b,move:b,change:b,show:b,hide:b,color:false,flat:false,showInput:false,showButtons:true,clickoutFiresChange:false,showInitial:false,showPalette:false,showPaletteOnly:false,showSelectionPalette:true,localStorageKey:false,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",preferredFormat:false,className:"",showAlpha:false,theme:"sp-light",palette:["fff","000"],selectionPalette:[],disabled:false},d=[],j=!!/msie/i.exec(i.navigator.userAgent),m=(function(){function v(z,y){return !!~(""+z).indexOf(y)
}var x=document.createElement("div");
var w=x.style;
w.cssText="background-color:rgba(0,0,0,.5)";
return v(w.backgroundColor,"rgba")||v(w.backgroundColor,"hsla")
})(),r=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),q=(function(){var v="";
if(j){for(var w=1;
w<=6;
w++){v+="<div class='sp-"+w+"'></div>"
}}return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",v,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button class='sp-choose'></button>","</div>","</div>","</div>"].join("")
})();
function t(B,w,z){var y=[];
for(var x=0;
x<B.length;
x++){var v=tinycolor(B[x]);
var C=v.toHsl().l<0.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";
C+=(tinycolor.equals(w,B[x]))?" sp-thumb-active":"";
var A=m?("background-color:"+v.toRgbString()):"filter:"+v.toFilter();
y.push('<span title="'+v.toRgbString()+'" data-color="'+v.toRgbString()+'" class="'+C+'"><span class="sp-thumb-inner" style="'+A+';" /></span>')
}return"<div class='sp-cf "+z+"'>"+y.join("")+"</div>"
}function p(){for(var v=0;
v<d.length;
v++){if(d[v]){d[v].hide()
}}}function o(x,v){var w=e.extend({},n,x);
w.callbacks={move:u(w.move,v),change:u(w.change,v),show:u(w.show,v),hide:u(w.hide,v),beforeShow:u(w.beforeShow,v)};
return w
}function s(aX,ae){var aW=o(ae,aX),aU=aW.flat,U=aW.showSelectionPalette,w=aW.localStorageKey,ag=aW.theme,P=aW.callbacks,C=f(aa,10),M=false,aF=0,ac=0,aG=0,ar=0,J=0,aq=0,aP=0,ak=0,W=0,N=0,av=0,aQ=1,af=aW.palette.slice(0),ah=e.isArray(af[0])?af:[af],aB=aW.selectionPalette.slice(0),aA=aW.maxSelectionSize,x="sp-dragging",E=null;
var V=aX.ownerDocument,L=V.body,B=e(aX),aN=false,aH=e(q,V).addClass(ag),G=aH.find(".sp-color"),aE=aH.find(".sp-dragger"),K=aH.find(".sp-hue"),aT=aH.find(".sp-slider"),ax=aH.find(".sp-alpha-inner"),X=aH.find(".sp-alpha"),ay=aH.find(".sp-alpha-handle"),I=aH.find(".sp-input"),O=aH.find(".sp-palette"),aV=aH.find(".sp-initial"),aj=aH.find(".sp-cancel"),F=aH.find(".sp-choose"),Q=B.is("input"),au=Q&&!aU,aL=(au)?e(r).addClass(ag).addClass(aW.className):e([]),ao=(au)?aL:B,H=aL.find(".sp-preview-inner"),R=aW.color||(Q&&B.val()),aI=false,T=aW.preferredFormat,am=T,D=!aW.showButtons||aW.clickoutFiresChange;
function v(){if(aW.showPaletteOnly){aW.showPalette=true
}aH.toggleClass("sp-flat",aU);
aH.toggleClass("sp-input-disabled",!aW.showInput);
aH.toggleClass("sp-alpha-enabled",aW.showAlpha);
aH.toggleClass("sp-buttons-disabled",!aW.showButtons);
aH.toggleClass("sp-palette-disabled",!aW.showPalette);
aH.toggleClass("sp-palette-only",aW.showPaletteOnly);
aH.toggleClass("sp-initial-disabled",!aW.showInitial);
aH.addClass(aW.className);
aa()
}function aC(){if(j){aH.find("*:not(input)").attr("unselectable","on")
}v();
if(au){B.after(aL).hide()
}if(aU){B.after(aH).hide()
}else{var a2=aW.appendTo==="parent"?B.parent():e(aW.appendTo);
if(a2.length!==1){a2=e("body")
}a2.append(aH)
}if(w&&i.localStorage){try{var a0=i.localStorage[w].split(",#");
if(a0.length>1){delete i.localStorage[w];
e.each(a0,function(a4,a5){aM(a5)
})
}}catch(a3){}try{aB=i.localStorage[w].split(";")
}catch(a3){}}ao.bind("click.spectrum touchstart.spectrum",function(a4){if(!aN){ap()
}a4.stopPropagation();
if(!e(a4.target).is("input")){a4.preventDefault()
}});
if(B.is(":disabled")||(aW.disabled===true)){S()
}aH.click(l);
I.change(aJ);
I.bind("paste",function(){setTimeout(aJ,1)
});
I.keydown(function(a4){if(a4.keyCode==13){aJ()
}});
aj.text(aW.cancelText);
aj.bind("click.spectrum",function(a4){a4.stopPropagation();
a4.preventDefault();
az("cancel")
});
F.text(aW.chooseText);
F.bind("click.spectrum",function(a4){a4.stopPropagation();
a4.preventDefault();
if(at()){ai(true);
az()
}});
c(X,function(a6,a5,a4){aQ=(a6/aq);
if(a4.shiftKey){aQ=Math.round(aQ*10)/10
}aD()
});
c(K,function(a5,a4){W=parseFloat(a4/ar);
aD()
},A,aY);
c(G,function(bb,a9,a8){if(!a8.shiftKey){E=null
}else{if(!E){var a6=N*aF;
var a4=ac-(av*ac);
var a5=Math.abs(bb-a6)>Math.abs(a9-a4);
E=a5?"x":"y"
}}var a7=!E||E==="x";
var ba=!E||E==="y";
if(a7){N=parseFloat(bb/aF)
}if(ba){av=parseFloat((ac-a9)/ac)
}aD()
},A,aY);
if(!!R){Z(R);
aw();
am=T||tinycolor(R).format;
aM(R)
}else{aw()
}if(aU){z()
}function a1(a4){if(a4.data&&a4.data.ignore){Z(e(this).data("color"));
aD()
}else{Z(e(this).data("color"));
ai(true);
aD();
az()
}return false
}var aZ=j?"mousedown.spectrum":"click.spectrum touchstart.spectrum";
O.delegate(".sp-thumb-el",aZ,a1);
aV.delegate(".sp-thumb-el:nth-child(1)",aZ,{ignore:true},a1)
}function aM(aZ){if(U){var a1=tinycolor(aZ).toRgbString();
if(e.inArray(a1,aB)===-1){aB.push(a1);
while(aB.length>aA){aB.shift()
}}if(w&&i.localStorage){try{i.localStorage[w]=aB.join(";")
}catch(a0){}}}}function aO(){var a4=[];
var a3=aB;
var a2={};
var a0;
if(aW.showPalette){for(var a1=0;
a1<ah.length;
a1++){for(var aZ=0;
aZ<ah[a1].length;
aZ++){a0=tinycolor(ah[a1][aZ]).toRgbString();
a2[a0]=true
}}for(a1=0;
a1<a3.length;
a1++){a0=tinycolor(a3[a1]).toRgbString();
if(!a2.hasOwnProperty(a0)){a4.push(a3[a1]);
a2[a0]=true
}}}return a4.reverse().slice(0,aW.maxSelectionSize)
}function aR(){var aZ=aK();
var a0=e.map(ah,function(a1,a2){return t(a1,aZ,"sp-palette-row sp-palette-row-"+a2)
});
if(aB){a0.push(t(aO(),aZ,"sp-palette-row sp-palette-row-selection"))
}O.html(a0.join(""))
}function al(){if(aW.showInitial){var aZ=aI;
var a0=aK();
aV.html(t([aZ,a0],a0,"sp-palette-row-initial"))
}}function A(){if(ac<=0||aF<=0||ar<=0){aa()
}aH.addClass(x);
E=null
}function aY(){aH.removeClass(x)
}function aJ(){var aZ=tinycolor(I.val());
if(aZ.ok){Z(aZ)
}else{I.addClass("sp-validation-error")
}}function ap(){if(M){az()
}else{z()
}}function z(){var aZ=e.Event("beforeShow.spectrum");
if(M){aa();
return
}B.trigger(aZ,[aK()]);
if(P.beforeShow(aK())===false||aZ.isDefaultPrevented()){return
}p();
M=true;
e(V).bind("click.spectrum",az);
e(i).bind("resize.spectrum",C);
aL.addClass("sp-active");
aH.removeClass("sp-hidden");
if(aW.showPalette){aR()
}aa();
aw();
aI=aK();
al();
P.show(aI);
B.trigger("show.spectrum",[aI])
}function az(a0){if(a0&&a0.type=="click"&&a0.button==2){return
}if(!M||aU){return
}M=false;
e(V).unbind("click.spectrum",az);
e(i).unbind("resize.spectrum",C);
aL.removeClass("sp-active");
aH.addClass("sp-hidden");
var aZ=!tinycolor.equals(aK(),aI);
if(aZ){if(D&&a0!=="cancel"){ai(true)
}else{an()
}}P.hide(aK());
B.trigger("hide.spectrum",[aK()])
}function an(){Z(aI,true)
}function Z(aZ,a1){if(tinycolor.equals(aZ,aK())){return
}var a0=tinycolor(aZ);
var a2=a0.toHsv();
W=(a2.h%360)/360;
N=a2.s;
av=a2.v;
aQ=a2.a;
aw();
if(a0.ok&&!a1){am=T||a0.format
}}function aK(aZ){aZ=aZ||{};
return tinycolor.fromRatio({h:W,s:N,v:av,a:Math.round(aQ*100)/100},{format:aZ.format||am})
}function at(){return !I.hasClass("sp-validation-error")
}function aD(){aw();
P.move(aK());
B.trigger("move.spectrum",[aK()])
}function aw(){I.removeClass("sp-validation-error");
aS();
var a1=tinycolor.fromRatio({h:W,s:1,v:1});
G.css("background-color",a1.toHexString());
var a5=am;
if(aQ<1){if(a5==="hex"||a5==="hex3"||a5==="hex6"||a5==="name"){a5="rgb"
}}var a2=aK({format:a5}),a6=a2.toHexString(),a3=a2.toRgbString();
if(m||a2.alpha===1){H.css("background-color",a3)
}else{H.css("background-color","transparent");
H.css("filter",a2.toFilter())
}if(aW.showAlpha){var a0=a2.toRgb();
a0.a=0;
var aZ=tinycolor(a0).toRgbString();
var a4="linear-gradient(left, "+aZ+", "+a6+")";
if(j){ax.css("filter",tinycolor(aZ).toFilter({gradientType:1},a6))
}else{ax.css("background","-webkit-"+a4);
ax.css("background","-moz-"+a4);
ax.css("background","-ms-"+a4);
ax.css("background",a4)
}}if(aW.showInput){I.val(a2.toString(a5))
}if(aW.showPalette){aR()
}al()
}function aS(){var a1=N;
var aZ=av;
var a4=a1*aF;
var a2=ac-(aZ*ac);
a4=Math.max(-aG,Math.min(aF-aG,a4-aG));
a2=Math.max(-aG,Math.min(ac-aG,a2-aG));
aE.css({top:a2,left:a4});
var a0=aQ*aq;
ay.css({left:a0-(aP/2)});
var a3=(W)*ar;
aT.css({top:a3-ak})
}function ai(a0){var aZ=aK();
if(Q){B.val(aZ.toString(am))
}var a1=!tinycolor.equals(aZ,aI);
aI=aZ;
aM(aZ);
if(a0&&a1){P.change(aZ);
B.trigger("change",[aZ])
}}function aa(){aF=G.width();
ac=G.height();
aG=aE.height();
J=K.width();
ar=K.height();
ak=aT.height();
aq=X.width();
aP=ay.width();
if(!aU){aH.css("position","absolute");
aH.offset(a(aH,ao))
}aS()
}function y(){B.show();
ao.unbind("click.spectrum touchstart.spectrum");
aH.remove();
aL.remove();
d[ab.id]=null
}function Y(aZ,a0){if(aZ===g){return e.extend({},aW)
}if(a0===g){return aW[aZ]
}aW[aZ]=a0;
v()
}function ad(){aN=false;
B.attr("disabled",false);
ao.removeClass("sp-disabled")
}function S(){az();
aN=true;
B.attr("disabled",true);
ao.addClass("sp-disabled")
}aC();
var ab={show:z,hide:az,toggle:ap,reflow:aa,option:Y,enable:ad,disable:S,set:function(aZ){Z(aZ);
ai()
},get:aK,destroy:y,container:aH};
ab.id=d.push(ab)-1;
return ab
}function a(C,D){var B=0;
var z=C.outerWidth();
var F=C.outerHeight();
var v=D.outerHeight();
var E=C[0].ownerDocument;
var w=E.documentElement;
var A=w.clientWidth+e(E).scrollLeft();
var x=w.clientHeight+e(E).scrollTop();
var y=D.offset();
y.top+=v;
y.left-=Math.min(y.left,(y.left+z>A&&A>z)?Math.abs(y.left+z-A):0);
y.top-=Math.min(y.top,((y.top+F>x&&x>F)?Math.abs(F+v-B):B));
return y
}function b(){}function l(v){v.stopPropagation()
}function u(w,x){var y=Array.prototype.slice;
var v=y.call(arguments,2);
return function(){return w.apply(x,v.concat(y.call(arguments)))
}
}function c(A,F,w,x){F=F||function(){};
w=w||function(){};
x=x||function(){};
var G=A.ownerDocument||document;
var I=false;
var z={};
var J=0;
var H=0;
var C=("ontouchstart" in i);
var B={};
B.selectstart=E;
B.dragstart=E;
B["touchmove mousemove"]=y;
B["touchend mouseup"]=D;
function E(K){if(K.stopPropagation){K.stopPropagation()
}if(K.preventDefault){K.preventDefault()
}K.returnValue=false
}function y(O){if(I){if(j&&document.documentMode<9&&!O.button){return D()
}var N=O.originalEvent.touches;
var L=N?N[0].pageX:O.pageX;
var K=N?N[0].pageY:O.pageY;
var P=Math.max(0,Math.min(L-z.left,H));
var M=Math.max(0,Math.min(K-z.top,J));
if(C){E(O)
}F.apply(A,[P,M,O])
}}function v(M){var K=(M.which)?(M.which==3):(M.button==2);
var L=M.originalEvent.touches;
if(!K&&!I){if(w.apply(A,arguments)!==false){I=true;
J=e(A).height();
H=e(A).width();
z=e(A).offset();
e(G).bind(B);
e(G.body).addClass("sp-dragging");
if(!C){y(M)
}E(M)
}}}function D(){if(I){e(G).unbind(B);
e(G.body).removeClass("sp-dragging");
x.apply(A,arguments)
}I=false
}e(A).bind("touchstart mousedown",v)
}function f(w,y,v){var x;
return function(){var A=this,z=arguments;
var B=function(){x=null;
w.apply(A,z)
};
if(v){clearTimeout(x)
}if(v||!x){x=setTimeout(B,y)
}}
}function h(){if(i.console){if(Function.prototype.bind){h=Function.prototype.bind.call(console.log,console)
}else{h=function(){Function.prototype.apply.call(console.log,console,arguments)
}
}h.apply(this,arguments)
}}var k="spectrum.id";
e.fn.spectrum=function(y,v){if(typeof y=="string"){var x=this;
var w=Array.prototype.slice.call(arguments,1);
this.each(function(){var z=d[e(this).data(k)];
if(z){var A=z[y];
if(!A){throw new Error("Spectrum: no such method: '"+y+"'")
}if(y=="get"){x=z.get()
}else{if(y=="container"){x=z.container
}else{if(y=="option"){x=z.option.apply(z,w)
}else{if(y=="destroy"){z.destroy();
e(this).removeData(k)
}else{A.apply(z,w)
}}}}}});
return x
}return this.spectrum("destroy").each(function(){var z=s(this,y);
e(this).data(k,z.id)
})
};
e.fn.spectrum.load=true;
e.fn.spectrum.loadOpts={};
e.fn.spectrum.draggable=c;
e.fn.spectrum.defaults=n;
e.spectrum={};
e.spectrum.localization={};
e.spectrum.palettes={};
e.fn.spectrum.processNativeColorInputs=function(){var w=e("<input type='color' value='!' />")[0];
var v=w.type==="color"&&w.value!="!";
if(!v){e("input[type=color]").spectrum({preferredFormat:"hex6"})
}};
(function(O){var L=/^[\s,#]+/,G=/\s+$/,H=0,v=Math,S=v.round,A=v.min,D=v.max,C=v.random;
function Q(ab,Y){ab=(ab)?ab:"";
Y=Y||{};
if(typeof ab=="object"&&ab.hasOwnProperty("_tc_id")){return ab
}var ad=I(ab);
var Z=ad.r,ac=ad.g,ae=ad.b,af=ad.a,aa=S(100*af)/100,ag=Y.format||ad.format;
if(Z<1){Z=S(Z)
}if(ac<1){ac=S(ac)
}if(ae<1){ae=S(ae)
}return{ok:ad.ok,format:ag,_tc_id:H++,alpha:af,toHsv:function(){var ah=K(Z,ac,ae);
return{h:ah.h*360,s:ah.s,v:ah.v,a:af}
},toHsvString:function(){var ai=K(Z,ac,ae);
var ak=S(ai.h*360),aj=S(ai.s*100),ah=S(ai.v*100);
return(af==1)?"hsv("+ak+", "+aj+"%, "+ah+"%)":"hsva("+ak+", "+aj+"%, "+ah+"%, "+aa+")"
},toHsl:function(){var ah=T(Z,ac,ae);
return{h:ah.h*360,s:ah.s,l:ah.l,a:af}
},toHslString:function(){var ai=T(Z,ac,ae);
var ak=S(ai.h*360),aj=S(ai.s*100),ah=S(ai.l*100);
return(af==1)?"hsl("+ak+", "+aj+"%, "+ah+"%)":"hsla("+ak+", "+aj+"%, "+ah+"%, "+aa+")"
},toHex:function(ah){return R(Z,ac,ae,ah)
},toHexString:function(ah){return"#"+R(Z,ac,ae,ah)
},toRgb:function(){return{r:S(Z),g:S(ac),b:S(ae),a:af}
},toRgbString:function(){return(af==1)?"rgb("+S(Z)+", "+S(ac)+", "+S(ae)+")":"rgba("+S(Z)+", "+S(ac)+", "+S(ae)+", "+aa+")"
},toPercentageRgb:function(){return{r:S(V(Z,255)*100)+"%",g:S(V(ac,255)*100)+"%",b:S(V(ae,255)*100)+"%",a:af}
},toPercentageRgbString:function(){return(af==1)?"rgb("+S(V(Z,255)*100)+"%, "+S(V(ac,255)*100)+"%, "+S(V(ae,255)*100)+"%)":"rgba("+S(V(Z,255)*100)+"%, "+S(V(ac,255)*100)+"%, "+S(V(ae,255)*100)+"%, "+aa+")"
},toName:function(){return X[R(Z,ac,ae,true)]||false
},toFilter:function(ak){var al=R(Z,ac,ae);
var an=al;
var am=Math.round(parseFloat(af)*255).toString(16);
var ai=am;
var ah=Y&&Y.gradientType?"GradientType = 1, ":"";
if(ak){var aj=Q(ak);
an=aj.toHex();
ai=Math.round(parseFloat(aj.alpha)*255).toString(16)
}return"progid:DXImageTransform.Microsoft.gradient("+ah+"startColorstr=#"+y(am)+al+",endColorstr=#"+y(ai)+an+")"
},toString:function(ai){ai=ai||this.format;
var ah=false;
if(ai==="rgb"){ah=this.toRgbString()
}if(ai==="prgb"){ah=this.toPercentageRgbString()
}if(ai==="hex"||ai==="hex6"){ah=this.toHexString()
}if(ai==="hex3"){ah=this.toHexString(true)
}if(ai==="name"){ah=this.toName()
}if(ai==="hsl"){ah=this.toHslString()
}if(ai==="hsv"){ah=this.toHsvString()
}return ah||this.toHexString()
}}
}Q.fromRatio=function(Y,ab){if(typeof Y=="object"){var Z={};
for(var aa in Y){if(Y.hasOwnProperty(aa)){if(aa==="a"){Z[aa]=Y[aa]
}else{Z[aa]=z(Y[aa])
}}}Y=Z
}return Q(Y,ab)
};
function I(Z){var aa={r:0,g:0,b:0};
var Y=1;
var ab=false;
var ac=false;
if(typeof Z=="string"){Z=B(Z)
}if(typeof Z=="object"){if(Z.hasOwnProperty("r")&&Z.hasOwnProperty("g")&&Z.hasOwnProperty("b")){aa=E(Z.r,Z.g,Z.b);
ab=true;
ac=String(Z.r).substr(-1)==="%"?"prgb":"rgb"
}else{if(Z.hasOwnProperty("h")&&Z.hasOwnProperty("s")&&Z.hasOwnProperty("v")){Z.s=z(Z.s);
Z.v=z(Z.v);
aa=P(Z.h,Z.s,Z.v);
ab=true;
ac="hsv"
}else{if(Z.hasOwnProperty("h")&&Z.hasOwnProperty("s")&&Z.hasOwnProperty("l")){Z.s=z(Z.s);
Z.l=z(Z.l);
aa=F(Z.h,Z.s,Z.l);
ab=true;
ac="hsl"
}}}if(Z.hasOwnProperty("a")){Y=Z.a
}}Y=parseFloat(Y);
if(isNaN(Y)||Y<0||Y>1){Y=1
}return{ok:ab,format:Z.format||ac,r:A(255,D(aa.r,0)),g:A(255,D(aa.g,0)),b:A(255,D(aa.b,0)),a:Y}
}function E(aa,Z,Y){return{r:V(aa,255)*255,g:V(Z,255)*255,b:V(Y,255)*255}
}function T(Y,ac,ae){Y=V(Y,255);
ac=V(ac,255);
ae=V(ae,255);
var af=D(Y,ac,ae),aa=A(Y,ac,ae);
var ab,ag,Z=(af+aa)/2;
if(af==aa){ab=ag=0
}else{var ad=af-aa;
ag=Z>0.5?ad/(2-af-aa):ad/(af+aa);
switch(af){case Y:ab=(ac-ae)/ad+(ac<ae?6:0);
break;
case ac:ab=(ae-Y)/ad+2;
break;
case ae:ab=(Y-ac)/ad+4;
break
}ab/=6
}return{h:ab,s:ag,l:Z}
}function F(ad,ag,ac){var Y,ae,af;
ad=V(ad,360);
ag=V(ag,100);
ac=V(ac,100);
function ab(aj,ai,ah){if(ah<0){ah+=1
}if(ah>1){ah-=1
}if(ah<1/6){return aj+(ai-aj)*6*ah
}if(ah<1/2){return ai
}if(ah<2/3){return aj+(ai-aj)*(2/3-ah)*6
}return aj
}if(ag===0){Y=ae=af=ac
}else{var Z=ac<0.5?ac*(1+ag):ac+ag-ac*ag;
var aa=2*ac-Z;
Y=ab(aa,Z,ad+1/3);
ae=ab(aa,Z,ad);
af=ab(aa,Z,ad-1/3)
}return{r:Y*255,g:ae*255,b:af*255}
}function K(Y,ab,ad){Y=V(Y,255);
ab=V(ab,255);
ad=V(ad,255);
var ae=D(Y,ab,ad),Z=A(Y,ab,ad);
var aa,ag,af=ae;
var ac=ae-Z;
ag=ae===0?0:ac/ae;
if(ae==Z){aa=0
}else{switch(ae){case Y:aa=(ab-ad)/ac+(ab<ad?6:0);
break;
case ab:aa=(ad-Y)/ac+2;
break;
case ad:aa=(Y-ab)/ac+4;
break
}aa/=6
}return{h:aa,s:ag,v:af}
}function P(ac,aj,ah){ac=V(ac,360)*6;
aj=V(aj,100);
ah=V(ah,100);
var ab=v.floor(ac),ae=ac-ab,aa=ah*(1-aj),Z=ah*(1-ae*aj),ai=ah*(1-(1-ae)*aj),ag=ab%6,Y=[ah,Z,aa,aa,ai,ah][ag],ad=[ai,ah,ah,Z,aa,aa][ag],af=[aa,aa,ai,ah,ah,Z][ag];
return{r:Y*255,g:ad*255,b:af*255}
}function R(ab,aa,Y,ac){var Z=[y(S(ab).toString(16)),y(S(aa).toString(16)),y(S(Y).toString(16))];
if(ac&&Z[0].charAt(0)==Z[0].charAt(1)&&Z[1].charAt(0)==Z[1].charAt(1)&&Z[2].charAt(0)==Z[2].charAt(1)){return Z[0].charAt(0)+Z[1].charAt(0)+Z[2].charAt(0)
}return Z.join("")
}Q.equals=function(Z,Y){if(!Z||!Y){return false
}return Q(Z).toRgbString()==Q(Y).toRgbString()
};
Q.random=function(){return Q.fromRatio({r:C(),g:C(),b:C()})
};
Q.desaturate=function(Z,aa){var Y=Q(Z).toHsl();
Y.s-=((aa||10)/100);
Y.s=N(Y.s);
return Q(Y)
};
Q.saturate=function(Z,aa){var Y=Q(Z).toHsl();
Y.s+=((aa||10)/100);
Y.s=N(Y.s);
return Q(Y)
};
Q.greyscale=function(Y){return Q.desaturate(Y,100)
};
Q.lighten=function(Z,aa){var Y=Q(Z).toHsl();
Y.l+=((aa||10)/100);
Y.l=N(Y.l);
return Q(Y)
};
Q.darken=function(Z,aa){var Y=Q(Z).toHsl();
Y.l-=((aa||10)/100);
Y.l=N(Y.l);
return Q(Y)
};
Q.complement=function(Z){var Y=Q(Z).toHsl();
Y.h=(Y.h+180)%360;
return Q(Y)
};
Q.triad=function(Z){var Y=Q(Z).toHsl();
var aa=Y.h;
return[Q(Z),Q({h:(aa+120)%360,s:Y.s,l:Y.l}),Q({h:(aa+240)%360,s:Y.s,l:Y.l})]
};
Q.tetrad=function(Z){var Y=Q(Z).toHsl();
var aa=Y.h;
return[Q(Z),Q({h:(aa+90)%360,s:Y.s,l:Y.l}),Q({h:(aa+180)%360,s:Y.s,l:Y.l}),Q({h:(aa+270)%360,s:Y.s,l:Y.l})]
};
Q.splitcomplement=function(Z){var Y=Q(Z).toHsl();
var aa=Y.h;
return[Q(Z),Q({h:(aa+72)%360,s:Y.s,l:Y.l}),Q({h:(aa+216)%360,s:Y.s,l:Y.l})]
};
Q.analogous=function(Z,ac,ad){ac=ac||6;
ad=ad||30;
var Y=Q(Z).toHsl();
var ab=360/ad;
var aa=[Q(Z)];
for(Y.h=((Y.h-(ab*ac>>1))+720)%360;
--ac;
){Y.h=(Y.h+ab)%360;
aa.push(Q(Y))
}return aa
};
Q.monochromatic=function(aa,ad){ad=ad||6;
var ac=Q(aa).toHsv();
var af=ac.h,ae=ac.s,Z=ac.v;
var ab=[];
var Y=1/ad;
while(ad--){ab.push(Q({h:af,s:ae,v:Z}));
Z=(Z+Y)%1
}return ab
};
Q.readability=function(ac,aa){var ab=Q(ac).toRgb();
var Z=Q(aa).toRgb();
var Y=(ab.r*299+ab.g*587+ab.b*114)/1000;
var ae=(Z.r*299+Z.g*587+Z.b*114)/1000;
var ad=(Math.max(ab.r,Z.r)-Math.min(ab.r,Z.r)+Math.max(ab.g,Z.g)-Math.min(ab.g,Z.g)+Math.max(ab.b,Z.b)-Math.min(ab.b,Z.b));
return{brightness:Math.abs(Y-ae),color:ad}
};
Q.readable=function(Z,Y){var aa=Q.readability(Z,Y);
return aa.brightness>125&&aa.color>500
};
Q.mostReadable=function(af,ae){var ab=null;
var Z=0;
var ag=false;
for(var ad=0;
ad<ae.length;
ad++){var aa=Q.readability(af,ae[ad]);
var ac=aa.brightness>125&&aa.color>500;
var Y=3*(aa.brightness/125)+(aa.color/500);
if((ac&&!ag)||(ac&&ag&&Y>Z)||((!ac)&&(!ag)&&Y>Z)){ag=ac;
Z=Y;
ab=Q(ae[ad])
}}return ab
};
var J=Q.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};
var X=Q.hexNames=x(J);
function x(aa){var Z={};
for(var Y in aa){if(aa.hasOwnProperty(Y)){Z[aa[Y]]=Y
}}return Z
}function V(aa,Y){if(M(aa)){aa="100%"
}var Z=W(aa);
aa=A(Y,D(0,parseFloat(aa)));
if(Z){aa=parseInt(aa*Y,10)/100
}if((v.abs(aa-Y)<0.000001)){return 1
}return(aa%Y)/parseFloat(Y)
}function N(Y){return A(1,D(0,Y))
}function U(Y){return parseInt(Y,16)
}function M(Y){return typeof Y=="string"&&Y.indexOf(".")!=-1&&parseFloat(Y)===1
}function W(Y){return typeof Y==="string"&&Y.indexOf("%")!=-1
}function y(Y){return Y.length==1?"0"+Y:""+Y
}function z(Y){if(Y<=1){Y=(Y*100)+"%"
}return Y
}var w=(function(){var ac="[-\\+]?\\d+%?";
var ab="[-\\+]?\\d*\\.\\d+%?";
var Y="(?:"+ab+")|(?:"+ac+")";
var aa="[\\s|\\(]+("+Y+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")\\s*\\)?";
var Z="[\\s|\\(]+("+Y+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")\\s*\\)?";
return{rgb:new RegExp("rgb"+aa),rgba:new RegExp("rgba"+Z),hsl:new RegExp("hsl"+aa),hsla:new RegExp("hsla"+Z),hsv:new RegExp("hsv"+aa),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}
})();
function B(Z){Z=Z.replace(L,"").replace(G,"").toLowerCase();
var Y=false;
if(J[Z]){Z=J[Z];
Y=true
}else{if(Z=="transparent"){return{r:0,g:0,b:0,a:0}
}}var aa;
if((aa=w.rgb.exec(Z))){return{r:aa[1],g:aa[2],b:aa[3]}
}if((aa=w.rgba.exec(Z))){return{r:aa[1],g:aa[2],b:aa[3],a:aa[4]}
}if((aa=w.hsl.exec(Z))){return{h:aa[1],s:aa[2],l:aa[3]}
}if((aa=w.hsla.exec(Z))){return{h:aa[1],s:aa[2],l:aa[3],a:aa[4]}
}if((aa=w.hsv.exec(Z))){return{h:aa[1],s:aa[2],v:aa[3]}
}if((aa=w.hex6.exec(Z))){return{r:U(aa[1]),g:U(aa[2]),b:U(aa[3]),format:Y?"name":"hex"}
}if((aa=w.hex3.exec(Z))){return{r:U(aa[1]+""+aa[1]),g:U(aa[2]+""+aa[2]),b:U(aa[3]+""+aa[3]),format:Y?"name":"hex"}
}return false
}O.tinycolor=Q
})(this);
e(function(){if(e.fn.spectrum.load){e.fn.spectrum.processNativeColorInputs()
}})
})(window,jQuery);(function(c,b,d){var e="Main",a="state-selected";
c.plugin2("tabbed",{_create:function(f){var p=c(f),o=[],i={},l=p.find("> [data-tab]"),j,m,n,k,g;
function h(q){o.push({name:q,items:(i[q]=[])})
}h(e);
l.each(function(){var q=c(this).attr("data-tab");
if(!i[q]){h(q)
}i[q].push(this)
});
if(i[e].length===0){delete i[e];
o.shift()
}if(o.length<2){return
}j=p.attr("data-id");
if(j){m=encodeURIComponent(p.attr("data-id")+"/tab");
n=new RegExp("([?&])"+m+"=([^=]+)")
}k=c("<ul/>",{"class":"tabs"});
c.each(o,function(q,r){k.append(c("<li/>",{"class":c(r.items).find(".message-error").length>0?"state-error":"",html:c("<a/>",{text:r.name,click:function(u){var t=c(u.target),v=b.history,s,w;
if(j&&v&&v.replaceState){s=b.location.href.replace(n,"");
w=t.text();
if(w!==e){s+=(s.indexOf("?")>-1?"&":"?")+m+"="+encodeURIComponent(w)
}v.replaceState("","",s)
}k.find("> li").removeClass(a);
t.closest("li").addClass(a);
l.hide();
c(r.items).show();
p.resize();
return false
}})}))
});
k.find("li:first-child").addClass(a);
l.hide();
c(o[0].items).show();
p.prepend(k);
p.resize();
if(j){g=n.exec(b.location.href);
if(g){g=g[2];
if(g){k.find("> li > a").each(function(){var q=c(this);
if(q.text()===g){q.click();
return false
}})
}}}}})
}(jQuery,window));(function(b,a,c){b.plugin2("toggleable",{_init:function(d){var e=this;
e.$caller.delegate(d,"toggle.toggleable change",function(){var f=b(this),g=f.attr("data-root"),i,h=f.find(":selected");
if(g){i=f.closest(g)
}if(!i||i.length===0){i=b(a.document.body)
}e._toggle(i,h.attr("data-hide"),true);
e._toggle(i,h.attr("data-show"),false)
})
},_toggle:function(h,d,e){var g,f;
if(d){g=h.find(d);
f=g.find(":input");
if(g.is(":input")){f=f.add(g)
}g.toggle(!e);
f.prop("disabled",e);
if(!e){g.rte("enable")
}}},_create:function(d){b(d).trigger("toggle")
}})
}(jQuery,window));(function(c,b,f){var e=c(b),a=c(),d=b.requestAnimationFrame;
c.plugin2("widthAware",{_create:function(h){var g=c(h),i=g.attr("data-widths");
if(i){a=a.add(g)
}}});
e.bind("create resize",c.throttle(100,function(){a.filter("[data-widths]:visible").each(function(){var g=c(this),h=g.width(),i={add:"",remove:""};
c.each(c.parseJSON(g.attr("data-widths")),function(j,k){c.each(k,function(l,m){switch(l){case"eq":case"=":case"==":i[h===m?"add":"remove"]+=" "+j;
break;
case"ge":case">=":i[h>=m?"add":"remove"]+=" "+j;
break;
case"gt":case">":i[h>m?"add":"remove"]+=" "+j;
break;
case"le":case"<=":i[h<=m?"add":"remove"]+=" "+j;
break;
case"lt":case"<":i[h<m?"add":"remove"]+=" "+j;
break;
case"ne":case"!=":i[h!==m?"add":"remove"]+=" "+j;
break;
default:break
}})
});
d(function(){g.removeClass(i.remove);
g.addClass(i.add)
})
})
}))
})(jQuery,window);(function(b,c,a){var e=b(c),d;
(function(){var f=Math.random(),g=0.618033988749895;
d=function(i){var h=b.data(i[0],"workflow-transitionColor");
if(!h){f+=g;
f%=1;
h="hsl("+(f*360)+", 50%, 50%)";
b.data(i[0],"workflow-transitionColor",h)
}return h
}
})();
b.plugin2("workflow",{_create:function(q){var k=b(q),g=b.parseJSON(k.val())||{},m,o,j,n={},l,s,h,r=0,f,p,i;
m=b("<div/>",{"class":"workflowVisual"});
o=function(t,A,D,F,E){var z=D.position(),x=z.left,w,v,C,y,u,B;
if(typeof E==="undefined"){v=F;
C=v.position();
F=C.left;
E=C.top
}if(x>F){w=z.top+D.outerHeight()*0.9;
y=-1;
u=1;
if(v){F+=v.outerWidth();
E+=v.outerHeight()*0.9
}}else{x+=D.outerWidth();
w=z.top+D.outerHeight()*0.1;
y=1;
u=-1;
if(v){E+=v.outerHeight()*0.1
}}sourceControlX=x+y*100;
sourceControlY=w;
targetControlX=F+u*100;
targetControlY=E;
t.strokeStyle=A;
t.fillStyle=A;
t.lineWidth=1;
t.beginPath();
t.moveTo(x,w);
t.bezierCurveTo(sourceControlX,sourceControlY,targetControlX,targetControlY,F,E);
t.stroke();
B=F>targetControlX?5:-5;
t.beginPath();
t.moveTo(F,E);
t.lineTo(F-2*B,E-B);
t.lineTo(F-2*B,E+B);
t.closePath();
t.fill();
return{sourceX:x,sourceY:w,targetX:F,targetY:E}
};
m.append(j=b("<canvas/>",{css:{left:0,position:"absolute",top:0,"z-index":-1}}));
j.bind("redraw",function(y,z,x,w){var u=this.getContext("2d"),v=j.outerWidth(),t=j.outerHeight();
g={states:[],transitions:[]};
u.clearRect(0,0,m.width(),m.height());
m.find(".workflowState").each(function(){var D=b(this),C=D.attr("data-id"),B=D.position(),A=b.data(this,"workflow-targets");
if(!(C==="initial"||C==="final")){g.states.push({id:C,displayName:D.find(':input[type="text"]').val(),name:D.find(':input[type="hidden"]').val()||D.find(':input[type="text"]').val(),left:B.left/v,top:B.top/t})
}if(A){b.each(A,function(J,M){var N=M.target,E=m.find('[data-id="'+N+'"]'),K,F,G,I,H,L;
if(E.length===0){return
}K=C+"/"+N;
F=n[K];
if(!F){F=b("<div/>",{"class":"workflowTransition"});
F.append(b("<input/>",{type:"text","class":"expandable workflowTransitionName",value:M.displayName||M.name||""}));
F.append(b("<input/>",{type:"hidden",value:M.name||""}));
F.append(b("<a/>",{"class":"workflowTransitionRemove",text:"Remove",click:function(){var O=b.data(D[0],"workflow-targets");
if(O){b.data(D[0],"workflow-targets",b.map(O,function(P){return P.source===C&&P.target===N?null:P
}))
}n[K]=a;
F.remove();
j.trigger("redraw");
return false
}}));
m.append(F);
n[K]=F;
m.trigger("create")
}G=F.find(':input[type="text"]');
I=d(F);
H=o(u,I,D,E);
L=H.sourceX<H.targetX?0.3:0.7;
F.css({left:(H.sourceX+H.targetX-G.outerWidth())/2,top:(H.sourceY+H.targetY-G.outerHeight())/2});
G.css({"border-color":I});
g.transitions.push({displayName:G.val(),name:F.find(':input[type="hidden"]').val()||G.val(),source:C,target:N})
})
}});
k.val(JSON.stringify(g));
if(z){o(u,"black",z,x,w)
}});
m.delegate(":input","input",function(){j.trigger("redraw")
});
l=function(u){var v=m.find('[data-id="'+u.source+'"]'),t;
if(v.length>0){t=b.data(v[0],"workflow-targets")||[];
t.push(u);
b.data(v[0],"workflow-targets",t)
}};
s=function(t){t.append(b("<a/>",{"class":"workflowTransitionAdd",text:"Add "+(k.attr("data-transition-label")||"Transition"),click:function(){if(m.is(".workflowVisual-addingTransition")){return true
}m.addClass("workflowVisual-addingTransition");
e.bind("mousemove.workflows",b.throttle(50,function(v){var u=m.offset();
j.trigger("redraw",[t,v.pageX-u.left,v.pageY-u.top])
}));
e.bind("click.workflows",function(v){var u=b(v.target).closest(".workflowState");
if(u.length>0){l({source:t.attr("data-id"),target:u.attr("data-id")})
}m.removeClass("workflowVisual-addingTransition");
e.unbind(".workflows");
j.trigger("redraw");
return false
});
return false
}}))
};
h=function(t){var u;
m.prepend(u=b("<div/>",{"class":"workflowState","data-id":t.id,css:{left:(t.left*100)+"%",top:(t.top*100)+"%"},mousedown:function(v){b.drag(this,v,function(w,x){x.delta=u.position();
x.delta.left-=w.pageX;
x.delta.top-=w.pageY
},function(w,x){u.css({left:w.pageX+x.delta.left,top:w.pageY+x.delta.top});
j.trigger("redraw")
},function(w){})
}}));
u.append(b("<input/>",{type:"text","class":"expandable workflowStateName",value:t.displayName||t.name||""}));
u.append(b("<input/>",{type:"hidden",value:t.name||""}));
u.append(b("<a/>",{"class":"workflowStateRemove",text:"Remove",click:function(){u.remove();
j.trigger("redraw");
return false
}}));
s(u);
m.css("height",100*m.find(".workflowState").length);
return u
};
m.append(f=b("<a/>",{"class":"workflowStateAdd",text:"Add "+(k.attr("data-state-label")||"State"),click:function(){h({id:r,left:0.3,top:0.01});
++r;
j.trigger("redraw");
return false
}}));
m.append(p=b("<div/>",{"class":"workflowState","data-id":"initial",text:k.attr("data-state-initial")||"Initial State"}));
s(p);
m.append(i=b("<div/>",{"class":"workflowState","data-id":"final",text:k.attr("data-state-final")||"Final State"}));
if(g.states){b.each(g.states,function(){var t=parseInt(this.id,10);
h(this);
if(t>=r){r=t+1
}})
}k.after(m);
m.trigger("create");
k.hide();
j.attr({width:m.width(),height:m.height()});
if(g.transitions){b.each(g.transitions,function(){l(this)
});
j.trigger("redraw")
}}})
}(jQuery,window));var JsDiff=(function(){function d(i){return{newPos:i.newPos,components:i.components.slice(0)}
}function h(l){var j=[];
for(var k=0;
k<l.length;
k++){if(l[k]){j.push(l[k])
}}return j
}function g(i){var j=i;
j=j.replace(/&/g,"&amp;");
j=j.replace(/</g,"&lt;");
j=j.replace(/>/g,"&gt;");
j=j.replace(/"/g,"&quot;");
return j
}var f=function(i){this.ignoreWhitespace=i
};
f.prototype={diff:function(n,p){if(p===n){return[{value:p}]
}if(!p){return[{value:n,removed:true}]
}if(!n){return[{value:p,added:true}]
}p=this.tokenize(p);
n=this.tokenize(n);
var m=p.length,j=n.length;
var r=m+j;
var q=[{newPos:-1,components:[]}];
var l=this.extractCommon(q[0],p,n,0);
if(q[0].newPos+1>=m&&l+1>=j){return q[0].components
}for(var i=1;
i<=r;
i++){for(var s=-1*i;
s<=i;
s+=2){var v;
var u=q[s-1],t=q[s+1];
l=(t?t.newPos:0)-s;
if(u){q[s-1]=undefined
}var k=u&&u.newPos+1<m;
var o=t&&0<=l&&l<j;
if(!k&&!o){q[s]=undefined;
continue
}if(!k||(o&&u.newPos<t.newPos)){v=d(t);
this.pushComponent(v.components,n[l],undefined,true)
}else{v=d(u);
v.newPos++;
this.pushComponent(v.components,p[v.newPos],true,undefined)
}var l=this.extractCommon(v,p,n,s);
if(v.newPos+1>=m&&l+1>=j){return v.components
}else{q[s]=v
}}}},pushComponent:function(k,l,i,m){var j=k[k.length-1];
if(j&&j.added===i&&j.removed===m){k[k.length-1]={value:this.join(j.value,l),added:i,removed:m}
}else{k.push({value:l,added:i,removed:m})
}},extractCommon:function(p,n,j,i){var o=n.length,m=j.length,l=p.newPos,k=l-i;
while(l+1<o&&k+1<m&&this.equals(n[l+1],j[k+1])){l++;
k++;
this.pushComponent(p.components,n[l],undefined,undefined)
}p.newPos=l;
return k
},equals:function(k,j){var i=/\S/;
if(this.ignoreWhitespace&&!i.test(k)&&!i.test(j)){return true
}else{return k===j
}},join:function(j,i){return j+i
},tokenize:function(i){return i
}};
var c=new f();
var e=new f(true);
e.tokenize=function(i){return h(i.split(/(\s+|\b)/))
};
var b=new f(true);
b.tokenize=function(i){return h(i.split(/([{}:;,]|\s+)/))
};
var a=new f();
a.tokenize=function(i){return i.split(/^/m)
};
return{Diff:f,diffChars:function(i,j){return c.diff(i,j)
},diffWords:function(i,j){return e.diff(i,j)
},diffLines:function(i,j){return a.diff(i,j)
},diffCss:function(i,j){return b.diff(i,j)
},createPatch:function(A,k,q,s,y){var B=[];
B.push("Index: "+A);
B.push("===================================================================");
B.push("--- "+A+(typeof s==="undefined"?"":"\t"+s));
B.push("+++ "+A+(typeof y==="undefined"?"":"\t"+y));
var r=a.diff(k,q);
if(!r[r.length-1].value){r.pop()
}r.push({value:"",lines:[]});
function m(i){return i.map(function(C){return" "+C
})
}function l(D,E,H){var F=r[r.length-2],G=E===r.length-2,C=E===r.length-3&&(H.added!==F.added||H.removed!==F.removed);
if(!/\n$/.test(H.value)&&(G||C)){D.push("\\ No newline at end of file")
}}var x=0,n=0,v=[],o=1,z=1;
for(var w=0;
w<r.length;
w++){var u=r[w],j=u.lines||u.value.replace(/\n$/,"").split("\n");
u.lines=j;
if(u.added||u.removed){if(!x){var t=r[w-1];
x=o;
n=z;
if(t){v=m(t.lines.slice(-4));
x-=v.length;
n-=v.length
}}v.push.apply(v,j.map(function(i){return(u.added?"+":"-")+i
}));
l(v,w,u);
if(u.added){z+=j.length
}else{o+=j.length
}}else{if(x){if(j.length<=8&&w<r.length-2){v.push.apply(v,m(j))
}else{var p=Math.min(j.length,4);
B.push("@@ -"+x+","+(o-x+p)+" +"+n+","+(z-n+p)+" @@");
B.push.apply(B,v);
B.push.apply(B,m(j.slice(0,p)));
if(j.length<=4){l(B,w,u)
}x=0;
n=0;
v=[]
}}o+=j.length;
z+=j.length
}}return B.join("\n")+"\n"
},applyPatch:function(m,l){var p=l.split("\n");
var t=[];
var u=false,s=false;
for(var o=(p[0][0]==="I"?4:0);
o<p.length;
o++){if(p[o][0]==="@"){var k=p[o].split(/@@ -(\d+),(\d+) \+(\d+),(\d+) @@/);
t.unshift({start:k[3],oldlength:k[2],oldlines:[],newlength:k[4],newlines:[]})
}else{if(p[o][0]==="+"){t[0].newlines.push(p[o].substr(1))
}else{if(p[o][0]==="-"){t[0].oldlines.push(p[o].substr(1))
}else{if(p[o][0]===" "){t[0].newlines.push(p[o].substr(1));
t[0].oldlines.push(p[o].substr(1))
}else{if(p[o][0]==="\\"){if(p[o-1][0]==="+"){u=true
}else{if(p[o-1][0]==="-"){s=true
}}}}}}}}var r=m.split("\n");
for(var o=t.length-1;
o>=0;
o--){var q=t[o];
for(var n=0;
n<q.oldlength;
n++){if(r[q.start-1+n]!==q.oldlines[n]){return false
}}Array.prototype.splice.apply(r,[q.start-1,+q.oldlength].concat(q.newlines))
}if(u){while(!r[r.length-1]){r.pop()
}}else{if(s){r.push("")
}}return r.join("\n")
},convertChangesToXML:function(l){var j=[];
for(var k=0;
k<l.length;
k++){var m=l[k];
if(m.added){j.push("<ins>")
}else{if(m.removed){j.push("<del>")
}}j.push(g(m.value));
if(m.added){j.push("</ins>")
}else{if(m.removed){j.push("</del>")
}}}return j.join("")
},convertChangesToDMP:function(l){var j=[],m;
for(var k=0;
k<l.length;
k++){m=l[k];
j.push([(m.added?1:m.removed?-1:0),m.value])
}return j
}}
})();
if(typeof module!=="undefined"){module.exports=JsDiff
};if(typeof JSON!=="object"){JSON={}
}(function(){function f(n){return n<10?"0"+n:n
}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null
};
String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()
}
}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
function quote(string){escapable.lastIndex=0;
return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];
return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})+'"':'"'+string+'"'
}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];
if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)
}if(typeof rep==="function"){value=rep.call(holder,key,value)
}switch(typeof value){case"string":return quote(value);
case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);
case"object":if(!value){return"null"
}gap+=indent;
partial=[];
if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;
for(i=0;
i<length;
i+=1){partial[i]=str(i,value)||"null"
}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";
gap=mind;
return v
}if(rep&&typeof rep==="object"){length=rep.length;
for(i=0;
i<length;
i+=1){if(typeof rep[i]==="string"){k=rep[i];
v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v)
}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v)
}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";
gap=mind;
return v
}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;
gap="";
indent="";
if(typeof space==="number"){for(i=0;
i<space;
i+=1){indent+=" "
}}else{if(typeof space==="string"){indent=space
}}rep=replacer;
if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")
}return str("",{"":value})
}
}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;
function walk(holder,key){var k,v,value=holder[key];
if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);
if(v!==undefined){value[k]=v
}else{delete value[k]
}}}}return reviver.call(holder,key,value)
}text=String(text);
cx.lastIndex=0;
if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})
}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");
return typeof reviver==="function"?walk({"":j},""):j
}throw new SyntaxError("JSON.parse")
}
}}());var Pixastic=(function(){function d(m,n,l){if(m.addEventListener){m.addEventListener(n,l,false)
}else{if(m.attachEvent){m.attachEvent("on"+n,l)
}}}function g(n){var l=false;
var o=function(){if(!l){l=true;
n()
}};
document.write('<script defer src="//:" id="__onload_ie_pixastic__"><\/script>');
var m=document.getElementById("__onload_ie_pixastic__");
m.onreadystatechange=function(){if(m.readyState=="complete"){m.parentNode.removeChild(m);
o()
}};
if(document.addEventListener){document.addEventListener("DOMContentLoaded",o,false)
}d(window,"load",o)
}function k(){var l=c("pixastic",null,"img");
var o=c("pixastic",null,"canvas");
var n=l.concat(o);
for(var m=0;
m<n.length;
m++){(function(){var q=n[m];
var s=[];
var r=q.className.split(" ");
for(var v=0;
v<r.length;
v++){var x=r[v];
if(x.substring(0,9)=="pixastic-"){var u=x.substring(9);
if(u!=""){s.push(u)
}}}if(s.length){if(q.tagName.toLowerCase()=="img"){var p=new Image();
p.src=q.src;
if(p.complete){for(var w=0;
w<s.length;
w++){var t=Pixastic.applyAction(q,q,s[w],null);
if(t){q=t
}}}else{p.onload=function(){for(var y=0;
y<s.length;
y++){var z=Pixastic.applyAction(q,q,s[y],null);
if(z){q=z
}}}
}}else{setTimeout(function(){for(var y=0;
y<s.length;
y++){var z=Pixastic.applyAction(q,q,s[y],null);
if(z){q=z
}}},1)
}}})()
}}if(typeof pixastic_parseonload!="undefined"&&pixastic_parseonload){g(k)
}function c(r,p,l){var o=new Array();
if(p==null){p=document
}if(l==null){l="*"
}var n=p.getElementsByTagName(l);
var m=n.length;
var q=new RegExp("(^|\\s)"+r+"(\\s|$)");
for(i=0,j=0;
i<m;
i++){if(q.test(n[i].className)){o[j]=n[i];
j++
}}return o
}var e;
function a(m,n){if(!Pixastic.debug){return
}try{switch(n){case"warn":console.warn("Pixastic:",m);
break;
case"error":console.error("Pixastic:",m);
break;
default:console.log("Pixastic:",m)
}}catch(l){}if(!e){}}var b=(function(){var n=document.createElement("canvas");
var m=false;
try{m=!!((typeof n.getContext=="function")&&n.getContext("2d"))
}catch(l){}return function(){return m
}
})();
var f=(function(){var o=document.createElement("canvas");
var n=false;
var l;
try{if(typeof o.getContext=="function"&&(l=o.getContext("2d"))){n=(typeof l.getImageData=="function")
}}catch(m){}return function(){return n
}
})();
var h=(function(){var n=false;
var p=document.createElement("canvas");
if(b()&&f()){p.width=p.height=1;
var o=p.getContext("2d");
o.fillStyle="rgb(255,0,0)";
o.fillRect(0,0,1,1);
var l=document.createElement("canvas");
l.width=l.height=1;
var q=l.getContext("2d");
q.fillStyle="rgb(0,0,255)";
q.fillRect(0,0,1,1);
o.globalAlpha=0.5;
o.drawImage(l,0,0);
var m=o.getImageData(0,0,1,1).data;
n=(m[2]!=255)
}return function(){return n
}
})();
return{parseOnLoad:false,debug:false,applyAction:function(E,p,o,n){n=n||{};
var r=(E.tagName.toLowerCase()=="canvas");
if(r&&Pixastic.Client.isIE()){if(Pixastic.debug){a("Tried to process a canvas element but browser is IE.")
}return false
}var m,v;
var u=false;
if(Pixastic.Client.hasCanvas()){u=!!n.resultCanvas;
m=n.resultCanvas||document.createElement("canvas");
v=m.getContext("2d")
}var t=E.offsetWidth;
var x=E.offsetHeight;
if(r){t=E.width;
x=E.height
}if(t==0||x==0){if(E.parentNode==null){var s=E.style.position;
var C=E.style.left;
E.style.position="absolute";
E.style.left="-9999px";
document.body.appendChild(E);
t=E.offsetWidth;
x=E.offsetHeight;
document.body.removeChild(E);
E.style.position=s;
E.style.left=C
}else{if(Pixastic.debug){a("Image has 0 width and/or height.")
}return
}}if(o.indexOf("(")>-1){var A=o;
o=A.substr(0,A.indexOf("("));
var q=A.match(/\((.*?)\)/);
if(q[1]){q=q[1].split(";");
for(var B=0;
B<q.length;
B++){thisArg=q[B].split("=");
if(thisArg.length==2){if(thisArg[0]=="rect"){var l=thisArg[1].split(",");
n[thisArg[0]]={left:parseInt(l[0],10)||0,top:parseInt(l[1],10)||0,width:parseInt(l[2],10)||0,height:parseInt(l[3],10)||0}
}else{n[thisArg[0]]=thisArg[1]
}}}}}if(!n.rect){n.rect={left:0,top:0,width:t,height:x}
}else{n.rect.left=Math.round(n.rect.left);
n.rect.top=Math.round(n.rect.top);
n.rect.width=Math.round(n.rect.width);
n.rect.height=Math.round(n.rect.height)
}var y=false;
if(Pixastic.Actions[o]&&typeof Pixastic.Actions[o].process=="function"){y=true
}if(!y){if(Pixastic.debug){a('Invalid action "'+o+'". Maybe file not included?')
}return false
}if(!Pixastic.Actions[o].checkSupport()){if(Pixastic.debug){a('Action "'+o+'" not supported by this browser.')
}return false
}if(Pixastic.Client.hasCanvas()){if(m!==E){m.width=t;
m.height=x
}if(!u){m.style.width=t+"px";
m.style.height=x+"px"
}v.drawImage(p,0,0,t,x);
if(!E.__pixastic_org_image){m.__pixastic_org_image=E;
m.__pixastic_org_width=t;
m.__pixastic_org_height=x
}else{m.__pixastic_org_image=E.__pixastic_org_image;
m.__pixastic_org_width=E.__pixastic_org_width;
m.__pixastic_org_height=E.__pixastic_org_height
}}else{if(Pixastic.Client.isIE()&&typeof E.__pixastic_org_style=="undefined"){E.__pixastic_org_style=E.style.cssText
}}var z={image:E,canvas:m,width:t,height:x,useData:true,options:n};
var D=Pixastic.Actions[o].process(z);
if(!D){return false
}if(Pixastic.Client.hasCanvas()){if(z.useData){if(Pixastic.Client.hasCanvasImageData()){m.getContext("2d").putImageData(z.canvasData,n.rect.left,n.rect.top);
m.getContext("2d").fillRect(0,0,0,0)
}}if(!n.leaveDOM){m.title=E.title;
m.imgsrc=E.imgsrc;
if(!r){m.alt=E.alt
}if(!r){m.imgsrc=E.src
}m.className=E.className;
m.style.cssText=E.style.cssText;
m.name=E.name;
m.tabIndex=E.tabIndex;
m.id=E.id;
if(E.parentNode&&E.parentNode.replaceChild){E.parentNode.replaceChild(m,E)
}}n.resultCanvas=m;
return m
}return E
},prepareData:function(q,m){var l=q.canvas.getContext("2d");
var o=q.options.rect;
var n=l.getImageData(o.left,o.top,o.width,o.height);
var p=n.data;
if(!m){q.canvasData=n
}return p
},process:function(m,l,n,q){if(m.tagName.toLowerCase()=="img"){var p=new Image();
p.src=m.src;
if(p.complete){var o=Pixastic.applyAction(m,p,l,n);
if(q){q(o)
}return o
}else{p.onload=function(){var r=Pixastic.applyAction(m,p,l,n);
if(q){q(r)
}}
}}if(m.tagName.toLowerCase()=="canvas"){var o=Pixastic.applyAction(m,m,l,n);
if(q){q(o)
}return o
}},revert:function(l){if(Pixastic.Client.hasCanvas()){if(l.tagName.toLowerCase()=="canvas"&&l.__pixastic_org_image){l.width=l.__pixastic_org_width;
l.height=l.__pixastic_org_height;
l.getContext("2d").drawImage(l.__pixastic_org_image,0,0);
if(l.parentNode&&l.parentNode.replaceChild){l.parentNode.replaceChild(l.__pixastic_org_image,l)
}return l
}}else{if(Pixastic.Client.isIE()){if(typeof l.__pixastic_org_style!="undefined"){l.style.cssText=l.__pixastic_org_style
}}}},Client:{hasCanvas:b,hasCanvasImageData:f,hasGlobalAlpha:h,isIE:function(){return !!document.all&&!!window.attachEvent&&!window.opera
}},Actions:{}}
})();Pixastic.Actions.brightness={process:function(s){var u=parseInt(s.options.brightness,10)||0;
var d=parseFloat(s.options.contrast)||0;
var m=!!(s.options.legacy&&s.options.legacy!="false");
if(m){u=Math.min(150,Math.max(-150,u))
}else{var v=1+Math.min(150,Math.max(-150,u))/150
}d=Math.max(0,d+1);
if(Pixastic.Client.hasCanvasImageData()){var x=Pixastic.prepareData(s);
var a=s.options.rect;
var e=a.width;
var n=a.height;
var l=e*n;
var c=l*4,j,f;
var q,i;
if(d!=1){if(m){q=d;
i=(u-128)*d+128
}else{q=v*d;
i=-d*128+128
}}else{if(m){q=1;
i=u
}else{q=v;
i=0
}}var k,o,t;
while(l--){if((k=x[c-=4]*q+i)>255){x[c]=255
}else{if(k<0){x[c]=0
}else{x[c]=k
}}if((o=x[j=c+1]*q+i)>255){x[j]=255
}else{if(o<0){x[j]=0
}else{x[j]=o
}}if((t=x[f=c+2]*q+i)>255){x[f]=255
}else{if(t<0){x[f]=0
}else{x[f]=t
}}}return true
}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()
}};Pixastic.Actions.crop={process:function(f){if(Pixastic.Client.hasCanvas()){var c=f.options.rect;
var b=c.width;
var a=c.height;
var e=c.top;
var d=c.left;
if(typeof f.options.left!="undefined"){d=parseInt(f.options.left,10)
}if(typeof f.options.top!="undefined"){e=parseInt(f.options.top,10)
}if(typeof f.options.height!="undefined"){b=parseInt(f.options.width,10)
}if(typeof f.options.height!="undefined"){a=parseInt(f.options.height,10)
}if(d<0){d=0
}if(d>f.width-1){d=f.width-1
}if(e<0){e=0
}if(e>f.height-1){e=f.height-1
}if(b<1){b=1
}if(d+b>f.width){b=f.width-d
}if(a<1){a=1
}if(e+a>f.height){a=f.height-e
}var g=document.createElement("canvas");
g.width=f.width;
g.height=f.height;
g.getContext("2d").drawImage(f.canvas,0,0);
f.canvas.width=b;
f.canvas.height=a;
f.canvas.getContext("2d").clearRect(0,0,b,a);
f.canvas.getContext("2d").drawImage(g,d,e,b,a,0,0,b,a);
f.useData=false;
return true
}},checkSupport:function(){return Pixastic.Client.hasCanvas()
}};Pixastic.Actions.desaturate={process:function(b){var c=!!(b.options.average&&b.options.average!="false");
if(Pixastic.Client.hasCanvasImageData()){var d=Pixastic.prepareData(b);
var j=b.options.rect;
var k=j.width;
var e=j.height;
var a=k*e;
var f=a*4,i,g;
if(c){while(a--){d[f-=4]=d[i=f+1]=d[g=f+2]=(d[f]+d[i]+d[g])/3
}}else{while(a--){d[f-=4]=d[i=f+1]=d[g=f+2]=(d[f]*0.3+d[i]*0.59+d[g]*0.11)
}}return true
}else{if(Pixastic.Client.isIE()){b.image.style.filter+=" gray";
return true
}}},checkSupport:function(){return(Pixastic.Client.hasCanvasImageData()||Pixastic.Client.isIE())
}};Pixastic.Actions.fliph={process:function(d){if(Pixastic.Client.hasCanvas()){var b=d.options.rect;
var c=document.createElement("canvas");
c.width=b.width;
c.height=b.height;
c.getContext("2d").drawImage(d.image,b.left,b.top,b.width,b.height,0,0,b.width,b.height);
var a=d.canvas.getContext("2d");
a.clearRect(b.left,b.top,b.width,b.height);
a.scale(-1,1);
a.drawImage(c,-b.left-b.width,b.top,b.width,b.height);
d.useData=false;
return true
}else{if(Pixastic.Client.isIE()){d.image.style.filter+=" fliph";
return true
}}},checkSupport:function(){return(Pixastic.Client.hasCanvas()||Pixastic.Client.isIE())
}};Pixastic.Actions.flipv={process:function(d){if(Pixastic.Client.hasCanvas()){var b=d.options.rect;
var c=document.createElement("canvas");
c.width=b.width;
c.height=b.height;
c.getContext("2d").drawImage(d.image,b.left,b.top,b.width,b.height,0,0,b.width,b.height);
var a=d.canvas.getContext("2d");
a.clearRect(b.left,b.top,b.width,b.height);
a.scale(1,-1);
a.drawImage(c,b.left,-b.top-b.height,b.width,b.height);
d.useData=false;
return true
}else{if(Pixastic.Client.isIE()){d.image.style.filter+=" flipv";
return true
}}},checkSupport:function(){return(Pixastic.Client.hasCanvas()||Pixastic.Client.isIE())
}};Pixastic.Actions.invert={process:function(c){if(Pixastic.Client.hasCanvasImageData()){var d=Pixastic.prepareData(c);
var b=!!c.options.invertAlpha;
var h=c.options.rect;
var a=h.width*h.height;
var e=a*4,i=e+1,g=e+2,f=e+3;
while(a--){d[e-=4]=255-d[e];
d[i-=4]=255-d[i];
d[g-=4]=255-d[g];
if(b){d[f-=4]=255-d[f]
}}return true
}else{if(Pixastic.Client.isIE()){c.image.style.filter+=" invert";
return true
}}},checkSupport:function(){return(Pixastic.Client.hasCanvasImageData()||Pixastic.Client.isIE())
}};Pixastic.Actions.rotate={process:function(f){if(Pixastic.Client.hasCanvas()){var d=f.canvas;
var c=f.width;
var l=f.height;
var b=document.createElement("canvas");
b.width=c;
b.height=l;
b.getContext("2d").drawImage(d,0,0,c,l);
var e=-parseFloat(f.options.angle)*Math.PI/180;
var k=e;
if(k>Math.PI*0.5){k=Math.PI-k
}if(k<-Math.PI*0.5){k=-Math.PI-k
}var h=Math.sqrt(c*c+l*l);
var j=Math.abs(k)-Math.abs(Math.atan2(l,c));
var i=Math.abs(k)+Math.abs(Math.atan2(l,c));
var g=Math.abs(Math.cos(j)*h);
var a=Math.abs(Math.sin(i)*h);
d.width=g;
d.height=a;
var m=d.getContext("2d");
m.translate(g/2,a/2);
m.rotate(e);
m.drawImage(b,-c/2,-l/2);
f.useData=false;
return true
}},checkSupport:function(){return Pixastic.Client.hasCanvas()
}};Pixastic.Actions.sepia={process:function(u){var l=(parseInt(u.options.mode,10)||0);
if(l<0){l=0
}if(l>1){l=1
}if(Pixastic.Client.hasCanvasImageData()){var z=Pixastic.prepareData(u);
var a=u.options.rect;
var k=a.width;
var p=a.height;
var f=k*4;
var i=p;
do{var s=(i-1)*f;
var j=k;
do{var c=s+(j-1)*4;
if(l){var t=z[c]*0.299+z[c+1]*0.587+z[c+2]*0.114;
var m=(t+39);
var q=(t+14);
var v=(t-36)
}else{var e=z[c];
var n=z[c+1];
var o=z[c+2];
var m=(e*0.393+n*0.769+o*0.189);
var q=(e*0.349+n*0.686+o*0.168);
var v=(e*0.272+n*0.534+o*0.131)
}if(m<0){m=0
}if(m>255){m=255
}if(q<0){q=0
}if(q>255){q=255
}if(v<0){v=0
}if(v>255){v=255
}z[c]=m;
z[c+1]=q;
z[c+2]=v
}while(--j)
}while(--i);
return true
}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()
}};(function(){var m=document.createElement("input");
try{m.type="range";
if(m.type=="range"){return
}}catch(k){return
}if(!document.mozSetImageElement||!("MozAppearance" in m.style)){return
}var g;
var j=navigator.platform=="MacIntel";
var a={radius:j?9:6,width:j?22:12,height:j?16:20};
var d="-moz-linear-gradient(top, transparent "+(j?"6px, #999 6px, #999 7px, #ccc 9px, #bbb 11px, #bbb 12px, transparent 12px":"9px, #999 9px, #bbb 10px, #fff 11px, transparent 11px")+", transparent)";
var n={"min-width":a.width+"px","min-height":a.height+"px","max-height":a.height+"px",padding:0,border:0,"border-radius":0,cursor:"default","text-indent":"-999999px"};
var l=document.createEvent("HTMLEvents");
l.initEvent("change",true,false);
if(document.readyState=="loading"){document.addEventListener("DOMContentLoaded",h,true)
}else{h()
}function h(){Array.forEach(document.querySelectorAll("input[type=range]"),f);
document.addEventListener("DOMNodeInserted",i,true)
}function i(o){c(o.target);
if(o.target.querySelectorAll){Array.forEach(o.target.querySelectorAll("input"),c)
}}function c(e,o){if(e.localName!="input"||e.type=="range"){}else{if(e.getAttribute("type")=="range"){f(e)
}else{if(!o){setTimeout(c,0,e,true)
}}}}function f(F){var w,L,v,K,H,I,u;
var G,J,y,D,E=F.value;
if(!g){g=document.body.appendChild(document.createElement("hr"));
b(g,{"-moz-appearance":j?"scale-horizontal":"scalethumb-horizontal",display:"block",visibility:"visible",opacity:1,position:"fixed",top:"-999999px"});
document.mozSetImageElement("__sliderthumb__",g)
}var q=function(){return""+E
};
var p=function p(M){E=""+M;
w=true;
A();
delete F.value;
F.value=E;
F.__defineGetter__("value",q);
F.__defineSetter__("value",p)
};
F.__defineGetter__("value",q);
F.__defineSetter__("value",p);
F.__defineGetter__("type",function(){return"range"
});
["min","max","step"].forEach(function(M){if(F.hasAttribute(M)){L=true
}F.__defineGetter__(M,function(){return this.hasAttribute(M)?this.getAttribute(M):""
});
F.__defineSetter__(M,function(N){N===null?this.removeAttribute(M):this.setAttribute(M,N)
})
});
F.readOnly=true;
b(F,n);
z();
F.addEventListener("DOMAttrModified",function(M){if(M.attrName=="value"&&!w){E=M.newValue;
A()
}else{if(~["min","max","step"].indexOf(M.attrName)){z();
L=true
}}},true);
F.addEventListener("mousedown",x,true);
F.addEventListener("keydown",r,true);
F.addEventListener("focus",t,true);
F.addEventListener("blur",B,true);
function x(O){K=true;
setTimeout(function(){K=false
},0);
if(O.button||!D){return
}var N=parseFloat(getComputedStyle(this,0).width);
var P=(N-a.width)/D;
if(!P){return
}var M=O.clientX-this.getBoundingClientRect().left-a.width/2-(E-G)*P;
if(Math.abs(M)>a.radius){v=true;
this.value-=-M/P
}I=E;
u=O.clientX;
this.addEventListener("mousemove",C,true);
this.addEventListener("mouseup",o,true)
}function C(N){var M=parseFloat(getComputedStyle(this,0).width);
var O=(M-a.width)/D;
if(!O){return
}I+=(N.clientX-u)/O;
u=N.clientX;
v=true;
this.value=I
}function o(){this.removeEventListener("mousemove",C,true);
this.removeEventListener("mouseup",o,true)
}function r(M){if(M.keyCode>36&&M.keyCode<41){t.call(this);
v=true;
this.value=E+(M.keyCode==38||M.keyCode==39?y:-y)
}}function t(){if(!K){this.style.boxShadow=!j?"0 0 0 2px #fb0":"0 0 2px 1px -moz-mac-focusring, inset 0 0 1px -moz-mac-focusring"
}}function B(){this.style.boxShadow=""
}function s(M){return !isNaN(M)&&+M==parseFloat(M)
}function z(){G=s(F.min)?+F.min:0;
J=s(F.max)?+F.max:100;
if(J<G){J=G>100?G:100
}y=s(F.step)&&F.step>0?+F.step:1;
D=J-G;
A(true)
}function e(){if(!w&&!L){E=F.getAttribute("value")
}if(!s(E)){E=(G+J)/2
}E=Math.round((E-G)/y)*y+G;
if(E<G){E=G
}else{if(E>J){E=G+~~(D/y)*y
}}}function A(O){e();
if(v&&E!=H){F.dispatchEvent(l)
}v=false;
if(!O&&E==H){return
}H=E;
var M=D?(E-G)/D*100:0;
var N="-moz-element(#__sliderthumb__) "+M+"% no-repeat, ";
b(F,{background:N+d})
}}function b(e,o){for(var p in o){e.style.setProperty(p,o[p],"important")
}}})();var wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\uFEFF",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};
window.rangy=(function(){var j="object",g="function",z="undefined";
var k=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"];
var c=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"];
var r=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"];
var o=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"];
function i(C,B){var A=typeof C[B];
return A==g||(!!(A==j&&C[B]))||A=="unknown"
}function d(B,A){return !!(typeof B[A]==j&&B[A])
}function p(B,A){return typeof B[A]!=z
}function l(A){return function(D,C){var B=C.length;
while(B--){if(!A(D,C[B])){return false
}}return true
}
}var n=l(i);
var q=l(d);
var y=l(p);
function u(A){return A&&n(A,o)&&y(A,r)
}var m={version:"1.2.2",initialized:false,supported:true,util:{isHostMethod:i,isHostObject:d,isHostProperty:p,areHostMethods:n,areHostObjects:q,areHostProperties:y,isTextRange:u},features:{},modules:{},config:{alertOnWarn:false,preferTextRange:false}};
function f(A){window.alert("Rangy not supported in your browser. Reason: "+A);
m.initialized=true;
m.supported=false
}m.fail=f;
function t(B){var A="Rangy warning: "+B;
if(m.config.alertOnWarn){window.alert(A)
}else{if(typeof window.console!=z&&typeof window.console.log!=z){window.console.log(A)
}}}m.warn=t;
if({}.hasOwnProperty){m.util.extend=function(C,B){for(var A in B){if(B.hasOwnProperty(A)){C[A]=B[A]
}}}
}else{f("hasOwnProperty not supported")
}var v=[];
var a=[];
function s(){if(m.initialized){return
}var C;
var G=false,H=false;
if(i(document,"createRange")){C=document.createRange();
if(n(C,c)&&y(C,k)){G=true
}C.detach()
}var B=d(document,"body")?document.body:document.getElementsByTagName("body")[0];
if(B&&i(B,"createTextRange")){C=B.createTextRange();
if(u(C)){H=true
}}if(!G&&!H){f("Neither Range nor TextRange are implemented")
}m.initialized=true;
m.features={implementsDomRange:G,implementsTextRange:H};
var F=a.concat(v);
for(var E=0,A=F.length;
E<A;
++E){try{F[E](m)
}catch(D){if(d(window,"console")&&i(window.console,"log")){window.console.log("Init listener threw an exception. Continuing.",D)
}}}}m.init=s;
m.addInitListener=function(A){if(m.initialized){A(m)
}else{v.push(A)
}};
var w=[];
m.addCreateMissingNativeApiListener=function(A){w.push(A)
};
function e(C){C=C||window;
s();
for(var B=0,A=w.length;
B<A;
++B){w[B](C)
}}m.createMissingNativeApi=e;
function x(A){this.name=A;
this.initialized=false;
this.supported=false
}x.prototype.fail=function(A){this.initialized=true;
this.supported=false;
throw new Error("Module '"+this.name+"' failed to load: "+A)
};
x.prototype.warn=function(A){m.warn("Module "+this.name+": "+A)
};
x.prototype.createError=function(A){return new Error("Error in Rangy "+this.name+" module: "+A)
};
m.createModule=function(A,C){var B=new x(A);
m.modules[A]=B;
a.push(function(D){C(D,B);
B.initialized=true;
B.supported=true
})
};
m.requireModules=function(C){for(var E=0,A=C.length,D,B;
E<A;
++E){B=C[E];
D=m.modules[B];
if(!D||!(D instanceof x)){throw new Error("Module '"+B+"' not found")
}if(!D.supported){throw new Error("Module '"+B+"' not supported")
}}};
var b=false;
var h=function(A){if(!b){b=true;
if(!m.initialized){s()
}}};
if(typeof window==z){f("No window found");
return
}if(typeof document==z){f("No document found");
return
}if(i(document,"addEventListener")){document.addEventListener("DOMContentLoaded",h,false)
}if(i(window,"addEventListener")){window.addEventListener("load",h,false)
}else{if(i(window,"attachEvent")){window.attachEvent("onload",h)
}else{f("Window does not have required addEventListener or attachEvent method")
}}return m
})();
rangy.createModule("DomUtil",function(p,d){var t="undefined";
var b=p.util;
if(!b.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])){d.fail("document missing a Node creation method")
}if(!b.isHostMethod(document,"getElementsByTagName")){d.fail("document missing getElementsByTagName method")
}var e=document.createElement("div");
if(!b.areHostMethods(e,["insertBefore","appendChild","cloneNode"]||!b.areHostObjects(e,["previousSibling","nextSibling","childNodes","parentNode"]))){d.fail("Incomplete Element implementation")
}if(!b.isHostProperty(e,"innerHTML")){d.fail("Element is missing innerHTML property")
}var s=document.createTextNode("test");
if(!b.areHostMethods(s,["splitText","deleteData","insertData","appendData","cloneNode"]||!b.areHostObjects(e,["previousSibling","nextSibling","childNodes","parentNode"])||!b.areHostProperties(s,["data"]))){d.fail("Incomplete Text Node implementation")
}var y=function(E,G){var F=E.length;
while(F--){if(E[F]===G){return true
}}return false
};
function i(F){var E;
return typeof F.namespaceURI==t||((E=F.namespaceURI)===null||E=="http://www.w3.org/1999/xhtml")
}function j(F){var E=F.parentNode;
return(E.nodeType==1)?E:null
}function a(F){var E=0;
while((F=F.previousSibling)){E++
}return E
}function g(E){var F;
return m(E)?E.length:((F=E.childNodes)?F.length:0)
}function x(F,E){var G=[],H;
for(H=F;
H;
H=H.parentNode){G.push(H)
}for(H=E;
H;
H=H.parentNode){if(y(G,H)){return H
}}return null
}function C(E,F,H){var G=H?F:F.parentNode;
while(G){if(G===E){return true
}else{G=G.parentNode
}}return false
}function z(F,E,I){var G,H=I?F:F.parentNode;
while(H){G=H.parentNode;
if(G===E){return H
}H=G
}return null
}function m(F){var E=F.nodeType;
return E==3||E==4||E==8
}function v(H,F){var E=F.nextSibling,G=F.parentNode;
if(E){G.insertBefore(H,E)
}else{G.appendChild(H)
}return H
}function w(G,E){var F=G.cloneNode(false);
F.deleteData(0,E);
G.deleteData(E,G.length-E);
v(F,G);
return F
}function q(E){if(E.nodeType==9){return E
}else{if(typeof E.ownerDocument!=t){return E.ownerDocument
}else{if(typeof E.document!=t){return E.document
}else{if(E.parentNode){return q(E.parentNode)
}else{throw new Error("getDocument: no document found for node")
}}}}}function l(E){var F=q(E);
if(typeof F.defaultView!=t){return F.defaultView
}else{if(typeof F.parentWindow!=t){return F.parentWindow
}else{throw new Error("Cannot get a window object for node")
}}}function B(E){if(typeof E.contentDocument!=t){return E.contentDocument
}else{if(typeof E.contentWindow!=t){return E.contentWindow.document
}else{throw new Error("getIframeWindow: No Document object found for iframe element")
}}}function f(E){if(typeof E.contentWindow!=t){return E.contentWindow
}else{if(typeof E.contentDocument!=t){return E.contentDocument.defaultView
}else{throw new Error("getIframeWindow: No Window object found for iframe element")
}}}function D(E){return b.isHostObject(E,"body")?E.body:E.getElementsByTagName("body")[0]
}function c(F){var E;
while((E=F.parentNode)){F=E
}return F
}function r(H,J,G,I){var E,K,M,L,F;
if(H==G){return J===I?0:(J<I)?-1:1
}else{if((E=z(G,H,true))){return J<=a(E)?-1:1
}else{if((E=z(H,G,true))){return a(E)<I?-1:1
}else{K=x(H,G);
M=(H===K)?K:z(H,K,true);
L=(G===K)?K:z(G,K,true);
if(M===L){throw new Error("comparePoints got to case 4 and childA and childB are the same!")
}else{F=K.firstChild;
while(F){if(F===M){return -1
}else{if(F===L){return 1
}}F=F.nextSibling
}throw new Error("Should not be here!")
}}}}}function A(F){var E=q(F).createDocumentFragment(),G;
while((G=F.firstChild)){E.appendChild(G)
}return E
}function o(E){if(!E){return"[No node]"
}if(m(E)){return'"'+E.data+'"'
}else{if(E.nodeType==1){var F=E.id?' id="'+E.id+'"':"";
return"<"+E.nodeName+F+">["+E.childNodes.length+"]"
}else{return E.nodeName
}}}function n(E){this.root=E;
this._next=E
}n.prototype={_current:null,hasNext:function(){return !!this._next
},next:function(){var G=this._current=this._next;
var F,E;
if(this._current){F=G.firstChild;
if(F){this._next=F
}else{E=null;
while((G!==this.root)&&!(E=G.nextSibling)){G=G.parentNode
}this._next=E
}}return this._current
},detach:function(){this._current=this._next=this.root=null
}};
function h(E){return new n(E)
}function k(E,F){this.node=E;
this.offset=F
}k.prototype={equals:function(E){return this.node===E.node&this.offset==E.offset
},inspect:function(){return"[DomPosition("+o(this.node)+":"+this.offset+")]"
}};
function u(E){this.code=this[E];
this.codeName=E;
this.message="DOMException: "+this.codeName
}u.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};
u.prototype.toString=function(){return this.message
};
p.dom={arrayContains:y,isHtmlNamespace:i,parentElement:j,getNodeIndex:a,getNodeLength:g,getCommonAncestor:x,isAncestorOf:C,getClosestAncestorIn:z,isCharacterDataNode:m,insertAfter:v,splitDataNode:w,getDocument:q,getWindow:l,getIframeWindow:f,getIframeDocument:B,getBody:D,getRootContainer:c,comparePoints:r,inspectNode:o,fragmentFromNodeChildren:A,createIterator:h,DomPosition:k};
p.DOMException=u
});
rangy.createModule("DomRange",function(i,f){i.requireModules(["DomUtil"]);
var b=i.dom;
var E=b.DomPosition;
var T=i.DOMException;
function x(al,e){return(al.nodeType!=3)&&(b.isAncestorOf(al,e.startContainer,true)||b.isAncestorOf(al,e.endContainer,true))
}function m(e){return b.getDocument(e.startContainer)
}function u(al,ap,am){var ao=al._listeners[ap];
if(ao){for(var an=0,e=ao.length;
an<e;
++an){ao[an].call(al,{target:al,args:am})
}}}function A(e){return new E(e.parentNode,b.getNodeIndex(e))
}function W(e){return new E(e.parentNode,b.getNodeIndex(e)+1)
}function j(al,an,am){var e=al.nodeType==11?al.firstChild:al;
if(b.isCharacterDataNode(an)){if(am==an.length){b.insertAfter(al,an)
}else{an.parentNode.insertBefore(al,am==0?an:b.splitDataNode(an,am))
}}else{if(am>=an.childNodes.length){an.appendChild(al)
}else{an.insertBefore(al,an.childNodes[am])
}}return e
}function H(am){var al;
for(var an,ao=m(am.range).createDocumentFragment(),e;
an=am.next();
){al=am.isPartiallySelectedSubtree();
an=an.cloneNode(!al);
if(al){e=am.getSubtreeIterator();
an.appendChild(H(e));
e.detach(true)
}if(an.nodeType==10){throw new T("HIERARCHY_REQUEST_ERR")
}ao.appendChild(an)
}return ao
}function V(al,ao,e){var am,aq;
e=e||{stop:false};
for(var an,ap;
an=al.next();
){if(al.isPartiallySelectedSubtree()){if(ao(an)===false){e.stop=true;
return
}else{ap=al.getSubtreeIterator();
V(ap,ao,e);
ap.detach(true);
if(e.stop){return
}}}else{am=b.createIterator(an);
while((aq=am.next())){if(ao(aq)===false){e.stop=true;
return
}}}}}function n(al){var e;
while(al.next()){if(al.isPartiallySelectedSubtree()){e=al.getSubtreeIterator();
n(e);
e.detach(true)
}else{al.remove()
}}}function Q(al){for(var am,an=m(al.range).createDocumentFragment(),e;
am=al.next();
){if(al.isPartiallySelectedSubtree()){am=am.cloneNode(false);
e=al.getSubtreeIterator();
am.appendChild(Q(e));
e.detach(true)
}else{al.remove()
}if(am.nodeType==10){throw new T("HIERARCHY_REQUEST_ERR")
}an.appendChild(am)
}return an
}function p(am,e,an){var ap=!!(e&&e.length),ao;
var aq=!!an;
if(ap){ao=new RegExp("^("+e.join("|")+")$")
}var al=[];
V(new g(am,false),function(ar){if((!ap||ao.test(ar.nodeType))&&(!aq||an(ar))){al.push(ar)
}});
return al
}function z(e){var al=(typeof e.getName=="undefined")?"Range":e.getName();
return"["+al+"("+b.inspectNode(e.startContainer)+":"+e.startOffset+", "+b.inspectNode(e.endContainer)+":"+e.endOffset+")]"
}function g(am,al){this.range=am;
this.clonePartiallySelectedTextNodes=al;
if(!am.collapsed){this.sc=am.startContainer;
this.so=am.startOffset;
this.ec=am.endContainer;
this.eo=am.endOffset;
var e=am.commonAncestorContainer;
if(this.sc===this.ec&&b.isCharacterDataNode(this.sc)){this.isSingleCharacterDataNode=true;
this._first=this._last=this._next=this.sc
}else{this._first=this._next=(this.sc===e&&!b.isCharacterDataNode(this.sc))?this.sc.childNodes[this.so]:b.getClosestAncestorIn(this.sc,e,true);
this._last=(this.ec===e&&!b.isCharacterDataNode(this.ec))?this.ec.childNodes[this.eo-1]:b.getClosestAncestorIn(this.ec,e,true)
}}}g.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:false,reset:function(){this._current=null;
this._next=this._first
},hasNext:function(){return !!this._next
},next:function(){var e=this._current=this._next;
if(e){this._next=(e!==this._last)?e.nextSibling:null;
if(b.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes){if(e===this.ec){(e=e.cloneNode(true)).deleteData(this.eo,e.length-this.eo)
}if(this._current===this.sc){(e=e.cloneNode(true)).deleteData(0,this.so)
}}}return e
},remove:function(){var al=this._current,am,e;
if(b.isCharacterDataNode(al)&&(al===this.sc||al===this.ec)){am=(al===this.sc)?this.so:0;
e=(al===this.ec)?this.eo:al.length;
if(am!=e){al.deleteData(am,e-am)
}}else{if(al.parentNode){al.parentNode.removeChild(al)
}else{}}},isPartiallySelectedSubtree:function(){var e=this._current;
return x(e,this.range)
},getSubtreeIterator:function(){var al;
if(this.isSingleCharacterDataNode){al=this.range.cloneRange();
al.collapse()
}else{al=new aj(m(this.range));
var ap=this._current;
var an=ap,e=0,ao=ap,am=b.getNodeLength(ap);
if(b.isAncestorOf(ap,this.sc,true)){an=this.sc;
e=this.so
}if(b.isAncestorOf(ap,this.ec,true)){ao=this.ec;
am=this.eo
}D(al,an,e,ao,am)
}return new g(al,this.clonePartiallySelectedTextNodes)
},detach:function(e){if(e){this.range.detach()
}this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null
}};
function O(e){this.code=this[e];
this.codeName=e;
this.message="RangeException: "+this.codeName
}O.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};
O.prototype.toString=function(){return this.message
};
function w(al,e,am){this.nodes=p(al,e,am);
this._next=this.nodes[0];
this._position=0
}w.prototype={_current:null,hasNext:function(){return !!this._next
},next:function(){this._current=this._next;
this._next=this.nodes[++this._position];
return this._current
},detach:function(){this._current=this._next=this.nodes=null
}};
var ae=[1,3,4,5,7,8,10];
var ac=[2,9,11];
var B=[5,6,10,12];
var M=[1,3,4,5,7,8,10,11];
var F=[1,3,4,5,7,8];
function Y(e){return function(am,ao){var al,an=ao?am:am.parentNode;
while(an){al=an.nodeType;
if(b.arrayContains(e,al)){return an
}an=an.parentNode
}return null
}
}var t=b.getRootContainer;
var I=Y([9,11]);
var K=Y(B);
var c=Y([6,10,12]);
function r(al,e){if(c(al,e)){throw new O("INVALID_NODE_TYPE_ERR")
}}function C(e){if(!e.startContainer){throw new T("INVALID_STATE_ERR")
}}function U(e,al){if(!b.arrayContains(al,e.nodeType)){throw new O("INVALID_NODE_TYPE_ERR")
}}function ad(e,al){if(al<0||al>(b.isCharacterDataNode(e)?e.length:e.childNodes.length)){throw new T("INDEX_SIZE_ERR")
}}function d(al,e){if(I(al,true)!==I(e,true)){throw new T("WRONG_DOCUMENT_ERR")
}}function aa(e){if(K(e,true)){throw new T("NO_MODIFICATION_ALLOWED_ERR")
}}function ah(al,e){if(!al){throw new T(e)
}}function o(e){return !b.arrayContains(ac,e.nodeType)&&!I(e,true)
}function ak(e,al){return al<=(b.isCharacterDataNode(e)?e.length:e.childNodes.length)
}function h(e){C(e);
if(o(e.startContainer)||o(e.endContainer)||!ak(e.startContainer,e.startOffset)||!ak(e.endContainer,e.endOffset)){throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")
}}var a=document.createElement("style");
var P=false;
try{a.innerHTML="<b>x</b>";
P=(a.firstChild.nodeType==3)
}catch(ag){}i.features.htmlParsingConforms=P;
var R=P?function(am){var al=this.startContainer;
var an=b.getDocument(al);
if(!al){throw new T("INVALID_STATE_ERR")
}var e=null;
if(al.nodeType==1){e=al
}else{if(b.isCharacterDataNode(al)){e=b.parentElement(al)
}}if(e===null||(e.nodeName=="HTML"&&b.isHtmlNamespace(b.getDocument(e).documentElement)&&b.isHtmlNamespace(e))){e=an.createElement("body")
}else{e=e.cloneNode(false)
}e.innerHTML=am;
return b.fragmentFromNodeChildren(e)
}:function(al){C(this);
var am=m(this);
var e=am.createElement("body");
e.innerHTML=al;
return b.fragmentFromNodeChildren(e)
};
var L=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];
var l=0,y=1,af=2,Z=3;
var s=0,v=1,J=2,k=3;
function ab(){}ab.prototype={attachListener:function(e,al){this._listeners[e].push(al)
},compareBoundaryPoints:function(ap,am){h(this);
d(this.startContainer,am.startContainer);
var ar,al,aq,e;
var ao=(ap==Z||ap==l)?"start":"end";
var an=(ap==y||ap==l)?"start":"end";
ar=this[ao+"Container"];
al=this[ao+"Offset"];
aq=am[an+"Container"];
e=am[an+"Offset"];
return b.comparePoints(ar,al,aq,e)
},insertNode:function(al){h(this);
U(al,M);
aa(this.startContainer);
if(b.isAncestorOf(al,this.startContainer,true)){throw new T("HIERARCHY_REQUEST_ERR")
}var e=j(al,this.startContainer,this.startOffset);
this.setStartBefore(e)
},cloneContents:function(){h(this);
var am,al;
if(this.collapsed){return m(this).createDocumentFragment()
}else{if(this.startContainer===this.endContainer&&b.isCharacterDataNode(this.startContainer)){am=this.startContainer.cloneNode(true);
am.data=am.data.slice(this.startOffset,this.endOffset);
al=m(this).createDocumentFragment();
al.appendChild(am);
return al
}else{var e=new g(this,true);
am=H(e);
e.detach()
}return am
}},canSurroundContents:function(){h(this);
aa(this.startContainer);
aa(this.endContainer);
var e=new g(this,true);
var al=(e._first&&(x(e._first,this))||(e._last&&x(e._last,this)));
e.detach();
return !al
},surroundContents:function(al){U(al,F);
if(!this.canSurroundContents()){throw new O("BAD_BOUNDARYPOINTS_ERR")
}var e=this.extractContents();
if(al.hasChildNodes()){while(al.lastChild){al.removeChild(al.lastChild)
}}j(al,this.startContainer,this.startOffset);
al.appendChild(e);
this.selectNode(al)
},cloneRange:function(){h(this);
var e=new aj(m(this));
var al=L.length,am;
while(al--){am=L[al];
e[am]=this[am]
}return e
},toString:function(){h(this);
var al=this.startContainer;
if(al===this.endContainer&&b.isCharacterDataNode(al)){return(al.nodeType==3||al.nodeType==4)?al.data.slice(this.startOffset,this.endOffset):""
}else{var am=[],e=new g(this,true);
V(e,function(an){if(an.nodeType==3||an.nodeType==4){am.push(an.data)
}});
e.detach();
return am.join("")
}},compareNode:function(am){h(this);
var al=am.parentNode;
var ao=b.getNodeIndex(am);
if(!al){throw new T("NOT_FOUND_ERR")
}var an=this.comparePoint(al,ao),e=this.comparePoint(al,ao+1);
if(an<0){return(e>0)?J:s
}else{return(e>0)?v:k
}},comparePoint:function(e,al){h(this);
ah(e,"HIERARCHY_REQUEST_ERR");
d(e,this.startContainer);
if(b.comparePoints(e,al,this.startContainer,this.startOffset)<0){return -1
}else{if(b.comparePoints(e,al,this.endContainer,this.endOffset)>0){return 1
}}return 0
},createContextualFragment:R,toHtml:function(){h(this);
var e=m(this).createElement("div");
e.appendChild(this.cloneContents());
return e.innerHTML
},intersectsNode:function(an,e){h(this);
ah(an,"NOT_FOUND_ERR");
if(b.getDocument(an)!==m(this)){return false
}var am=an.parentNode,ap=b.getNodeIndex(an);
ah(am,"NOT_FOUND_ERR");
var ao=b.comparePoints(am,ap,this.endContainer,this.endOffset),al=b.comparePoints(am,ap+1,this.startContainer,this.startOffset);
return e?ao<=0&&al>=0:ao<0&&al>0
},isPointInRange:function(e,al){h(this);
ah(e,"HIERARCHY_REQUEST_ERR");
d(e,this.startContainer);
return(b.comparePoints(e,al,this.startContainer,this.startOffset)>=0)&&(b.comparePoints(e,al,this.endContainer,this.endOffset)<=0)
},intersectsRange:function(al,e){h(this);
if(m(al)!=m(this)){throw new T("WRONG_DOCUMENT_ERR")
}var an=b.comparePoints(this.startContainer,this.startOffset,al.endContainer,al.endOffset),am=b.comparePoints(this.endContainer,this.endOffset,al.startContainer,al.startOffset);
return e?an<=0&&am>=0:an<0&&am>0
},intersection:function(e){if(this.intersectsRange(e)){var an=b.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),al=b.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset);
var am=this.cloneRange();
if(an==-1){am.setStart(e.startContainer,e.startOffset)
}if(al==1){am.setEnd(e.endContainer,e.endOffset)
}return am
}return null
},union:function(e){if(this.intersectsRange(e,true)){var al=this.cloneRange();
if(b.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)==-1){al.setStart(e.startContainer,e.startOffset)
}if(b.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)==1){al.setEnd(e.endContainer,e.endOffset)
}return al
}else{throw new O("Ranges do not intersect")
}},containsNode:function(al,e){if(e){return this.intersectsNode(al,false)
}else{return this.compareNode(al)==k
}},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,b.getNodeLength(e))<=0
},containsRange:function(e){return this.intersection(e).equals(e)
},containsNodeText:function(an){var ao=this.cloneRange();
ao.selectNode(an);
var am=ao.getNodes([3]);
if(am.length>0){ao.setStart(am[0],0);
var e=am.pop();
ao.setEnd(e,e.length);
var al=this.containsRange(ao);
ao.detach();
return al
}else{return this.containsNodeContents(an)
}},createNodeIterator:function(e,al){h(this);
return new w(this,e,al)
},getNodes:function(e,al){h(this);
return p(this,e,al)
},getDocument:function(){return m(this)
},collapseBefore:function(e){C(this);
this.setEndBefore(e);
this.collapse(false)
},collapseAfter:function(e){C(this);
this.setStartAfter(e);
this.collapse(true)
},getName:function(){return"DomRange"
},equals:function(e){return aj.rangesEqual(this,e)
},inspect:function(){return z(this)
}};
function S(e){e.START_TO_START=l;
e.START_TO_END=y;
e.END_TO_END=af;
e.END_TO_START=Z;
e.NODE_BEFORE=s;
e.NODE_AFTER=v;
e.NODE_BEFORE_AND_AFTER=J;
e.NODE_INSIDE=k
}function G(e){S(e);
S(e.prototype)
}function q(e,al){return function(){h(this);
var ar=this.startContainer,aq=this.startOffset,am=this.commonAncestorContainer;
var ao=new g(this,true);
var ap,at;
if(ar!==am){ap=b.getClosestAncestorIn(ar,am,true);
at=W(ap);
ar=at.node;
aq=at.offset
}V(ao,aa);
ao.reset();
var an=e(ao);
ao.detach();
al(this,ar,aq,ar,aq);
return an
}
}function X(an,aq,e){function ap(at,ar){return function(au){C(this);
U(au,ae);
U(t(au),ac);
var av=(at?A:W)(au);
(ar?am:ao)(this,av.node,av.offset)
}
}function am(at,av,aw){var au=at.endContainer,ar=at.endOffset;
if(av!==at.startContainer||aw!==at.startOffset){if(t(av)!=t(au)||b.comparePoints(av,aw,au,ar)==1){au=av;
ar=aw
}aq(at,av,aw,au,ar)
}}function ao(ar,at,aw){var av=ar.startContainer,au=ar.startOffset;
if(at!==ar.endContainer||aw!==ar.endOffset){if(t(at)!=t(av)||b.comparePoints(at,aw,av,au)==-1){av=at;
au=aw
}aq(ar,av,au,at,aw)
}}function al(ar,at,au){if(at!==ar.startContainer||au!==ar.startOffset||at!==ar.endContainer||au!==ar.endOffset){aq(ar,at,au,at,au)
}}an.prototype=new ab();
i.util.extend(an.prototype,{setStart:function(ar,at){C(this);
r(ar,true);
ad(ar,at);
am(this,ar,at)
},setEnd:function(ar,at){C(this);
r(ar,true);
ad(ar,at);
ao(this,ar,at)
},setStartBefore:ap(true,true),setStartAfter:ap(false,true),setEndBefore:ap(true,false),setEndAfter:ap(false,false),collapse:function(ar){h(this);
if(ar){aq(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset)
}else{aq(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)
}},selectNodeContents:function(ar){C(this);
r(ar,true);
aq(this,ar,0,ar,b.getNodeLength(ar))
},selectNode:function(at){C(this);
r(at,false);
U(at,ae);
var au=A(at),ar=W(at);
aq(this,au.node,au.offset,ar.node,ar.offset)
},extractContents:q(Q,aq),deleteContents:q(n,aq),canSurroundContents:function(){h(this);
aa(this.startContainer);
aa(this.endContainer);
var ar=new g(this,true);
var at=(ar._first&&(x(ar._first,this))||(ar._last&&x(ar._last,this)));
ar.detach();
return !at
},detach:function(){e(this)
},splitBoundaries:function(){h(this);
var aw=this.startContainer,av=this.startOffset,at=this.endContainer,ar=this.endOffset;
var au=(aw===at);
if(b.isCharacterDataNode(at)&&ar>0&&ar<at.length){b.splitDataNode(at,ar)
}if(b.isCharacterDataNode(aw)&&av>0&&av<aw.length){aw=b.splitDataNode(aw,av);
if(au){ar-=av;
at=aw
}else{if(at==aw.parentNode&&ar>=b.getNodeIndex(aw)){ar++
}}av=0
}aq(this,aw,av,at,ar)
},normalizeBoundaries:function(){h(this);
var az=this.startContainer,au=this.startOffset,ay=this.endContainer,ar=this.endOffset;
var av=function(aC){var aB=aC.nextSibling;
if(aB&&aB.nodeType==aC.nodeType){ay=aC;
ar=aC.length;
aC.appendData(aB.data);
aB.parentNode.removeChild(aB)
}};
var aA=function(aD){var aC=aD.previousSibling;
if(aC&&aC.nodeType==aD.nodeType){az=aD;
var aB=aD.length;
au=aC.length;
aD.insertData(0,aC.data);
aC.parentNode.removeChild(aC);
if(az==ay){ar+=au;
ay=az
}else{if(ay==aD.parentNode){var aE=b.getNodeIndex(aD);
if(ar==aE){ay=aD;
ar=aB
}else{if(ar>aE){ar--
}}}}}};
var ax=true;
if(b.isCharacterDataNode(ay)){if(ay.length==ar){av(ay)
}}else{if(ar>0){var aw=ay.childNodes[ar-1];
if(aw&&b.isCharacterDataNode(aw)){av(aw)
}}ax=!this.collapsed
}if(ax){if(b.isCharacterDataNode(az)){if(au==0){aA(az)
}}else{if(au<az.childNodes.length){var at=az.childNodes[au];
if(at&&b.isCharacterDataNode(at)){aA(at)
}}}}else{az=ay;
au=ar
}aq(this,az,au,ay,ar)
},collapseToPoint:function(ar,at){C(this);
r(ar,true);
ad(ar,at);
al(this,ar,at)
}});
G(an)
}function N(e){e.collapsed=(e.startContainer===e.endContainer&&e.startOffset===e.endOffset);
e.commonAncestorContainer=e.collapsed?e.startContainer:b.getCommonAncestor(e.startContainer,e.endContainer)
}function D(am,ao,al,ap,an){var e=(am.startContainer!==ao||am.startOffset!==al);
var aq=(am.endContainer!==ap||am.endOffset!==an);
am.startContainer=ao;
am.startOffset=al;
am.endContainer=ap;
am.endOffset=an;
N(am);
u(am,"boundarychange",{startMoved:e,endMoved:aq})
}function ai(e){C(e);
e.startContainer=e.startOffset=e.endContainer=e.endOffset=null;
e.collapsed=e.commonAncestorContainer=null;
u(e,"detach",null);
e._listeners=null
}function aj(e){this.startContainer=e;
this.startOffset=0;
this.endContainer=e;
this.endOffset=0;
this._listeners={boundarychange:[],detach:[]};
N(this)
}X(aj,D,ai);
i.rangePrototype=ab.prototype;
aj.rangeProperties=L;
aj.RangeIterator=g;
aj.copyComparisonConstants=G;
aj.createPrototypeRange=X;
aj.inspect=z;
aj.getRangeDocument=m;
aj.rangesEqual=function(al,e){return al.startContainer===e.startContainer&&al.startOffset===e.startOffset&&al.endContainer===e.endContainer&&al.endOffset===e.endOffset
};
i.DomRange=aj;
i.RangeException=O
});
rangy.createModule("WrappedRange",function(i,d){i.requireModules(["DomUtil","DomRange"]);
var a;
var h=i.dom;
var b=h.DomPosition;
var j=i.DomRange;
function e(q){var o=q.parentElement();
var m=q.duplicate();
m.collapse(true);
var p=m.parentElement();
m=q.duplicate();
m.collapse(false);
var n=m.parentElement();
var l=(p==n)?p:h.getCommonAncestor(p,n);
return l==o?l:h.getCommonAncestor(o,l)
}function c(l){return l.compareEndPoints("StartToEnd",l)==0
}function f(z,w,n,s){var A=z.duplicate();
A.collapse(n);
var y=A.parentElement();
if(!h.isAncestorOf(w,y,true)){y=w
}if(!y.canHaveHTML){return new b(y.parentNode,h.getNodeIndex(y))
}var m=h.getDocument(y).createElement("span");
var x,u=n?"StartToStart":"StartToEnd";
var v,q,l,o;
do{y.insertBefore(m,m.previousSibling);
A.moveToElementText(m)
}while((x=A.compareEndPoints(u,z))>0&&m.previousSibling);
o=m.nextSibling;
if(x==-1&&o&&h.isCharacterDataNode(o)){A.setEndPoint(n?"EndToStart":"EndToEnd",z);
var r;
if(/[\r\n]/.test(o.data)){var t=A.duplicate();
var p=t.text.replace(/\r\n/g,"\r").length;
r=t.moveStart("character",p);
while((x=t.compareEndPoints("StartToEnd",t))==-1){r++;
t.moveStart("character",1)
}}else{r=A.text.length
}l=new b(o,r)
}else{v=(s||!n)&&m.previousSibling;
q=(s||n)&&m.nextSibling;
if(q&&h.isCharacterDataNode(q)){l=new b(q,0)
}else{if(v&&h.isCharacterDataNode(v)){l=new b(v,v.length)
}else{l=new b(y,h.getNodeIndex(m))
}}}m.parentNode.removeChild(m);
return l
}function k(l,n){var o,r,p=l.offset;
var s=h.getDocument(l.node);
var m,t,u=s.body.createTextRange();
var q=h.isCharacterDataNode(l.node);
if(q){o=l.node;
r=o.parentNode
}else{t=l.node.childNodes;
o=(p<t.length)?t[p]:null;
r=l.node
}m=s.createElement("span");
m.innerHTML="&#feff;";
if(o){r.insertBefore(m,o)
}else{r.appendChild(m)
}u.moveToElementText(m);
u.collapse(!n);
r.removeChild(m);
if(q){u[n?"moveStart":"moveEnd"]("character",p)
}return u
}if(i.features.implementsDomRange&&(!i.features.implementsTextRange||!i.config.preferTextRange)){(function(){var n;
var s=j.rangeProperties;
var v;
function l(w){var x=s.length,y;
while(x--){y=s[x];
w[y]=w.nativeRange[y]
}}function o(y,A,x,B,z){var w=(y.startContainer!==A||y.startOffset!=x);
var C=(y.endContainer!==B||y.endOffset!=z);
if(w||C){y.setEnd(B,z);
y.setStart(A,x)
}}function t(w){w.nativeRange.detach();
w.detached=true;
var x=s.length,y;
while(x--){y=s[x];
w[y]=null
}}var m;
a=function(w){if(!w){throw new Error("Range must be specified")
}this.nativeRange=w;
l(this)
};
j.createPrototypeRange(a,o,t);
n=a.prototype;
n.selectNode=function(w){this.nativeRange.selectNode(w);
l(this)
};
n.deleteContents=function(){this.nativeRange.deleteContents();
l(this)
};
n.extractContents=function(){var w=this.nativeRange.extractContents();
l(this);
return w
};
n.cloneContents=function(){return this.nativeRange.cloneContents()
};
n.surroundContents=function(w){this.nativeRange.surroundContents(w);
l(this)
};
n.collapse=function(w){this.nativeRange.collapse(w);
l(this)
};
n.cloneRange=function(){return new a(this.nativeRange.cloneRange())
};
n.refresh=function(){l(this)
};
n.toString=function(){return this.nativeRange.toString()
};
var r=document.createTextNode("test");
h.getBody(document).appendChild(r);
var p=document.createRange();
p.setStart(r,0);
p.setEnd(r,0);
try{p.setStart(r,1);
v=true;
n.setStart=function(w,x){this.nativeRange.setStart(w,x);
l(this)
};
n.setEnd=function(w,x){this.nativeRange.setEnd(w,x);
l(this)
};
m=function(w){return function(x){this.nativeRange[w](x);
l(this)
}
}
}catch(q){v=false;
n.setStart=function(x,y){try{this.nativeRange.setStart(x,y)
}catch(w){this.nativeRange.setEnd(x,y);
this.nativeRange.setStart(x,y)
}l(this)
};
n.setEnd=function(x,y){try{this.nativeRange.setEnd(x,y)
}catch(w){this.nativeRange.setStart(x,y);
this.nativeRange.setEnd(x,y)
}l(this)
};
m=function(w,x){return function(z){try{this.nativeRange[w](z)
}catch(y){this.nativeRange[x](z);
this.nativeRange[w](z)
}l(this)
}
}
}n.setStartBefore=m("setStartBefore","setEndBefore");
n.setStartAfter=m("setStartAfter","setEndAfter");
n.setEndBefore=m("setEndBefore","setStartBefore");
n.setEndAfter=m("setEndAfter","setStartAfter");
p.selectNodeContents(r);
if(p.startContainer==r&&p.endContainer==r&&p.startOffset==0&&p.endOffset==r.length){n.selectNodeContents=function(w){this.nativeRange.selectNodeContents(w);
l(this)
}
}else{n.selectNodeContents=function(w){this.setStart(w,0);
this.setEnd(w,j.getEndOffset(w))
}
}p.selectNodeContents(r);
p.setEnd(r,3);
var u=document.createRange();
u.selectNodeContents(r);
u.setEnd(r,4);
u.setStart(r,2);
if(p.compareBoundaryPoints(p.START_TO_END,u)==-1&p.compareBoundaryPoints(p.END_TO_START,u)==1){n.compareBoundaryPoints=function(x,w){w=w.nativeRange||w;
if(x==w.START_TO_END){x=w.END_TO_START
}else{if(x==w.END_TO_START){x=w.START_TO_END
}}return this.nativeRange.compareBoundaryPoints(x,w)
}
}else{n.compareBoundaryPoints=function(x,w){return this.nativeRange.compareBoundaryPoints(x,w.nativeRange||w)
}
}if(i.util.isHostMethod(p,"createContextualFragment")){n.createContextualFragment=function(w){return this.nativeRange.createContextualFragment(w)
}
}h.getBody(document).removeChild(r);
p.detach();
u.detach()
})();
i.createNativeRange=function(l){l=l||document;
return l.createRange()
}
}else{if(i.features.implementsTextRange){a=function(l){this.textRange=l;
this.refresh()
};
a.prototype=new j(document);
a.prototype.refresh=function(){var n,l;
var m=e(this.textRange);
if(c(this.textRange)){l=n=f(this.textRange,m,true,true)
}else{n=f(this.textRange,m,true,false);
l=f(this.textRange,m,false,false)
}this.setStart(n.node,n.offset);
this.setEnd(l.node,l.offset)
};
j.copyComparisonConstants(a);
var g=(function(){return this
})();
if(typeof g.Range=="undefined"){g.Range=a
}i.createNativeRange=function(l){l=l||document;
return l.body.createTextRange()
}
}}if(i.features.implementsTextRange){a.rangeToTextRange=function(l){if(l.collapsed){var o=k(new b(l.startContainer,l.startOffset),true);
return o
}else{var p=k(new b(l.startContainer,l.startOffset),true);
var n=k(new b(l.endContainer,l.endOffset),false);
var m=h.getDocument(l.startContainer).body.createTextRange();
m.setEndPoint("StartToStart",p);
m.setEndPoint("EndToEnd",n);
return m
}}
}a.prototype.getName=function(){return"WrappedRange"
};
i.WrappedRange=a;
i.createRange=function(l){l=l||document;
return new a(i.createNativeRange(l))
};
i.createRangyRange=function(l){l=l||document;
return new j(l)
};
i.createIframeRange=function(l){return i.createRange(h.getIframeDocument(l))
};
i.createIframeRangyRange=function(l){return i.createRangyRange(h.getIframeDocument(l))
};
i.addCreateMissingNativeApiListener(function(m){var l=m.document;
if(typeof l.createRange=="undefined"){l.createRange=function(){return i.createRange(this)
}
}l=m=null
})
});
rangy.createModule("WrappedSelection",function(g,d){g.requireModules(["DomUtil","DomRange","WrappedRange"]);
g.config.checkSelectionRanges=true;
var D="boolean",T="_rangySelection",c=g.dom,l=g.util,Q=g.DomRange,e=g.WrappedRange,N=g.DOMException,y=c.DomPosition,w,n,U="Control";
function m(W){return(W||window).getSelection()
}function q(W){return(W||window).document.selection
}var S=g.util.isHostMethod(window,"getSelection"),M=g.util.isHostObject(document,"selection");
var u=M&&(!S||g.config.preferTextRange);
if(u){w=q;
g.isSelectionValid=function(X){var Y=(X||window).document,W=Y.selection;
return(W.type!="None"||c.getDocument(W.createRange().parentElement())==Y)
}
}else{if(S){w=m;
g.isSelectionValid=function(){return true
}
}else{d.fail("Neither document.selection or window.getSelection() detected.")
}}g.getNativeSelection=w;
var L=w();
var B=g.createNativeRange(document);
var C=c.getBody(document);
var J=l.areHostObjects(L,["anchorNode","focusNode"]&&l.areHostProperties(L,["anchorOffset","focusOffset"]));
g.features.selectionHasAnchorAndFocus=J;
var p=l.isHostMethod(L,"extend");
g.features.selectionHasExtend=p;
var V=(typeof L.rangeCount=="number");
g.features.selectionHasRangeCount=V;
var P=false;
var O=true;
if(l.areHostMethods(L,["addRange","getRangeAt","removeAllRanges"])&&typeof L.rangeCount=="number"&&g.features.implementsDomRange){(function(){var Y=document.createElement("iframe");
C.appendChild(Y);
var ac=c.getIframeDocument(Y);
ac.open();
ac.write("<html><head></head><body>12</body></html>");
ac.close();
var aa=c.getIframeWindow(Y).getSelection();
var ad=ac.documentElement;
var Z=ad.lastChild,ab=Z.firstChild;
var X=ac.createRange();
X.setStart(ab,1);
X.collapse(true);
aa.addRange(X);
O=(aa.rangeCount==1);
aa.removeAllRanges();
var W=X.cloneRange();
X.setStart(ab,0);
W.setEnd(ab,2);
aa.addRange(X);
aa.addRange(W);
P=(aa.rangeCount==2);
X.detach();
W.detach();
C.removeChild(Y)
})()
}g.features.selectionSupportsMultipleRanges=P;
g.features.collapsedNonEditableSelectionsSupported=O;
var f=false,j;
if(C&&l.isHostMethod(C,"createControlRange")){j=C.createControlRange();
if(l.areHostProperties(j,["item","add"])){f=true
}}g.features.implementsControlRange=f;
if(J){n=function(W){return W.anchorNode===W.focusNode&&W.anchorOffset===W.focusOffset
}
}else{n=function(W){return W.rangeCount?W.getRangeAt(W.rangeCount-1).collapsed:false
}
}function b(Z,X,W){var Y=W?"end":"start",aa=W?"start":"end";
Z.anchorNode=X[Y+"Container"];
Z.anchorOffset=X[Y+"Offset"];
Z.focusNode=X[aa+"Container"];
Z.focusOffset=X[aa+"Offset"]
}function v(X){var W=X.nativeSelection;
X.anchorNode=W.anchorNode;
X.anchorOffset=W.anchorOffset;
X.focusNode=W.focusNode;
X.focusOffset=W.focusOffset
}function G(W){W.anchorNode=W.focusNode=null;
W.anchorOffset=W.focusOffset=0;
W.rangeCount=0;
W.isCollapsed=true;
W._ranges.length=0
}function I(W){var X;
if(W instanceof Q){X=W._selectionNativeRange;
if(!X){X=g.createNativeRange(c.getDocument(W.startContainer));
X.setEnd(W.endContainer,W.endOffset);
X.setStart(W.startContainer,W.startOffset);
W._selectionNativeRange=X;
W.attachListener("detach",function(){this._selectionNativeRange=null
})
}}else{if(W instanceof e){X=W.nativeRange
}else{if(g.features.implementsDomRange&&(W instanceof c.getWindow(W.startContainer).Range)){X=W
}}}return X
}function k(Y){if(!Y.length||Y[0].nodeType!=1){return false
}for(var X=1,W=Y.length;
X<W;
++X){if(!c.isAncestorOf(Y[0],Y[X])){return false
}}return true
}function K(X){var W=X.getNodes();
if(!k(W)){throw new Error("getSingleElementFromRange: range "+X.inspect()+" did not consist of a single element")
}return W[0]
}function F(W){return !!W&&typeof W.text!="undefined"
}function H(Y,X){var W=new e(X);
Y._ranges=[W];
b(Y,W,false);
Y.rangeCount=1;
Y.isCollapsed=W.collapsed
}function t(Z){Z._ranges.length=0;
if(Z.docSelection.type=="None"){G(Z)
}else{var Y=Z.docSelection.createRange();
if(F(Y)){H(Z,Y)
}else{Z.rangeCount=Y.length;
var W,aa=c.getDocument(Y.item(0));
for(var X=0;
X<Z.rangeCount;
++X){W=g.createRange(aa);
W.selectNode(Y.item(X));
Z._ranges.push(W)
}Z.isCollapsed=Z.rangeCount==1&&Z._ranges[0].collapsed;
b(Z,Z._ranges[Z.rangeCount-1],false)
}}}function x(X,aa){var Y=X.docSelection.createRange();
var W=K(aa);
var ae=c.getDocument(Y.item(0));
var ab=c.getBody(ae).createControlRange();
for(var Z=0,ac=Y.length;
Z<ac;
++Z){ab.add(Y.item(Z))
}try{ab.add(W)
}catch(ad){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")
}ab.select();
t(X)
}var o;
if(l.isHostMethod(L,"getRangeAt")){o=function(Y,W){try{return Y.getRangeAt(W)
}catch(X){return null
}}
}else{if(J){o=function(X){var Y=c.getDocument(X.anchorNode);
var W=g.createRange(Y);
W.setStart(X.anchorNode,X.anchorOffset);
W.setEnd(X.focusNode,X.focusOffset);
if(W.collapsed!==this.isCollapsed){W.setStart(X.focusNode,X.focusOffset);
W.setEnd(X.anchorNode,X.anchorOffset)
}return W
}
}}function A(W,Y,X){this.nativeSelection=W;
this.docSelection=Y;
this._ranges=[];
this.win=X;
this.refresh()
}g.getSelection=function(Y){Y=Y||window;
var X=Y[T];
var W=w(Y),Z=M?q(Y):null;
if(X){X.nativeSelection=W;
X.docSelection=Z;
X.refresh(Y)
}else{X=new A(W,Z,Y);
Y[T]=X
}return X
};
g.getIframeSelection=function(W){return g.getSelection(c.getIframeWindow(W))
};
var a=A.prototype;
function i(ab,W){var ac=c.getDocument(W[0].startContainer);
var Z=c.getBody(ac).createControlRange();
for(var Y=0,aa;
Y<rangeCount;
++Y){aa=K(W[Y]);
try{Z.add(aa)
}catch(X){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")
}}Z.select();
t(ab)
}if(!u&&J&&l.areHostMethods(L,["removeAllRanges","addRange"])){a.removeAllRanges=function(){this.nativeSelection.removeAllRanges();
G(this)
};
var h=function(Y,W){var Z=Q.getRangeDocument(W);
var X=g.createRange(Z);
X.collapseToPoint(W.endContainer,W.endOffset);
Y.nativeSelection.addRange(I(X));
Y.nativeSelection.extend(W.startContainer,W.startOffset);
Y.refresh()
};
if(V){a.addRange=function(X,W){if(f&&M&&this.docSelection.type==U){x(this,X)
}else{if(W&&p){h(this,X)
}else{var Y;
if(P){Y=this.rangeCount
}else{this.removeAllRanges();
Y=0
}this.nativeSelection.addRange(I(X));
this.rangeCount=this.nativeSelection.rangeCount;
if(this.rangeCount==Y+1){if(g.config.checkSelectionRanges){var Z=o(this.nativeSelection,this.rangeCount-1);
if(Z&&!Q.rangesEqual(Z,X)){X=new e(Z)
}}this._ranges[this.rangeCount-1]=X;
b(this,X,r(this.nativeSelection));
this.isCollapsed=n(this)
}else{this.refresh()
}}}}
}else{a.addRange=function(X,W){if(W&&p){h(this,X)
}else{this.nativeSelection.addRange(I(X));
this.refresh()
}}
}a.setRanges=function(X){if(f&&X.length>1){i(this,X)
}else{this.removeAllRanges();
for(var Y=0,W=X.length;
Y<W;
++Y){this.addRange(X[Y])
}}}
}else{if(l.isHostMethod(L,"empty")&&l.isHostMethod(B,"select")&&f&&u){a.removeAllRanges=function(){try{this.docSelection.empty();
if(this.docSelection.type!="None"){var Z;
if(this.anchorNode){Z=c.getDocument(this.anchorNode)
}else{if(this.docSelection.type==U){var X=this.docSelection.createRange();
if(X.length){Z=c.getDocument(X.item(0)).body.createTextRange()
}}}if(Z){var Y=Z.body.createTextRange();
Y.select();
this.docSelection.empty()
}}}catch(W){}G(this)
};
a.addRange=function(W){if(this.docSelection.type==U){x(this,W)
}else{e.rangeToTextRange(W).select();
this._ranges[0]=W;
this.rangeCount=1;
this.isCollapsed=this._ranges[0].collapsed;
b(this,W,false)
}};
a.setRanges=function(W){this.removeAllRanges();
var X=W.length;
if(X>1){i(this,W)
}else{if(X){this.addRange(W[0])
}}}
}else{d.fail("No means of selecting a Range or TextRange was found");
return false
}}a.getRangeAt=function(W){if(W<0||W>=this.rangeCount){throw new N("INDEX_SIZE_ERR")
}else{return this._ranges[W]
}};
var E;
if(u){E=function(X){var W;
if(g.isSelectionValid(X.win)){W=X.docSelection.createRange()
}else{W=c.getBody(X.win.document).createTextRange();
W.collapse(true)
}if(X.docSelection.type==U){t(X)
}else{if(F(W)){H(X,W)
}else{G(X)
}}}
}else{if(l.isHostMethod(L,"getRangeAt")&&typeof L.rangeCount=="number"){E=function(Y){if(f&&M&&Y.docSelection.type==U){t(Y)
}else{Y._ranges.length=Y.rangeCount=Y.nativeSelection.rangeCount;
if(Y.rangeCount){for(var X=0,W=Y.rangeCount;
X<W;
++X){Y._ranges[X]=new g.WrappedRange(Y.nativeSelection.getRangeAt(X))
}b(Y,Y._ranges[Y.rangeCount-1],r(Y.nativeSelection));
Y.isCollapsed=n(Y)
}else{G(Y)
}}}
}else{if(J&&typeof L.isCollapsed==D&&typeof B.collapsed==D&&g.features.implementsDomRange){E=function(Y){var W,X=Y.nativeSelection;
if(X.anchorNode){W=o(X,0);
Y._ranges=[W];
Y.rangeCount=1;
v(Y);
Y.isCollapsed=n(Y)
}else{G(Y)
}}
}else{d.fail("No means of obtaining a Range or TextRange from the user's selection was found");
return false
}}}a.refresh=function(X){var W=X?this._ranges.slice(0):null;
E(this);
if(X){var Y=W.length;
if(Y!=this._ranges.length){return false
}while(Y--){if(!Q.rangesEqual(W[Y],this._ranges[Y])){return false
}}return true
}};
var z=function(aa,Y){var X=aa.getAllRanges(),ab=false;
aa.removeAllRanges();
for(var Z=0,W=X.length;
Z<W;
++Z){if(ab||Y!==X[Z]){aa.addRange(X[Z])
}else{ab=true
}}if(!aa.rangeCount){G(aa)
}};
if(f){a.removeRange=function(aa){if(this.docSelection.type==U){var Y=this.docSelection.createRange();
var W=K(aa);
var ae=c.getDocument(Y.item(0));
var ac=c.getBody(ae).createControlRange();
var X,ad=false;
for(var Z=0,ab=Y.length;
Z<ab;
++Z){X=Y.item(Z);
if(X!==W||ad){ac.add(Y.item(Z))
}else{ad=true
}}ac.select();
t(this)
}else{z(this,aa)
}}
}else{a.removeRange=function(W){z(this,W)
}
}var r;
if(!u&&J&&g.features.implementsDomRange){r=function(X){var W=false;
if(X.anchorNode){W=(c.comparePoints(X.anchorNode,X.anchorOffset,X.focusNode,X.focusOffset)==1)
}return W
};
a.isBackwards=function(){return r(this)
}
}else{r=a.isBackwards=function(){return false
}
}a.toString=function(){var Y=[];
for(var X=0,W=this.rangeCount;
X<W;
++X){Y[X]=""+this._ranges[X]
}return Y.join("")
};
function R(X,W){if(X.anchorNode&&(c.getDocument(X.anchorNode)!==c.getDocument(W))){throw new N("WRONG_DOCUMENT_ERR")
}}a.collapse=function(X,Y){R(this,X);
var W=g.createRange(c.getDocument(X));
W.collapseToPoint(X,Y);
this.removeAllRanges();
this.addRange(W);
this.isCollapsed=true
};
a.collapseToStart=function(){if(this.rangeCount){var W=this._ranges[0];
this.collapse(W.startContainer,W.startOffset)
}else{throw new N("INVALID_STATE_ERR")
}};
a.collapseToEnd=function(){if(this.rangeCount){var W=this._ranges[this.rangeCount-1];
this.collapse(W.endContainer,W.endOffset)
}else{throw new N("INVALID_STATE_ERR")
}};
a.selectAllChildren=function(X){R(this,X);
var W=g.createRange(c.getDocument(X));
W.selectNodeContents(X);
this.removeAllRanges();
this.addRange(W)
};
a.deleteFromDocument=function(){if(f&&M&&this.docSelection.type==U){var aa=this.docSelection.createRange();
var Z;
while(aa.length){Z=aa.item(0);
aa.remove(Z);
Z.parentNode.removeChild(Z)
}this.refresh()
}else{if(this.rangeCount){var X=this.getAllRanges();
this.removeAllRanges();
for(var Y=0,W=X.length;
Y<W;
++Y){X[Y].deleteContents()
}this.addRange(X[W-1])
}}};
a.getAllRanges=function(){return this._ranges.slice(0)
};
a.setSingleRange=function(W){this.setRanges([W])
};
a.containsNode=function(Z,X){for(var Y=0,W=this._ranges.length;
Y<W;
++Y){if(this._ranges[Y].containsNode(Z,X)){return true
}}return false
};
a.toHtml=function(){var Z="";
if(this.rangeCount){var X=Q.getRangeDocument(this._ranges[0]).createElement("div");
for(var Y=0,W=this._ranges.length;
Y<W;
++Y){X.appendChild(this._ranges[Y].cloneContents())
}Z=X.innerHTML
}return Z
};
function s(ac){var ab=[];
var Z=new y(ac.anchorNode,ac.anchorOffset);
var X=new y(ac.focusNode,ac.focusOffset);
var Y=(typeof ac.getName=="function")?ac.getName():"Selection";
if(typeof ac.rangeCount!="undefined"){for(var aa=0,W=ac.rangeCount;
aa<W;
++aa){ab[aa]=Q.inspect(ac.getRangeAt(aa))
}}return"["+Y+"(Ranges: "+ab.join(", ")+")(anchor: "+Z.inspect()+", focus: "+X.inspect()+"]"
}a.getName=function(){return"WrappedSelection"
};
a.inspect=function(){return s(this)
};
a.detach=function(){this.win[T]=null;
this.win=this.anchorNode=this.focusNode=null
};
A.inspect=s;
g.Selection=A;
g.selectionPrototype=a;
g.addCreateMissingNativeApiListener(function(W){if(typeof W.getSelection=="undefined"){W.getSelection=function(){return g.getSelection(this)
}
}W=null
})
});
var Base=function(){};
Base.extend=function(b,e){var f=Base.prototype.extend;
Base._prototyping=true;
var d=new this;
f.call(d,b);
d.base=function(){};
delete Base._prototyping;
var c=d.constructor;
var a=d.constructor=function(){if(!Base._prototyping){if(this._constructing||this.constructor==a){this._constructing=true;
c.apply(this,arguments);
delete this._constructing
}else{if(arguments[0]!=null){return(arguments[0].extend||f).call(arguments[0],d)
}}}};
a.ancestor=this;
a.extend=this.extend;
a.forEach=this.forEach;
a.implement=this.implement;
a.prototype=d;
a.toString=this.toString;
a.valueOf=function(g){return(g=="object")?a:c.valueOf()
};
f.call(a,e);
if(typeof a.init=="function"){a.init()
}return a
};
Base.prototype={extend:function(b,h){if(arguments.length>1){var e=this[b];
if(e&&(typeof h=="function")&&(!e.valueOf||e.valueOf()!=h.valueOf())&&/\bbase\b/.test(h)){var a=h.valueOf();
h=function(){var k=this.base||Base.prototype.base;
this.base=e;
var i=a.apply(this,arguments);
this.base=k;
return i
};
h.valueOf=function(i){return(i=="object")?h:a
};
h.toString=Base.toString
}this[b]=h
}else{if(b){var g=Base.prototype.extend;
if(!Base._prototyping&&typeof this!="function"){g=this.extend||g
}var d={toSource:null};
var f=["constructor","toString","valueOf"];
var c=Base._prototyping?0:1;
while(j=f[c++]){if(b[j]!=d[j]){g.call(this,j,b[j])
}}for(var j in b){if(!d[j]){g.call(this,j,b[j])
}}}}return this
}};
Base=Base.extend({constructor:function(){this.extend(arguments[0])
}},{ancestor:Object,version:"1.1",forEach:function(a,d,c){for(var b in a){if(this.prototype[b]===undefined){d.call(c,a[b],b,a)
}}},implement:function(){for(var a=0;
a<arguments.length;
a++){if(typeof arguments[a]=="function"){arguments[a](this.prototype)
}else{this.prototype.extend(arguments[a])
}}return this
},toString:function(){return String(this.valueOf())
}});
wysihtml5.browser=(function(){var i=navigator.userAgent,d=document.createElement("div"),e=i.indexOf("MSIE")!==-1&&i.indexOf("Opera")===-1,b=i.indexOf("Gecko")!==-1&&i.indexOf("KHTML")===-1,f=i.indexOf("AppleWebKit/")!==-1,a=i.indexOf("Chrome/")!==-1,c=i.indexOf("Opera/")!==-1;
function h(j){return +((/ipad|iphone|ipod/.test(j)&&j.match(/ os (\d+).+? like mac os x/))||[,0])[1]
}function g(j){return +(j.match(/android (\d+)/)||[,0])[1]
}return{USER_AGENT:i,supported:function(){var l=this.USER_AGENT.toLowerCase(),n="contentEditable" in d,j=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,k=document.querySelector&&document.querySelectorAll,m=(this.isIos()&&h(l)<5)||(this.isAndroid()&&g(l)<4)||l.indexOf("opera mobi")!==-1||l.indexOf("hpwos/")!==-1;
return n&&j&&k&&!m
},isTouchDevice:function(){return this.supportsEvent("touchmove")
},isIos:function(){var j=this.USER_AGENT.toLowerCase();
return j.indexOf("webkit")!==-1&&j.indexOf("mobile")!==-1
},isAndroid:function(){return this.USER_AGENT.indexOf("Android")!==-1
},supportsSandboxedIframes:function(){return e
},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return !("querySelector" in document)
},displaysCaretInEmptyContentEditableCorrectly:function(){return e
},hasCurrentStyleProperty:function(){return"currentStyle" in d
},hasHistoryIssue:function(){return b
},insertsLineBreaksOnReturn:function(){return b
},supportsPlaceholderAttributeOn:function(j){return"placeholder" in j
},supportsEvent:function(j){return"on"+j in d||(function(){d.setAttribute("on"+j,"return;");
return typeof(d["on"+j])==="function"
})()
},supportsEventsInIframeCorrectly:function(){return !c
},supportsHTML5Tags:function(l){var k=l.createElement("div"),j="<article>foo</article>";
k.innerHTML=j;
return k.innerHTML.toLowerCase()===j
},supportsCommand:(function(){var k={formatBlock:e,insertUnorderedList:e||f,insertOrderedList:e||f};
var j={insertHTML:b};
return function(m,o){var p=k[o];
if(!p){try{return m.queryCommandSupported(o)
}catch(n){}try{return m.queryCommandEnabled(o)
}catch(l){return !!j[o]
}}return false
}
})(),doesAutoLinkingInContentEditable:function(){return e
},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")
},clearsContentEditableCorrectly:function(){return b||c||f
},supportsGetAttributeCorrectly:function(){var j=document.createElement("td");
return j.getAttribute("rowspan")!="1"
},canSelectImagesInContentEditable:function(){return b||e||c
},autoScrollsToCaret:function(){return !f
},autoClosesUnclosedTags:function(){var l=d.cloneNode(false),j,k;
l.innerHTML="<p><div></div>";
k=l.innerHTML.toLowerCase();
j=k==="<p></p><div></div>"||k==="<p><div></div></p>";
this.autoClosesUnclosedTags=function(){return j
};
return j
},supportsNativeGetElementsByClassName:function(){return String(document.getElementsByClassName).indexOf("[native code]")!==-1
},supportsSelectionModify:function(){return"getSelection" in window&&"modify" in window.getSelection()
},needsSpaceAfterLineBreak:function(){return c
},supportsSpeechApiOn:function(j){var k=i.match(/Chrome\/(\d+)/)||[,0];
return k[1]>=11&&("onwebkitspeechchange" in j||"speech" in j)
},crashesWhenDefineProperty:function(j){return e&&(j==="XMLHttpRequest"||j==="XDomainRequest")
},doesAsyncFocus:function(){return e
},hasProblemsSettingCaretAfterImg:function(){return e
},hasUndoInContextMenu:function(){return b||a||c
},hasInsertNodeIssue:function(){return c
},hasIframeFocusIssue:function(){return e
}}
})();
wysihtml5.lang.array=function(a){return{contains:function(d){if(a.indexOf){return a.indexOf(d)!==-1
}else{for(var b=0,c=a.length;
b<c;
b++){if(a[b]===d){return true
}}return false
}},without:function(b){b=wysihtml5.lang.array(b);
var d=[],c=0,e=a.length;
for(;
c<e;
c++){if(!b.contains(a[c])){d.push(a[c])
}}return d
},get:function(){var c=0,d=a.length,b=[];
for(;
c<d;
c++){b.push(a[c])
}return b
}}
};
wysihtml5.lang.Dispatcher=Base.extend({on:function(a,b){this.events=this.events||{};
this.events[a]=this.events[a]||[];
this.events[a].push(b);
return this
},off:function(b,d){this.events=this.events||{};
var c=0,a,e;
if(b){a=this.events[b]||[],e=[];
for(;
c<a.length;
c++){if(a[c]!==d&&d){e.push(a[c])
}}this.events[b]=e
}else{this.events={}
}return this
},fire:function(b,d){this.events=this.events||{};
var a=this.events[b]||[],c=0;
for(;
c<a.length;
c++){a[c].call(this,d)
}return this
},observe:function(){return this.on.apply(this,arguments)
},stopObserving:function(){return this.off.apply(this,arguments)
}});
wysihtml5.lang.object=function(a){return{merge:function(b){for(var c in b){a[c]=b[c]
}return this
},get:function(){return a
},clone:function(){var b={},c;
for(c in a){b[c]=a[c]
}return b
},isArray:function(){return Object.prototype.toString.call(a)==="[object Array]"
}}
};
(function(){var b=/^\s+/,a=/\s+$/;
wysihtml5.lang.string=function(c){c=String(c);
return{trim:function(){return c.replace(b,"").replace(a,"")
},interpolate:function(e){for(var d in e){c=this.replace("#{"+d+"}").by(e[d])
}return c
},replace:function(d){return{by:function(e){return c.split(d).join(e)
}}
}}
}
})();
(function(l){var j=l.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),k=/((https?:\/\/|www\.)[^\s<]{3,})/gi,e=/([^\w\/\-](,?))$/i,c=100,f={")":"(","]":"[","}":"{"};
function b(m){if(i(m)){return m
}if(m===m.ownerDocument.documentElement){m=m.ownerDocument.body
}return a(m)
}function g(m){return m.replace(k,function(p,o){var r=(o.match(e)||[])[1]||"",n=f[r];
o=o.replace(e,"");
if(o.split(n).length>o.split(r).length){o=o+r;
r=""
}var q=o,s=o;
if(o.length>c){s=s.substr(0,c)+"..."
}if(q.substr(0,4)==="www."){q="http://"+q
}return'<a href="'+q+'">'+s+"</a>"+r
})
}function d(n){var m=n._wysihtml5_tempElement;
if(!m){m=n._wysihtml5_tempElement=n.createElement("div")
}return m
}function h(o){var n=o.parentNode,m=d(n.ownerDocument);
m.innerHTML="<span></span>"+g(o.data);
m.removeChild(m.firstChild);
while(m.firstChild){n.insertBefore(m.firstChild,o)
}n.removeChild(o)
}function i(m){var n;
while(m.parentNode){m=m.parentNode;
n=m.nodeName;
if(j.contains(n)){return true
}else{if(n==="body"){return false
}}}return false
}function a(n){if(j.contains(n.nodeName)){return
}if(n.nodeType===l.TEXT_NODE&&n.data.match(k)){h(n);
return
}var p=l.lang.array(n.childNodes).get(),o=p.length,m=0;
for(;
m<o;
m++){a(p[m])
}return n
}l.dom.autoLink=b;
l.dom.autoLink.URL_REG_EXP=k
})(wysihtml5);
(function(b){var a=b.dom;
a.addClass=function(c,d){var e=c.classList;
if(e){return e.add(d)
}if(a.hasClass(c,d)){return
}c.className+=" "+d
};
a.removeClass=function(c,d){var e=c.classList;
if(e){return e.remove(d)
}c.className=c.className.replace(new RegExp("(^|\\s+)"+d+"(\\s+|$)")," ")
};
a.hasClass=function(c,d){var f=c.classList;
if(f){return f.contains(d)
}var e=c.className;
return(e.length>0&&(e==d||new RegExp("(^|\\s)"+d+"(\\s|$)").test(e)))
}
})(wysihtml5);
wysihtml5.dom.contains=(function(){var a=document.documentElement;
if(a.contains){return function(b,c){if(c.nodeType!==wysihtml5.ELEMENT_NODE){c=c.parentNode
}return b!==c&&b.contains(c)
}
}else{if(a.compareDocumentPosition){return function(b,c){return !!(b.compareDocumentPosition(c)&16)
}
}}})();
wysihtml5.dom.convertToList=(function(){function b(f,e){var d=f.createElement("li");
e.appendChild(d);
return d
}function c(e,d){return e.createElement(d)
}function a(f,n){if(f.nodeName==="UL"||f.nodeName==="OL"||f.nodeName==="MENU"){return f
}var p=f.ownerDocument,k=c(p,n),l=f.querySelectorAll("br"),j=l.length,r,q,d,m,h,s,g,o,e;
for(e=0;
e<j;
e++){m=l[e];
while((h=m.parentNode)&&h!==f&&h.lastChild===m){if(wysihtml5.dom.getStyle("display").from(h)==="block"){h.removeChild(m);
break
}wysihtml5.dom.insert(m).after(m.parentNode)
}}r=wysihtml5.lang.array(f.childNodes).get();
q=r.length;
for(e=0;
e<q;
e++){o=o||b(p,k);
d=r[e];
s=wysihtml5.dom.getStyle("display").from(d)==="block";
g=d.nodeName==="BR";
if(s){o=o.firstChild?b(p,k):o;
o.appendChild(d);
o=null;
continue
}if(g){o=o.firstChild?null:o;
continue
}o.appendChild(d)
}if(r.length===0){b(p,k)
}f.parentNode.replaceChild(k,f);
return k
}return a
})();
wysihtml5.dom.copyAttributes=function(a){return{from:function(b){return{to:function(c){var f,d=0,e=a.length;
for(;
d<e;
d++){f=a[d];
if(typeof(b[f])!=="undefined"&&b[f]!==""){c[f]=b[f]
}}return{andTo:arguments.callee}
}}
}}
};
(function(b){var d=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"];
var c=function(e){if(a(e)){return parseInt(b.getStyle("width").from(e),10)<e.offsetWidth
}return false
};
var a=function(f){var e=0,g=d.length;
for(;
e<g;
e++){if(b.getStyle(d[e]).from(f)==="border-box"){return d[e]
}}};
b.copyStyles=function(e){return{from:function(g){if(c(g)){e=wysihtml5.lang.array(e).without(d)
}var h="",j=e.length,f=0,k;
for(;
f<j;
f++){k=e[f];
h+=k+":"+b.getStyle(k).from(g)+";"
}return{to:function(i){b.setStyles(h).on(i);
return{andTo:arguments.callee}
}}
}}
}
})(wysihtml5.dom);
(function(a){a.dom.delegate=function(c,b,d,e){return a.dom.observe(c,d,function(g){var h=g.target,f=a.lang.array(c.querySelectorAll(b));
while(h&&h!==c){if(f.contains(h)){e.call(h,g);
break
}h=h.parentNode
}})
}
})(wysihtml5);
wysihtml5.dom.getAsDom=(function(){var a=function(g,f){var d=f.createElement("div");
d.style.display="none";
f.body.appendChild(d);
try{d.innerHTML=g
}catch(h){}f.body.removeChild(d);
return d
};
var c=function(e){if(e._wysihtml5_supportsHTML5Tags){return
}for(var d=0,f=b.length;
d<f;
d++){e.createElement(b[d])
}e._wysihtml5_supportsHTML5Tags=true
};
var b=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];
return function(f,e){e=e||document;
var d;
if(typeof(f)==="object"&&f.nodeType){d=e.createElement("div");
d.appendChild(f)
}else{if(wysihtml5.browser.supportsHTML5Tags(e)){d=e.createElement("div");
d.innerHTML=f
}else{c(e);
d=a(f,e)
}}return d
}
})();
wysihtml5.dom.getParentElement=(function(){function a(g,f){if(!f||!f.length){return true
}if(typeof(f)==="string"){return g===f
}else{return wysihtml5.lang.array(f).contains(g)
}}function c(f){return f.nodeType===wysihtml5.ELEMENT_NODE
}function b(f,g,h){var i=(f.className||"").match(h)||[];
if(!g){return !!i.length
}return i[i.length-1]===g
}function e(f,h,g){while(g--&&f&&f.nodeName!=="BODY"){if(a(f.nodeName,h)){return f
}f=f.parentNode
}return null
}function d(g,j,f,i,h){while(h--&&g&&g.nodeName!=="BODY"){if(c(g)&&a(g.nodeName,j)&&b(g,f,i)){return g
}g=g.parentNode
}return null
}return function(g,f,h){h=h||50;
if(f.className||f.classRegExp){return d(g,f.nodeName,f.className,f.classRegExp,h)
}else{return e(g,f.nodeName,h)
}}
})();
wysihtml5.dom.getStyle=(function(){var b={"float":("styleFloat" in document.createElement("div").style)?"styleFloat":"cssFloat"},c=/\-[a-z]/g;
function a(d){return d.replace(c,function(e){return e.charAt(1).toUpperCase()
})
}return function(d){return{from:function(j){if(j.nodeType!==wysihtml5.ELEMENT_NODE){return
}var o=j.ownerDocument,k=b[d]||a(d),g=j.style,h=j.currentStyle,p=g[k];
if(p){return p
}if(h){try{return h[k]
}catch(m){}}var l=o.defaultView||o.parentWindow,n=(d==="height"||d==="width")&&j.nodeName==="TEXTAREA",i,f;
if(l.getComputedStyle){if(n){i=g.overflow;
g.overflow="hidden"
}f=l.getComputedStyle(j,null).getPropertyValue(d);
if(n){g.overflow=i||""
}return f
}}}
}
})();
wysihtml5.dom.hasElementWithTagName=(function(){var c={},b=1;
function a(d){return d._wysihtml5_identifier||(d._wysihtml5_identifier=b++)
}return function(f,e){var d=a(f)+":"+e,g=c[d];
if(!g){g=c[d]=f.getElementsByTagName(e)
}return g.length>0
}
})();
(function(d){var c={},b=1;
function a(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=b++)
}d.dom.hasElementWithClassName=function(g,f){if(!d.browser.supportsNativeGetElementsByClassName()){return !!g.querySelector("."+f)
}var e=a(g)+":"+f,h=c[e];
if(!h){h=c[e]=g.getElementsByClassName(f)
}return h.length>0
}
})(wysihtml5);
wysihtml5.dom.insert=function(a){return{after:function(b){b.parentNode.insertBefore(a,b.nextSibling)
},before:function(b){b.parentNode.insertBefore(a,b)
},into:function(b){b.appendChild(a)
}}
};
wysihtml5.dom.insertCSS=function(a){a=a.join("\n");
return{into:function(e){var b=e.createElement("style");
b.type="text/css";
if(b.styleSheet){b.styleSheet.cssText=a
}else{b.appendChild(e.createTextNode(a))
}var d=e.querySelector("head link");
if(d){d.parentNode.insertBefore(b,d);
return
}else{var c=e.querySelector("head");
if(c){c.appendChild(b)
}}}}
};
wysihtml5.dom.observe=function(c,g,d){g=typeof(g)==="string"?[g]:g;
var f,a,b=0,e=g.length;
for(;
b<e;
b++){a=g[b];
if(c.addEventListener){c.addEventListener(a,d,false)
}else{f=function(h){if(!("target" in h)){h.target=h.srcElement
}h.preventDefault=h.preventDefault||function(){this.returnValue=false
};
h.stopPropagation=h.stopPropagation||function(){this.cancelBubble=true
};
d.call(c,h)
};
c.attachEvent("on"+a,f)
}}return{stop:function(){var h,j=0,k=g.length;
for(;
j<k;
j++){h=g[j];
if(c.removeEventListener){c.removeEventListener(h,d,false)
}else{c.detachEvent("on"+h,f)
}}}}
};
wysihtml5.dom.parse=(function(){var a={"1":e,"3":l},o="span",g=/\s+/,j={tags:{},classes:{}},n={};
function d(u,x,p,r){wysihtml5.lang.object(n).merge(j).merge(x).get();
p=p||u.ownerDocument||document;
var t=p.createDocumentFragment(),q=typeof(u)==="string",s,w,v;
if(q){s=wysihtml5.dom.getAsDom(u,p)
}else{s=u
}while(s.firstChild){v=s.firstChild;
s.removeChild(v);
w=f(v,r);
if(w){t.appendChild(w)
}}s.innerHTML="";
s.appendChild(t);
return q?wysihtml5.quirks.getCorrectInnerHTML(s):s
}function f(r,q){var w=r.nodeType,v=r.childNodes,u=v.length,p=a[w],s=0,y,x,t;
y=p&&p(r);
if(!y){return null
}for(s=0;
s<u;
s++){t=f(v[s],q);
if(t){y.appendChild(t)
}}x=n.tags[r.nodeName.toLowerCase()];
if(x&&x.callback){x.callback(y)
}if(q&&y.childNodes.length<=1&&y.nodeName.toLowerCase()===o&&!y.attributes.length){return y.firstChild
}return y
}function e(t){var s,r,q=n.tags,u=t.nodeName.toLowerCase(),p=t.scopeName;
if(t._wysihtml5){return null
}t._wysihtml5=1;
if(t.className==="wysihtml5-temp"){return null
}if(p&&p!="HTML"){u=p+":"+u
}if("outerHTML" in t){if(!wysihtml5.browser.autoClosesUnclosedTags()&&t.nodeName==="P"&&t.outerHTML.slice(-4).toLowerCase()!=="</p>"){u="div"
}}if(u in q){s=q[u];
if(s.remove){return null
}s=typeof(s)==="string"?{rename_tag:s}:s
}if(!s){s={}
}r=t.ownerDocument.createElement(s.rename_tag||u);
b(t,r,s);
t=null;
return r
}function b(F,p,x){var B={},N=x.set_class,D=x.add_class,I=x.set_attributes,w=x.check_attributes,v=n.classes,H=0,K=[],O=[],t=[],G=[],y,C,s,A,E,M,r;
if(I){B=wysihtml5.lang.object(I).clone()
}if(w){for(E in w){r=h[w[E]];
if(!r){continue
}M=r(i(F,E));
if(typeof(M)==="string"){B[E]=M
}}}if(N){K.push(N)
}if(D){for(E in D){r=k[D[E]];
if(!r){continue
}A=r(i(F,E));
if(typeof(A)==="string"){K.push(A)
}}}v["_wysihtml5-temp-placeholder"]=1;
G=F.getAttribute("class");
if(G){K=K.concat(G.split(g))
}y=K.length;
for(;
H<y;
H++){s=K[H];
O.push(s)
}C=O.length;
while(C--){s=O[C];
if(!wysihtml5.lang.array(t).contains(s)){t.unshift(s)
}}if(t.length){B["class"]=t.join(" ")
}var z=F.attributes;
var q=z.length;
for(H=0;
H<q;
H++){var u=z[H];
if(u){var L=u.name;
if(L!=="style"){B[L]=i(F,L)
}}}for(E in B){try{p.setAttribute(E,B[E])
}catch(J){}}if(B.src){if(typeof(B.width)!=="undefined"){p.setAttribute("width",B.width)
}if(typeof(B.height)!=="undefined"){p.setAttribute("height",B.height)
}}}var m=!wysihtml5.browser.supportsGetAttributeCorrectly();
function i(r,q){q=q.toLowerCase();
var t=r.nodeName;
if(t=="IMG"&&q=="src"&&c(r)===true){return r.src
}else{if(m&&"outerHTML" in r){var s=r.outerHTML.toLowerCase(),p=s.indexOf(" "+q+"=")!=-1;
return p?r.getAttribute(q):null
}else{return r.getAttribute(q)
}}}function c(p){try{return p.complete&&!p.mozMatchesSelector(":-moz-broken")
}catch(q){if(p.complete&&p.readyState==="complete"){return true
}}}function l(p){return p.ownerDocument.createTextNode(p.data)
}var h={url:(function(){var p=/^https?:\/\//i;
return function(q){if(!q||!q.match(p)){return null
}return q.replace(p,function(r){return r.toLowerCase()
})
}
})(),src:(function(){var p=/^(\/|https?:\/\/)/i;
return function(q){if(!q||!q.match(p)){return null
}return q.replace(p,function(r){return r.toLowerCase()
})
}
})(),href:(function(){var p=/^(\/|https?:\/\/|mailto:)/i;
return function(q){if(!q||!q.match(p)){return null
}return q.replace(p,function(r){return r.toLowerCase()
})
}
})(),alt:(function(){var p=/[^ a-z0-9_\-]/gi;
return function(q){if(!q){return""
}return q.replace(p,"")
}
})(),numbers:(function(){var p=/\D/g;
return function(q){q=(q||"").replace(p,"");
return q||null
}
})()};
var k={align_img:(function(){var p={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};
return function(q){return p[String(q).toLowerCase()]
}
})(),align_text:(function(){var p={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};
return function(q){return p[String(q).toLowerCase()]
}
})(),clear_br:(function(){var p={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};
return function(q){return p[String(q).toLowerCase()]
}
})(),size_font:(function(){var p={"1":"wysiwyg-font-size-xx-small","2":"wysiwyg-font-size-small","3":"wysiwyg-font-size-medium","4":"wysiwyg-font-size-large","5":"wysiwyg-font-size-x-large","6":"wysiwyg-font-size-xx-large","7":"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};
return function(q){return p[String(q).charAt(0)]
}
})()};
return d
})();
wysihtml5.dom.removeEmptyTextNodes=function(c){var b,e=wysihtml5.lang.array(c.childNodes).get(),d=e.length,a=0;
for(;
a<d;
a++){b=e[a];
if(b.nodeType===wysihtml5.TEXT_NODE&&b.data===""){b.parentNode.removeChild(b)
}}};
wysihtml5.dom.renameElement=function(a,b){var d=a.ownerDocument.createElement(b),c;
while(c=a.firstChild){d.appendChild(c)
}wysihtml5.dom.copyAttributes(["align","className"]).from(a).to(d);
a.parentNode.replaceChild(d,a);
return d
};
wysihtml5.dom.replaceWithChildNodes=function(b){if(!b.parentNode){return
}if(!b.firstChild){b.parentNode.removeChild(b);
return
}var a=b.ownerDocument.createDocumentFragment();
while(b.firstChild){a.appendChild(b.firstChild)
}b.parentNode.replaceChild(a,b);
b=a=null
};
(function(e){function c(f){return e.getStyle("display").from(f)==="block"
}function d(f){return f.nodeName==="BR"
}function b(g){var f=g.ownerDocument.createElement("br");
g.appendChild(f)
}function a(l,o){if(!l.nodeName.match(/^(MENU|UL|OL)$/)){return
}var p=l.ownerDocument,m=p.createDocumentFragment(),g=l.previousElementSibling||l.previousSibling,n,h,i,j,k,f;
if(o){if(g&&!c(g)){b(m)
}while(f=(l.firstElementChild||l.firstChild)){h=f.lastChild;
while(n=f.firstChild){i=n===h;
j=i&&!c(n)&&!d(n);
m.appendChild(n);
if(j){b(m)
}}f.parentNode.removeChild(f)
}}else{while(f=(l.firstElementChild||l.firstChild)){if(f.querySelector&&f.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6")){while(n=f.firstChild){m.appendChild(n)
}}else{k=p.createElement("p");
while(n=f.firstChild){k.appendChild(n)
}m.appendChild(k)
}f.parentNode.removeChild(f)
}}l.parentNode.replaceChild(m,l)
}e.resolveList=a
})(wysihtml5.dom);
(function(e){var d=document,c=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],b=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],a=["referrer","write","open","close"];
e.dom.Sandbox=Base.extend({constructor:function(g,f){this.callback=g||e.EMPTY_FUNCTION;
this.config=e.lang.object({}).merge(f).get();
this.iframe=this._createIframe()
},insertInto:function(f){if(typeof(f)==="string"){f=d.getElementById(f)
}f.appendChild(this.iframe)
},getIframe:function(){return this.iframe
},getWindow:function(){this._readyError()
},getDocument:function(){this._readyError()
},destroy:function(){var f=this.getIframe();
f.parentNode.removeChild(f)
},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")
},_createIframe:function(){var g=this,h=g.config.iframeSrc,f=d.createElement("iframe");
f.className="wysihtml5-sandbox";
e.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(f);
if(h){f.src=h
}else{if(e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()){f.src="javascript:'<html></html>'"
}}f.onload=function(){f.onreadystatechange=f.onload=null;
g._onLoadIframe(f,!!h)
};
f.onreadystatechange=function(){if(/loaded|complete/.test(f.readyState)){f.onreadystatechange=f.onload=null;
g._onLoadIframe(f,!!h)
}};
return f
},_onLoadIframe:function(j,h){if(!e.dom.contains(d.documentElement,j)){return
}var l=this,f=j.contentWindow,m=j.contentWindow.document;
if(!h){m.open("text/html","replace");
m.write(this.config.iframeHtml||this._getHtml({charset:d.characterSet||d.charset||"utf-8",stylesheets:this.config.stylesheets}));
m.close()
}this.getWindow=function(){return j.contentWindow
};
this.getDocument=function(){return j.contentWindow.document
};
f.onerror=function(n,o,i){throw new Error("wysihtml5.Sandbox: "+n,o,i)
};
if(!e.browser.supportsSandboxedIframes()){var g,k;
for(g=0,k=c.length;
g<k;
g++){this._unset(f,c[g])
}for(g=0,k=b.length;
g<k;
g++){this._unset(f,b[g],e.EMPTY_FUNCTION)
}for(g=0,k=a.length;
g<k;
g++){this._unset(m,a[g])
}this._unset(m,"cookie","",true)
}this.loaded=true;
setTimeout(function(){l.callback(l)
},0)
},_getHtml:function(j){var k=j.stylesheets,g="",f=0,h;
k=typeof(k)==="string"?[k]:k;
if(k){h=k.length;
for(;
f<h;
f++){g+='<link rel="stylesheet" href="'+k[f]+'">'
}}j.stylesheets=g;
return e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(j)
},_unset:function(g,i,h,k){try{g[i]=h
}catch(j){}try{g.__defineGetter__(i,function(){return h
})
}catch(j){}if(k){try{g.__defineSetter__(i,function(){})
}catch(j){}}if(!e.browser.crashesWhenDefineProperty(i)){try{var f={get:function(){return h
}};
if(k){f.set=function(){}
}Object.defineProperty(g,i,f)
}catch(j){}}}})
})(wysihtml5);
(function(){var a={className:"class"};
wysihtml5.dom.setAttributes=function(b){return{on:function(d){for(var c in b){d.setAttribute(a[c]||c,b[c])
}}}
}
})();
wysihtml5.dom.setStyles=function(a){return{on:function(c){var d=c.style;
if(typeof(a)==="string"){d.cssText+=";"+a;
return
}for(var b in a){if(b==="float"){d.cssFloat=a[b];
d.styleFloat=a[b]
}else{d[b]=a[b]
}}}}
};
(function(a){a.simulatePlaceholder=function(d,b,c){var e="placeholder",f=function(){if(b.hasPlaceholderSet()){b.clear()
}b.placeholderSet=false;
a.removeClass(b.element,e)
},g=function(){if(b.isEmpty()){b.placeholderSet=true;
b.setValue(c);
a.addClass(b.element,e)
}};
d.on("set_placeholder",g).on("unset_placeholder",f).on("focus:composer",f).on("paste:composer",f).on("blur:composer",g);
g()
}
})(wysihtml5.dom);
(function(b){var a=document.documentElement;
if("textContent" in a){b.setTextContent=function(c,d){c.textContent=d
};
b.getTextContent=function(c){return c.textContent
}
}else{if("innerText" in a){b.setTextContent=function(c,d){c.innerText=d
};
b.getTextContent=function(c){return c.innerText
}
}else{b.setTextContent=function(c,d){c.nodeValue=d
};
b.getTextContent=function(c){return c.nodeValue
}
}}})(wysihtml5.dom);
wysihtml5.quirks.cleanPastedHTML=(function(){var a={"a u":wysihtml5.dom.replaceWithChildNodes};
function b(l,m,d){m=m||a;
d=d||l.ownerDocument||document;
var h,e=typeof(l)==="string",c,k,n,g,f=0;
if(e){h=wysihtml5.dom.getAsDom(l,d)
}else{h=l
}for(g in m){k=h.querySelectorAll(g);
c=m[g];
n=k.length;
for(;
f<n;
f++){c(k[f])
}}k=l=m=null;
return e?h.innerHTML:h
}return b
})();
wysihtml5.quirks.ensureProperClearing=(function(){var a=function(){var b=this;
setTimeout(function(){var c=b.innerHTML.toLowerCase();
if(c=="<p>&nbsp;</p>"||c=="<p>&nbsp;</p><p>&nbsp;</p>"){b.innerHTML=""
}},0)
};
return function(b){wysihtml5.dom.observe(b.element,["cut","keydown"],a)
}
})();
(function(b){var a="%7E";
b.quirks.getCorrectInnerHTML=function(e){var j=e.innerHTML;
if(j.indexOf(a)===-1){return j
}var g=e.querySelectorAll("[href*='~'], [src*='~']"),c,h,f,d;
for(d=0,f=g.length;
d<f;
d++){c=g[d].href||g[d].src;
h=b.lang.string(c).replace("~").by(a);
j=b.lang.string(j).replace(h).by(c)
}return j
}
})(wysihtml5);
(function(b){var a="wysihtml5-quirks-redraw";
b.quirks.redraw=function(c){b.dom.addClass(c,a);
b.dom.removeClass(c,a);
try{var f=c.ownerDocument;
f.execCommand("italic",false,null);
f.execCommand("italic",false,null)
}catch(d){}}
})(wysihtml5);
(function(c){var b=c.dom;
function a(d){var e=0;
if(d.parentNode){do{e+=d.offsetTop||0;
d=d.offsetParent
}while(d)
}return e
}c.Selection=Base.extend({constructor:function(d){window.rangy.init();
this.editor=d;
this.composer=d.composer;
this.doc=this.composer.doc
},getBookmark:function(){var d=this.getRange();
return d&&d.cloneRange()
},setBookmark:function(d){if(!d){return
}this.setSelection(d)
},setBefore:function(e){var d=rangy.createRange(this.doc);
d.setStartBefore(e);
d.setEndBefore(e);
return this.setSelection(d)
},setAfter:function(e){var d=rangy.createRange(this.doc);
d.setStartAfter(e);
d.setEndAfter(e);
return this.setSelection(d)
},selectNode:function(d,k){var g=rangy.createRange(this.doc),j=d.nodeType===c.ELEMENT_NODE,m="canHaveHTML" in d?d.canHaveHTML:(d.nodeName!=="IMG"),i=j?d.innerHTML:d.data,f=(i===""||i===c.INVISIBLE_SPACE),l=b.getStyle("display").from(d),n=(l==="block"||l==="list-item");
if(f&&j&&m&&!k){try{d.innerHTML=c.INVISIBLE_SPACE
}catch(h){}}if(m){g.selectNodeContents(d)
}else{g.selectNode(d)
}if(m&&f&&j){g.collapse(n)
}else{if(m&&f){g.setStartAfter(d);
g.setEndAfter(d)
}}this.setSelection(g)
},getSelectedNode:function(e){var f,d;
if(e&&this.doc.selection&&this.doc.selection.type==="Control"){d=this.doc.selection.createRange();
if(d&&d.length){return d.item(0)
}}f=this.getSelection(this.doc);
if(f.focusNode===f.anchorNode){return f.focusNode
}else{d=this.getRange(this.doc);
return d?d.commonAncestorContainer:this.doc.body
}},executeAndRestore:function(f,s){var m=this.doc.body,j=s&&m.scrollTop,n=s&&m.scrollLeft,p="_wysihtml5-temp-placeholder",k='<span class="'+p+'">'+c.INVISIBLE_SPACE+"</span>",l=this.getRange(this.doc),d,g,i,h,r;
if(!l){f(m,m);
return
}if(c.browser.hasInsertNodeIssue()){this.doc.execCommand("insertHTML",false,k)
}else{h=l.createContextualFragment(k);
l.insertNode(h)
}try{f(l.startContainer,l.endContainer)
}catch(o){setTimeout(function(){throw o
},0)
}d=this.doc.querySelector("."+p);
if(d){r=rangy.createRange(this.doc);
i=d.nextSibling;
if(c.browser.hasInsertNodeIssue()&&i&&i.nodeName==="BR"){g=this.doc.createTextNode(c.INVISIBLE_SPACE);
b.insert(g).after(d);
r.setStartBefore(g);
r.setEndBefore(g)
}else{r.selectNode(d);
r.deleteContents()
}this.setSelection(r)
}else{m.focus()
}if(s){m.scrollTop=j;
m.scrollLeft=n
}try{d.parentNode.removeChild(d)
}catch(q){}},executeAndRestoreSimple:function(d){var h=this.getRange(),i=this.doc.body,p,f,g,l,j;
if(!h){d(i,i);
return
}l=h.getNodes([3]);
f=l[0]||h.startContainer;
g=l[l.length-1]||h.endContainer;
j={collapsed:h.collapsed,startContainer:f,startOffset:f===h.startContainer?h.startOffset:0,endContainer:g,endOffset:g===h.endContainer?h.endOffset:g.length};
try{d(h.startContainer,h.endContainer)
}catch(k){setTimeout(function(){throw k
},0)
}p=rangy.createRange(this.doc);
try{p.setStart(j.startContainer,j.startOffset)
}catch(o){}try{p.setEnd(j.endContainer,j.endOffset)
}catch(n){}try{this.setSelection(p)
}catch(m){}},set:function(e,f){var d=rangy.createRange(this.doc);
d.setStart(e,f||0);
this.setSelection(d)
},insertHTML:function(e){var d=rangy.createRange(this.doc),g=d.createContextualFragment(e),f=g.lastChild;
this.insertNode(g);
if(f){this.setAfter(f)
}},insertNode:function(e){var d=this.getRange();
if(d){d.insertNode(e)
}},surround:function(f){var d=this.getRange();
if(!d){return
}try{d.surroundContents(f);
this.selectNode(f)
}catch(g){f.appendChild(d.extractContents());
d.insertNode(f)
}},scrollIntoView:function(){var h=this.doc,e=5,g=h.documentElement.scrollHeight>h.documentElement.offsetHeight,d=h._wysihtml5ScrollIntoViewElement=h._wysihtml5ScrollIntoViewElement||(function(){var i=h.createElement("span");
i.innerHTML=c.INVISIBLE_SPACE;
return i
})(),f;
if(g){this.insertNode(d);
f=a(d);
d.parentNode.removeChild(d);
if(f>=(h.body.scrollTop+h.documentElement.offsetHeight-e)){h.body.scrollTop=f
}}},selectLine:function(){if(c.browser.supportsSelectionModify()){this._selectLine_W3C()
}else{if(this.doc.selection){this._selectLine_MSIE()
}}},_selectLine_W3C:function(){var e=this.doc.defaultView,d=e.getSelection();
d.modify("extend","left","lineboundary");
d.modify("extend","right","lineboundary")
},_selectLine_MSIE:function(){var l=this.doc.selection.createRange(),h=l.boundingTop,k=this.doc.body.scrollWidth,e,d,m,g,f;
if(!l.moveToPoint){return
}if(h===0){m=this.doc.createElement("span");
this.insertNode(m);
h=m.offsetTop;
m.parentNode.removeChild(m)
}h+=1;
for(g=-10;
g<k;
g+=2){try{l.moveToPoint(g,h);
break
}catch(o){}}e=h;
d=this.doc.selection.createRange();
for(f=k;
f>=0;
f--){try{d.moveToPoint(f,e);
break
}catch(n){}}l.setEndPoint("EndToEnd",d);
l.select()
},getText:function(){var d=this.getSelection();
return d?d.toString():""
},getNodes:function(d,f){var e=this.getRange();
if(e){return e.getNodes([d],f)
}else{return[]
}},getRange:function(){try{var e=this.getSelection();
return e&&e.rangeCount&&e.getRangeAt(0)
}catch(d){return false
}},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)
},setSelection:function(d){var f=this.doc.defaultView||this.doc.parentWindow,e=rangy.getSelection(f);
return e.setSingleRange(d)
}})
})(wysihtml5);
(function(n,j){var h="span";
var f=/\s+/g;
function d(q,o,p){if(!q.className){return false
}var r=q.className.match(p)||[];
return r[r.length-1]===o
}function i(q,o,p){if(q.className){l(q,p);
q.className+=" "+o
}else{q.className=o
}}function l(p,o){if(p.className){p.className=p.className.replace(o,"")
}}function m(p,o){return p.className.replace(f," ")==o.className.replace(f," ")
}function a(p){var o=p.parentNode;
while(p.firstChild){o.insertBefore(p.firstChild,p)
}o.removeChild(p)
}function e(u,s){if(u.attributes.length!=s.attributes.length){return false
}for(var t=0,o=u.attributes.length,r,p,q;
t<o;
++t){r=u.attributes[t];
q=r.name;
if(q!="class"){p=s.attributes.getNamedItem(q);
if(r.specified!=p.specified){return false
}if(r.specified&&r.nodeValue!==p.nodeValue){return false
}}}return true
}function c(o,p){if(j.dom.isCharacterDataNode(o)){if(p==0){return !!o.previousSibling
}else{if(p==o.length){return !!o.nextSibling
}else{return true
}}}return p>0&&p<o.childNodes.length
}function b(r,p,q){var o;
if(j.dom.isCharacterDataNode(p)){if(q==0){q=j.dom.getNodeIndex(p);
p=p.parentNode
}else{if(q==p.length){q=j.dom.getNodeIndex(p)+1;
p=p.parentNode
}else{o=j.dom.splitDataNode(p,q)
}}}if(!o){o=p.cloneNode(false);
if(o.id){o.removeAttribute("id")
}var s;
while((s=p.childNodes[q])){o.appendChild(s)
}j.dom.insertAfter(o,p)
}return(p==r)?o:b(r,o.parentNode,j.dom.getNodeIndex(o))
}function g(o){this.isElementMerge=(o.nodeType==n.ELEMENT_NODE);
this.firstTextNode=this.isElementMerge?o.lastChild:o;
this.textNodes=[this.firstTextNode]
}g.prototype={doMerge:function(){var t=[],s,q,r;
for(var p=0,o=this.textNodes.length;
p<o;
++p){s=this.textNodes[p];
q=s.parentNode;
t[p]=s.data;
if(p){q.removeChild(s);
if(!q.hasChildNodes()){q.parentNode.removeChild(q)
}}}this.firstTextNode.data=r=t.join("");
return r
},getLength:function(){var p=this.textNodes.length,o=0;
while(p--){o+=this.textNodes[p].length
}return o
},toString:function(){var q=[];
for(var p=0,o=this.textNodes.length;
p<o;
++p){q[p]="'"+this.textNodes[p].data+"'"
}return"[Merge("+q.join(",")+")]"
}};
function k(o,q,p,r){this.tagNames=o||[h];
this.cssClass=q||"";
this.similarClassRegExp=p;
this.normalize=r;
this.applyToAnyTagName=false
}k.prototype={getAncestorWithClass:function(p){var o;
while(p){o=this.cssClass?d(p,this.cssClass,this.similarClassRegExp):true;
if(p.nodeType==n.ELEMENT_NODE&&j.dom.arrayContains(this.tagNames,p.tagName.toLowerCase())&&o){return p
}p=p.parentNode
}return false
},postApply:function(A,w){var o=A[0],p=A[A.length-1];
var r=[],B;
var t=o,q=p;
var y=0,C=p.length;
var s,v;
for(var u=0,x=A.length;
u<x;
++u){s=A[u];
v=this.getAdjacentMergeableTextNode(s.parentNode,false);
if(v){if(!B){B=new g(v);
r.push(B)
}B.textNodes.push(s);
if(s===o){t=B.firstTextNode;
y=t.length
}if(s===p){q=B.firstTextNode;
C=B.getLength()
}}else{B=null
}}var z=this.getAdjacentMergeableTextNode(p.parentNode,true);
if(z){if(!B){B=new g(p);
r.push(B)
}B.textNodes.push(z)
}if(r.length){for(u=0,x=r.length;
u<x;
++u){r[u].doMerge()
}w.setStart(t,y);
w.setEnd(q,C)
}},getAdjacentMergeableTextNode:function(q,o){var s=(q.nodeType==n.TEXT_NODE);
var p=s?q.parentNode:q;
var t;
var r=o?"nextSibling":"previousSibling";
if(s){t=q[r];
if(t&&t.nodeType==n.TEXT_NODE){return t
}}else{t=p[r];
if(t&&this.areElementsMergeable(q,t)){return t[o?"firstChild":"lastChild"]
}}return null
},areElementsMergeable:function(p,o){return j.dom.arrayContains(this.tagNames,(p.tagName||"").toLowerCase())&&j.dom.arrayContains(this.tagNames,(o.tagName||"").toLowerCase())&&m(p,o)&&e(p,o)
},createContainer:function(p){var o=p.createElement(this.tagNames[0]);
if(this.cssClass){o.className=this.cssClass
}return o
},applyToTextNode:function(q){var p=q.parentNode;
if(p.childNodes.length==1&&j.dom.arrayContains(this.tagNames,p.tagName.toLowerCase())){if(this.cssClass){i(p,this.cssClass,this.similarClassRegExp)
}}else{var o=this.createContainer(j.dom.getDocument(q));
q.parentNode.insertBefore(o,q);
o.appendChild(q)
}},isRemovable:function(o){return j.dom.arrayContains(this.tagNames,o.tagName.toLowerCase())&&n.lang.string(o.className).trim()==this.cssClass
},undoToTextNode:function(r,p,q){if(!p.containsNode(q)){var o=p.cloneRange();
o.selectNode(q);
if(o.isPointInRange(p.endContainer,p.endOffset)&&c(p.endContainer,p.endOffset)){b(q,p.endContainer,p.endOffset);
p.setEndAfter(q)
}if(o.isPointInRange(p.startContainer,p.startOffset)&&c(p.startContainer,p.startOffset)){q=b(q,p.startContainer,p.startOffset)
}}if(this.similarClassRegExp){l(q,this.similarClassRegExp)
}if(this.isRemovable(q)){a(q)
}},applyToRange:function(p){var s=p.getNodes([n.TEXT_NODE]);
if(!s.length){try{var r=this.createContainer(p.endContainer.ownerDocument);
p.surroundContents(r);
this.selectNode(p,r);
return
}catch(t){}}p.splitBoundaries();
s=p.getNodes([n.TEXT_NODE]);
if(s.length){var u;
for(var q=0,o=s.length;
q<o;
++q){u=s[q];
if(!this.getAncestorWithClass(u)){this.applyToTextNode(u)
}}p.setStart(s[0],0);
u=s[s.length-1];
p.setEnd(u,u.length);
if(this.normalize){this.postApply(s,p)
}}},undoToRange:function(p){var s=p.getNodes([n.TEXT_NODE]),v,t;
if(s.length){p.splitBoundaries();
s=p.getNodes([n.TEXT_NODE])
}else{var u=p.endContainer.ownerDocument,r=u.createTextNode(n.INVISIBLE_SPACE);
p.insertNode(r);
p.selectNode(r);
s=[r]
}for(var q=0,o=s.length;
q<o;
++q){v=s[q];
t=this.getAncestorWithClass(v);
if(t){this.undoToTextNode(v,p,t)
}}if(o==1){this.selectNode(p,s[0])
}else{p.setStart(s[0],0);
v=s[s.length-1];
p.setEnd(v,v.length);
if(this.normalize){this.postApply(s,p)
}}},selectNode:function(p,s){var r=s.nodeType===n.ELEMENT_NODE,o="canHaveHTML" in s?s.canHaveHTML:true,q=r?s.innerHTML:s.data,u=(q===""||q===n.INVISIBLE_SPACE);
if(u&&r&&o){try{s.innerHTML=n.INVISIBLE_SPACE
}catch(t){}}p.selectNodeContents(s);
if(u&&r){p.collapse(false)
}else{if(u){p.setStartAfter(s);
p.setEndAfter(s)
}}},getTextSelectedByRange:function(s,o){var p=o.cloneRange();
p.selectNodeContents(s);
var q=p.intersection(o);
var r=q?q.toString():"";
p.detach();
return r
},isAppliedToRange:function(p){var s=[],r,t=p.getNodes([n.TEXT_NODE]);
if(!t.length){r=this.getAncestorWithClass(p.startContainer);
return r?[r]:false
}for(var q=0,o=t.length,u;
q<o;
++q){u=this.getTextSelectedByRange(t[q],p);
r=this.getAncestorWithClass(t[q]);
if(u!=""&&!r){return false
}else{s.push(r)
}}return s
},toggleRange:function(o){if(this.isAppliedToRange(o)){this.undoToRange(o)
}else{this.applyToRange(o)
}}};
n.selection.HTMLApplier=k
})(wysihtml5,rangy);
wysihtml5.Commands=Base.extend({constructor:function(a){this.editor=a;
this.composer=a.composer;
this.doc=this.composer.doc
},support:function(a){return wysihtml5.browser.supportsCommand(this.doc,a)
},exec:function(g,c){var f=wysihtml5.commands[g],b=wysihtml5.lang.array(arguments).get(),h=f&&f.exec,a=null;
this.editor.fire("beforecommand:composer");
if(h){b.unshift(this.composer);
a=h.apply(f,b)
}else{try{a=this.doc.execCommand(g,false,c)
}catch(d){}}this.editor.fire("aftercommand:composer");
return a
},state:function(f,a){var d=wysihtml5.commands[f],b=wysihtml5.lang.array(arguments).get(),g=d&&d.state;
if(g){b.unshift(this.composer);
return g.apply(d,b)
}else{try{return this.doc.queryCommandState(f)
}catch(c){return false
}}}});
wysihtml5.commands.bold={exec:function(a,b){return wysihtml5.commands.formatInline.exec(a,b,"b")
},state:function(a,b){return wysihtml5.commands.formatInline.state(a,b,"b")
}};
(function(f){var d,c="A",e=f.dom;
function a(h,n){var m=n.length,j=0,g,l,k;
for(;
j<m;
j++){g=n[j];
l=e.getParentElement(g,{nodeName:"code"});
k=e.getTextContent(g);
if(k.match(e.autoLink.URL_REG_EXP)&&!l){l=e.renameElement(g,"code")
}else{e.replaceWithChildNodes(g)
}}}function b(g,m){var u=g.doc,r="_wysihtml5-temp-"+(+new Date()),w=/non-matching-class/g,q=0,k,h,p,t,o,n,s,v,l;
f.commands.formatInline.exec(g,d,c,r,w);
h=u.querySelectorAll(c+"."+r);
k=h.length;
for(;
q<k;
q++){p=h[q];
p.removeAttribute("class");
for(l in m){p.setAttribute(l,m[l])
}}n=p;
if(k===1){s=e.getTextContent(p);
t=!!p.querySelector("*");
o=s===""||s===f.INVISIBLE_SPACE;
if(!t&&o){e.setTextContent(p,m.text||p.href);
v=u.createTextNode(" ");
g.selection.setAfter(p);
g.selection.insertNode(v);
n=v
}}g.selection.setAfter(n)
}f.commands.createLink={exec:function(g,j,i){var h=this.state(g,j);
if(h){g.selection.executeAndRestore(function(){a(g,h)
})
}else{i=typeof(i)==="object"?i:{href:i};
b(g,i)
}},state:function(g,h){return f.commands.formatInline.state(g,h,"A")
}}
})(wysihtml5);
(function(c){var b,a=/wysiwyg-font-size-[0-9a-z\-]+/g;
c.commands.fontSize={exec:function(d,f,e){return c.commands.formatInline.exec(d,f,"span","wysiwyg-font-size-"+e,a)
},state:function(d,f,e){return c.commands.formatInline.state(d,f,"span","wysiwyg-font-size-"+e,a)
},value:function(){return b
}}
})(wysihtml5);
(function(b){var a=/wysiwyg-color-[0-9a-z]+/g;
b.commands.foreColor={exec:function(d,e,c){return b.commands.formatInline.exec(d,e,"span","wysiwyg-color-"+c,a)
},state:function(d,e,c){return b.commands.formatInline.state(d,e,"span","wysiwyg-color-"+c,a)
}}
})(wysihtml5);
(function(p){var f=p.dom,g=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE","DIV"];
function k(q,r,s){if(q.className){a(q,s);
q.className+=" "+r
}else{q.className=r
}}function a(q,r){q.className=q.className.replace(r,"")
}function m(q){return q.nodeType===p.TEXT_NODE&&!p.lang.string(q.data).trim()
}function b(r){var q=r.previousSibling;
while(q&&m(q)){q=q.previousSibling
}return q
}function n(q){var r=q.nextSibling;
while(r&&m(r)){r=r.nextSibling
}return r
}function c(r){var t=r.ownerDocument,s=n(r),q=b(r);
if(s&&!i(s)){r.parentNode.insertBefore(t.createElement("br"),s)
}if(q&&!i(q)){r.parentNode.insertBefore(t.createElement("br"),r)
}}function d(r){var s=n(r),q=b(r);
if(s&&j(s)){s.parentNode.removeChild(s)
}if(q&&j(q)){q.parentNode.removeChild(q)
}}function h(r){var q=r.lastChild;
if(q&&j(q)){q.parentNode.removeChild(q)
}}function j(q){return q.nodeName==="BR"
}function i(q){if(j(q)){return true
}if(f.getStyle("display").from(q)==="block"){return true
}return false
}function l(s,t,u,r){if(r){var q=f.observe(s,"DOMNodeInserted",function(w){var x=w.target,v;
if(x.nodeType!==p.ELEMENT_NODE){return
}v=f.getStyle("display").from(x);
if(v.substr(0,6)!=="inline"){x.className+=" "+r
}})
}s.execCommand(t,false,u);
if(q){q.stop()
}}function e(q,r){q.selection.selectLine();
q.selection.surround(r);
d(r);
h(r);
q.selection.selectNode(r,p.browser.displaysCaretInEmptyContentEditableCorrectly())
}function o(q){return !!p.lang.string(q.className).trim()
}p.commands.formatBlock={exec:function(r,s,w,v,z){var y=r.doc,u=this.state(r,s,w,v,z),x=r.config.useLineBreaks,q=x?"DIV":"P",t;
w=typeof(w)==="string"?w.toUpperCase():w;
if(u){r.selection.executeAndRestoreSimple(function(){if(z){a(u,z)
}var A=o(u);
if(!A&&(x||w==="P")){c(u);
f.replaceWithChildNodes(u)
}else{f.renameElement(u,w==="P"?"DIV":q)
}});
return
}if(w===null||p.lang.array(g).contains(w)){t=r.selection.getSelectedNode();
u=f.getParentElement(t,{nodeName:g});
if(u){r.selection.executeAndRestore(function(){if(w){u=f.renameElement(u,w)
}if(v){k(u,v,z)
}});
return
}}if(r.commands.support(s)){l(y,s,w||q,v);
return
}u=y.createElement(w||q);
if(v){u.className=v
}e(r,u)
},state:function(q,u,v,r,t){v=typeof(v)==="string"?v.toUpperCase():v;
var s=q.selection.getSelectedNode();
return f.getParentElement(s,{nodeName:v,className:r,classRegExp:t})
}}
})(wysihtml5);
(function(e){var c={strong:"b",em:"i",b:"strong",i:"em"},d={};
function b(g){var f=c[g];
return f?[g.toLowerCase(),f.toLowerCase()]:[g.toLowerCase()]
}function a(g,h,i){var f=g+":"+h;
if(!d[f]){d[f]=new e.selection.HTMLApplier(b(g),h,i,true)
}return d[f]
}e.commands.formatInline={exec:function(g,k,h,i,j){var f=g.selection.getRange();
if(!f){return false
}a(h,i,j).toggleRange(f);
g.selection.setSelection(f)
},state:function(g,l,h,i,j){var k=g.doc,m=c[h]||h,f;
if(!e.dom.hasElementWithTagName(k,h)&&!e.dom.hasElementWithTagName(k,m)){return false
}if(i&&!e.dom.hasElementWithClassName(k,i)){return false
}f=g.selection.getRange();
if(!f){return false
}return a(h,i,j).isAppliedToRange(f)
}}
})(wysihtml5);
wysihtml5.commands.insertHTML={exec:function(a,c,b){if(a.commands.support(c)){a.doc.execCommand(c,false,b)
}else{a.selection.insertHTML(b)
}},state:function(){return false
}};
(function(b){var a="IMG";
b.commands.insertImage={exec:function(c,k,f){f=typeof(f)==="object"?f:{src:f};
var h=c.doc,g=this.state(c),j,d,e;
if(g){c.selection.setBefore(g);
e=g.parentNode;
e.removeChild(g);
b.dom.removeEmptyTextNodes(e);
if(e.nodeName==="A"&&!e.firstChild){c.selection.setAfter(e);
e.parentNode.removeChild(e)
}b.quirks.redraw(c.element);
return
}g=h.createElement(a);
for(d in f){if(d==="className"){d="class"
}g.setAttribute(d,f[d])
}c.selection.insertNode(g);
if(b.browser.hasProblemsSettingCaretAfterImg()){j=h.createTextNode(b.INVISIBLE_SPACE);
c.selection.insertNode(j);
c.selection.setAfter(j)
}else{c.selection.setAfter(g)
}},state:function(d){var f=d.doc,e,g,c;
if(!b.dom.hasElementWithTagName(f,a)){return false
}e=d.selection.getSelectedNode();
if(!e){return false
}if(e.nodeName===a){return e
}if(e.nodeType!==b.ELEMENT_NODE){return false
}g=d.selection.getText();
g=b.lang.string(g).trim();
if(g){return false
}c=d.selection.getNodes(b.ELEMENT_NODE,function(h){return h.nodeName==="IMG"
});
if(c.length!==1){return false
}return c[0]
}}
})(wysihtml5);
(function(b){var a="<br>"+(b.browser.needsSpaceAfterLineBreak()?" ":"");
b.commands.insertLineBreak={exec:function(c,d){if(c.commands.support(d)){c.doc.execCommand(d,false,null);
if(!b.browser.autoScrollsToCaret()){c.selection.scrollIntoView()
}}else{c.commands.exec("insertHTML",a)
}},state:function(){return false
}}
})(wysihtml5);
wysihtml5.commands.insertOrderedList={exec:function(a,d){var i=a.doc,f=a.selection.getSelectedNode(),g=wysihtml5.dom.getParentElement(f,{nodeName:"OL"}),h=wysihtml5.dom.getParentElement(f,{nodeName:"UL"}),c="_wysihtml5-temp-"+new Date().getTime(),e,b;
if(!g&&!h&&a.commands.support(d)){i.execCommand(d,false,null);
return
}if(g){a.selection.executeAndRestore(function(){wysihtml5.dom.resolveList(g,a.config.useLineBreaks)
})
}else{if(h){a.selection.executeAndRestore(function(){wysihtml5.dom.renameElement(h,"ol")
})
}else{a.commands.exec("formatBlock","div",c);
b=i.querySelector("."+c);
e=b.innerHTML===""||b.innerHTML===wysihtml5.INVISIBLE_SPACE||b.innerHTML==="<br>";
a.selection.executeAndRestore(function(){g=wysihtml5.dom.convertToList(b,"ol")
});
if(e){a.selection.selectNode(g.querySelector("li"),true)
}}}},state:function(a){var b=a.selection.getSelectedNode();
return wysihtml5.dom.getParentElement(b,{nodeName:"OL"})
}};
wysihtml5.commands.insertUnorderedList={exec:function(a,d){var i=a.doc,f=a.selection.getSelectedNode(),g=wysihtml5.dom.getParentElement(f,{nodeName:"UL"}),h=wysihtml5.dom.getParentElement(f,{nodeName:"OL"}),c="_wysihtml5-temp-"+new Date().getTime(),e,b;
if(!g&&!h&&a.commands.support(d)){i.execCommand(d,false,null);
return
}if(g){a.selection.executeAndRestore(function(){wysihtml5.dom.resolveList(g,a.config.useLineBreaks)
})
}else{if(h){a.selection.executeAndRestore(function(){wysihtml5.dom.renameElement(h,"ul")
})
}else{a.commands.exec("formatBlock","div",c);
b=i.querySelector("."+c);
e=b.innerHTML===""||b.innerHTML===wysihtml5.INVISIBLE_SPACE||b.innerHTML==="<br>";
a.selection.executeAndRestore(function(){g=wysihtml5.dom.convertToList(b,"ul")
});
if(e){a.selection.selectNode(g.querySelector("li"),true)
}}}},state:function(a){var b=a.selection.getSelectedNode();
return wysihtml5.dom.getParentElement(b,{nodeName:"UL"})
}};
wysihtml5.commands.italic={exec:function(a,b){return wysihtml5.commands.formatInline.exec(a,b,"i")
},state:function(a,b){return wysihtml5.commands.formatInline.state(a,b,"i")
}};
(function(c){var b="wysiwyg-text-align-center",a=/wysiwyg-text-align-[0-9a-z]+/g;
c.commands.justifyCenter={exec:function(d,e){return c.commands.formatBlock.exec(d,"formatBlock",null,b,a)
},state:function(d,e){return c.commands.formatBlock.state(d,"formatBlock",null,b,a)
}}
})(wysihtml5);
(function(c){var b="wysiwyg-text-align-left",a=/wysiwyg-text-align-[0-9a-z]+/g;
c.commands.justifyLeft={exec:function(d,e){return c.commands.formatBlock.exec(d,"formatBlock",null,b,a)
},state:function(d,e){return c.commands.formatBlock.state(d,"formatBlock",null,b,a)
}}
})(wysihtml5);
(function(c){var b="wysiwyg-text-align-right",a=/wysiwyg-text-align-[0-9a-z]+/g;
c.commands.justifyRight={exec:function(d,e){return c.commands.formatBlock.exec(d,"formatBlock",null,b,a)
},state:function(d,e){return c.commands.formatBlock.state(d,"formatBlock",null,b,a)
}}
})(wysihtml5);
(function(c){var b="wysiwyg-text-align-justify",a=/wysiwyg-text-align-[0-9a-z]+/g;
c.commands.justifyFull={exec:function(d,e){return c.commands.formatBlock.exec(d,"formatBlock",null,b,a)
},state:function(d,e){return c.commands.formatBlock.state(d,"formatBlock",null,b,a)
}}
})(wysihtml5);
wysihtml5.commands.redo={exec:function(a){return a.undoManager.redo()
},state:function(a){return false
}};
wysihtml5.commands.underline={exec:function(a,b){return wysihtml5.commands.formatInline.exec(a,b,"u")
},state:function(a,b){return wysihtml5.commands.formatInline.state(a,b,"u")
}};
wysihtml5.commands.undo={exec:function(a){return a.undoManager.undo()
},state:function(a){return false
}};
(function(l){var g=90,j=89,k=8,b=46,a=25,i="data-wysihtml5-selection-node",c="data-wysihtml5-selection-offset",h='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+l.INVISIBLE_SPACE+"</span>",f='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+l.INVISIBLE_SPACE+"</span>",e=l.dom;
function d(n){var m;
while(m=n.querySelector("._wysihtml5-temp")){m.parentNode.removeChild(m)
}}l.UndoManager=l.lang.Dispatcher.extend({constructor:function(m){this.editor=m;
this.composer=m.composer;
this.element=this.composer.element;
this.position=0;
this.historyStr=[];
this.historyDom=[];
this.transact();
this._observe()
},_observe:function(){var p=this,r=this.composer.sandbox.getDocument(),m;
e.observe(this.element,"keydown",function(u){if(u.altKey||(!u.ctrlKey&&!u.metaKey)){return
}var v=u.keyCode,s=v===g&&!u.shiftKey,t=(v===g&&u.shiftKey)||(v===j);
if(s){p.undo();
u.preventDefault()
}else{if(t){p.redo();
u.preventDefault()
}}});
e.observe(this.element,"keydown",function(s){var t=s.keyCode;
if(t===m){return
}m=t;
if(t===k||t===b){p.transact()
}});
if(l.browser.hasUndoInContextMenu()){var n,o,q=function(){d(r);
clearInterval(n)
};
e.observe(this.element,"contextmenu",function(){q();
p.composer.selection.executeAndRestoreSimple(function(){if(p.element.lastChild){p.composer.selection.setAfter(p.element.lastChild)
}r.execCommand("insertHTML",false,h);
r.execCommand("insertHTML",false,f);
r.execCommand("undo",false,null)
});
n=setInterval(function(){if(r.getElementById("_wysihtml5-redo")){q();
p.redo()
}else{if(!r.getElementById("_wysihtml5-undo")){q();
p.undo()
}}},400);
if(!o){o=true;
e.observe(document,"mousedown",q);
e.observe(r,["mousedown","paste","cut","copy"],q)
}})
}this.editor.on("newword:composer",function(){p.transact()
}).on("beforecommand:composer",function(){p.transact()
})
},transact:function(){var u=this.historyStr[this.position-1],o=this.composer.getValue();
if(o===u){return
}var m=this.historyStr.length=this.historyDom.length=this.position;
if(m>a){this.historyStr.shift();
this.historyDom.shift();
this.position--
}this.position++;
var r=this.composer.selection.getRange(),n=r.startContainer||this.element,p=r.startOffset||0,q,s;
if(n.nodeType===l.ELEMENT_NODE){q=n
}else{q=n.parentNode;
s=this.getChildNodeIndex(q,n)
}q.setAttribute(c,p);
if(typeof(s)!=="undefined"){q.setAttribute(i,s)
}var t=this.element.cloneNode(!!o);
this.historyDom.push(t);
this.historyStr.push(o);
q.removeAttribute(c);
q.removeAttribute(i)
},undo:function(){this.transact();
if(!this.undoPossible()){return
}this.set(this.historyDom[--this.position-1]);
this.editor.fire("undo:composer")
},redo:function(){if(!this.redoPossible()){return
}this.set(this.historyDom[++this.position-1]);
this.editor.fire("redo:composer")
},undoPossible:function(){return this.position>1
},redoPossible:function(){return this.position<this.historyStr.length
},set:function(s){this.element.innerHTML="";
var n=0,r=s.childNodes,p=s.childNodes.length;
for(;
n<p;
n++){this.element.appendChild(r[n].cloneNode(true))
}var q,o,m;
if(s.hasAttribute(c)){q=s.getAttribute(c);
m=s.getAttribute(i);
o=this.element
}else{o=this.element.querySelector("["+c+"]")||this.element;
q=o.getAttribute(c);
m=o.getAttribute(i);
o.removeAttribute(c);
o.removeAttribute(i)
}if(m!==null){o=this.getChildNodeByIndex(o,+m)
}this.composer.selection.set(o,q)
},getChildNodeIndex:function(n,q){var m=0,p=n.childNodes,o=p.length;
for(;
m<o;
m++){if(p[m]===q){return m
}}},getChildNodeByIndex:function(n,m){return n.childNodes[m]
}})
})(wysihtml5);
wysihtml5.views.View=Base.extend({constructor:function(b,c,a){this.parent=b;
this.element=c;
this.config=a;
this._observeViewChange()
},_observeViewChange:function(){var a=this;
this.parent.on("beforeload",function(){a.parent.on("change_view",function(b){if(b===a.name){a.parent.currentView=a;
a.show();
setTimeout(function(){a.focus()
},0)
}else{a.hide()
}})
})
},focus:function(){if(this.element.ownerDocument.querySelector(":focus")===this.element){return
}try{this.element.focus()
}catch(a){}},hide:function(){this.element.style.display="none"
},show:function(){this.element.style.display=""
},disable:function(){this.element.setAttribute("disabled","disabled")
},enable:function(){this.element.removeAttribute("disabled")
}});
(function(c){var b=c.dom,a=c.browser;
c.views.Composer=c.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(e,f,d){this.base(e,f,d);
this.textarea=this.parent.textarea;
this._initSandbox()
},clear:function(){this.element.innerHTML=a.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK
},getValue:function(e){var d=this.isEmpty()?"":c.quirks.getCorrectInnerHTML(this.element);
if(e){d=this.parent.parse(d)
}d=c.lang.string(d).replace(c.INVISIBLE_SPACE).by("");
return d
},setValue:function(d,g){if(g){d=this.parent.parse(d)
}try{this.element.innerHTML=d
}catch(f){this.element.innerText=d
}},show:function(){this.iframe.style.display=this._displayStyle||"";
if(!this.textarea.element.disabled){this.disable();
this.enable()
}},hide:function(){this._displayStyle=b.getStyle("display").from(this.iframe);
if(this._displayStyle==="none"){this._displayStyle=null
}this.iframe.style.display="none"
},disable:function(){this.parent.fire("disable:composer");
this.element.removeAttribute("contentEditable")
},enable:function(){this.parent.fire("enable:composer");
this.element.setAttribute("contentEditable","true")
},focus:function(e){if(c.browser.doesAsyncFocus()&&this.hasPlaceholderSet()){this.clear()
}this.base();
var d=this.element.lastChild;
if(e&&d){if(d.nodeName==="BR"){this.selection.setBefore(this.element.lastChild)
}else{this.selection.setAfter(this.element.lastChild)
}}},getTextContent:function(){return b.getTextContent(this.element)
},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")&&this.placeholderSet
},isEmpty:function(){var d=this.element.innerHTML.toLowerCase();
return d===""||d==="<br>"||d==="<p></p>"||d==="<p><br></p>"||this.hasPlaceholderSet()
},_initSandbox:function(){var e=this;
this.sandbox=new b.Sandbox(function(){e._create()
},{iframeSrc:this.config.iframeSrc,iframeHtml:this.config.iframeHtml,stylesheets:this.config.stylesheets});
this.iframe=this.sandbox.getIframe();
var f=this.textarea.element;
b.insert(this.iframe).after(f);
if(f.form){var d=document.createElement("input");
d.type="hidden";
d.name="_wysihtml5_mode";
d.value=1;
b.insert(d).after(f)
}},_create:function(){var f=this;
this.doc=this.sandbox.getDocument();
this.element=this.doc.body;
this.textarea=this.parent.textarea;
this.element.innerHTML=this.textarea.getValue(true);
this.selection=new c.Selection(this.parent);
this.commands=new c.Commands(this.parent);
b.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element);
b.addClass(this.element,this.config.composerClassName);
if(this.config.style){this.style()
}this.observe();
var e=this.config.name;
if(e){b.addClass(this.element,e);
b.addClass(this.iframe,e)
}this.enable();
if(this.textarea.element.disabled){this.disable()
}var d=typeof(this.config.placeholder)==="string"?this.config.placeholder:this.textarea.element.getAttribute("placeholder");
if(d){b.simulatePlaceholder(this.parent,this,d)
}this.commands.exec("styleWithCSS",false);
this._initAutoLinking();
this._initObjectResizing();
this._initUndoManager();
this._initLineBreaking();
if((this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&&!a.isIos()){setTimeout(function(){f.focus(true)
},100)
}if(!a.clearsContentEditableCorrectly()){c.quirks.ensureProperClearing(this)
}if(this.initSync&&this.config.sync){this.initSync()
}this.textarea.hide();
this.parent.fire("beforeload").fire("load")
},_initAutoLinking:function(){var h=this,e=a.canDisableAutoLinking(),f=a.doesAutoLinkingInContentEditable();
if(e){this.commands.exec("autoUrlDetect",false)
}if(!this.config.autoLink){return
}if(!f||(f&&e)){this.parent.on("newword:composer",function(){if(b.getTextContent(h.element).match(b.autoLink.URL_REG_EXP)){h.selection.executeAndRestore(function(j,k){b.autoLink(k.parentNode)
})
}});
b.observe(this.element,"blur",function(){b.autoLink(h.element)
})
}var d=this.sandbox.getDocument().getElementsByTagName("a"),i=b.autoLink.URL_REG_EXP,g=function(j){var k=c.lang.string(b.getTextContent(j)).trim();
if(k.substr(0,4)==="www."){k="http://"+k
}return k
};
b.observe(this.element,"keydown",function(l){if(!d.length){return
}var m=h.selection.getSelectedNode(l.target.ownerDocument),k=b.getParentElement(m,{nodeName:"A"},4),j;
if(!k){return
}j=g(k);
setTimeout(function(){var n=g(k);
if(n===j){return
}if(n.match(i)){k.setAttribute("href",n)
}},0)
})
},_initObjectResizing:function(){this.commands.exec("enableObjectResizing",true);
if(a.supportsEvent("resizeend")){var f=["width","height"],e=f.length,d=this.element;
b.observe(d,"resizeend",function(j){var l=j.target||j.srcElement,h=l.style,g=0,k;
if(l.nodeName!=="IMG"){return
}for(;
g<e;
g++){k=f[g];
if(h[k]){l.setAttribute(k,parseInt(h[k],10));
h[k]=""
}}c.quirks.redraw(d)
})
}},_initUndoManager:function(){this.undoManager=new c.UndoManager(this.parent)
},_initLineBreaking:function(){var f=this,e=["LI","P","H1","H2","H3","H4","H5","H6"],d=["UL","OL","MENU"];
function g(i){var h=b.getParentElement(i,{nodeName:["P","DIV"]},2);
if(h){f.selection.executeAndRestore(function(){if(f.config.useLineBreaks){b.replaceWithChildNodes(h)
}else{if(h.nodeName!=="P"){b.renameElement(h,"p")
}}})
}}if(!this.config.useLineBreaks){b.observe(this.element,["focus","keydown"],function(){if(f.isEmpty()){var h=f.doc.createElement("P");
f.element.innerHTML="";
f.element.appendChild(h);
if(!a.displaysCaretInEmptyContentEditableCorrectly()){h.innerHTML="<br>";
f.selection.setBefore(h.firstChild)
}else{f.selection.selectNode(h,true)
}}})
}b.observe(this.doc,"keydown",function(h){var i=h.keyCode;
if(h.shiftKey){return
}if(i!==c.ENTER_KEY&&i!==c.BACKSPACE_KEY){return
}var j=b.getParentElement(f.selection.getSelectedNode(),{nodeName:e},4);
if(j){setTimeout(function(){var l=f.selection.getSelectedNode(),k;
if(j.nodeName==="LI"){if(!l){return
}k=b.getParentElement(l,{nodeName:d},2);
if(!k){g(l)
}}if(i===c.ENTER_KEY&&j.nodeName.match(/^H[1-6]$/)){g(l)
}},0);
return
}if(f.config.useLineBreaks&&i===c.ENTER_KEY&&!c.browser.insertsLineBreaksOnReturn()){f.commands.exec("insertLineBreak");
h.preventDefault()
}})
}})
})(wysihtml5);
(function(i){var a=i.dom,e=document,c=window,d=e.createElement("div"),b=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],g=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],f=["body > *:first-child { margin-top: 0; }","._wysihtml5-temp     { display: none; }",i.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"];
var h=function(l){if(l.setActive){try{l.setActive()
}catch(n){}}else{var m=l.style,o=e.documentElement.scrollTop||e.body.scrollTop,k=e.documentElement.scrollLeft||e.body.scrollLeft,j={position:m.position,top:m.top,left:m.left,WebkitUserSelect:m.WebkitUserSelect};
a.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(l);
l.focus();
a.setStyles(j).on(l);
if(c.scrollTo){c.scrollTo(k,o)
}}};
i.views.Composer.prototype.style=function(){var n=this,m=e.querySelector(":focus"),q=this.textarea.element,j=q.hasAttribute("placeholder"),o=j&&q.getAttribute("placeholder"),k=q.style.display,p=q.disabled;
this.focusStylesHost=d.cloneNode(false);
this.blurStylesHost=d.cloneNode(false);
this.disabledStylesHost=d.cloneNode(false);
if(j){q.removeAttribute("placeholder")
}if(q===m){q.blur()
}q.disabled=false;
q.style.display="none";
a.copyStyles(g).from(q).to(this.iframe).andTo(this.blurStylesHost);
a.copyStyles(b).from(q).to(this.element).andTo(this.blurStylesHost);
a.insertCSS(f).into(this.element.ownerDocument);
q.disabled=true;
a.copyStyles(g).from(q).to(this.disabledStylesHost);
a.copyStyles(b).from(q).to(this.disabledStylesHost);
q.disabled=p;
h(q);
a.copyStyles(g).from(q).to(this.focusStylesHost);
a.copyStyles(b).from(q).to(this.focusStylesHost);
q.style.display=k;
a.copyStyles(["display"]).from(q).to(this.iframe);
var l=i.lang.array(g).without(["display"]);
if(m){m.focus()
}else{q.blur()
}if(j){q.setAttribute("placeholder",o)
}this.parent.on("focus:composer",function(){a.copyStyles(l).from(n.focusStylesHost).to(n.iframe);
a.copyStyles(b).from(n.focusStylesHost).to(n.element)
});
this.parent.on("blur:composer",function(){a.copyStyles(l).from(n.blurStylesHost).to(n.iframe);
a.copyStyles(b).from(n.blurStylesHost).to(n.element)
});
this.parent.observe("disable:composer",function(){a.copyStyles(l).from(n.disabledStylesHost).to(n.iframe);
a.copyStyles(b).from(n.disabledStylesHost).to(n.element)
});
this.parent.observe("enable:composer",function(){a.copyStyles(l).from(n.blurStylesHost).to(n.iframe);
a.copyStyles(b).from(n.blurStylesHost).to(n.element)
});
return this
}
})(wysihtml5);
(function(d){var c=d.dom,b=d.browser,a={"66":"bold","73":"italic","85":"underline"};
d.views.Composer.prototype.observe=function(){var i=this,k=this.getValue(),h=this.sandbox.getIframe(),g=this.element,f=b.supportsEventsInIframeCorrectly()?g:this.sandbox.getWindow(),e=["drop","paste"];
c.observe(h,"DOMNodeRemoved",function(){clearInterval(j);
i.parent.fire("destroy:composer")
});
var j=setInterval(function(){if(!c.contains(document.documentElement,h)){clearInterval(j);
i.parent.fire("destroy:composer")
}},250);
c.observe(f,"focus",function(){i.parent.fire("focus").fire("focus:composer");
setTimeout(function(){k=i.getValue()
},0)
});
c.observe(f,"blur",function(){if(k!==i.getValue()){i.parent.fire("change").fire("change:composer")
}i.parent.fire("blur").fire("blur:composer")
});
c.observe(g,"dragenter",function(){i.parent.fire("unset_placeholder")
});
c.observe(g,e,function(){setTimeout(function(){i.parent.fire("paste").fire("paste:composer")
},0)
});
c.observe(g,"keyup",function(m){var n=m.keyCode;
if(n===d.SPACE_KEY||n===d.ENTER_KEY){i.parent.fire("newword:composer")
}});
this.parent.on("paste:composer",function(){setTimeout(function(){i.parent.fire("newword:composer")
},0)
});
if(!b.canSelectImagesInContentEditable()){c.observe(g,"mousedown",function(m){var n=m.target;
if(n.nodeName==="IMG"){i.selection.selectNode(n);
m.preventDefault()
}})
}if(b.hasHistoryIssue()&&b.supportsSelectionModify()){c.observe(g,"keydown",function(n){if(!n.metaKey&&!n.ctrlKey){return
}var p=n.keyCode,o=g.ownerDocument.defaultView,m=o.getSelection();
if(p===37||p===39){if(p===37){m.modify("extend","left","lineboundary");
if(!n.shiftKey){m.collapseToStart()
}}if(p===39){m.modify("extend","right","lineboundary");
if(!n.shiftKey){m.collapseToEnd()
}}n.preventDefault()
}})
}c.observe(g,"keydown",function(m){var n=m.keyCode,o=a[n];
if((m.ctrlKey||m.metaKey)&&!m.altKey&&o){i.commands.exec(o);
m.preventDefault()
}});
c.observe(g,"keydown",function(n){var p=i.selection.getSelectedNode(true),o=n.keyCode,m;
if(p&&p.nodeName==="IMG"&&(o===d.BACKSPACE_KEY||o===d.DELETE_KEY)){m=p.parentNode;
m.removeChild(p);
if(m.nodeName==="A"&&!m.firstChild){m.parentNode.removeChild(m)
}setTimeout(function(){d.quirks.redraw(g)
},0);
n.preventDefault()
}});
if(b.hasIframeFocusIssue()){c.observe(this.iframe,"focus",function(){setTimeout(function(){if(i.doc.querySelector(":focus")!==i.element){i.focus()
}},0)
});
c.observe(this.element,"blur",function(){setTimeout(function(){i.selection.getSelection().removeAllRanges()
},0)
})
}var l={IMG:"Image: ",A:"Link: "};
c.observe(g,"mouseover",function(n){var o=n.target,q=o.nodeName,p;
if(q!=="A"&&q!=="IMG"){return
}var m=o.hasAttribute("title");
if(!m){p=l[q]+(o.getAttribute("href")||o.getAttribute("src"));
o.setAttribute("title",p)
}})
}
})(wysihtml5);
(function(b){var a=400;
b.views.Synchronizer=Base.extend({constructor:function(e,c,d){this.editor=e;
this.textarea=c;
this.composer=d;
this._observe()
},fromComposerToTextarea:function(c){this.textarea.setValue(b.lang.string(this.composer.getValue()).trim(),c)
},fromTextareaToComposer:function(d){var c=this.textarea.getValue();
if(c){this.composer.setValue(c,d)
}else{this.composer.clear();
this.editor.fire("set_placeholder")
}},sync:function(c){if(this.editor.currentView.name==="textarea"){this.fromTextareaToComposer(c)
}else{this.fromComposerToTextarea(c)
}},_observe:function(){var c,e=this,d=this.textarea.element.form,g=function(){c=setInterval(function(){e.fromComposerToTextarea()
},a)
},f=function(){clearInterval(c);
c=null
};
g();
if(d){b.dom.observe(d,"submit",function(){e.sync(true)
});
b.dom.observe(d,"reset",function(){setTimeout(function(){e.fromTextareaToComposer()
},0)
})
}this.editor.on("change_view",function(h){if(h==="composer"&&!c){e.fromTextareaToComposer(true);
g()
}else{if(h==="textarea"){e.fromComposerToTextarea(true);
f()
}}});
this.editor.on("destroy:composer",f)
}})
})(wysihtml5);
wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(b,c,a){this.base(b,c,a);
this._observe()
},clear:function(){this.element.value=""
},getValue:function(b){var a=this.isEmpty()?"":this.element.value;
if(b){a=this.parent.parse(a)
}return a
},setValue:function(a,b){if(b){a=this.parent.parse(a)
}this.element.value=a
},hasPlaceholderSet:function(){var d=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),a=this.element.getAttribute("placeholder")||null,b=this.element.value,c=!b;
return(d&&c)||(b===a)
},isEmpty:function(){return !wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()
},_observe:function(){var c=this.element,d=this.parent,a={focusin:"focus",focusout:"blur"},b=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];
d.on("beforeload",function(){wysihtml5.dom.observe(c,b,function(f){var e=a[f.type]||f.type;
d.fire(e).fire(e+":textarea")
});
wysihtml5.dom.observe(c,["paste","drop"],function(){setTimeout(function(){d.fire("paste").fire("paste:textarea")
},0)
})
})
}});
(function(f){var e=f.dom,a="wysihtml5-command-dialog-opened",d="input, select, textarea",b="[data-wysihtml5-dialog-field]",c="data-wysihtml5-dialog-field";
f.toolbar.Dialog=f.lang.Dispatcher.extend({constructor:function(h,g){this.link=h;
this.container=g
},_observe:function(){if(this._observed){return
}var k=this,l=function(n){var i=k._serialize();
if(i==k.elementToChange){k.fire("edit",i)
}else{k.fire("save",i)
}k.hide();
n.preventDefault();
n.stopPropagation()
};
e.observe(k.link,"click",function(){if(e.hasClass(k.link,a)){setTimeout(function(){k.hide()
},0)
}});
e.observe(this.container,"keydown",function(i){var n=i.keyCode;
if(n===f.ENTER_KEY){l(i)
}if(n===f.ESCAPE_KEY){k.hide()
}});
e.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",l);
e.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(i){k.fire("cancel");
k.hide();
i.preventDefault();
i.stopPropagation()
});
var h=this.container.querySelectorAll(d),g=0,j=h.length,m=function(){clearInterval(k.interval)
};
for(;
g<j;
g++){e.observe(h[g],"change",m)
}this._observed=true
},_serialize:function(){var k=this.elementToChange||{},g=this.container.querySelectorAll(b),j=g.length,h=0;
for(;
h<j;
h++){k[g[h].getAttribute(c)]=g[h].value;
if(k.setAttribute){k.setAttribute(g[h].getAttribute(c),g[h].value)
}}return k
},_interpolate:function(m){var l,o,k,n=document.querySelector(":focus"),g=this.container.querySelectorAll(b),j=g.length,h=0;
for(;
h<j;
h++){l=g[h];
if(l===n){continue
}if(m&&l.type==="hidden"){continue
}o=l.getAttribute(c);
k=this.elementToChange?(this.elementToChange.getAttribute(o)||""):l.defaultValue;
l.value=k
}},show:function(j){if(e.hasClass(this.link,a)){return
}var h=this,g=this.container.querySelector(d);
this.elementToChange=j;
this._observe();
this._interpolate();
if(j){this.interval=setInterval(function(){h._interpolate(true)
},500)
}e.addClass(this.link,a);
this.container.style.display="";
this.fire("show");
if(g&&!j){try{g.focus()
}catch(i){}}},hide:function(){clearInterval(this.interval);
this.elementToChange=null;
e.removeClass(this.link,a);
this.container.style.display="none";
this.fire("hide")
}})
})(wysihtml5);
(function(f){var e=f.dom;
var d={position:"relative"};
var c={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1};
var b={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"};
var a={"x-webkit-speech":"",speech:""};
f.toolbar.Speech=function(i,j){var h=document.createElement("input");
if(!f.browser.supportsSpeechApiOn(h)){j.style.display="none";
return
}var k=i.editor.textarea.element.getAttribute("lang");
if(k){a.lang=k
}var l=document.createElement("div");
f.lang.object(c).merge({width:j.offsetWidth+"px",height:j.offsetHeight+"px"});
e.insert(h).into(l);
e.insert(l).into(j);
e.setStyles(b).on(h);
e.setAttributes(a).on(h);
e.setStyles(c).on(l);
e.setStyles(d).on(j);
var g="onwebkitspeechchange" in h?"webkitspeechchange":"speechchange";
e.observe(h,g,function(){i.execCommand("insertText",h.value);
h.value=""
});
e.observe(h,"click",function(m){if(e.hasClass(j,"wysihtml5-command-disabled")){m.preventDefault()
}m.stopPropagation()
})
}
})(wysihtml5);
(function(f){var a="wysihtml5-command-disabled",b="wysihtml5-commands-disabled",c="wysihtml5-command-active",d="wysihtml5-action-active",e=f.dom;
f.toolbar.Toolbar=Base.extend({constructor:function(k,g){this.editor=k;
this.container=typeof(g)==="string"?document.getElementById(g):g;
this.composer=k.composer;
this._getLinks("command");
this._getLinks("action");
this._observe();
this.show();
var h=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),l=h.length,j=0;
for(;
j<l;
j++){new f.toolbar.Speech(this,h[j])
}},_getLinks:function(m){var q=this[m+"Links"]=f.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+m+"]")).get(),j=q.length,k=0,g=this[m+"Mapping"]={},n,p,h,o,l;
for(;
k<j;
k++){n=q[k];
h=n.getAttribute("data-wysihtml5-"+m);
o=n.getAttribute("data-wysihtml5-"+m+"-value");
p=this.container.querySelector("[data-wysihtml5-"+m+"-group='"+h+"']");
l=this._getDialog(n,h);
g[h+":"+o]={link:n,group:p,name:h,value:o,dialog:l,state:false}
}},_getDialog:function(k,l){var j=this,i=this.editor.container.querySelector("[data-wysihtml5-dialog='"+l+"']"),h,g;
if(i){h=new f.toolbar.Dialog(k,i);
h.on("show",function(){g=j.composer.selection.getBookmark();
j.editor.fire("show:dialog",{command:l,dialogContainer:i,commandLink:k})
});
h.on("save",function(m){if(g){j.composer.selection.setBookmark(g)
}j._execCommand(l,m);
j.editor.fire("save:dialog",{command:l,dialogContainer:i,commandLink:k})
});
h.on("cancel",function(){j.editor.focus(false);
j.editor.fire("cancel:dialog",{command:l,dialogContainer:i,commandLink:k})
})
}return h
},execCommand:function(i,g){if(this.commandsDisabled){return
}var h=this.commandMapping[i+":"+g];
if(h&&h.dialog&&!h.state){h.dialog.show()
}else{this._execCommand(i,g)
}},_execCommand:function(h,g){this.editor.focus(false);
this.composer.commands.exec(h,g);
this._updateLinkStates()
},execAction:function(h){var g=this.editor;
if(h==="change_view"){if(g.currentView===g.textarea){g.fire("change_view","composer")
}else{g.fire("change_view","textarea")
}}},_observe:function(){var m=this,k=this.editor,g=this.container,h=this.commandLinks.concat(this.actionLinks),l=h.length,j=0;
for(;
j<l;
j++){e.setAttributes({href:"javascript:;",unselectable:"on"}).on(h[j])
}e.delegate(g,"[data-wysihtml5-command], [data-wysihtml5-action]","mousedown",function(i){i.preventDefault()
});
e.delegate(g,"[data-wysihtml5-command]","click",function(o){var n=this,p=n.getAttribute("data-wysihtml5-command"),i=n.getAttribute("data-wysihtml5-command-value");
m.execCommand(p,i);
o.preventDefault()
});
e.delegate(g,"[data-wysihtml5-action]","click",function(i){var n=this.getAttribute("data-wysihtml5-action");
m.execAction(n);
i.preventDefault()
});
k.on("focus:composer",function(){m.bookmark=null;
clearInterval(m.interval);
m.interval=setInterval(function(){m._updateLinkStates()
},500)
});
k.on("blur:composer",function(){clearInterval(m.interval)
});
k.on("destroy:composer",function(){clearInterval(m.interval)
});
k.on("change_view",function(i){setTimeout(function(){m.commandsDisabled=(i!=="composer");
m._updateLinkStates();
if(m.commandsDisabled){e.addClass(g,b)
}else{e.removeClass(g,b)
}},0)
})
},_updateLinkStates:function(){var h=this.commandMapping,l=this.actionMapping,g,k,j,m;
for(g in h){m=h[g];
if(this.commandsDisabled){k=false;
e.removeClass(m.link,c);
if(m.group){e.removeClass(m.group,c)
}if(m.dialog){m.dialog.hide()
}}else{k=this.composer.commands.state(m.name,m.value);
if(f.lang.object(k).isArray()){k=k.length===1?k[0]:true
}e.removeClass(m.link,a);
if(m.group){e.removeClass(m.group,a)
}}if(m.state===k){continue
}m.state=k;
if(k){e.addClass(m.link,c);
if(m.group){e.addClass(m.group,c)
}if(m.dialog){if(typeof(k)==="object"){m.dialog.show(k)
}else{m.dialog.hide()
}}}else{e.removeClass(m.link,c);
if(m.group){e.removeClass(m.group,c)
}if(m.dialog){m.dialog.hide()
}}}for(g in l){j=l[g];
if(j.name==="change_view"){j.state=this.editor.currentView===this.editor.textarea;
if(j.state){e.addClass(j.link,d)
}else{e.removeClass(j.link,d)
}}}},show:function(){this.container.style.display=""
},hide:function(){this.container.style.display="none"
}})
})(wysihtml5);
(function(c){var b;
var a={name:b,style:true,toolbar:b,autoLink:true,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:c.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",useLineBreaks:true,stylesheets:[],placeholderText:b,supportTouchDevices:true};
c.Editor=c.lang.Dispatcher.extend({constructor:function(f,d){this.textareaElement=typeof(f)==="string"?document.getElementById(f):f;
this.config=c.lang.object({}).merge(a).merge(d).get();
this.textarea=new c.views.Textarea(this,this.textareaElement,this.config);
this.currentView=this.textarea;
this._isCompatible=c.browser.supported();
if(!this._isCompatible||(!this.config.supportTouchDevices&&c.browser.isTouchDevice())){var e=this;
setTimeout(function(){e.fire("beforeload").fire("load")
},0);
return
}c.dom.addClass(document.body,this.config.bodyClassName);
this.composer=new c.views.Composer(this,this.textareaElement,this.config);
this.currentView=this.composer;
if(typeof(this.config.parser)==="function"){this._initParser()
}this.on("beforeload",function(){this.synchronizer=new c.views.Synchronizer(this,this.textarea,this.composer);
if(this.config.toolbar){this.toolbar=new c.toolbar.Toolbar(this,this.config.toolbar)
}})
},isCompatible:function(){return this._isCompatible
},clear:function(){this.currentView.clear();
return this
},getValue:function(d){return this.currentView.getValue(d)
},setValue:function(d,e){this.fire("unset_placeholder");
if(!d){return this.clear()
}this.currentView.setValue(d,e);
return this
},focus:function(d){this.currentView.focus(d);
return this
},disable:function(){this.currentView.disable();
return this
},enable:function(){this.currentView.enable();
return this
},isEmpty:function(){return this.currentView.isEmpty()
},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()
},parse:function(d){var e=this.config.parser(d,this.config.parserRules,this.composer.sandbox.getDocument(),true);
if(typeof(d)==="object"){c.quirks.redraw(d)
}return e
},_initParser:function(){this.on("paste:composer",function(){var d=true,e=this;
e.composer.selection.executeAndRestore(function(){c.quirks.cleanPastedHTML(e.composer.element);
e.parse(e.composer.element)
},d)
})
}})
})(wysihtml5);(function(k,j,f){var q=k(j),w=j.document,m=k(w),u=0,t="\u200b";
function h(){++u;
return"contentEnhancement-"+u
}k.each(CSS_CLASS_GROUPS,function(){var z="cms-"+this.internalName;
var y=z+"-";
var x=new RegExp(y+"[0-9a-z-]+","g");
wysihtml5.commands[z]={exec:function(C,F,E){var B=E?k.parseJSON(E):{};
var A=B.tag||"span";
var D=A==="span"?"formatInline":"formatBlock";
return wysihtml5.commands[D].exec(C,F,A,y+B.internalName,x)
},state:function(C,F,E){var B=E?k.parseJSON(E):{};
var A=B.tag||"span";
var D=A==="span"?"formatInline":"formatBlock";
return wysihtml5.commands[D].state(C,F,A,y+B.internalName,x)
}}
});
var n=function(z){var A=k("<span/>",{"class":"rte-group","data-group-name":z});
var x=k("<span/>",{"class":"rte-group-label",text:z});
var y=k("<span/>",{"class":"rte-group-buttons"});
A.append(x);
A.append(y);
return A
};
var e=function(x,y){return k("<span/>",{"class":"rte-button rte-button-"+y,"data-wysihtml5-command":y,text:x})
};
var c=function(x,G,F,B){var J=k("<div/>",{"class":"rte-toolbar-container"});
var A=k("<div/>",{"class":"rte-toolbar"});
J.append(A);
var y=n("Font");
A.append(y);
y=y.find(".rte-group-buttons");
y.append(e("Bold","bold"));
y.append(e("Italic","italic"));
y.append(e("Underline","underline"));
y.append(e("Strike","strike"));
y.append(e("Superscript","superscript"));
y.append(e("Subscript","subscript"));
k.each(CSS_CLASS_GROUPS,function(){var L=n(this.displayName);
var M="cms-"+this.internalName;
if(this.dropDown){L.addClass("rte-group-dropDown")
}L.addClass("rte-group-cssClass");
L.addClass("rte-group-cssClass-"+this.internalName);
A.append(L);
L=L.find(".rte-group-buttons");
k.each(this.cssClasses,function(){var N=e(this.displayName,M);
N.attr("data-wysihtml5-command-value",JSON.stringify(this));
L.append(N)
})
});
if(!G){var D=n("Alignment");
A.append(D);
D=D.find(".rte-group-buttons");
D.append(e("Justify Left","textAlign").attr("data-wysihtml5-command-value","left"));
D.append(e("Justify Center","textAlign").attr("data-wysihtml5-command-value","center"));
D.append(e("Justify Right","textAlign").attr("data-wysihtml5-command-value","right"));
var C=n("List");
A.append(C);
C=C.find(".rte-group-buttons");
C.append(e("Unordered List","insertUnorderedList"));
C.append(e("Ordered List","insertOrderedList"))
}var E=n("Enhancement");
A.append(E);
E=E.find(".rte-group-buttons");
E.append(e("Link","link"));
if(!G){E.append(e("Enhancement","insertEnhancement"));
E.append(e("Marker","insertMarker"))
}if(j.cmsRteImportOptions&&j.cmsRteImportOptions.length>0){var H=n("Import");
H.addClass("rte-group-dropDown");
A.append(H);
H=H.find(".rte-group-buttons");
k.each(j.cmsRteImportOptions,function(M,L){H.append(k("<span/>",{"class":"rte-button rte-button-import",text:L.name,click:function(){var N=k(this);
google.load("picker","1",{callback:function(){new google.picker.PickerBuilder().enableFeature(google.picker.Feature.NAV_HIDDEN).setAppId(L.clientId).setOAuthToken(L.accessToken).addView(google.picker.ViewId.DOCUMENTS).setCallback(function(O){if(O[google.picker.Response.ACTION]===google.picker.Action.PICKED){k.ajax({method:"get",url:"/social/googleDriveFile",data:{id:O[google.picker.Response.DOCUMENTS][0][google.picker.Document.ID]},cache:false,success:function(P){x.composer.setValue(P,true);
x.composer.parent.updateOverlay()
}})
}}).build().setVisible(true)
}})
}}))
})
}var z=n("Changes");
A.append(z);
z=z.find(".rte-group-buttons");
z.append(e("Track","changesTrack"));
z.append(e("Accept","changesAccept"));
z.append(e("Reject","changesReject"));
z.append(e("Preview","changesPreview"));
var K=n("Comments");
A.append(K);
K=K.find(".rte-group-buttons");
K.append(e("Comment","commentAdd"));
K.append(e("Collapse","commentCollapse"));
K.append(e("Remove","commentRemove"));
var I=n("Misc");
A.append(I);
I=I.find(".rte-group-buttons");
I.append(k("<span/>",{"class":"rte-button rte-button-html","data-wysihtml5-action":"change_view",text:"HTML"}));
I.append(e("Fullscreen","fullscreen"));
return J[0]
};
var v=function(x,y){return k("<span/>",{"class":"rte-button rte-button-"+y,"data-action":y,text:x})
};
var o=function(z){var D=k("<div/>",{"class":"rte-enhancement"});
var x=k("<div/>",{"class":"rte-toolbar"});
D.append(x);
var C=n("Position");
x.append(C);
C.append(v("Move Left","moveLeft"));
C.append(v("Move Up","moveUp"));
C.append(v("Move Center","moveCenter"));
C.append(v("Move Down","moveDown"));
C.append(v("Move Right","moveRight"));
var y=n("Image Size");
y.addClass("rte-group-dropDown");
x.append(y);
y=y.find(".rte-group-buttons");
var B=k(z.container).closest(".inputContainer").attr("data-standard-image-sizes");
if(B){B=" "+B+" "
}y.append(v("None","imageSize-"));
k.each(STANDARD_IMAGE_SIZES,function(){if(B.indexOf(" "+this.internalName+" ")>-1){y.append(v(this.displayName,"imageSize-"+this.internalName))
}});
var A=n("Misc");
x.append(A);
A.append(k("<span/>",{"class":"rte-button rte-button-enhancementSelect",html:k("<a/>",{href:CONTEXT_PATH+"/enhancementSelect",target:h(),text:"Select"})}));
A.append(k("<span/>",{"class":"rte-button rte-button-enhancementEdit",html:k("<a/>",{href:CONTEXT_PATH+"/content/enhancement.jsp",target:h(),text:"Edit"})}));
A.append(v("Remove","remove"));
A.append(v("Restore","restore"));
A.append(v("Remove Completely","removeCompletely"));
D.append(k("<div/>",{"class":"rte-enhancement-label"}));
return D[0]
};
var b=function(){var y=k("<div/>",{"class":"rte-enhancement rte-marker"});
var x=k("<div/>",{"class":"rte-toolbar"});
y.append(x);
var A=n("Position");
x.append(A);
A.append(v("Move Up","moveUp"));
A.append(v("Move Down","moveDown"));
var z=n("Misc");
x.append(z);
z.append(k("<span/>",{"class":"rte-button rte-button-selectMarker",html:k("<a/>",{href:CONTEXT_PATH+"/content/marker.jsp",target:h(),text:"Select"})}));
z.append(v("Remove","remove"));
z.append(v("Restore","restore"));
z.append(v("Really Remove","removeCompletely"));
y.append(k("<div/>",{"class":"rte-enhancement-label"}));
return y[0]
};
var d=[],i,a;
(function(){var x=0;
i=function(z){var y=k.data(z,"rte-enhancement-id");
if(!y){++x;
y="rte-enhancement-"+x;
k.data(z,"rte-enhancement-id",y)
}return y
}
})();
var s=wysihtml5.Editor.extend({constructor:function(I,z){var x=this,F=k(I).attr("data-first-draft")==="true",B=k(I).attr("data-final-draft")==="true";
var y=this.container=w.createElement("div");
y.className="rte-container";
I.parentNode.insertBefore(y,I);
var C=this.overlay=w.createElement("div");
C.className="rte-overlay";
C.style.position="relative";
C.style.left="0px";
C.style.top="0px";
y.appendChild(C);
(function(){var K=x.focus;
x.focus=function(){var L=q.scrollTop();
K.apply(x,arguments);
q.scrollTop(L)
}
})();
k(C).on("click",function(){x.focus()
});
if(typeof z.toolbar==="function"){z.toolbar=z.toolbar(x,z.inline,F,B);
y.appendChild(z.toolbar)
}k(C).delegate("[data-action]","click",function(){var K=k(this);
var U=K.closest(".rte-enhancement");
var V=U.data("$rte-placeholder");
var X=U.find(".rte-button-editEnhancement a");
var Q=K.attr("data-action");
var W,S,L;
if(Q.indexOf("imageSize-")===0){var T=Q.substring(10);
W=k.parseJSON(V.attr("data-reference")||"{}");
if(T){U.attr("data-image-size",T);
W.imageSize=T
}else{U.removeAttr("data-image-size");
delete W.imageSize
}S=JSON.stringify(W);
V.attr("data-reference",S)
}else{if(Q=="remove"){U.addClass("state-removing");
V.addClass("state-removing")
}else{if(Q=="restore"){U.removeClass("state-removing");
V.removeClass("state-removing")
}else{if(Q=="removeCompletely"){U.remove();
V.remove()
}else{if(Q==="moveCenter"||Q==="moveLeft"||Q==="moveRight"){V.removeAttr("data-alignment");
if(Q==="moveCenter"){V.removeAttr("data-alignment")
}else{if(Q==="moveLeft"){V.attr("data-alignment","left")
}else{if(Q==="moveRight"){V.attr("data-alignment","right")
}}}W=k.parseJSON(V.attr("data-reference")||"{}");
if(Q==="moveCenter"){delete W.alignment
}else{if(Q==="moveLeft"){W.alignment="left"
}else{if(Q==="moveRight"){W.alignment="right"
}}}S=JSON.stringify(W);
V.attr("data-reference",S);
if(X){L=X.attr("href");
L=(L+"&").replace(/([?&])reference=[^&]*[&]/,"$1");
L+="reference="+(S||"");
X.attr("href",L)
}}else{var P=V.offset().top;
var R,M,O;
if(Q==="moveDown"){V.closest("body").find("br + br, h1, h2, h3, h4, h5, h6, p, button").each(function(){if(V[0].compareDocumentPosition(this)&Node.DOCUMENT_POSITION_FOLLOWING){k(this).after(V);
return false
}});
q.scrollTop(q.scrollTop()+V.offset().top-P)
}else{if(Q==="moveUp"){var Y=[],N;
V.closest("body").find("br + br, h1, h2, h3, h4, h5, h6, p, button").each(function(){if(V[0].compareDocumentPosition(this)&Node.DOCUMENT_POSITION_PRECEDING){Y.push(this)
}});
N=Y.length;
if(N>=2){k(Y[N-2]).after(V)
}else{V.closest("body").prepend(V)
}q.scrollTop(q.scrollTop()+V.offset().top-P)
}}}}}}}x.updateOverlay();
return false
});
var E=k("<div/>",{"class":"rte-dialogs",css:{left:0,position:"relative",top:0}});
var D=k('<div><h2>Link</h2><div class="rte-dialogLine"><input type="text" class="rte-dialogLinkHref"><input type="hidden" class="rte-dialogLinkId"><a class="rte-dialogLinkContent" target="linkById" href="'+CONTEXT_PATH+'/content/linkById.jsp?p=true">Content</a></div><div class="rte-dialogLine"><select class="rte-dialogLinkTarget"><option value="">Same Window</option><option value="_blank">New Window</option></select> <select class="rte-dialogLinkRel"><option value="">Relation</option><option value="nofollow">nofollow</option></select></div><a class="rte-dialogLinkSave">Save</a> <a class="rte-dialogLinkOpen" target="_blank">Open</a> <a class="rte-dialogLinkUnlink">Unlink</a></div>');
var H=k();
D.on("click",".rte-dialogLinkSave",function(){var M=D.find(".rte-dialogLinkId").val(),L=D.find(".rte-dialogLinkHref").val()||"",N=D.find(".rte-dialogLinkTarget").val(),K=D.find(".rte-dialogLinkRel").val();
if(M){H.attr("data-cms-id",M);
H.attr("data-cms-href",L)
}else{H.removeAttr("data-cms-id");
H.removeAttr("data-cms-href")
}H.attr("href",L);
if(N){H.attr("target",N)
}else{H.removeAttr("target")
}if(K){H.attr("rel",K)
}else{H.removeAttr("rel")
}D.popup("close")
});
D.on("keydown",".rte-dialogLinkHref",function(K){if(K.which===13){D.find(".rte-dialogLinkSave").click();
return false
}else{return true
}});
D.on("input",".rte-dialogLinkHref",function(K){D.find(".rte-dialogLinkOpen").attr("href",k(K.target).val())
});
function G(){var L,K;
if(k(x.composer.element).hasClass("rte-changesTracking")){L=H.parent("ins");
if(L.length>0){K=L.prev("del");
if(K.length>0&&K.text()===H.text()){L.after(H.html());
L.remove();
K.remove();
return
}}K=k("<del/>");
H.after(K);
K.append(H);
K.after(k("<ins/>",{html:H.html()}))
}else{H.after(H.html());
H.remove()
}}D.on("click",".rte-dialogLinkUnlink",function(){G();
D.popup("close")
});
k(w.body).append(D);
D.popup();
D.popup("close");
D.popup("container").bind("close",function(){if(!H.attr("href")){G()
}});
var J=function(L){var R=k(x.composer.iframe).offset(),Q=D.find(".rte-dialogLinkHref"),P,O,M=L.offset(),N,K;
H=L;
D.popup("open");
Q.val(L.attr("href")||"http://");
D.find(".rte-dialogLinkId").val(L.attr("data-cms-id")||"");
D.find(".rte-dialogLinkTarget").val(L.attr("target")||"");
D.find(".rte-dialogLinkRel").val(L.attr("rel")||"");
D.find(".rte-dialogLinkOpen").attr("href",Q.val());
Q.focus();
P=D.popup("container");
O=P.outerWidth();
N=M.left+(L.outerWidth()-O)/2;
if(N<35){N=35
}else{K=N+O-k(w).width()+35;
if(K>0){N-=K
}}P.css({left:N,"margin-left":0,position:"absolute",top:R.top+L.offset().top+L.outerHeight()})
};
(function(){var K=0;
k(z.toolbar).find(".rte-button-link").click(function(){var O,N,P,M,L;
O=x.composer.selection;
P=k(O.getSelectedNode()).closest("a");
if(P.length>0){J(P);
return
}if(O.getRange().collapsed){return
}++K;
N="rte-link-temp-"+K;
wysihtml5.commands.createLink.exec(x.composer,"createLink",{"class":N});
P=k("a."+N,x.composer.element);
P.removeClass(N);
if(k(x.composer.element).hasClass("rte-changesTracking")){if(P.parent("ins").length>0){J(P);
return
}P.before(k("<del/>",{html:P.html()}));
M=k("<ins/>");
P.after(M);
M.append(P)
}J(P)
})
})();
y.appendChild(I);
I.className+=" rte-textarea";
d[d.length]=this;
this.base(I,z);
var A=function(){var L=x.composer.selection.getRange(),M=x.composer.selection.getSelectedNode(),K;
if(L.collapsed&&M.nodeType==3&&M.length==L.endOffset){K=k(M.nextSibling);
if(K.is("code, del, ins")){return K
}}while(!M.tagName){M=M.parentNode
}return k(M)
};
this.observe("show:dialog",function(L){var K=A(),N=K.offset(),M=k(L.dialogContainer);
M.css({left:N.left,position:"absolute",top:N.top+K.outerHeight()+10})
});
this.observe("load",function(){function P(R){R.find("del, ins").each(function(){var S=k(this);
S.after(S.html());
S.remove()
})
}k(x.composer.element).on("cut",function(T){if(!k(x.composer.element).hasClass("rte-changesTracking")){return
}var R=M.selection.getRange();
var S=k("<del/>");
S.append(R.nativeRange.cloneContents());
P(S);
setTimeout(function(){x.composer.selection.getRange().nativeRange.insertNode(S[0])
},0)
});
var O;
k(x.composer.element).on("paste",function(R){if(!k(x.composer.element).hasClass("rte-changesTracking")){return
}O=M.selection.getRange().nativeRange
});
x.on("paste",function(){if(!k(x.composer.element).hasClass("rte-changesTracking")){return
}if(O){var R=M.selection.getRange();
var S=k("<ins/>");
O.setEnd(R.endContainer,R.endOffset);
S.append(O.extractContents());
P(S);
M.selection.getRange().nativeRange.insertNode(S[0]);
O=null
}});
if(window.sessionStorage.getItem("bsp.rte.changesTracking."+k(x.textarea.element).closest(".inputContainer").attr("data-name"))){wysihtml5.commands.changesTrack.exec(x.composer);
x.toolbar._updateLinkStates()
}var N=function(aa,T,U,ac){var ad=aa.childNodes;
if(aa.childNodes){var ab=ad.length;
for(var W=0;
W<ab;
++W){var S=ad[W];
if(S&&S.tagName&&S.tagName===T&&wysihtml5.dom.hasClass(S,"enhancement")){var Z=aa.ownerDocument.createElement(U);
var Y=S.attributes;
var X=Y.length;
for(var V=0;
V<X;
++V){var R=Y[V];
Z.setAttribute(R.name,R.value)
}if(ac){ac(Z)
}aa.insertBefore(Z,S);
aa.removeChild(S)
}else{N(S,T,U,ac)
}}}};
var K=this.textarea;
var Q;
if(!k(K.element).val()){k(K.element).val("<br>")
}K._originalGetValue=K.getValue;
K.getValue=function(T){var R=this._originalGetValue(T),S;
if(Q===R){return R.replace(t,"")
}else{Q=R;
S=wysihtml5.dom.getAsDom(R,this.element.ownerDocument);
N(S,"SPAN","BUTTON");
return S.innerHTML.replace(t,"")
}};
var M=this.composer;
var L;
M._originalGetValue=M.getValue;
M.getValue=function(S){var R=this._originalGetValue(S);
if(L===R){return R
}else{L=R;
dom=wysihtml5.dom.getAsDom(R,this.element.ownerDocument);
N(dom,"BUTTON","SPAN",function(T){T.innerHTML="Enhancement"
});
return dom.innerHTML
}};
M.setValue(K.getValue());
M.iframe.style.overflow="hidden";
M.iframe.contentDocument.body.style.overflow="hidden";
M.iframe.contentDocument.body.className+=" rte-loaded";
K.element.className+=" rte-source";
this.on("focus",function(){k(K.element).parentsUntil("form").addClass("state-focus");
for(var S=0,T=d.length;
S<T;
++S){var R=d[S];
k(R.container).css("padding-top",0);
k(R.config.toolbar).attr("style",R._toolbarOldStyle);
k(R.overlay).css("top",0);
R._toolbarOldStyle=null
}k(this.overlay).css("top",k(this.config.toolbar).outerHeight());
a()
});
k(M.iframe.contentWindow).on("focus",function(){x.focus()
});
this.on("blur",function(){k(K.element).parentsUntil("form").removeClass("state-focus");
k(K.element).trigger("change")
});
k(M.element).on("click","a",function(){return false
});
k(M.element).on("dblclick","a",function(R){J(k(R.target).closest("a"))
});
(function(){var X=false,U,T=-1,W,S=0;
function R(Y){var aa,Z;
if(!wysihtml5.commands.formatInline.state(M,null,Y)){++S;
aa="rte-wrap-temp-"+S;
wysihtml5.commands.formatInline.exec(M,null,Y,aa,/foobar/g);
Z=k(Y+"."+aa,M.element);
if(Z.length>0){Z.removeClass(aa)
}}return Z
}function V(){var Z=k(M.element),Y;
Z.find("ins del").remove();
Z.find("del ins").each(function(){var ab=k(this),aa=ab.closest("del");
aa.after(ab)
});
Z.find("del:has(del), ins:has(ins)").each(function(){var aa=k(this);
aa.text(aa.text())
});
Z.find("del, ins").each(function(){var aa=k(this),ab=aa.text()[0];
if(!ab||ab.charCodeAt(0)===65279){aa.remove()
}});
do{Y=false;
Z.find("del, ins").each(function(){var ad=k(this),ab,ac,aa;
if(k.contains(M.element,ad[0])){ab=this.tagName;
ac=this;
while(!!(ac=ac.nextSibling)&&ac.nodeType===1&&ac.tagName===ab){Y=true;
aa=k(ac);
ad.append(aa.html());
aa.remove()
}}})
}while(Y)
}k(M.element).bind("keydown",function(Y){var aa,ai,ak,ag,ae,ad,ab,aj,ac,af,ah;
if(Y.metaKey){return true
}aa=Y.which;
ai=M.selection;
ak=k(ai.getRange().commonAncestorContainer).closest(".rte-comment");
if(ak.length>0){if(aa===13){ag=M.doc.createTextNode("\u00a0");
ak.after(ag);
ai.setBefore(ag)
}return true
}ae=aa===8;
ad=aa===46;
if(ae||ad){ab=ai.getRange();
if(ab.collapsed){aj=ab.startContainer;
ac=null;
if(ae){af=k(aj).closest("del, ins");
if(af.length>0&&ab.startOffset===0){ac=af[0].previousSibling
}else{if(aj.nodeType===Node.TEXT_NODE&&(ab.startOffset===0||(ab.startOffset===1&&aj.nodeValue.substring(0,1)===t))){ac=aj.previousSibling
}}}else{if(aj.nodeType===Node.TEXT_NODE&&aj.nodeValue.length===ab.startOffset){ac=aj.nextSibling
}}if(ac&&ac.nodeType===Node.ELEMENT_NODE){ak=k(ac);
if(ak.hasClass("rte-comment")){ak.remove();
return false
}}}}if(!k(M.element).hasClass("rte-changesTracking")){af=k(ai.getSelectedNode()).closest("del, ins");
if(af.length>0){ah=af[0].ownerDocument.createTextNode(t);
af.after(ah);
ai.setAfter(ah)
}return true
}function Z(ao){var an=ai.getSelection(),am,al;
if(ai.getRange().collapsed){an.nativeSelection.modify("extend",ao,"character")
}R("del");
if(ao==="forward"){an.collapseToEnd();
am=ai.getRange();
al=am.endContainer;
if(!al.nextSibling&&al.nodeType===Node.TEXT_NODE&&am.endOffset===al.data.length){ai.setAfter(k(al).closest("del")[0]);
ai.getSelection().nativeSelection.modify("move","backward","character");
ai.getSelection().nativeSelection.modify("move","forward","character")
}}else{an.collapseToStart();
am=ai.getRange();
al=am.startContainer;
if(!al.previousSibling&&al.nodeType===Node.TEXT_NODE&&am.startOffset===0){ai.setBefore(k(al).closest("del")[0]);
ai.getSelection().nativeSelection.modify("move","forward","character");
ai.getSelection().nativeSelection.modify("move","backward","character")
}}V()
}if(ae){Z("backward");
return false
}else{if(ad){Z("forward");
return false
}else{if(!X){X=true;
U=ai.getRange().cloneRange();
T=k(M.element).text().length;
W=U.collapsed?null:U.cloneContents()
}}}return true
});
k(M.element).bind("keyup",function(ac){var ab,Y,Z,aa;
if(!X||ac.metaKey||!k(M.element).hasClass("rte-changesTracking")||k(M.selection.getRange().commonAncestorContainer).closest(".rte-comment").length>0){return
}if(k(M.element).text().length!==T){ab=M.selection;
Y=ab.getRange();
if(W&&Y.collapsed){Z=k("<del/>",M.iframe.contentDocument);
Z.append(W);
Y.insertNode(Z[0])
}ab.executeAndRestore(function(){Y.setStart(U.startContainer,U.startOffset);
ab.setSelection(Y);
aa=R("ins")
});
if(aa){Z=aa.closest("del");
if(Z.length>0){Z.after(aa);
ab.setAfter(aa[0])
}}}X=false;
U=null;
T=-1;
W=null;
V()
})
})();
setInterval(function(){x.updateOverlay()
},100);
setInterval(function(){k(x.composer.element).find(".rte-comment").each(function(){var T=k(this),S=this.nextSibling,R;
if(S){if(S.nodeType===Node.TEXT_NODE){R=S.nodeValue;
if(R.length>0&&R.substring(0,1)!==t){T.after(t)
}}}else{T.after(t)
}});
k(x.composer.element).find("a[href]").each(function(){var U=k(this);
var S=U.prop("href");
var W=false;
var V=U.text();
var T=this.nextSibling;
var R;
while(T){R=k(T);
if(S===R.prop("href")){W=true;
V=V+R.text();
T=T.nextSibling;
R.remove()
}else{break
}}if(W){U.text(V)
}})
},100)
})
},updateOverlay:function(){var y=this,E=y.textarea,A,D,G=y.currentView===E,F=k(y.overlay),z=y.composer,B=z.iframe,C=B.contentWindow,x;
if(!C||!k(G?E:B).is(":visible")){return
}if(G){F.hide();
return
}A=k(E.element);
D=A.val();
if(!D||D===""||D.trim().toLowerCase()==="<br>"){k(z.element).attr("data-placeholder",A.attr("placeholder"))
}else{k(z.element).removeAttr("data-placeholder")
}F.show();
x=k(C.document.body);
k(B).css("min-height",Math.max(28,x.outerHeight(true)));
k(C).scrollTop(0);
F.children().each(function(){k.data(this,"rte-visited",false)
});
x.find("button.enhancement").each(function(){var O=k(this),H=O.hasClass("marker"),N=i(this),M=k("#"+N),S,K=O.offset(),J,I,Q,L,R,P;
if(M.length===0){M=k(y.config[H?"marker":"enhancement"](y));
M.attr("id",N);
M.css("position","absolute");
k.data(M[0],"$rte-placeholder",O);
F.append(M);
M.find(".rte-button-enhancementSelect a").each(function(){var T=k(this),U=O.attr("data-id");
T.attr("href",k.addQueryParameters(T.attr("href"),"id",U));
if(!U){S=T
}else{M.find(".rte-button-enhancementEdit a").each(function(){var V=k(this);
V.closest(".rte-group").addClass("rte-group-enhancementSet");
V.attr("href",k.addQueryParameters(V.attr("href"),"id",U,"reference",O.attr("data-reference")))
})
}})
}k.data(M[0],"rte-visited",true);
J=M.find(".rte-enhancement-label");
P=k.parseJSON(O.attr("data-reference")||"{}");
I=P.label;
R=P.preview;
if(R){if(J.find("figure img").attr("src")!==R){J.html(k("<figure/>",{html:[k("<img/>",{src:R}),k("<figcaption/>")]}))
}J.find("figure img").attr("alt",I);
J.find("figure figcaption").text(I)
}else{if(!I){I="Empty "+(H?"Marker":"Enhancement")
}J.text(I)
}M.css("height","");
O.height(M.height());
M.height(O.height());
M.width(O.width());
M.css({left:K.left,top:K.top});
if(S){S.click()
}});
F.children().each(function(){if(!k.data(this,"rte-visited")){k(this).remove()
}})
}});
wysihtml5.commands.strike={exec:function(x,y){return wysihtml5.commands.formatInline.exec(x,y,"strike")
},state:function(x,y){return wysihtml5.commands.formatInline.state(x,y,"strike")
}};
var g=/cms-textAlign-[0-9a-z\-]+/g;
wysihtml5.commands.textAlign={exec:function(x,y,z){return wysihtml5.commands.formatBlock.exec(x,y,null,"cms-textAlign-"+z,g)
},state:function(x,y,z){return wysihtml5.commands.formatBlock.state(x,y,null,"cms-textAlign-"+z,g)
}};
delete wysihtml5.commands.insertImage;
var r=function(y,B){var x=k(y.selection.getSelectedNode()),A,z;
if(x.is("body")){k(x[0].childNodes[y.selection.getRange().startOffset]).after(B)
}else{A=[];
x.closest("body").find("br + br, h1, h2, h3, h4, h5, h6, p, button").each(function(){if(x[0].compareDocumentPosition(this)&Node.DOCUMENT_POSITION_PRECEDING){A.push(this)
}});
z=A.length;
if(z>=1){k(A[z-1]).after(B)
}else{x.closest("body").prepend(B)
}}};
wysihtml5.commands.link={exec:function(){},state:function(x){var y=x.selection;
return !y.getRange().collapsed||k(y.getSelectedNode()).closest("a").length>0
}};
wysihtml5.commands.insertEnhancement={exec:function(x,C,A){var B=x.doc;
var z=B.createElement("BUTTON");
if(A){for(var y in A){z.setAttribute(y,A[y])
}}z.setAttribute("class","enhancement");
r(x,z)
},state:function(x){return false
}};
wysihtml5.commands.insertMarker={exec:function(x,C,A){var B=x.doc;
var z=B.createElement("BUTTON");
if(A){for(var y in A){z.setAttribute(y,A[y])
}}z.setAttribute("class","enhancement marker");
r(x,z)
},state:function(x){return false
}};
wysihtml5.commands.allComments={exec:function(x){k(x.element).toggleClass("rte-allComments")
},state:function(x){return k(x.element).hasClass("rte-allComments")
}};
(function(){function y(B,z,D){var C=B.selection,A=C.getRange();
k(A.collapsed?k(A.commonAncestorContainer).closest(z):A.getNodes([Node.ELEMENT_NODE])).each(function(){if(k(this).is(z)){D.call(this)
}})
}function x(z,A){return{exec:function(B){y(B,"del, ins",function(){var C=k(this);
if(C.is(z)){C.remove()
}else{if(C.is(A)){C.after(C.html());
C.remove()
}}})
},state:function(C){var B=C.selection.getRange();
return !B.collapsed||k(B.commonAncestorContainer).closest("del, ins").length>0
}}
}k.extend(wysihtml5.commands,{changesTrack:{exec:function(z){k(z.element).toggleClass("rte-changesTracking")
},state:function(z){return k(z.element).hasClass("rte-changesTracking")
}},changesAccept:x("del","ins"),changesReject:x("ins","del"),changesPreview:{exec:function(z){k(z.element).toggleClass("rte-changesPreview")
},state:function(z){return k(z.element).hasClass("rte-changesPreview")
}},commentAdd:{exec:function(z){var A=z.selection,B=k(A.getRange().commonAncestorContainer).closest(".rte-comment");
if(B.length===0){wysihtml5.commands.formatInline.exec(z,null,"span","rte rte-comment")
}},state:function(A){var z=A.selection.getRange();
k(A.config.toolbar).toggleClass("rte-toolbarContainer-inComment",!z.collapsed||k(z.commonAncestorContainer).closest(".rte-comment").length>0);
return false
}},commentCollapse:{exec:function(z){y(z,".rte-comment",function(){var A=k(this),B=A.attr("data-comment");
if(B){A.text(B);
A.removeAttr("data-comment")
}else{A.attr("data-comment",A.text());
A.text("\u2026")
}})
},state:function(z){return !!k(z.selection.getRange().commonAncestorContainer).closest(".rte-comment").attr("data-comment")
}},commentRemove:{exec:function(z){y(z,".rte-comment",function(){k(this).remove()
})
},state:function(z){return k(z.selection.getRange().commonAncestorContainer).closest(".rte-comment-removed").length>0
}}})
})();
wysihtml5.commands.fullscreen={exec:function(x){k(".toolBroadcast").toggle();
k(".toolHeader").toggle();
k(x.parent.container).toggleClass("rte-fullscreen");
k(x.element).toggleClass("rte-fullscreen");
k(w.body).toggleClass("rte-fullscreen")
},state:function(x){return k(x.element).hasClass("rte-fullscreen")
}};
var p;
(function(){k.ajax({url:CONTEXT_PATH+"/style/rte-content.jsp",cache:false,async:false,success:function(x){p=x
}})
})();
var l=k();
k.plugin2("rte",{_defaultOptions:{enhancement:o,iframeHtml:p,marker:b,placeholder:"",style:false,toolbar:c,useLineBreaks:!RTE_LEGACY_HTML,parserRules:RTE_LEGACY_HTML?{}:{tags:{font:{rename_tag:"span"},style:{remove:true}}}},_create:function(x){var y=this.option();
k.data(x,"rte-options",k.extend(true,{},y));
if(y.initImmediately){var A=k(this),z;
if(A.attr("data-inline")==="true"){y.inline=true
}z=new s(x,y);
A.bind("input-disable",function(C,B){A.closest(".rte-container").toggleClass("state-disabled",B);
z[B?"disable":"enable"]()
});
A.parent().trigger("create")
}else{l=l.add(k(x))
}},enable:function(){var x=this.$caller[0];
if(x){k.each(d,function(){var y=this.textareaElement;
if(y&&k.contains(x,y)){this.enable()
}})
}return this
},enhancement:function(A){var B=this.$caller.closest(".rte-enhancement");
var z=B.data("$rte-placeholder");
if(z){k.each(A,function(D,E){var C="data-"+D;
if(E===null||E===f){z.removeAttr(C)
}else{z.attr(C,E)
}})
}var y=k.parseJSON(A.reference||"{}");
var x=y.label;
if(x){B.find(".rte-enhancement-label").text(x)
}return this
},wysihtml5:function(){var x=this.$caller[0],y;
k.each(d,function(){if(x===this.textareaElement||x===this.composer.iframe||x.ownerDocument===this.composer.element.ownerDocument){y=this;
return
}});
return y
}});
setInterval(function(){l.each(function(){var z=k(this),x=k.data(this,"rte-options"),y;
if(z.is(":visible")){l=l.not(z);
if(z.attr("data-inline")==="true"){x.inline=true
}y=new s(this,x);
z.bind("input-disable",function(B,A){z.closest(".rte-container").toggleClass("state-disabled",A);
y[A?"disable":"enable"]()
});
z.parent().trigger("create")
}})
},100);
q.bind("resize.rte scroll.rte",a=k.throttle(150,function(){var x=k(".toolHeader"),y=x.offset().top+x.outerHeight()-(x.css("position")==="fixed"?q.scrollTop():0),z=q.scrollTop()+y,A=window.requestAnimationFrame;
k.each(d,function(){var H=k(this.container),C,D,E,G,F,B;
if(!H.is(":visible")){return
}C=k(this.overlay);
D=k(this.config.toolbar);
E=H.offset().top;
G=D.outerHeight();
if(z<E){A(function(){H.css("padding-top",0);
C.css("top",G);
D.attr("style",this._toolbarOldStyle);
this._toolbarOldStyle=null
})
}else{this._toolbarOldStyle=this._toolbarOldStyle||D.attr("style")||" ";
A(function(){H.css("padding-top",G);
C.css("top",0)
});
if(z<E+H.height()){F=D.offset().left;
B=D.width();
A(function(){D.css({left:F,position:"fixed",top:y,width:B})
})
}else{A(function(){D.css({top:-10000,position:"fixed"})
})
}}})
}));
m.on("click","[data-enhancement]",function(D){var x=k(this),z=x.popup("source"),C=z.closest(".rte-group"),y=C.find(".rte-button-enhancementEdit a"),B=x.attr("data-enhancement"),A=k.parseJSON(B);
C.addClass("rte-group-enhancementSet");
z.text("Change");
z.rte("enhancement",{id:A.record._ref,label:A.label,preview:A.preview,reference:B});
if(y.length>0){y.attr("href",k.addQueryParameters(y.attr("href"),"id",A.record._ref))
}x.popup("close");
D.preventDefault();
D.stopImmediatePropagation()
});
m.on("close",'.popup[name ^= "contentEnhancement-"]',function(){var y=k(this).popup("source").closest(".rte-group"),z,x;
if(!y.hasClass("rte-group-enhancementSet")){z=y.closest(".rte-enhancement");
x=z.data("$rte-placeholder");
z.remove();
if(x){x.remove()
}}});
m.on("submit","form",function(){var x=k(this),B=window.sessionStorage,y=0,z=B.length,A;
for(;
y<z;
++y){A=B.key(y);
if(A.indexOf("bsp.rte.changesTracking.")===0){B.removeItem(A)
}}x.find(".wysihtml5-sandbox").each(function(){if(k(this.contentDocument.body).hasClass("rte-changesTracking")){B.setItem("bsp.rte.changesTracking."+k(this).closest(".inputContainer").attr("data-name"),"1")
}})
})
}(jQuery,window));d3=function(){var gQ={version:"3.2.7"};
if(!Date.now){Date.now=function(){return +new Date()
}
}var bA=document,dR=bA.documentElement,fd=window;
try{bA.createElement("div").style.setProperty("opacity",0,"")
}catch(e9){var dv=fd.Element.prototype,bN=dv.setAttribute,gB=dv.setAttributeNS,dg=fd.CSSStyleDeclaration.prototype,gj=dg.setProperty;
dv.setAttribute=function(e,hC){bN.call(this,e,hC+"")
};
dv.setAttributeNS=function(hD,e,hC){gB.call(this,hD,e,hC+"")
};
dg.setProperty=function(e,hD,hC){gj.call(this,e,hD+"",hC)
}
}gQ.ascending=function(hC,e){return hC<e?-1:hC>e?1:hC>=e?0:NaN
};
gQ.descending=function(hC,e){return e<hC?-1:e>hC?1:e>=hC?0:NaN
};
gQ.min=function(hG,hE){var hD=-1,hF=hG.length,hC,e;
if(arguments.length===1){while(++hD<hF&&!((hC=hG[hD])!=null&&hC<=hC)){hC=undefined
}while(++hD<hF){if((e=hG[hD])!=null&&hC>e){hC=e
}}}else{while(++hD<hF&&!((hC=hE.call(hG,hG[hD],hD))!=null&&hC<=hC)){hC=undefined
}while(++hD<hF){if((e=hE.call(hG,hG[hD],hD))!=null&&hC>e){hC=e
}}}return hC
};
gQ.max=function(hG,hE){var hD=-1,hF=hG.length,hC,e;
if(arguments.length===1){while(++hD<hF&&!((hC=hG[hD])!=null&&hC<=hC)){hC=undefined
}while(++hD<hF){if((e=hG[hD])!=null&&e>hC){hC=e
}}}else{while(++hD<hF&&!((hC=hE.call(hG,hG[hD],hD))!=null&&hC<=hC)){hC=undefined
}while(++hD<hF){if((e=hE.call(hG,hG[hD],hD))!=null&&e>hC){hC=e
}}}return hC
};
gQ.extent=function(hH,hE){var hD=-1,hG=hH.length,hC,e,hF;
if(arguments.length===1){while(++hD<hG&&!((hC=hF=hH[hD])!=null&&hC<=hC)){hC=hF=undefined
}while(++hD<hG){if((e=hH[hD])!=null){if(hC>e){hC=e
}if(hF<e){hF=e
}}}}else{while(++hD<hG&&!((hC=hF=hE.call(hH,hH[hD],hD))!=null&&hC<=hC)){hC=undefined
}while(++hD<hG){if((e=hE.call(hH,hH[hD],hD))!=null){if(hC>e){hC=e
}if(hF<e){hF=e
}}}}return[hC,hF]
};
gQ.sum=function(hG,hE){var hD=0,hF=hG.length,e,hC=-1;
if(arguments.length===1){while(++hC<hF){if(!isNaN(e=+hG[hC])){hD+=e
}}}else{while(++hC<hF){if(!isNaN(e=+hE.call(hG,hG[hC],hC))){hD+=e
}}}return hD
};
function gU(e){return e!=null&&!isNaN(e)
}gQ.mean=function(hH,hF){var hG=hH.length,hC,e=0,hE=-1,hD=0;
if(arguments.length===1){while(++hE<hG){if(gU(hC=hH[hE])){e+=(hC-e)/++hD
}}}else{while(++hE<hG){if(gU(hC=hF.call(hH,hH[hE],hE))){e+=(hC-e)/++hD
}}}return hD?e:undefined
};
gQ.quantile=function(hD,hH){var hE=(hD.length-1)*hH+1,hF=Math.floor(hE),hC=+hD[hF-1],hG=hE-hF;
return hG?hC+hG*(hD[hF]-hC):hC
};
gQ.median=function(hC,e){if(arguments.length>1){hC=hC.map(e)
}hC=hC.filter(gU);
return hC.length?gQ.quantile(hC.sort(gQ.ascending),0.5):undefined
};
gQ.bisector=function(e){return{left:function(hD,hC,hG,hF){if(arguments.length<3){hG=0
}if(arguments.length<4){hF=hD.length
}while(hG<hF){var hE=hG+hF>>>1;
if(e.call(hD,hD[hE],hE)<hC){hG=hE+1
}else{hF=hE
}}return hG
},right:function(hD,hC,hG,hF){if(arguments.length<3){hG=0
}if(arguments.length<4){hF=hD.length
}while(hG<hF){var hE=hG+hF>>>1;
if(hC<e.call(hD,hD[hE],hE)){hF=hE
}else{hG=hE+1
}}return hG
}}
};
var fZ=gQ.bisector(function(e){return e
});
gQ.bisectLeft=fZ.left;
gQ.bisect=gQ.bisectRight=fZ.right;
gQ.shuffle=function(hE){var e=hE.length,hD,hC;
while(e){hC=Math.random()*e--|0;
hD=hE[e],hE[e]=hE[hC],hE[hC]=hD
}return hE
};
gQ.permute=function(hF,hC){var e=[],hD=-1,hE=hC.length;
while(++hD<hE){e[hD]=hF[hC[hD]]
}return e
};
gQ.zip=function(){if(!(hG=arguments.length)){return[]
}for(var hE=-1,e=gQ.min(arguments,eT),hD=new Array(e);
++hE<e;
){for(var hC=-1,hG,hF=hD[hE]=new Array(hG);
++hC<hG;
){hF[hC]=arguments[hC][hE]
}}return hD
};
function eT(e){return e.length
}gQ.transpose=function(e){return gQ.zip.apply(gQ,e)
};
gQ.keys=function(hD){var hC=[];
for(var e in hD){hC.push(e)
}return hC
};
gQ.values=function(hD){var e=[];
for(var hC in hD){e.push(hD[hC])
}return e
};
gQ.entries=function(hD){var e=[];
for(var hC in hD){e.push({key:hC,value:hD[hC]})
}return e
};
gQ.merge=function(e){return Array.prototype.concat.apply([],e)
};
gQ.range=function(hH,hF,hG){if(arguments.length<3){hG=1;
if(arguments.length<2){hF=hH;
hH=0
}}if((hF-hH)/hG===Infinity){throw new Error("infinite range")
}var hC=[],e=fU(Math.abs(hG)),hE=-1,hD;
hH*=e,hF*=e,hG*=e;
if(hG<0){while((hD=hH+hG*++hE)>hF){hC.push(hD/e)
}}else{while((hD=hH+hG*++hE)<hF){hC.push(hD/e)
}}return hC
};
function fU(e){var hC=1;
while(e*hC%1){hC*=10
}return hC
}function ht(hE,hD){try{for(var hC in hD){Object.defineProperty(hE.prototype,hC,{value:hD[hC],enumerable:false})
}}catch(hF){hE.prototype=hD
}}gQ.map=function(e){var hD=new aC();
for(var hC in e){hD.set(hC,e[hC])
}return hD
};
function aC(){}ht(aC,{has:function(e){return hv+e in this
},get:function(e){return this[hv+e]
},set:function(e,hC){return this[hv+e]=hC
},remove:function(e){e=hv+e;
return e in this&&delete this[e]
},keys:function(){var e=[];
this.forEach(function(hC){e.push(hC)
});
return e
},values:function(){var e=[];
this.forEach(function(hC,hD){e.push(hD)
});
return e
},entries:function(){var e=[];
this.forEach(function(hC,hD){e.push({key:hC,value:hD})
});
return e
},forEach:function(hC){for(var e in this){if(e.charCodeAt(0)===dk){hC.call(this,e.substring(1),this[e])
}}}});
var hv="\0",dk=hv.charCodeAt(0);
gQ.nest=function(){var hE={},hD=[],hH=[],hC,hF;
function hG(hJ,hQ,hO){if(hO>=hD.length){return hF?hF.call(hE,hQ):hC?hQ.sort(hC):hQ
}var hP=-1,hI=hQ.length,hS=hD[hO++],hN,hM,hL,hK=new aC(),hR;
while(++hP<hI){if(hR=hK.get(hN=hS(hM=hQ[hP]))){hR.push(hM)
}else{hK.set(hN,[hM])
}}if(hJ){hM=hJ();
hL=function(hU,hT){hM.set(hU,hG(hJ,hT,hO))
}
}else{hM={};
hL=function(hU,hT){hM[hU]=hG(hJ,hT,hO)
}
}hK.forEach(hL);
return hM
}function e(hJ,hK){if(hK>=hD.length){return hJ
}var hL=[],hI=hH[hK++];
hJ.forEach(function(hM,hN){hL.push({key:hM,values:e(hN,hK)})
});
return hI?hL.sort(function(hN,hM){return hI(hN.key,hM.key)
}):hL
}hE.map=function(hJ,hI){return hG(hI,hJ,0)
};
hE.entries=function(hI){return e(hG(gQ.map,hI,0),0)
};
hE.key=function(hI){hD.push(hI);
return hE
};
hE.sortKeys=function(hI){hH[hD.length-1]=hI;
return hE
};
hE.sortValues=function(hI){hC=hI;
return hE
};
hE.rollup=function(hI){hF=hI;
return hE
};
return hE
};
gQ.set=function(hD){var hC=new c9();
if(hD){for(var e=0;
e<hD.length;
e++){hC.add(hD[e])
}}return hC
};
function c9(){}ht(c9,{has:function(e){return hv+e in this
},add:function(e){this[hv+e]=true;
return e
},remove:function(e){e=hv+e;
return e in this&&delete this[e]
},values:function(){var e=[];
this.forEach(function(hC){e.push(hC)
});
return e
},forEach:function(hC){for(var e in this){if(e.charCodeAt(0)===dk){hC.call(this,e.substring(1))
}}}});
gQ.behavior={};
gQ.rebind=function(hD,hC){var e=1,hF=arguments.length,hE;
while(++e<hF){hD[hE=arguments[e]]=ee(hD,hC,hC[hE])
}return hD
};
function ee(hC,e,hD){return function(){var hE=hD.apply(e,arguments);
return hE===e?hC:hE
}
}function c1(hD,hC){if(hC in hD){return hC
}hC=hC.charAt(0).toUpperCase()+hC.substring(1);
for(var hE=0,hF=I.length;
hE<hF;
++hE){var e=I[hE]+hC;
if(e in hD){return e
}}}var I=["webkit","ms","moz","Moz","o","O"];
var dx=bB;
function hp(hC){var e=-1,hE=hC.length,hD=[];
while(++e<hE){hD.push(hC[e])
}return hD
}function bB(e){return Array.prototype.slice.call(e)
}try{dx(dR.childNodes)[0].nodeType
}catch(gJ){dx=hp
}function aB(){}gQ.dispatch=function(){var e=new ew(),hC=-1,hD=arguments.length;
while(++hC<hD){e[arguments[hC]]=eW(e)
}return e
};
function ew(){}ew.prototype.on=function(hD,hE){var hC=hD.indexOf("."),e="";
if(hC>=0){e=hD.substring(hC+1);
hD=hD.substring(0,hC)
}if(hD){return arguments.length<2?this[hD].on(e):this[hD].on(e,hE)
}if(arguments.length===2){if(hE==null){for(hD in this){if(this.hasOwnProperty(hD)){this[hD].on(e,null)
}}}return this
}};
function eW(e){var hD=[],hC=new aC();
function hE(){var hH=hD,hG=-1,hI=hH.length,hF;
while(++hG<hI){if(hF=hH[hG].on){hF.apply(this,arguments)
}}return e
}hE.on=function(hG,hI){var hF=hC.get(hG),hH;
if(arguments.length<2){return hF&&hF.on
}if(hF){hF.on=null;
hD=hD.slice(0,hH=hD.indexOf(hF)).concat(hD.slice(hH+1));
hC.remove(hG)
}if(hI){hD.push(hC.set(hG,{on:hI}))
}return e
};
return hE
}gQ.event=null;
function u(){gQ.event.preventDefault()
}function ab(){var hD=gQ.event,hC;
while(hC=hD.sourceEvent){hD=hC
}return hD
}function gN(hD){var e=new ew(),hC=0,hE=arguments.length;
while(++hC<hE){e[arguments[hC]]=eW(e)
}e.of=function(hG,hF){return function(hH){try{var hI=hH.sourceEvent=gQ.event;
hH.target=hD;
gQ.event=hH;
e[hH.type].apply(hG,hF)
}finally{gQ.event=hI
}}
};
return e
}gQ.requote=function(e){return e.replace(cU,"\\$&")
};
var cU=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;
var hw={}.__proto__?function(hC,e){hC.__proto__=e
}:function(hC,e){for(var hD in e){hC[hD]=e[hD]
}};
function dI(e){hw(e,dH);
return e
}var c8=function(e,hC){return hC.querySelector(e)
},fK=function(e,hC){return hC.querySelectorAll(e)
},b=dR[c1(dR,"matchesSelector")],a=function(hC,e){return b.call(hC,e)
};
if(typeof Sizzle==="function"){c8=function(e,hC){return Sizzle(e,hC)[0]||null
};
fK=function(e,hC){return Sizzle.uniqueSort(Sizzle(e,hC))
};
a=Sizzle.matchesSelector
}gQ.selection=function(){return gn
};
var dH=gQ.selection.prototype=[];
dH.select=function(hG){var hD=[],hK,e,hJ,hE;
hG=w(hG);
for(var hH=-1,hF=this.length;
++hH<hF;
){hD.push(hK=[]);
hK.parentNode=(hJ=this[hH]).parentNode;
for(var hI=-1,hC=hJ.length;
++hI<hC;
){if(hE=hJ[hI]){hK.push(e=hG.call(hE,hE.__data__,hI,hH));
if(e&&"__data__" in hE){e.__data__=hE.__data__
}}else{hK.push(null)
}}}return dI(hD)
};
function w(e){return typeof e==="function"?e:function(){return c8(e,this)
}
}dH.selectAll=function(hF){var hC=[],hJ,hD;
hF=cM(hF);
for(var hG=-1,hE=this.length;
++hG<hE;
){for(var hI=this[hG],hH=-1,e=hI.length;
++hH<e;
){if(hD=hI[hH]){hC.push(hJ=dx(hF.call(hD,hD.__data__,hH,hG)));
hJ.parentNode=hD
}}}return dI(hC)
};
function cM(e){return typeof e==="function"?e:function(){return fK(e,this)
}
}var dX={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
gQ.ns={prefix:dX,qualify:function(e){var hC=e.indexOf(":"),hD=e;
if(hC>=0){hD=e.substring(0,hC);
e=e.substring(hC+1)
}return dX.hasOwnProperty(hD)?{space:dX[hD],local:e}:e
}};
dH.attr=function(e,hD){if(arguments.length<2){if(typeof e==="string"){var hC=this.node();
e=gQ.ns.qualify(e);
return e.local?hC.getAttributeNS(e.space,e.local):hC.getAttribute(e)
}for(hD in e){this.each(bh(hD,e[hD]))
}return this
}return this.each(bh(e,hD))
};
function bh(hD,hH){hD=gQ.ns.qualify(hD);
function hC(){this.removeAttribute(hD)
}function hI(){this.removeAttributeNS(hD.space,hD.local)
}function hG(){this.setAttribute(hD,hH)
}function hF(){this.setAttributeNS(hD.space,hD.local,hH)
}function e(){var hJ=hH.apply(this,arguments);
if(hJ==null){this.removeAttribute(hD)
}else{this.setAttribute(hD,hJ)
}}function hE(){var hJ=hH.apply(this,arguments);
if(hJ==null){this.removeAttributeNS(hD.space,hD.local)
}else{this.setAttributeNS(hD.space,hD.local,hJ)
}}return hH==null?hD.local?hI:hC:typeof hH==="function"?hD.local?hE:e:hD.local?hF:hG
}function ct(e){return e.trim().replace(/\s+/g," ")
}dH.classed=function(e,hE){if(arguments.length<2){if(typeof e==="string"){var hD=this.node(),hF=(e=e.trim().split(/^|\s+/g)).length,hC=-1;
if(hE=hD.classList){while(++hC<hF){if(!hE.contains(e[hC])){return false
}}}else{hE=hD.getAttribute("class");
while(++hC<hF){if(!gk(e[hC]).test(hE)){return false
}}}return true
}for(hE in e){this.each(ga(hE,e[hE]))
}return this
}return this.each(ga(e,hE))
};
function gk(e){return new RegExp("(?:^|\\s+)"+gQ.requote(e)+"(?:\\s+|$)","g")
}function ga(hC,hE){hC=hC.trim().split(/\s+/).map(hs);
var hF=hC.length;
function e(){var hG=-1;
while(++hG<hF){hC[hG](this,hE)
}}function hD(){var hH=-1,hG=hE.apply(this,arguments);
while(++hH<hF){hC[hH](this,hG)
}}return typeof hE==="function"?hD:e
}function hs(e){var hC=gk(e);
return function(hD,hE){if(hF=hD.classList){return hE?hF.add(e):hF.remove(e)
}var hF=hD.getAttribute("class")||"";
if(hE){hC.lastIndex=0;
if(!hC.test(hF)){hD.setAttribute("class",ct(hF+" "+e))
}}else{hD.setAttribute("class",ct(hF.replace(hC," ")))
}}
}dH.style=function(e,hD,hC){var hE=arguments.length;
if(hE<3){if(typeof e!=="string"){if(hE<2){hD=""
}for(hC in e){this.each(fq(hC,e[hC],hD))
}return this
}if(hE<2){return fd.getComputedStyle(this.node(),null).getPropertyValue(e)
}hC=""
}return this.each(fq(e,hD,hC))
};
function fq(hD,hG,hE){function hC(){this.style.removeProperty(hD)
}function hF(){this.style.setProperty(hD,hG,hE)
}function e(){var hH=hG.apply(this,arguments);
if(hH==null){this.style.removeProperty(hD)
}else{this.style.setProperty(hD,hH,hE)
}}return hG==null?hC:typeof hG==="function"?e:hF
}dH.property=function(e,hC){if(arguments.length<2){if(typeof e==="string"){return this.node()[e]
}for(hC in e){this.each(g6(hC,e[hC]))
}return this
}return this.each(g6(e,hC))
};
function g6(hC,hE){function e(){delete this[hC]
}function hD(){this[hC]=hE
}function hF(){var hG=hE.apply(this,arguments);
if(hG==null){delete this[hC]
}else{this[hC]=hG
}}return hE==null?e:typeof hE==="function"?hF:hD
}dH.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var hC=e.apply(this,arguments);
this.textContent=hC==null?"":hC
}:e==null?function(){this.textContent=""
}:function(){this.textContent=e
}):this.node().textContent
};
dH.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var hC=e.apply(this,arguments);
this.innerHTML=hC==null?"":hC
}:e==null?function(){this.innerHTML=""
}:function(){this.innerHTML=e
}):this.node().innerHTML
};
dH.append=function(e){e=ax(e);
return this.select(function(){return this.appendChild(e.apply(this,arguments))
})
};
function ax(e){return typeof e==="function"?e:(e=gQ.ns.qualify(e)).local?function(){return bA.createElementNS(e.space,e.local)
}:function(){return bA.createElementNS(this.namespaceURI,e)
}
}dH.insert=function(e,hC){e=ax(e);
hC=w(hC);
return this.select(function(){return this.insertBefore(e.apply(this,arguments),hC.apply(this,arguments))
})
};
dH.remove=function(){return this.each(function(){var e=this.parentNode;
if(e){e.removeChild(this)
}})
};
dH.data=function(hI,hK){var hF=-1,hC=this.length,hJ,hD;
if(!arguments.length){hI=new Array(hC=(hJ=this[0]).length);
while(++hF<hC){if(hD=hJ[hF]){hI[hF]=hD.__data__
}}return hI
}function hG(hU,hP){var hR,hM=hU.length,hO=hP.length,hT=Math.min(hM,hO),hY=new Array(hO),hV=new Array(hO),hS=new Array(hM),hN,hL;
if(hK){var hZ=new aC(),hW=new aC(),hX=[],hQ;
for(hR=-1;
++hR<hM;
){hQ=hK.call(hN=hU[hR],hN.__data__,hR);
if(hZ.has(hQ)){hS[hR]=hN
}else{hZ.set(hQ,hN)
}hX.push(hQ)
}for(hR=-1;
++hR<hO;
){hQ=hK.call(hP,hL=hP[hR],hR);
if(hN=hZ.get(hQ)){hY[hR]=hN;
hN.__data__=hL
}else{if(!hW.has(hQ)){hV[hR]=J(hL)
}}hW.set(hQ,hL);
hZ.remove(hQ)
}for(hR=-1;
++hR<hM;
){if(hZ.has(hX[hR])){hS[hR]=hU[hR]
}}}else{for(hR=-1;
++hR<hT;
){hN=hU[hR];
hL=hP[hR];
if(hN){hN.__data__=hL;
hY[hR]=hN
}else{hV[hR]=J(hL)
}}for(;
hR<hO;
++hR){hV[hR]=J(hP[hR])
}for(;
hR<hM;
++hR){hS[hR]=hU[hR]
}}hV.update=hY;
hV.parentNode=hY.parentNode=hS.parentNode=hU.parentNode;
hH.push(hV);
hE.push(hY);
e.push(hS)
}var hH=bH([]),hE=dI([]),e=dI([]);
if(typeof hI==="function"){while(++hF<hC){hG(hJ=this[hF],hI.call(hJ,hJ.parentNode.__data__,hF))
}}else{while(++hF<hC){hG(hJ=this[hF],hI)
}}hE.enter=function(){return hH
};
hE.exit=function(){return e
};
return hE
};
function J(e){return{__data__:e}
}dH.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")
};
dH.filter=function(e){var hD=[],hJ,hI,hE;
if(typeof e!=="function"){e=a0(e)
}for(var hG=0,hF=this.length;
hG<hF;
hG++){hD.push(hJ=[]);
hJ.parentNode=(hI=this[hG]).parentNode;
for(var hH=0,hC=hI.length;
hH<hC;
hH++){if((hE=hI[hH])&&e.call(hE,hE.__data__,hH)){hJ.push(hE)
}}}return dI(hD)
};
function a0(e){return function(){return a(this,e)
}
}dH.order=function(){for(var hC=-1,e=this.length;
++hC<e;
){for(var hG=this[hC],hD=hG.length-1,hE=hG[hD],hF;
--hD>=0;
){if(hF=hG[hD]){if(hE&&hE!==hF.nextSibling){hE.parentNode.insertBefore(hF,hE)
}hE=hF
}}}return this
};
dH.sort=function(hC){hC=gi.apply(this,arguments);
for(var hD=-1,e=this.length;
++hD<e;
){this[hD].sort(hC)
}return this.order()
};
function gi(e){if(!arguments.length){e=gQ.ascending
}return function(hD,hC){return !hD-!hC||e(hD.__data__,hC.__data__)
}
}dH.each=function(e){return cu(this,function(hE,hD,hC){e.call(hE,hE.__data__,hD,hC)
})
};
function cu(hC,hI){for(var hD=0,e=hC.length;
hD<e;
hD++){for(var hG=hC[hD],hE=0,hH=hG.length,hF;
hE<hH;
hE++){if(hF=hG[hE]){hI(hF,hE,hD)
}}}return hC
}dH.call=function(hC){var e=dx(arguments);
hC.apply(e[0]=this,e);
return this
};
dH.empty=function(){return !this.node()
};
dH.node=function(){for(var hC=0,e=this.length;
hC<e;
hC++){for(var hF=this[hC],hD=0,hG=hF.length;
hD<hG;
hD++){var hE=hF[hD];
if(hE){return hE
}}}return null
};
dH.size=function(){var e=0;
this.each(function(){++e
});
return e
};
function bH(e){hw(e,eJ);
return e
}var eJ=[];
gQ.selection.enter=bH;
gQ.selection.enter.prototype=eJ;
eJ.append=dH.append;
eJ.empty=dH.empty;
eJ.node=dH.node;
eJ.call=dH.call;
eJ.size=dH.size;
eJ.select=function(hG){var hD=[],hL,e,hJ,hK,hF;
for(var hH=-1,hE=this.length;
++hH<hE;
){hJ=(hK=this[hH]).update;
hD.push(hL=[]);
hL.parentNode=hK.parentNode;
for(var hI=-1,hC=hK.length;
++hI<hC;
){if(hF=hK[hI]){hL.push(hJ[hI]=e=hG.call(hK.parentNode,hF.__data__,hI,hH));
e.__data__=hF.__data__
}else{hL.push(null)
}}}return dI(hD)
};
eJ.insert=function(e,hC){if(arguments.length<2){hC=f4(this)
}return dH.insert.call(this,e,hC)
};
function f4(hD){var e,hC;
return function(hI,hF,hE){var hH=hD[hE].update,hJ=hH.length,hG;
if(hE!=hC){hC=hE,e=0
}if(hF>=e){e=hF+1
}while(!(hG=hH[e])&&++e<hJ){}return hG
}
}dH.transition=function(){var e=am||++gH,hD=[],hK,hE,hI=dO||{time:Date.now(),ease:aq,delay:0,duration:250};
for(var hG=-1,hF=this.length;
++hG<hF;
){hD.push(hK=[]);
for(var hJ=this[hG],hH=-1,hC=hJ.length;
++hH<hC;
){if(hE=hJ[hH]){fg(hE,hH,e,hI)
}hK.push(hE)
}}return gl(hD,e)
};
gQ.select=function(e){var hC=[typeof e==="string"?c8(e,bA):e];
hC.parentNode=dR;
return dI([hC])
};
gQ.selectAll=function(e){var hC=dx(typeof e==="string"?fK(e,bA):e);
hC.parentNode=dR;
return dI([hC])
};
var gn=gQ.select(dR);
dH.on=function(hC,hD,e){var hE=arguments.length;
if(hE<3){if(typeof hC!=="string"){if(hE<2){hD=false
}for(e in hC){this.each(l(e,hC[e],hD))
}return this
}if(hE<2){return(hE=this.node()["__on"+hC])&&hE._
}e=false
}return this.each(l(hC,hD,e))
};
function l(hJ,hE,hK){var e="__on"+hJ,hG=hJ.indexOf("."),hC=e5;
if(hG>0){hJ=hJ.substring(0,hG)
}var hD=bx.get(hJ);
if(hD){hJ=hD,hC=ak
}function hF(){var hL=this[e];
if(hL){this.removeEventListener(hJ,hL,hL.$);
delete this[e]
}}function hI(){var hL=hC(hE,dx(arguments));
hF.call(this);
this.addEventListener(hJ,this[e]=hL,hL.$=hK);
hL._=hE
}function hH(){var hO=new RegExp("^__on([^.]+)"+gQ.requote(hJ)+"$"),hN;
for(var hM in this){if(hN=hM.match(hO)){var hL=this[hM];
this.removeEventListener(hN[1],hL,hL.$);
delete this[hM]
}}}return hG?hE?hI:hF:hE?aB:hH
}var bx=gQ.map({mouseenter:"mouseover",mouseleave:"mouseout"});
bx.forEach(function(e){if("on"+e in bA){bx.remove(e)
}});
function e5(hC,e){return function(hD){var hE=gQ.event;
gQ.event=hD;
e[0]=this.__data__;
try{hC.apply(this,e)
}finally{gQ.event=hE
}}
}function ak(hD,e){var hC=e5(hD,e);
return function(hG){var hF=this,hE=hG.relatedTarget;
if(!hE||hE!==hF&&!(hE.compareDocumentPosition(hF)&8)){hC.call(hF,hG)
}}
}var bY=c1(dR.style,"userSelect"),gg=0;
function by(){var hF=".dragsuppress-"+ ++gg,hD="touchmove"+hF,hE="selectstart"+hF,hH="dragstart"+hF,hI="click"+hF,hC=gQ.select(fd).on(hD,u).on(hE,u).on(hH,u),hG=dR.style,e=hG[bY];
hG[bY]="none";
return function(hJ){hC.on(hF,null);
hG[bY]=e;
if(hJ){function hK(){hC.on(hI,null)
}hC.on(hI,function(){u();
hK()
},true);
setTimeout(hK,0)
}}
}gQ.mouse=function(e){return aR(e,ab())
};
var cr=/WebKit/.test(fd.navigator.userAgent)?-1:0;
function aR(hE,hH){var hF=hE.ownerSVGElement||hE;
if(hF.createSVGPoint){var hC=hF.createSVGPoint();
if(cr<0&&(fd.scrollX||fd.scrollY)){hF=gQ.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");
var hD=hF[0][0].getScreenCTM();
cr=!(hD.f||hD.e);
hF.remove()
}if(cr){hC.x=hH.pageX;
hC.y=hH.pageY
}else{hC.x=hH.clientX;
hC.y=hH.clientY
}hC=hC.matrixTransform(hE.getScreenCTM().inverse());
return[hC.x,hC.y]
}var hG=hE.getBoundingClientRect();
return[hH.clientX-hG.left-hE.clientLeft,hH.clientY-hG.top-hE.clientTop]
}gQ.touches=function(e,hC){if(arguments.length<2){hC=ab().touches
}return hC?dx(hC).map(function(hE){var hD=aR(e,hE);
hD.identifier=hE.identifier;
return hD
}):[]
};
gQ.behavior.drag=function(){var hF=gN(hE,"drag","dragstart","dragend"),e=null,hC=hD(aB,gQ.mouse,"mousemove","mouseup"),hI=hD(hH,hG,"touchmove","touchend");
function hE(){this.on("mousedown.drag",hC).on("touchstart.drag",hI)
}function hH(){return gQ.event.changedTouches[0].identifier
}function hG(hJ,hK){return gQ.touches(hJ).filter(function(hL){return hL.identifier===hK
})[0]
}function hD(hM,hJ,hL,hK){return function(){var hR=this,hY=hR.parentNode,hZ=hF.of(hR,arguments),hX=gQ.event.target,hN=hM(),hP=hN==null?"drag":"drag-"+hN,hS=hJ(hY,hN),hU=0,hO,hW=gQ.select(fd).on(hL+"."+hP,hT).on(hK+"."+hP,hV),hQ=by();
if(e){hO=e.apply(hR,arguments);
hO=[hO.x-hS[0],hO.y-hS[1]]
}else{hO=[0,0]
}hZ({type:"dragstart"});
function hT(){if(!hY){return hV()
}var h2=hJ(hY,hN),h1=h2[0]-hS[0],h0=h2[1]-hS[1];
hU|=h1|h0;
hS=h2;
hZ({type:"drag",x:h2[0]+hO[0],y:h2[1]+hO[1],dx:h1,dy:h0})
}function hV(){hW.on(hL+"."+hP,null).on(hK+"."+hP,null);
hQ(hU&&gQ.event.target===hX);
hZ({type:"dragend"})
}}
}hE.origin=function(hJ){if(!arguments.length){return e
}e=hJ;
return hE
};
return gQ.rebind(hE,hF,"on")
};
gQ.behavior.zoom=function(){var hM=[0,0],hV,hZ=1,hD=fz,hP="mousedown.zoom",hW="mousemove.zoom",hQ="mouseup.zoom",hR=gN(e,"zoom"),hU,hT,hH,hF,hJ;
function e(){this.on(hP,hE).on(gA+".zoom",hN).on(hW,hS).on("dblclick.zoom",hK).on("touchstart.zoom",hG)
}e.translate=function(h0){if(!arguments.length){return hM
}hM=h0.map(Number);
hL();
return e
};
e.scale=function(h0){if(!arguments.length){return hZ
}hZ=+h0;
hL();
return e
};
e.scaleExtent=function(h0){if(!arguments.length){return hD
}hD=h0==null?fz:h0.map(Number);
return e
};
e.x=function(h0){if(!arguments.length){return hT
}hT=h0;
hU=h0.copy();
hM=[0,0];
hZ=1;
return e
};
e.y=function(h0){if(!arguments.length){return hF
}hF=h0;
hH=h0.copy();
hM=[0,0];
hZ=1;
return e
};
function hC(h0){return[(h0[0]-hM[0])/hZ,(h0[1]-hM[1])/hZ]
}function hO(h0){return[h0[0]*hZ+hM[0],h0[1]*hZ+hM[1]]
}function hI(h0){hZ=Math.max(hD[0],Math.min(hD[1],h0))
}function hX(h1,h0){h0=hO(h0);
hM[0]+=h1[0]-h0[0];
hM[1]+=h1[1]-h0[1]
}function hL(){if(hT){hT.domain(hU.range().map(function(h0){return(h0-hM[0])/hZ
}).map(hU.invert))
}if(hF){hF.domain(hH.range().map(function(h0){return(h0-hM[1])/hZ
}).map(hH.invert))
}}function hY(h0){hL();
h0({type:"zoom",scale:hZ,translate:hM})
}function hE(){var h2=this,h7=hR.of(h2,arguments),h6=gQ.event.target,h4=0,h8=gQ.select(fd).on(hW,h3).on(hQ,h5),h0=hC(gQ.mouse(h2)),h1=by();
function h3(){h4=1;
hX(gQ.mouse(h2),h0);
hY(h7)
}function h5(){h8.on(hW,fd===h2?hS:null).on(hQ,null);
h1(h4&&gQ.event.target===h6)
}}function hG(){var ij=this,h7=hR.of(ij,arguments),h9=gQ.touches(ij),ii={},id=0,ig=hZ,h0=Date.now(),ik="zoom-"+gQ.event.changedTouches[0].identifier,ia="touchmove."+ik,ih="touchend."+ik,h5=gQ.select(fd).on(ia,h2).on(ih,h1),h8=gQ.select(ij).on(hP,null),h3=by();
h9.forEach(function(il){ii[il.identifier]=hC(il)
});
if(h9.length===1){if(h0-hJ<500){var ic=h9[0],ie=hC(h9[0]);
hI(hZ*2);
hX(ic,ie);
u();
hY(h7)
}hJ=h0
}else{if(h9.length>1){var ic=h9[0],ib=h9[1],h6=ic[0]-ib[0],h4=ic[1]-ib[1];
id=h6*h6+h4*h4
}}function h2(){var ip=gQ.touches(ij),it=ip[0],io=ii[it.identifier];
if(ir=ip[1]){var ir,il=ii[ir.identifier],iq=gQ.event.scale;
if(iq==null){var im=(im=ir[0]-it[0])*im+(im=ir[1]-it[1])*im;
iq=id&&Math.sqrt(im/id)
}it=[(it[0]+ir[0])/2,(it[1]+ir[1])/2];
io=[(io[0]+il[0])/2,(io[1]+il[1])/2];
hI(iq*ig)
}hJ=null;
hX(it,io);
hY(h7)
}function h1(){h5.on(ia,null).on(ih,null);
h8.on(hP,hE);
h3()
}}function hN(){u();
if(!hV){hV=hC(gQ.mouse(this))
}hI(Math.pow(2,ck()*0.002)*hZ);
hX(gQ.mouse(this),hV);
hY(hR.of(this,arguments))
}function hS(){hV=null
}function hK(){var h2=gQ.mouse(this),h0=hC(h2),h1=Math.log(hZ)/Math.LN2;
hI(Math.pow(2,gQ.event.shiftKey?Math.ceil(h1)-1:Math.floor(h1)+1));
hX(h2,h0);
hY(hR.of(this,arguments))
}return gQ.rebind(e,hR,"on")
};
var fz=[0,Infinity];
var ck,gA="onwheel" in bA?(ck=function(){return -gQ.event.deltaY*(gQ.event.deltaMode?120:1)
},"wheel"):"onmousewheel" in bA?(ck=function(){return gQ.event.wheelDelta
},"mousewheel"):(ck=function(){return -gQ.event.detail
},"MozMousePixelScroll");
function E(){}E.prototype.toString=function(){return this.rgb()+""
};
gQ.hsl=function(hD,hC,e){return arguments.length===1?hD instanceof e6?el(hD.h,hD.s,hD.l):aQ(""+hD,f6,el):el(+hD,+hC,+e)
};
function el(hD,hC,e){return new e6(hD,hC,e)
}function e6(hD,hC,e){this.h=hD;
this.s=hC;
this.l=e
}var ec=e6.prototype=new E();
ec.brighter=function(e){e=Math.pow(0.7,arguments.length?e:1);
return el(this.h,this.s,this.l/e)
};
ec.darker=function(e){e=Math.pow(0.7,arguments.length?e:1);
return el(this.h,this.s,e*this.l)
};
ec.rgb=function(){return a7(this.h,this.s,this.l)
};
function a7(hG,hF,e){var hE,hD;
hG=isNaN(hG)?0:(hG%=360)<0?hG+360:hG;
hF=isNaN(hF)?0:hF<0?0:hF>1?1:hF;
e=e<0?0:e>1?1:e;
hD=e<=0.5?e*(1+hF):e+hF-e*hF;
hE=2*e-hD;
function hC(hI){if(hI>360){hI-=360
}else{if(hI<0){hI+=360
}}if(hI<60){return hE+(hD-hE)*hI/60
}if(hI<180){return hD
}if(hI<240){return hE+(hD-hE)*(240-hI)/60
}return hE
}function hH(hI){return Math.round(hC(hI)*255)
}return d7(hH(hG+120),hH(hG),hH(hG-120))
}var fO=Math.PI,fX=0.000001,ei=fX*fX,H=fO/180,g4=180/fO;
function bW(e){return e>0?1:e<0?-1:0
}function aa(e){return e>1?0:e<-1?fO:Math.acos(e)
}function b1(e){return e>1?fO/2:e<-1?-fO/2:Math.asin(e)
}function dF(e){return(Math.exp(e)-Math.exp(-e))/2
}function br(e){return(Math.exp(e)+Math.exp(-e))/2
}function ay(e){return(e=Math.sin(e/2))*e
}gQ.hcl=function(hC,hD,e){return arguments.length===1?hC instanceof cg?bp(hC.h,hC.c,hC.l):hC instanceof cT?gd(hC.l,hC.a,hC.b):gd((hC=dK((hC=gQ.rgb(hC)).r,hC.g,hC.b)).l,hC.a,hC.b):bp(+hC,+hD,+e)
};
function bp(hC,hD,e){return new cg(hC,hD,e)
}function cg(hC,hD,e){this.h=hC;
this.c=hD;
this.l=e
}var gL=cg.prototype=new E();
gL.brighter=function(e){return bp(this.h,this.c,Math.min(100,this.l+bf*(arguments.length?e:1)))
};
gL.darker=function(e){return bp(this.h,this.c,Math.max(0,this.l-bf*(arguments.length?e:1)))
};
gL.rgb=function(){return bq(this.h,this.c,this.l).rgb()
};
function bq(hC,hD,e){if(isNaN(hC)){hC=0
}if(isNaN(hD)){hD=0
}return b9(e,Math.cos(hC*=H)*hD,Math.sin(hC)*hD)
}gQ.lab=function(hD,hC,e){return arguments.length===1?hD instanceof cT?b9(hD.l,hD.a,hD.b):hD instanceof cg?bq(hD.l,hD.c,hD.h):dK((hD=gQ.rgb(hD)).r,hD.g,hD.b):b9(+hD,+hC,+e)
};
function b9(hD,hC,e){return new cT(hD,hC,e)
}function cT(hD,hC,e){this.l=hD;
this.a=hC;
this.b=e
}var bf=18;
var a8=0.95047,a6=1,a3=1.08883;
var f8=cT.prototype=new E();
f8.brighter=function(e){return b9(Math.min(100,this.l+bf*(arguments.length?e:1)),this.a,this.b)
};
f8.darker=function(e){return b9(Math.max(0,this.l-bf*(arguments.length?e:1)),this.a,this.b)
};
f8.rgb=function(){return aw(this.l,this.a,this.b)
};
function aw(hE,hD,hC){var hG=(hE+16)/116,e=hG+hD/500,hF=hG-hC/200;
e=gx(e)*a8;
hG=gx(hG)*a6;
hF=gx(hF)*a3;
return d7(c(3.2404542*e-1.5371385*hG-0.4985314*hF),c(-0.969266*e+1.8760108*hG+0.041556*hF),c(0.0556434*e-0.2040259*hG+1.0572252*hF))
}function gd(hD,hC,e){return hD>0?bp(Math.atan2(e,hC)*g4,Math.sqrt(hC*hC+e*e),hD):bp(NaN,NaN,hD)
}function gx(e){return e>0.206893034?e*e*e:(e-4/29)/7.787037
}function f0(e){return e>0.008856?Math.pow(e,1/3):7.787037*e+4/29
}function c(e){return Math.round(255*(e<=0.00304?12.92*e:1.055*Math.pow(e,1/2.4)-0.055))
}gQ.rgb=function(hD,hC,e){return arguments.length===1?hD instanceof eM?d7(hD.r,hD.g,hD.b):aQ(""+hD,d7,a7):d7(~~hD,~~hC,~~e)
};
function cY(e){return d7(e>>16,e>>8&255,e&255)
}function dc(e){return cY(e)+""
}function d7(hD,hC,e){return new eM(hD,hC,e)
}function eM(hD,hC,e){this.r=hD;
this.g=hC;
this.b=e
}var em=eM.prototype=new E();
em.brighter=function(hC){hC=Math.pow(0.7,arguments.length?hC:1);
var hF=this.r,hE=this.g,e=this.b,hD=30;
if(!hF&&!hE&&!e){return d7(hD,hD,hD)
}if(hF&&hF<hD){hF=hD
}if(hE&&hE<hD){hE=hD
}if(e&&e<hD){e=hD
}return d7(Math.min(255,~~(hF/hC)),Math.min(255,~~(hE/hC)),Math.min(255,~~(e/hC)))
};
em.darker=function(e){e=Math.pow(0.7,arguments.length?e:1);
return d7(~~(e*this.r),~~(e*this.g),~~(e*this.b))
};
em.hsl=function(){return f6(this.r,this.g,this.b)
};
em.toString=function(){return"#"+ci(this.r)+ci(this.g)+ci(this.b)
};
function ci(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)
}function aQ(hG,hE,hH){var e=0,hD=0,hF=0,hJ,hI,hC;
hJ=/([a-z]+)\((.*)\)/i.exec(hG);
if(hJ){hI=hJ[2].split(",");
switch(hJ[1]){case"hsl":return hH(parseFloat(hI[0]),parseFloat(hI[1])/100,parseFloat(hI[2])/100);
case"rgb":return hE(ez(hI[0]),ez(hI[1]),ez(hI[2]))
}}if(hC=ah.get(hG)){return hE(hC.r,hC.g,hC.b)
}if(hG!=null&&hG.charAt(0)==="#"){if(hG.length===4){e=hG.charAt(1);
e+=e;
hD=hG.charAt(2);
hD+=hD;
hF=hG.charAt(3);
hF+=hF
}else{if(hG.length===7){e=hG.substring(1,3);
hD=hG.substring(3,5);
hF=hG.substring(5,7)
}}e=parseInt(e,16);
hD=parseInt(hD,16);
hF=parseInt(hF,16)
}return hE(e,hD,hF)
}function f6(e,hF,hH){var hD=Math.min(e/=255,hF/=255,hH/=255),hI=Math.max(e,hF,hH),hG=hI-hD,hE,hJ,hC=(hI+hD)/2;
if(hG){hJ=hC<0.5?hG/(hI+hD):hG/(2-hI-hD);
if(e==hI){hE=(hF-hH)/hG+(hF<hH?6:0)
}else{if(hF==hI){hE=(hH-e)/hG+2
}else{hE=(e-hF)/hG+4
}}hE*=60
}else{hE=NaN;
hJ=hC>0&&hC<1?0:hE
}return el(hE,hJ,hC)
}function dK(hE,hD,hC){hE=dj(hE);
hD=dj(hD);
hC=dj(hC);
var e=f0((0.4124564*hE+0.3575761*hD+0.1804375*hC)/a8),hG=f0((0.2126729*hE+0.7151522*hD+0.072175*hC)/a6),hF=f0((0.0193339*hE+0.119192*hD+0.9503041*hC)/a3);
return b9(116*hG-16,500*(e-hG),200*(hG-hF))
}function dj(e){return(e/=255)<=0.04045?e/12.92:Math.pow((e+0.055)/1.055,2.4)
}function ez(hC){var e=parseFloat(hC);
return hC.charAt(hC.length-1)==="%"?Math.round(e*2.55):e
}var ah=gQ.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});
ah.forEach(function(e,hC){ah.set(e,cY(hC))
});
function Q(e){return typeof e==="function"?e:function(){return e
}
}gQ.functor=Q;
function fV(e){return e
}gQ.xhr=W(fV);
function W(e){return function(hC,hD,hE){if(arguments.length===2&&typeof hD==="function"){hE=hD,hD=null
}return ho(hC,hD,e,hE)
}
}function ho(e,hD,hF,hJ){var hK={},hI=gQ.dispatch("progress","load","error"),hE={},hG=new XMLHttpRequest(),hH=null;
if(fd.XDomainRequest&&!("withCredentials" in hG)&&/^(http(s)?:)?\/\//.test(e)){hG=new XDomainRequest()
}"onload" in hG?hG.onload=hG.onerror=hC:hG.onreadystatechange=function(){hG.readyState>3&&hC()
};
function hC(){var hM=hG.status,hL;
if(!hM&&hG.responseText||hM>=200&&hM<300||hM===304){try{hL=hF.call(hK,hG)
}catch(hN){hI.error.call(hK,hN);
return
}hI.load.call(hK,hL)
}else{hI.error.call(hK,hG)
}}hG.onprogress=function(hL){var hM=gQ.event;
gQ.event=hL;
try{hI.progress.call(hK,hG)
}finally{gQ.event=hM
}};
hK.header=function(hL,hM){hL=(hL+"").toLowerCase();
if(arguments.length<2){return hE[hL]
}if(hM==null){delete hE[hL]
}else{hE[hL]=hM+""
}return hK
};
hK.mimeType=function(hL){if(!arguments.length){return hD
}hD=hL==null?null:hL+"";
return hK
};
hK.responseType=function(hL){if(!arguments.length){return hH
}hH=hL;
return hK
};
hK.response=function(hL){hF=hL;
return hK
};
["get","post"].forEach(function(hL){hK[hL]=function(){return hK.send.apply(hK,[hL].concat(dx(arguments)))
}
});
hK.send=function(hO,hM,hN){if(arguments.length===2&&typeof hM==="function"){hN=hM,hM=null
}hG.open(hO,e,true);
if(hD!=null&&!("accept" in hE)){hE.accept=hD+",*/*"
}if(hG.setRequestHeader){for(var hL in hE){hG.setRequestHeader(hL,hE[hL])
}}if(hD!=null&&hG.overrideMimeType){hG.overrideMimeType(hD)
}if(hH!=null){hG.responseType=hH
}if(hN!=null){hK.on("error",hN).on("load",function(hP){hN(null,hP)
})
}hG.send(hM==null?null:hM);
return hK
};
hK.abort=function(){hG.abort();
return hK
};
gQ.rebind(hK,hI,"on");
return hJ==null?hK:hK.get(dQ(hJ))
}function dQ(e){return e.length===1?function(hC,hD){e(hC==null?hD:null)
}:e
}gQ.dsv=function(e,hC){var hE=new RegExp('["'+e+"\n]"),hG=e.charCodeAt(0);
function hI(hK,hM,hN){if(arguments.length<3){hN=hM,hM=null
}var hL=gQ.xhr(hK,hC,hN);
hL.row=function(hO){return arguments.length?hL.response((hM=hO)==null?hF:hD(hO)):hM
};
return hL.row(hM)
}function hF(hK){return hI.parse(hK.responseText)
}function hD(hK){return function(hL){return hI.parse(hL.responseText,hK)
}
}hI.parse=function(hM,hK){var hL;
return hI.parseRows(hM,function(hP,hO){if(hL){return hL(hP,hO-1)
}var hN=new Function("d","return {"+hP.map(function(hQ,hR){return JSON.stringify(hQ)+": d["+hR+"]"
}).join(",")+"}");
hL=hK?function(hR,hQ){return hK(hN(hR),hQ)
}:hN
})
};
hI.parseRows=function(hT,hO){var hL={},hN={},hV=[],hP=hT.length,hS=0,hK=0,hU,hQ;
function hM(){if(hS>=hP){return hN
}if(hQ){return hQ=false,hL
}var hX=hS;
if(hT.charCodeAt(hX)===34){var hY=hX;
while(hY++<hP){if(hT.charCodeAt(hY)===34){if(hT.charCodeAt(hY+1)!==34){break
}++hY
}}hS=hY+2;
var hZ=hT.charCodeAt(hY+1);
if(hZ===13){hQ=true;
if(hT.charCodeAt(hY+2)===10){++hS
}}else{if(hZ===10){hQ=true
}}return hT.substring(hX+1,hY).replace(/""/g,'"')
}while(hS<hP){var hZ=hT.charCodeAt(hS++),hW=1;
if(hZ===10){hQ=true
}else{if(hZ===13){hQ=true;
if(hT.charCodeAt(hS)===10){++hS,++hW
}}else{if(hZ!==hG){continue
}}}return hT.substring(hX,hS-hW)
}return hT.substring(hX)
}while((hU=hM())!==hN){var hR=[];
while(hU!==hL&&hU!==hN){hR.push(hU);
hU=hM()
}if(hO&&!(hR=hO(hR,hK++))){continue
}hV.push(hR)
}return hV
};
hI.format=function(hM){if(Array.isArray(hM[0])){return hI.formatRows(hM)
}var hL=new c9(),hK=[];
hM.forEach(function(hO){for(var hN in hO){if(!hL.has(hN)){hK.push(hL.add(hN))
}}});
return[hK.map(hH).join(e)].concat(hM.map(function(hN){return hK.map(function(hO){return hH(hN[hO])
}).join(e)
})).join("\n")
};
hI.formatRows=function(hK){return hK.map(hJ).join("\n")
};
function hJ(hK){return hK.map(hH).join(e)
}function hH(hK){return hE.test(hK)?'"'+hK.replace(/\"/g,'""')+'"':hK
}return hI
};
gQ.csv=gQ.dsv(",","text/csv");
gQ.tsv=gQ.dsv("	","text/tab-separated-values");
var dL,ac,cc,eV,c3,gV=fd[c1(fd,"requestAnimationFrame")]||function(e){setTimeout(e,17)
};
gQ.timer=function(hG,e,hD){var hF=arguments.length;
if(hF<2){e=0
}if(hF<3){hD=Date.now()
}var hC=hD+e,hE={callback:hG,time:hC,next:null};
if(ac){ac.next=hE
}else{dL=hE
}ac=hE;
if(!cc){eV=clearTimeout(eV);
cc=1;
gV(gW)
}};
function gW(){var hC=bs(),e=Z()-hC;
if(e>24){if(isFinite(e)){clearTimeout(eV);
eV=setTimeout(gW,e)
}cc=0
}else{cc=1;
gV(gW)
}}gQ.timer.flush=function(){bs();
Z()
};
function ha(hE,e,hC){var hD=arguments.length;
if(hD<2){e=0
}if(hD<3){hC=Date.now()
}c3.callback=hE;
c3.time=hC+e
}function bs(){var e=Date.now();
c3=dL;
while(c3){if(e>=c3.time){c3.flush=c3.callback(e-c3.time)
}c3=c3.next
}return e
}function Z(){var hC,e=dL,hD=Infinity;
while(e){if(e.flush){e=hC?hC.next=e.next:dL=e.next
}else{if(e.time<hD){hD=e.time
}e=(hC=e).next
}}ac=hC;
return hD
}var gu=".",eG=",",i=[3,3],bv="$";
var ch=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(dw);
gQ.formatPrefix=function(hD,e){var hC=0;
if(hD){if(hD<0){hD*=-1
}if(e){hD=gQ.round(hD,dY(hD,e))
}hC=1+Math.floor(1e-12+Math.log(hD)/Math.LN10);
hC=Math.max(-24,Math.min(24,Math.floor((hC<=0?hC+1:hC-1)/3)*3))
}return ch[8+hC/3]
};
function dw(hD,hC){var e=Math.pow(10,Math.abs(8-hC)*3);
return{scale:hC>8?function(hE){return hE/e
}:function(hE){return hE*e
},symbol:hD}
}gQ.round=function(e,hC){return hC?Math.round(e*(hC=Math.pow(10,hC)))/hC:Math.round(e)
};
gQ.format=function(hM){var hJ=cl.exec(hM),hO=hJ[1]||" ",hK=hJ[2]||">",hC=hJ[3]||"",hE=hJ[4]||"",hF=hJ[5],e=+hJ[6],hP=hJ[7],hI=hJ[8],hL=hJ[9],hD=1,hN="",hH=false;
if(hI){hI=+hI.substring(1)
}if(hF||hO==="0"&&hK==="="){hF=hO="0";
hK="=";
if(hP){e-=Math.floor((e-1)/4)
}}switch(hL){case"n":hP=true;
hL="g";
break;
case"%":hD=100;
hN="%";
hL="f";
break;
case"p":hD=100;
hN="%";
hL="r";
break;
case"b":case"o":case"x":case"X":if(hE==="#"){hE="0"+hL.toLowerCase()
}case"c":case"d":hH=true;
hI=0;
break;
case"s":hD=-1;
hL="r";
break
}if(hE==="#"){hE=""
}else{if(hE==="$"){hE=bv
}}if(hL=="r"&&!hI){hL="g"
}if(hI!=null){if(hL=="g"){hI=Math.max(1,Math.min(21,hI))
}else{if(hL=="e"||hL=="f"){hI=Math.max(0,Math.min(20,hI))
}}}hL=v.get(hL)||bb;
var hG=hF&&hP;
return function(hV){if(hH&&hV%1){return""
}var hQ=hV<0||hV===0&&1/hV<0?(hV=-hV,"-"):hC;
if(hD<0){var hU=gQ.formatPrefix(hV,hI);
hV=hU.scale(hV);
hN=hU.symbol
}else{hV*=hD
}hV=hL(hV,hI);
var hR=hV.lastIndexOf("."),hT=hR<0?hV:hV.substring(0,hR),hX=hR<0?"":gu+hV.substring(hR+1);
if(!hF&&hP){hT=cZ(hT)
}var hS=hE.length+hT.length+hX.length+(hG?0:hQ.length),hW=hS<e?new Array(hS=e-hS+1).join(hO):"";
if(hG){hT=cZ(hW+hT)
}hQ+=hE;
hV=hT+hX;
return(hK==="<"?hQ+hV+hW:hK===">"?hW+hQ+hV:hK==="^"?hW.substring(0,hS>>=1)+hQ+hV+hW.substring(hS):hQ+(hG?hV:hW+hV))+hN
}
};
var cl=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;
var v=gQ.map({b:function(e){return e.toString(2)
},c:function(e){return String.fromCharCode(e)
},o:function(e){return e.toString(8)
},x:function(e){return e.toString(16)
},X:function(e){return e.toString(16).toUpperCase()
},g:function(e,hC){return e.toPrecision(hC)
},e:function(e,hC){return e.toExponential(hC)
},f:function(e,hC){return e.toFixed(hC)
},r:function(e,hC){return(e=gQ.round(e,dY(e,hC))).toFixed(Math.max(0,Math.min(20,dY(e*(1+1e-15),hC))))
}});
function dY(e,hC){return hC-(e?Math.ceil(Math.log(e)/Math.LN10):1)
}function bb(e){return e+""
}var cZ=fV;
if(i){var bV=i.length;
cZ=function(hF){var hD=hF.length,hC=[],e=0,hE=i[0];
while(hD>0&&hE>0){hC.push(hF.substring(hD-=hE,hD+hE));
hE=i[e=(e+1)%bV]
}return hC.reverse().join(eG)
}
}gQ.geo={};
function eS(){}eS.prototype={s:0,t:0,add:function(e){c7(e,this.t,hh);
c7(hh.s,this.s,this);
if(this.s){this.t+=hh.t
}else{this.s=hh.t
}},reset:function(){this.s=this.t=0
},valueOf:function(){return this.s
}};
var hh=new eS();
function c7(hE,hD,hG){var hC=hG.s=hE+hD,e=hC-hE,hF=hC-e;
hG.t=hE-hF+(hD-e)
}gQ.geo.stream=function(e,hC){if(e&&x.hasOwnProperty(e.type)){x[e.type](e,hC)
}else{aL(e,hC)
}};
function aL(hC,e){if(hC&&et.hasOwnProperty(hC.type)){et[hC.type](hC,e)
}}var x={Feature:function(e,hC){aL(e.geometry,hC)
},FeatureCollection:function(e,hE){var hD=e.features,hC=-1,hF=hD.length;
while(++hC<hF){aL(hD[hC].geometry,hE)
}}};
var et={Sphere:function(e,hC){hC.sphere()
},Point:function(e,hC){var hD=e.coordinates;
hC.point(hD[0],hD[1])
},MultiPoint:function(e,hD){var hE=e.coordinates,hC=-1,hG=hE.length,hF;
while(++hC<hG){hF=hE[hC],hD.point(hF[0],hF[1])
}},LineString:function(e,hC){ca(e.coordinates,hC,0)
},MultiLineString:function(e,hD){var hE=e.coordinates,hC=-1,hF=hE.length;
while(++hC<hF){ca(hE[hC],hD,0)
}},Polygon:function(e,hC){gK(e.coordinates,hC)
},MultiPolygon:function(e,hD){var hE=e.coordinates,hC=-1,hF=hE.length;
while(++hC<hF){gK(hE[hC],hD)
}},GeometryCollection:function(e,hE){var hD=e.geometries,hC=-1,hF=hD.length;
while(++hC<hF){aL(hD[hC],hE)
}}};
function ca(hE,hD,e){var hC=-1,hG=hE.length-e,hF;
hD.lineStart();
while(++hC<hG){hF=hE[hC],hD.point(hF[0],hF[1])
}hD.lineEnd()
}function gK(hD,hC){var e=-1,hE=hD.length;
hC.polygonStart();
while(++e<hE){ca(hD[e],hC,1)
}hC.polygonEnd()
}gQ.geo.area=function(e){a1=0;
gQ.geo.stream(e,gP);
return a1
};
var a1,fu=new eS();
var gP={sphere:function(){a1+=4*fO
},point:aB,lineStart:aB,lineEnd:aB,polygonStart:function(){fu.reset();
gP.lineStart=bR
},polygonEnd:function(){var e=2*fu;
a1+=e<0?4*fO+e:e;
gP.lineStart=gP.lineEnd=gP.point=aB
}};
function bR(){var hC,e,hE,hD,hF;
gP.point=function(hI,hH){gP.point=hG;
hE=(hC=hI)*H,hD=Math.cos(hH=(e=hH)*H/2+fO/4),hF=Math.sin(hH)
};
function hG(hI,hH){hI*=H;
hH=hH*H/2+fO/4;
var hM=hI-hE,hO=Math.cos(hH),hN=Math.sin(hH),hK=hF*hN,hL=hD*hO+hK*Math.cos(hM),hJ=hK*Math.sin(hM);
fu.add(Math.atan2(hJ,hL));
hE=hI,hD=hO,hF=hN
}gP.lineEnd=function(){hG(hC,e)
}
}function ao(e){var hD=e[0],hC=e[1],hE=Math.cos(hC);
return[hE*Math.cos(hD),hE*Math.sin(hD),Math.sin(hC)]
}function at(hC,e){return hC[0]*e[0]+hC[1]*e[1]+hC[2]*e[2]
}function cI(hC,e){return[hC[1]*e[2]-hC[2]*e[1],hC[2]*e[0]-hC[0]*e[2],hC[0]*e[1]-hC[1]*e[0]]
}function co(hC,e){hC[0]+=e[0];
hC[1]+=e[1];
hC[2]+=e[2]
}function fP(e,hC){return[e[0]*hC,e[1]*hC,e[2]*hC]
}function eZ(hC){var e=Math.sqrt(hC[0]*hC[0]+hC[1]*hC[1]+hC[2]*hC[2]);
hC[0]/=e;
hC[1]/=e;
hC[2]/=e
}function hz(e){return[Math.atan2(e[1],e[0]),b1(e[2])]
}function eu(hC,e){return Math.abs(hC[0]-e[0])<fX&&Math.abs(hC[1]-e[1])<fX
}gQ.geo.bounds=function(){var hE,hU,hC,hS,hF,hM,hO,hG,hJ,hH,hK;
var e={point:hP,lineStart:hL,lineEnd:hR,polygonStart:function(){e.point=hQ;
e.lineStart=hI;
e.lineEnd=hN;
hJ=0;
gP.polygonStart()
},polygonEnd:function(){gP.polygonEnd();
e.point=hP;
e.lineStart=hL;
e.lineEnd=hR;
if(fu<0){hE=-(hC=180),hU=-(hS=90)
}else{if(hJ>fX){hS=90
}else{if(hJ<-fX){hU=-90
}}}hK[0]=hE,hK[1]=hC
}};
function hP(hY,hX){hH.push(hK=[hE=hY,hC=hY]);
if(hX<hU){hU=hX
}if(hX>hS){hS=hX
}}function hD(h1,h7){var hX=ao([h1*H,h7*H]);
if(hG){var h3=cI(hG,hX),h4=[h3[1],-h3[0],0],h2=cI(h4,h3);
eZ(h2);
h2=hz(h2);
var h5=h1-hF,h6=h5>0?1:-1,hY=h2[0]*g4*h6,h0=Math.abs(h5)>180;
if(h0^(h6*hF<hY&&hY<h6*h1)){var hZ=h2[1]*g4;
if(hZ>hS){hS=hZ
}}else{if(hY=(hY+360)%360-180,h0^(h6*hF<hY&&hY<h6*h1)){var hZ=-h2[1]*g4;
if(hZ<hU){hU=hZ
}}else{if(h7<hU){hU=h7
}if(h7>hS){hS=h7
}}}if(h0){if(h1<hF){if(hT(hE,h1)>hT(hE,hC)){hC=h1
}}else{if(hT(h1,hC)>hT(hE,hC)){hE=h1
}}}else{if(hC>=hE){if(h1<hE){hE=h1
}if(h1>hC){hC=h1
}}else{if(h1>hF){if(hT(hE,h1)>hT(hE,hC)){hC=h1
}}else{if(hT(h1,hC)>hT(hE,hC)){hE=h1
}}}}}else{hP(h1,h7)
}hG=hX,hF=h1
}function hL(){e.point=hD
}function hR(){hK[0]=hE,hK[1]=hC;
e.point=hP;
hG=null
}function hQ(hY,hX){if(hG){var hZ=hY-hF;
hJ+=Math.abs(hZ)>180?hZ+(hZ>0?360:-360):hZ
}else{hM=hY,hO=hX
}gP.point(hY,hX);
hD(hY,hX)
}function hI(){gP.lineStart()
}function hN(){hQ(hM,hO);
gP.lineEnd();
if(Math.abs(hJ)>fX){hE=-(hC=180)
}hK[0]=hE,hK[1]=hC;
hG=null
}function hT(hY,hX){return(hX-=hY)<0?hX+360:hX
}function hW(hY,hX){return hY[0]-hX[0]
}function hV(hX,hY){return hY[0]<=hY[1]?hY[0]<=hX&&hX<=hY[1]:hX<hY[0]||hY[1]<hX
}return function(h2){hS=hC=-(hE=hU=Infinity);
hH=[];
gQ.geo.stream(h2,e);
var h4=hH.length;
if(h4){hH.sort(hW);
for(var h1=1,hZ=hH[0],hY,hX=[hZ];
h1<h4;
++h1){hY=hH[h1];
if(hV(hY[0],hZ)||hV(hY[1],hZ)){if(hT(hZ[0],hY[1])>hT(hZ[0],hZ[1])){hZ[1]=hY[1]
}if(hT(hY[0],hZ[1])>hT(hZ[0],hZ[1])){hZ[0]=hY[0]
}}else{hX.push(hZ=hY)
}}var h3=-Infinity,h0;
for(var h4=hX.length-1,h1=0,hZ=hX[h4],hY;
h1<=h4;
hZ=hY,++h1){hY=hX[h1];
if((h0=hT(hZ[1],hY[0]))>h3){h3=h0,hE=hY[0],hC=hZ[1]
}}}hH=hK=null;
return hE===Infinity||hU===Infinity?[[NaN,NaN],[NaN,NaN]]:[[hE,hU],[hC,hS]]
}
}();
gQ.geo.centroid=function(hD){dV=dU=dt=c6=cS=ds=c5=cP=dr=c4=cO=0;
gQ.geo.stream(hD,fR);
var hC=dr,hF=c4,hE=cO,e=hC*hC+hF*hF+hE*hE;
if(e<ei){hC=ds,hF=c5,hE=cP;
if(dU<fX){hC=dt,hF=c6,hE=cS
}e=hC*hC+hF*hF+hE*hE;
if(e<ei){return[NaN,NaN]
}}return[Math.atan2(hF,hC)*g4,b1(hE/Math.sqrt(e))*g4]
};
var dV,dU,dt,c6,cS,ds,c5,cP,dr,c4,cO;
var fR={sphere:aB,point:bX,lineStart:eY,lineEnd:az,polygonStart:function(){fR.lineStart=be
},polygonEnd:function(){fR.lineStart=eY
}};
function bX(hC,e){hC*=H;
var hD=Math.cos(e*=H);
f3(hD*Math.cos(hC),hD*Math.sin(hC),Math.sin(e))
}function f3(e,hD,hC){++dV;
dt+=(e-dt)/dV;
c6+=(hD-c6)/dV;
cS+=(hC-cS)/dV
}function eY(){var e,hC,hE;
fR.point=function(hG,hF){hG*=H;
var hH=Math.cos(hF*=H);
e=hH*Math.cos(hG);
hC=hH*Math.sin(hG);
hE=Math.sin(hF);
fR.point=hD;
f3(e,hC,hE)
};
function hD(hI,hH){hI*=H;
var hJ=Math.cos(hH*=H),hF=hJ*Math.cos(hI),hL=hJ*Math.sin(hI),hK=Math.sin(hH),hG=Math.atan2(Math.sqrt((hG=hC*hK-hE*hL)*hG+(hG=hE*hF-e*hK)*hG+(hG=e*hL-hC*hF)*hG),e*hF+hC*hL+hE*hK);
dU+=hG;
ds+=hG*(e+(e=hF));
c5+=hG*(hC+(hC=hL));
cP+=hG*(hE+(hE=hK));
f3(e,hC,hE)
}}function az(){fR.point=bX
}function be(){var hC,e,hD,hE,hG;
fR.point=function(hI,hH){hC=hI,e=hH;
fR.point=hF;
hI*=H;
var hJ=Math.cos(hH*=H);
hD=hJ*Math.cos(hI);
hE=hJ*Math.sin(hI);
hG=Math.sin(hH);
f3(hD,hE,hG)
};
fR.lineEnd=function(){hF(hC,e);
fR.lineEnd=az;
fR.point=bX
};
function hF(hM,hT){hM*=H;
var hK=Math.cos(hT*=H),hP=hK*Math.cos(hM),hO=hK*Math.sin(hM),hN=Math.sin(hT),hL=hE*hN-hG*hO,hJ=hG*hP-hD*hN,hI=hD*hO-hE*hP,hH=Math.sqrt(hL*hL+hJ*hJ+hI*hI),hS=hD*hP+hE*hO+hG*hN,hR=hH&&-aa(hS)/hH,hQ=Math.atan2(hH,hS);
dr+=hR*hL;
c4+=hR*hJ;
cO+=hR*hI;
dU+=hQ;
ds+=hQ*(hD+(hD=hP));
c5+=hQ*(hE+(hE=hO));
cP+=hQ*(hG+(hG=hN));
f3(hD,hE,hG)
}}function ae(){return true
}function cd(hJ,hD,hH,hM,hF){var hN=[],hG=[];
hJ.forEach(function(hS){if((hV=hS.length-1)<=0){return
}var hV,hU=hS[0],hT=hS[hV];
if(eu(hU,hT)){hF.lineStart();
for(var hR=0;
hR<hV;
++hR){hF.point((hU=hS[hR])[0],hU[1])
}hF.lineEnd();
return
}var hQ={point:hU,points:hS,other:null,visited:false,entry:true,subject:true},e={point:hU,points:[hU],other:hQ,visited:false,entry:false,subject:false};
hQ.other=e;
hN.push(hQ);
hG.push(e);
hQ={point:hT,points:[hT],other:null,visited:false,entry:false,subject:true};
e={point:hT,points:[hT],other:hQ,visited:false,entry:true,subject:false};
hQ.other=e;
hN.push(hQ);
hG.push(e)
});
hG.sort(hD);
g9(hN);
g9(hG);
if(!hN.length){return
}if(hH){for(var hI=1,hL=!hH(hG[0].point),hE=hG.length;
hI<hE;
++hI){hG[hI].entry=hL=!hL
}}var hC=hN[0],hK,hP,hO;
while(1){hK=hC;
while(hK.visited){if((hK=hK.next)===hC){return
}}hP=hK.points;
hF.lineStart();
do{hK.visited=hK.other.visited=true;
if(hK.entry){if(hK.subject){for(var hI=0;
hI<hP.length;
hI++){hF.point((hO=hP[hI])[0],hO[1])
}}else{hM(hK.point,hK.next.point,1,hF)
}hK=hK.next
}else{if(hK.subject){hP=hK.prev.points;
for(var hI=hP.length;
--hI>=0;
){hF.point((hO=hP[hI])[0],hO[1])
}}else{hM(hK.point,hK.prev.point,-1,hF)
}hK=hK.prev
}hK=hK.other;
hP=hK.points
}while(!hK.visited);
hF.lineEnd()
}}function g9(hF){if(!(hE=hF.length)){return
}var hE,hD=0,hC=hF[0],e;
while(++hD<hE){hC.next=e=hF[hD];
e.prev=hC;
hC=e
}hC.next=e=hF[0];
e.prev=hC
}function d0(hC,hE,hD,e){return function(hG){var hT=hE(hG);
var hH={point:hR,lineStart:hN,lineEnd:hK,polygonStart:function(){hH.point=hP;
hH.lineStart=hO;
hH.lineEnd=hS;
hM=[];
hQ=[];
hG.polygonStart()
},polygonEnd:function(){hH.point=hR;
hH.lineStart=hN;
hH.lineEnd=hK;
hM=gQ.merge(hM);
if(hM.length){cd(hM,dE,null,hD,hG)
}else{if(e(hQ)){hG.lineStart();
hD(null,null,1,hG);
hG.lineEnd()
}}hG.polygonEnd();
hM=hQ=null
},sphere:function(){hG.polygonStart();
hG.lineStart();
hD(null,null,1,hG);
hG.lineEnd();
hG.polygonEnd()
}};
function hR(hV,hU){if(hC(hV,hU)){hG.point(hV,hU)
}}function hL(hV,hU){hT.point(hV,hU)
}function hN(){hH.point=hL;
hT.lineStart()
}function hK(){hH.point=hR;
hT.lineEnd()
}var hM;
var hJ=O(),hF=hE(hJ),hQ,hI;
function hP(hV,hU){hF.point(hV,hU);
hI.push([hV,hU])
}function hO(){hF.lineStart();
hI=[]
}function hS(){hP(hI[0][0],hI[0][1]);
hF.lineEnd();
var hW=hF.clean(),hY=hJ.buffer(),hX,hZ=hY.length;
hI.pop();
hQ.push(hI);
hI=null;
if(!hZ){return
}if(hW&1){hX=hY[0];
var hZ=hX.length-1,hV=-1,hU;
hG.lineStart();
while(++hV<hZ){hG.point((hU=hX[hV])[0],hU[1])
}hG.lineEnd();
return
}if(hZ>1&&hW&2){hY.push(hY.pop().concat(hY.shift()))
}hM.push(hY.filter(eq))
}return hH
}
}function eq(e){return e.length>1
}function O(){var hC=[],e;
return{lineStart:function(){hC.push(e=[])
},point:function(hE,hD){e.push([hE,hD])
},lineEnd:aB,buffer:function(){var hD=hC;
hC=[];
e=null;
return hD
},rejoin:function(){if(hC.length>1){hC.push(hC.pop().concat(hC.shift()))
}}}
}function dE(hC,e){return((hC=hC.point)[0]<0?hC[1]-fO/2-fX:fO/2-hC[1])-((e=e.point)[0]<0?e[1]-fO/2-fX:fO/2-e[1])
}function fr(hT,hO){var h1=hT[0],h2=hT[1],e=[Math.sin(h1),-Math.cos(h1),0],hN=0,h3=false,hP=false,hZ=0;
fu.reset();
for(var hY=0,hQ=hO.length;
hY<hQ;
++hY){var hJ=hO[hY],hS=hJ.length;
if(!hS){continue
}var hG=hJ[0],hD=hG[0],h0=hG[1]/2+fO/4,hI=Math.sin(h0),hC=Math.cos(h0),hX=1;
while(true){if(hX===hS){hX=0
}hT=hJ[hX];
var hR=hT[0],hM=hT[1]/2+fO/4,hE=Math.sin(hM),hW=Math.cos(hM),hV=hR-hD,hF=Math.abs(hV)>fO,hU=hI*hE;
fu.add(Math.atan2(hU*Math.sin(hV),hC*hW+hU*Math.cos(hV)));
if(Math.abs(hM)<fX){hP=true
}hN+=hF?hV+(hV>=0?2:-2)*fO:hV;
if(hF^hD>=h1^hR>=h1){var hK=cI(ao(hG),ao(hT));
eZ(hK);
var hL=cI(e,hK);
eZ(hL);
var hH=(hF^hV>=0?-1:1)*b1(hL[2]);
if(h2>hH){hZ+=hF^hV>=0?1:-1
}}if(!hX++){break
}hD=hR,hI=hE,hC=hW,hG=hT
}if(Math.abs(hN)>fX){h3=true
}}return(!hP&&!h3&&fu<0||hN<-fX)^hZ&1
}var k=d0(ae,ej,cX,c0);
function ej(hF){var hC=NaN,e=NaN,hE=NaN,hD;
return{lineStart:function(){hF.lineStart();
hD=1
},point:function(hH,hG){var hJ=hH>0?fO:-fO,hI=Math.abs(hH-hC);
if(Math.abs(hI-fO)<fX){hF.point(hC,e=(e+hG)/2>0?fO/2:-fO/2);
hF.point(hE,e);
hF.lineEnd();
hF.lineStart();
hF.point(hJ,e);
hF.point(hH,e);
hD=0
}else{if(hE!==hJ&&hI>=fO){if(Math.abs(hC-hE)<fX){hC-=hE*fX
}if(Math.abs(hH-hJ)<fX){hH-=hJ*fX
}e=t(hC,e,hH,hG);
hF.point(hE,e);
hF.lineEnd();
hF.lineStart();
hF.point(hJ,e);
hD=0
}}hF.point(hC=hH,e=hG);
hE=hJ
},lineEnd:function(){hF.lineEnd();
hC=e=NaN
},clean:function(){return 2-hD
}}
}function t(hG,hF,hE,hD){var hC,e,hH=Math.sin(hG-hE);
return Math.abs(hH)>fX?Math.atan((Math.sin(hF)*(e=Math.cos(hD))*Math.sin(hE)-Math.sin(hD)*(hC=Math.cos(hF))*Math.sin(hG))/(hC*e*hH)):(hF+hD)/2
}function cX(hG,hF,hE,hD){var e;
if(hG==null){e=hE*fO/2;
hD.point(-fO,e);
hD.point(0,e);
hD.point(fO,e);
hD.point(fO,0);
hD.point(fO,-e);
hD.point(0,-e);
hD.point(-fO,-e);
hD.point(-fO,0);
hD.point(-fO,e)
}else{if(Math.abs(hG[0]-hF[0])>fX){var hC=(hG[0]<hF[0]?1:-1)*fO;
e=hE*hC/2;
hD.point(-hC,e);
hD.point(0,e);
hD.point(hC,e)
}else{hD.point(hF[0],hF[1])
}}}var ge=[-fO,0];
function c0(e){return fr(ge,e)
}function aG(hG){var hH=Math.cos(hG),hF=hH>0,hL=[hG,0],hI=Math.abs(hH)>fX,hJ=bQ(hG,6*H);
return d0(hE,hK,hJ,hC);
function hE(hN,hM){return Math.cos(hN)*Math.cos(hM)>hH
}function hK(hR){var hQ,hP,hM,hO,hN;
return{lineStart:function(){hO=hM=false;
hN=1
},point:function(hT,hS){var hX=[hT,hS],hW,hU=hE(hT,hS),hY=hF?hU?0:e(hT,hS):hU?e(hT+(hT<0?fO:-fO),hS):0;
if(!hQ&&(hO=hM=hU)){hR.lineStart()
}if(hU!==hM){hW=hD(hQ,hX);
if(eu(hQ,hW)||eu(hX,hW)){hX[0]+=fX;
hX[1]+=fX;
hU=hE(hX[0],hX[1])
}}if(hU!==hM){hN=0;
if(hU){hR.lineStart();
hW=hD(hX,hQ);
hR.point(hW[0],hW[1])
}else{hW=hD(hQ,hX);
hR.point(hW[0],hW[1]);
hR.lineEnd()
}hQ=hW
}else{if(hI&&hQ&&hF^hU){var hV;
if(!(hY&hP)&&(hV=hD(hX,hQ,true))){hN=0;
if(hF){hR.lineStart();
hR.point(hV[0][0],hV[0][1]);
hR.point(hV[1][0],hV[1][1]);
hR.lineEnd()
}else{hR.point(hV[1][0],hV[1][1]);
hR.lineEnd();
hR.lineStart();
hR.point(hV[0][0],hV[0][1])
}}}}if(hU&&(!hQ||!eu(hQ,hX))){hR.point(hX[0],hX[1])
}hQ=hX,hM=hU,hP=hY
},lineEnd:function(){if(hM){hR.lineEnd()
}hQ=null
},clean:function(){return hN|(hO&&hM)<<1
}}
}function hD(id,ic,hQ){var hO=ao(id),hM=ao(ic);
var hV=[1,0,0],hS=cI(hO,hM),hY=at(hS,hS),ib=hS[0],h4=hY-ib*ib;
if(!h4){return !hQ&&id
}var h7=hH*hY/h4,h6=-hH*ib/h4,ie=cI(hV,hS),h5=fP(hV,h7),h3=fP(hS,h6);
co(h5,h3);
var h0=ie,hZ=at(h5,h0),hR=at(h0,h0),hX=hZ*hZ-hR*(at(h5,h5)-1);
if(hX<0){return
}var h1=Math.sqrt(hX),h2=fP(h0,(-hZ-h1)/hR);
co(h2,h5);
h2=hz(h2);
if(!hQ){return h2
}var hP=id[0],hN=ic[0],h9=id[1],h8=ic[1],hU;
if(hN<hP){hU=hP,hP=hN,hN=hU
}var hT=hN-hP,ig=Math.abs(hT-fO)<fX,ia=ig||hT<fX;
if(!ig&&h8<h9){hU=h9,h9=h8,h8=hU
}if(ia?ig?h9+h8>0^h2[1]<(Math.abs(h2[0]-hP)<fX?h9:h8):h9<=h2[1]&&h2[1]<=h8:hT>fO^(hP<=h2[0]&&h2[0]<=hN)){var hW=fP(h0,(-hZ+h1)/hR);
co(hW,h5);
return[h2,hz(hW)]
}}function e(hN,hM){var hP=hF?hG:fO-hG,hO=0;
if(hN<-hP){hO|=1
}else{if(hN>hP){hO|=2
}}if(hM<-hP){hO|=4
}else{if(hM>hP){hO|=8
}}return hO
}function hC(hM){return fr(hL,hM)
}}var hq=1000000000;
function f(hC,hF,e,hD){return function(hO){var hK=hO,hU=O(),h1,hV,hS;
var h5={point:h0,lineStart:hX,lineEnd:h2,polygonStart:function(){hO=hU;
h1=[];
hV=[]
},polygonEnd:function(){hO=hK;
if((h1=gQ.merge(h1)).length){hO.polygonStart();
cd(h1,hG,h3,hT,hO);
hO.polygonEnd()
}else{if(hW([hC,hF])){hO.polygonStart(),hO.lineStart();
hT(null,null,1,hO);
hO.lineEnd(),hO.polygonEnd()
}}h1=hV=hS=null
}};
function h3(h6){var h7=hE(h6,-1),h8=hW([h7===0||h7===3?hC:e,h7>1?hD:hF]);
return h8
}function hW(h6){var ie=0,h7=hV.length,ic=h6[1];
for(var ia=0;
ia<h7;
++ia){for(var h9=1,ig=hV[ia],h8=ig.length,id=ig[0],ib;
h9<h8;
++h9){ib=ig[h9];
if(id[1]<=ic){if(ib[1]>ic&&hP(id,ib,h6)>0){++ie
}}else{if(ib[1]<=ic&&hP(id,ib,h6)<0){--ie
}}id=ib
}}return ie!==0
}function hP(h7,h6,h8){return(h6[0]-h7[0])*(h8[1]-h7[1])-(h8[0]-h7[0])*(h6[1]-h7[1])
}function hT(ib,ia,h9,h8){var h7=0,h6=0;
if(ib==null||(h7=hE(ib,h9))!==(h6=hE(ia,h9))||hH(ib,ia)<0^h9>0){do{h8.point(h7===0||h7===3?hC:e,h7>1?hD:hF)
}while((h7=(h7+h9+4)%4)!==h6)
}else{h8.point(ia[0],ia[1])
}}function hM(h6,h7){return hC<=h6&&h6<=e&&hF<=h7&&h7<=hD
}function h0(h6,h7){if(hM(h6,h7)){hO.point(h6,h7)
}}var hZ,hQ,hY,h4,hN,hL,hR;
function hX(){h5.point=hJ;
if(hV){hV.push(hS=[])
}hR=true;
hL=false;
h4=hN=NaN
}function h2(){if(h1){hJ(hZ,hQ);
if(hY&&hL){hU.rejoin()
}h1.push(hU.buffer())
}h5.point=h0;
if(hL){hO.lineEnd()
}}function hJ(h7,ia){h7=Math.max(-hq,Math.min(hq,h7));
ia=Math.max(-hq,Math.min(hq,ia));
var h9=hM(h7,ia);
if(hV){hS.push([h7,ia])
}if(hR){hZ=h7,hQ=ia,hY=h9;
hR=false;
if(h9){hO.lineStart();
hO.point(h7,ia)
}}else{if(h9&&hL){hO.point(h7,ia)
}else{var h8=[h4,hN],h6=[h7,ia];
if(hI(h8,h6)){if(!hL){hO.lineStart();
hO.point(h8[0],h8[1])
}hO.point(h6[0],h6[1]);
if(!h9){hO.lineEnd()
}}else{if(h9){hO.lineStart();
hO.point(h7,ia)
}}}}h4=h7,hN=ia,hL=h9
}return h5
};
function hE(hK,hJ){return Math.abs(hK[0]-hC)<fX?hJ>0?0:3:Math.abs(hK[0]-e)<fX?hJ>0?2:1:Math.abs(hK[1]-hF)<fX?hJ>0?1:0:hJ>0?3:2
}function hG(hK,hJ){return hH(hK.point,hJ.point)
}function hH(hM,hK){var hL=hE(hM,1),hJ=hE(hK,1);
return hL!==hJ?hL-hJ:hL===0?hK[1]-hM[1]:hL===1?hM[0]-hK[0]:hL===2?hM[1]-hK[1]:hK[0]-hM[0]
}function hI(hL,hJ){var hM=hJ[0]-hL[0],hK=hJ[1]-hL[1],hN=[0,1];
if(Math.abs(hM)<fX&&Math.abs(hK)<fX){return hC<=hL[0]&&hL[0]<=e&&hF<=hL[1]&&hL[1]<=hD
}if(al(hC-hL[0],hM,hN)&&al(hL[0]-e,-hM,hN)&&al(hF-hL[1],hK,hN)&&al(hL[1]-hD,-hK,hN)){if(hN[1]<1){hJ[0]=hL[0]+hN[1]*hM;
hJ[1]=hL[1]+hN[1]*hK
}if(hN[0]>0){hL[0]+=hN[0]*hM;
hL[1]+=hN[0]*hK
}return true
}return false
}}function al(hC,hE,hD){if(Math.abs(hE)<fX){return hC<=0
}var e=hC/hE;
if(hE>0){if(e>hD[1]){return false
}if(e>hD[0]){hD[0]=e
}}else{if(e<hD[0]){return false
}if(e<hD[1]){hD[1]=e
}}return true
}function eL(hC,e){function hD(hE,hF){return hE=hC(hE,hF),e(hE[0],hE[1])
}if(hC.invert&&e.invert){hD.invert=function(hE,hF){return hE=e.invert(hE,hF),hE&&hC.invert(hE[0],hE[1])
}
}return hD
}function bT(hE){var hD=0,hC=fO/3,e=eX(hE),hF=e(hD,hC);
hF.parallels=function(hG){if(!arguments.length){return[hD/fO*180,hC/fO*180]
}return e(hD=hG[0]*fO/180,hC=hG[1]*fO/180)
};
return hF
}function L(hC,e){var hF=Math.sin(hC),hH=(hF+Math.sin(e))/2,hG=1+hF*(2*hH-hF),hE=Math.sqrt(hG)/hH;
function hD(hJ,hI){var hK=Math.sqrt(hG-2*hH*Math.sin(hI))/hH;
return[hK*Math.sin(hJ*=hH),hE-hK*Math.cos(hJ)]
}hD.invert=function(hI,hK){var hJ=hE-hK;
return[Math.atan2(hI,hJ)/hH,b1((hG-(hI*hI+hJ*hJ)*hH*hH)/(2*hH))]
};
return hD
}(gQ.geo.conicEqualArea=function(){return bT(L)
}).raw=L;
gQ.geo.albers=function(){return gQ.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)
};
gQ.geo.albersUsa=function(){var hC=gQ.geo.albers();
var hG=gQ.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);
var hD=gQ.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);
var hI,e={point:function(hK,hL){hI=[hK,hL]
}},hF,hH,hE;
function hJ(hL){var hK=hL[0],hM=hL[1];
hI=null;
(hF(hK,hM),hI)||(hH(hK,hM),hI)||hE(hK,hM);
return hI
}hJ.invert=function(hN){var hL=hC.scale(),hM=hC.translate(),hK=(hN[0]-hM[0])/hL,hO=(hN[1]-hM[1])/hL;
return(hO>=0.12&&hO<0.234&&hK>=-0.425&&hK<-0.214?hG:hO>=0.166&&hO<0.234&&hK>=-0.214&&hK<-0.115?hD:hC).invert(hN)
};
hJ.stream=function(hM){var hL=hC.stream(hM),hN=hG.stream(hM),hK=hD.stream(hM);
return{point:function(hO,hP){hL.point(hO,hP);
hN.point(hO,hP);
hK.point(hO,hP)
},sphere:function(){hL.sphere();
hN.sphere();
hK.sphere()
},lineStart:function(){hL.lineStart();
hN.lineStart();
hK.lineStart()
},lineEnd:function(){hL.lineEnd();
hN.lineEnd();
hK.lineEnd()
},polygonStart:function(){hL.polygonStart();
hN.polygonStart();
hK.polygonStart()
},polygonEnd:function(){hL.polygonEnd();
hN.polygonEnd();
hK.polygonEnd()
}}
};
hJ.precision=function(hK){if(!arguments.length){return hC.precision()
}hC.precision(hK);
hG.precision(hK);
hD.precision(hK);
return hJ
};
hJ.scale=function(hK){if(!arguments.length){return hC.scale()
}hC.scale(hK);
hG.scale(hK*0.35);
hD.scale(hK);
return hJ.translate(hC.translate())
};
hJ.translate=function(hM){if(!arguments.length){return hC.translate()
}var hL=hC.scale(),hK=+hM[0],hN=+hM[1];
hF=hC.translate(hM).clipExtent([[hK-0.455*hL,hN-0.238*hL],[hK+0.455*hL,hN+0.238*hL]]).stream(e).point;
hH=hG.translate([hK-0.307*hL,hN+0.201*hL]).clipExtent([[hK-0.425*hL+fX,hN+0.12*hL+fX],[hK-0.214*hL-fX,hN+0.234*hL-fX]]).stream(e).point;
hE=hD.translate([hK-0.205*hL,hN+0.212*hL]).clipExtent([[hK-0.214*hL+fX,hN+0.166*hL+fX],[hK-0.115*hL-fX,hN+0.234*hL-fX]]).stream(e).point;
return hJ
};
return hJ.scale(1070)
};
var fs,y,dh={point:aB,lineStart:aB,lineEnd:aB,polygonStart:function(){y=0;
dh.lineStart=cw
},polygonEnd:function(){dh.lineStart=dh.lineEnd=dh.point=aB;
fs+=Math.abs(y/2)
}};
function cw(){var hE,e,hC,hD;
dh.point=function(hG,hH){dh.point=hF;
hE=hC=hG,e=hD=hH
};
function hF(hG,hH){y+=hD*hG-hC*hH;
hC=hG,hD=hH
}dh.lineEnd=function(){hF(hE,e)
}
}var ep,d6,en,d5;
var ar={point:cE,lineStart:aB,lineEnd:aB,polygonStart:aB,polygonEnd:aB};
function cE(e,hC){if(e<ep){ep=e
}if(e>en){en=e
}if(hC<d6){d6=hC
}if(hC>d5){d5=hC
}}function b5(){var hD=gE(4.5),hC=[];
var hI={point:e,lineStart:function(){hI.point=hH
},lineEnd:hG,polygonStart:function(){hI.lineEnd=hE
},polygonEnd:function(){hI.lineEnd=hG;
hI.point=e
},pointRadius:function(hJ){hD=gE(hJ);
return hI
},result:function(){if(hC.length){var hJ=hC.join("");
hC=[];
return hJ
}}};
function e(hJ,hK){hC.push("M",hJ,",",hK,hD)
}function hH(hJ,hK){hC.push("M",hJ,",",hK);
hI.point=hF
}function hF(hJ,hK){hC.push("L",hJ,",",hK)
}function hG(){hI.point=e
}function hE(){hC.push("Z")
}return hI
}function gE(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"
}var gC={point:cA,lineStart:fx,lineEnd:cz,polygonStart:function(){gC.lineStart=bL
},polygonEnd:function(){gC.point=cA;
gC.lineStart=fx;
gC.lineEnd=cz
}};
function cA(e,hC){dt+=e;
c6+=hC;
++cS
}function fx(){var e,hC;
gC.point=function(hE,hF){gC.point=hD;
cA(e=hE,hC=hF)
};
function hD(hE,hI){var hG=hE-e,hF=hI-hC,hH=Math.sqrt(hG*hG+hF*hF);
ds+=hH*(e+hE)/2;
c5+=hH*(hC+hI)/2;
cP+=hH;
cA(e=hE,hC=hI)
}}function cz(){gC.point=cA
}function bL(){var hE,e,hC,hD;
gC.point=function(hG,hH){gC.point=hF;
cA(hE=hC=hG,e=hD=hH)
};
function hF(hG,hK){var hI=hG-hC,hH=hK-hD,hJ=Math.sqrt(hI*hI+hH*hH);
ds+=hJ*(hC+hG)/2;
c5+=hJ*(hD+hK)/2;
cP+=hJ;
hJ=hD*hG-hC*hK;
dr+=hJ*(hC+hG);
c4+=hJ*(hD+hK);
cO+=hJ*3;
cA(hC=hG,hD=hK)
}gC.lineEnd=function(){hF(hE,e)
}
}function cs(hC){var hF=4.5;
var hI={point:e,lineStart:function(){hI.point=hH
},lineEnd:hG,polygonStart:function(){hI.lineEnd=hD
},polygonEnd:function(){hI.lineEnd=hG;
hI.point=e
},pointRadius:function(hJ){hF=hJ;
return hI
},result:aB};
function e(hJ,hK){hC.moveTo(hJ,hK);
hC.arc(hJ,hK,hF,0,2*fO)
}function hH(hJ,hK){hC.moveTo(hJ,hK);
hI.point=hE
}function hE(hJ,hK){hC.lineTo(hJ,hK)
}function hG(){hI.point=e
}function hD(){hC.closePath()
}return hI
}function ft(hF){var hD=0.5,hE=Math.cos(30*H),hG=16;
function hC(hN){var hS,hY,hX,hO,h1,hQ,hI,hJ,h0,hK,h2,hP,hT;
var hL={point:hW,lineStart:hR,lineEnd:hZ,polygonStart:function(){hN.polygonStart();
hL.lineStart=hM
},polygonEnd:function(){hN.polygonEnd();
hL.lineStart=hR
}};
function hW(h3,h4){h3=hF(h3,h4);
hN.point(h3[0],h3[1])
}function hR(){h0=NaN;
hL.point=hH;
hN.lineStart()
}function hH(h4,h3){var h6=ao([h4,h3]),h5=hF(h4,h3);
e(h0,hK,hJ,h2,hP,hT,h0=h5[0],hK=h5[1],hJ=h4,h2=h6[0],hP=h6[1],hT=h6[2],hG,hN);
hN.point(h0,hK)
}function hZ(){hL.point=hW;
hN.lineEnd()
}function hM(){hR();
hL.point=hV;
hL.lineEnd=hU
}function hV(h4,h3){hH(hS=h4,hY=h3),hX=h0,hO=hK,h1=h2,hQ=hP,hI=hT;
hL.point=hH
}function hU(){e(h0,hK,hJ,h2,hP,hT,hX,hO,hS,h1,hQ,hI,hG,hN);
hL.lineEnd=hZ;
hZ()
}return hL
}function e(h2,hN,hJ,h9,hQ,hY,h1,hM,hI,h7,hP,hW,h6,hO){var hU=h1-h2,hT=hM-hN,h8=hU*hU+hT*hT;
if(h8>4*hD&&h6--){var h5=h9+h7,h4=hQ+hP,h3=hY+hW,hX=Math.sqrt(h5*h5+h4*h4+h3*h3),h0=Math.asin(h3/=hX),hH=Math.abs(Math.abs(h3)-1)<fX?(hJ+hI)/2:Math.atan2(h4,h5),hV=hF(hH,h0),hZ=hV[0],hL=hV[1],hK=hZ-h2,hS=hL-hN,hR=hT*hK-hU*hS;
if(hR*hR/h8>hD||Math.abs((hU*hK+hT*hS)/h8-0.5)>0.3||h9*h7+hQ*hP+hY*hW<hE){e(h2,hN,hJ,h9,hQ,hY,hZ,hL,hH,h5/=hX,h4/=hX,h3,h6,hO);
hO.point(hZ,hL);
e(hZ,hL,hH,h5,h4,h3,h1,hM,hI,h7,hP,hW,h6,hO)
}}}hC.precision=function(hH){if(!arguments.length){return Math.sqrt(hD)
}hG=(hD=hH*hH)>0&&16;
return hC
};
return hC
}gQ.geo.path=function(){var hH=4.5,hC,hE,hF,e,hD;
function hI(hJ){if(hJ){if(typeof hH==="function"){e.pointRadius(+hH.apply(this,arguments))
}if(!hD||!hD.valid){hD=hF(e)
}gQ.geo.stream(hJ,hD)
}return e.result()
}hI.area=function(hJ){fs=0;
gQ.geo.stream(hJ,hF(dh));
return fs
};
hI.centroid=function(hJ){dt=c6=cS=ds=c5=cP=dr=c4=cO=0;
gQ.geo.stream(hJ,hF(gC));
return cO?[dr/cO,c4/cO]:cP?[ds/cP,c5/cP]:cS?[dt/cS,c6/cS]:[NaN,NaN]
};
hI.bounds=function(hJ){en=d5=-(ep=d6=Infinity);
gQ.geo.stream(hJ,hF(ar));
return[[ep,d6],[en,d5]]
};
hI.projection=function(hJ){if(!arguments.length){return hC
}hF=(hC=hJ)?hJ.stream||gM(hJ):fV;
return hG()
};
hI.context=function(hJ){if(!arguments.length){return hE
}e=(hE=hJ)==null?new b5():new cs(hJ);
if(typeof hH!=="function"){e.pointRadius(hH)
}return hG()
};
hI.pointRadius=function(hJ){if(!arguments.length){return hH
}hH=typeof hJ==="function"?hJ:(e.pointRadius(+hJ),+hJ);
return hI
};
function hG(){hD=null;
return hI
}return hI.projection(gQ.geo.albersUsa()).context(null)
};
function gM(hC){var e=ft(function(hE,hD){return hC([hE*g4,hD*g4])
});
return function(hD){hD=e(hD);
return{point:function(hF,hE){hD.point(hF*H,hE*H)
},sphere:function(){hD.sphere()
},lineStart:function(){hD.lineStart()
},lineEnd:function(){hD.lineEnd()
},polygonStart:function(){hD.polygonStart()
},polygonEnd:function(){hD.polygonEnd()
}}
}
}gQ.geo.projection=ff;
gQ.geo.projectionMutator=eX;
function ff(e){return eX(function(){return e
})()
}function eX(hP){var hE,hU,hI,hR=ft(function(hZ,h0){hZ=hE(hZ,h0);
return[hZ[0]*hT+hG,hD-hZ[1]*hT]
}),hT=150,hN=480,hL=250,hS=0,hM=0,hJ=0,hF=0,hQ=0,hG,hD,hY=k,hV=fV,e=null,hC=null,hH;
function hX(hZ){hZ=hI(hZ[0]*H,hZ[1]*H);
return[hZ[0]*hT+hG,hD-hZ[1]*hT]
}function hO(hZ){hZ=hI.invert((hZ[0]-hG)/hT,(hD-hZ[1])/hT);
return hZ&&[hZ[0]*g4,hZ[1]*g4]
}hX.stream=function(hZ){if(hH){hH.valid=false
}hH=U(hU,hY(hR(hV(hZ))));
hH.valid=true;
return hH
};
hX.clipAngle=function(hZ){if(!arguments.length){return e
}hY=hZ==null?(e=hZ,k):aG((e=+hZ)*H);
return hK()
};
hX.clipExtent=function(hZ){if(!arguments.length){return hC
}hC=hZ;
hV=hZ==null?fV:f(hZ[0][0],hZ[0][1],hZ[1][0],hZ[1][1]);
return hK()
};
hX.scale=function(hZ){if(!arguments.length){return hT
}hT=+hZ;
return hW()
};
hX.translate=function(hZ){if(!arguments.length){return[hN,hL]
}hN=+hZ[0];
hL=+hZ[1];
return hW()
};
hX.center=function(hZ){if(!arguments.length){return[hS*g4,hM*g4]
}hS=hZ[0]%360*H;
hM=hZ[1]%360*H;
return hW()
};
hX.rotate=function(hZ){if(!arguments.length){return[hJ*g4,hF*g4,hQ*g4]
}hJ=hZ[0]%360*H;
hF=hZ[1]%360*H;
hQ=hZ.length>2?hZ[2]%360*H:0;
return hW()
};
gQ.rebind(hX,hR,"precision");
function hW(){hI=eL(hU=dn(hJ,hF,hQ),hE);
var hZ=hE(hS,hM);
hG=hN-hZ[0]*hT;
hD=hL+hZ[1]*hT;
return hK()
}function hK(){if(hH){hH.valid=false;
hH=null
}return hX
}return function(){hE=hP.apply(this,arguments);
hX.invert=hE.invert&&hO;
return hW()
}
}function U(e,hC){return{point:function(hD,hE){hE=e(hD*H,hE*H),hD=hE[0];
hC.point(hD>fO?hD-2*fO:hD<-fO?hD+2*fO:hD,hE[1])
},sphere:function(){hC.sphere()
},lineStart:function(){hC.lineStart()
},lineEnd:function(){hC.lineEnd()
},polygonStart:function(){hC.polygonStart()
},polygonEnd:function(){hC.polygonEnd()
}}
}function bm(hC,e){return[hC,e]
}(gQ.geo.equirectangular=function(){return ff(bm)
}).raw=bm.invert=bm;
gQ.geo.rotation=function(hC){hC=dn(hC[0]%360*H,hC[1]*H,hC.length>2?hC[2]*H:0);
function e(hD){hD=hC(hD[0]*H,hD[1]*H);
return hD[0]*=g4,hD[1]*=g4,hD
}e.invert=function(hD){hD=hC.invert(hD[0]*H,hD[1]*H);
return hD[0]*=g4,hD[1]*=g4,hD
};
return e
};
function dn(hD,hC,e){return hD?hC||e?eL(eD(hD),bG(hC,e)):eD(hD):hC||e?bG(hC,e):bm
}function gv(e){return function(hD,hC){return hD+=e,[hD>fO?hD-2*fO:hD<-fO?hD+2*fO:hD,hC]
}
}function eD(hC){var e=gv(hC);
e.invert=gv(-hC);
return e
}function bG(hG,hC){var hF=Math.cos(hG),hH=Math.sin(hG),e=Math.cos(hC),hD=Math.sin(hC);
function hE(hK,hJ){var hM=Math.cos(hJ),hI=Math.cos(hK)*hM,hO=Math.sin(hK)*hM,hN=Math.sin(hJ),hL=hN*hF+hI*hH;
return[Math.atan2(hO*e-hL*hD,hI*hF-hN*hH),b1(hL*e+hO*hD)]
}hE.invert=function(hK,hJ){var hM=Math.cos(hJ),hI=Math.cos(hK)*hM,hO=Math.sin(hK)*hM,hN=Math.sin(hJ),hL=hN*e-hO*hD;
return[Math.atan2(hO*e+hN*hD,hI*hF+hL*hH),b1(hL*hF-hI*hH)]
};
return hE
}gQ.geo.circle=function(){var hC=[0,0],hF,e=6,hD;
function hE(){var hG=typeof hC==="function"?hC.apply(this,arguments):hC,hI=dn(-hG[0]*H,-hG[1]*H,0).invert,hH=[];
hD(null,null,1,{point:function(hJ,hK){hH.push(hJ=hI(hJ,hK));
hJ[0]*=g4,hJ[1]*=g4
}});
return{type:"Polygon",coordinates:[hH]}
}hE.origin=function(hG){if(!arguments.length){return hC
}hC=hG;
return hE
};
hE.angle=function(hG){if(!arguments.length){return hF
}hD=bQ((hF=+hG)*H,e*H);
return hE
};
hE.precision=function(hG){if(!arguments.length){return e
}hD=bQ(hF*H,(e=+hG)*H);
return hE
};
return hE.angle(90)
};
function bQ(e,hC){var hE=Math.cos(e),hD=Math.sin(e);
return function(hL,hK,hJ,hI){if(hL!=null){hL=hk(hE,hL);
hK=hk(hE,hK);
if(hJ>0?hL<hK:hL>hK){hL+=hJ*2*fO
}}else{hL=e+hJ*2*fO;
hK=e
}var hF;
for(var hH=hJ*hC,hG=hL;
hJ>0?hG>hK:hG<hK;
hG-=hH){hI.point((hF=hz([hE,-hD*Math.cos(hG),-hD*Math.sin(hG)]))[0],hF[1])
}}
}function hk(hD,e){var hC=ao(e);
hC[0]-=hD;
eZ(hC);
var hE=aa(-hC[1]);
return((-hC[2]<0?-hE:hE)+2*Math.PI-fX)%(2*Math.PI)
}gQ.geo.distance=function(hI,hH){var hJ=(hH[0]-hI[0])*H,hL=hI[1]*H,hK=hH[1]*H,hF=Math.sin(hJ),hC=Math.cos(hJ),hG=Math.sin(hL),hD=Math.cos(hL),hE=Math.sin(hK),e=Math.cos(hK),hM;
return Math.atan2(Math.sqrt((hM=e*hF)*hM+(hM=hD*hE-hG*e*hC)*hM),hG*hE+hD*e*hC)
};
gQ.geo.graticule=function(){var hP,hR,hS,hT,hE,hF,hG,hI,hN=10,hM=hN,hJ=90,hH=360,hL,hK,hD,hC,hO=2.5;
function hQ(){return{type:"MultiLineString",coordinates:e()}
}function e(){return gQ.range(Math.ceil(hT/hJ)*hJ,hS,hJ).map(hD).concat(gQ.range(Math.ceil(hI/hH)*hH,hG,hH).map(hC)).concat(gQ.range(Math.ceil(hR/hN)*hN,hP,hN).filter(function(hU){return Math.abs(hU%hJ)>fX
}).map(hL)).concat(gQ.range(Math.ceil(hF/hM)*hM,hE,hM).filter(function(hU){return Math.abs(hU%hH)>fX
}).map(hK))
}hQ.lines=function(){return e().map(function(hU){return{type:"LineString",coordinates:hU}
})
};
hQ.outline=function(){return{type:"Polygon",coordinates:[hD(hT).concat(hC(hG).slice(1),hD(hS).reverse().slice(1),hC(hI).reverse().slice(1))]}
};
hQ.extent=function(hU){if(!arguments.length){return hQ.minorExtent()
}return hQ.majorExtent(hU).minorExtent(hU)
};
hQ.majorExtent=function(hU){if(!arguments.length){return[[hT,hI],[hS,hG]]
}hT=+hU[0][0],hS=+hU[1][0];
hI=+hU[0][1],hG=+hU[1][1];
if(hT>hS){hU=hT,hT=hS,hS=hU
}if(hI>hG){hU=hI,hI=hG,hG=hU
}return hQ.precision(hO)
};
hQ.minorExtent=function(hU){if(!arguments.length){return[[hR,hF],[hP,hE]]
}hR=+hU[0][0],hP=+hU[1][0];
hF=+hU[0][1],hE=+hU[1][1];
if(hR>hP){hU=hR,hR=hP,hP=hU
}if(hF>hE){hU=hF,hF=hE,hE=hU
}return hQ.precision(hO)
};
hQ.step=function(hU){if(!arguments.length){return hQ.minorStep()
}return hQ.majorStep(hU).minorStep(hU)
};
hQ.majorStep=function(hU){if(!arguments.length){return[hJ,hH]
}hJ=+hU[0],hH=+hU[1];
return hQ
};
hQ.minorStep=function(hU){if(!arguments.length){return[hN,hM]
}hN=+hU[0],hM=+hU[1];
return hQ
};
hQ.precision=function(hU){if(!arguments.length){return hO
}hO=+hU;
hL=aF(hF,hE,90);
hK=aD(hR,hP,hO);
hD=aF(hI,hG,90);
hC=aD(hT,hS,hO);
return hQ
};
return hQ.majorExtent([[-180,-90+fX],[180,90-fX]]).minorExtent([[-180,-80-fX],[180,80+fX]])
};
function aF(hD,hC,e){var hE=gQ.range(hD,hC-fX,e).concat(hC);
return function(hF){return hE.map(function(hG){return[hF,hG]
})
}
}function aD(hE,hD,hC){var e=gQ.range(hE,hD-fX,hC).concat(hD);
return function(hF){return e.map(function(hG){return[hG,hF]
})
}
}function g8(e){return e.source
}function hi(e){return e.target
}gQ.geo.greatArc=function(){var hD=g8,hC,hE=hi,hF;
function e(){return{type:"LineString",coordinates:[hC||hD.apply(this,arguments),hF||hE.apply(this,arguments)]}
}e.distance=function(){return gQ.geo.distance(hC||hD.apply(this,arguments),hF||hE.apply(this,arguments))
};
e.source=function(hG){if(!arguments.length){return hD
}hD=hG,hC=typeof hG==="function"?null:hG;
return e
};
e.target=function(hG){if(!arguments.length){return hE
}hE=hG,hF=typeof hG==="function"?null:hG;
return e
};
e.precision=function(){return arguments.length?e:0
};
return e
};
gQ.geo.interpolate=function(e,hC){return g(e[0]*H,e[1]*H,hC[0]*H,hC[1]*H)
};
function g(hE,hP,hD,hN){var hH=Math.cos(hP),hO=Math.sin(hP),hF=Math.cos(hN),hM=Math.sin(hN),hJ=hH*Math.cos(hE),hC=hH*Math.sin(hE),hI=hF*Math.cos(hD),e=hF*Math.sin(hD),hL=2*Math.asin(Math.sqrt(ay(hN-hP)+hH*hF*ay(hD-hE))),hG=1/Math.sin(hL);
var hK=hL?function(hS){var hV=Math.sin(hS*=hL)*hG,hR=Math.sin(hL-hS)*hG,hQ=hR*hJ+hV*hI,hU=hR*hC+hV*e,hT=hR*hO+hV*hM;
return[Math.atan2(hU,hQ)*g4,Math.atan2(hT,Math.sqrt(hQ*hQ+hU*hU))*g4]
}:function(){return[hE*g4,hP*g4]
};
hK.distance=hL;
return hK
}gQ.geo.length=function(e){dD=0;
gQ.geo.stream(e,fB);
return dD
};
var dD;
var fB={sphere:aB,point:aB,lineStart:hc,lineEnd:aB,polygonStart:aB,polygonEnd:aB};
function hc(){var hC,hD,e;
fB.point=function(hG,hF){hC=hG*H,hD=Math.sin(hF*=H),e=Math.cos(hF);
fB.point=hE
};
fB.lineEnd=function(){fB.point=fB.lineEnd=aB
};
function hE(hG,hF){var hJ=Math.sin(hF*=H),hK=Math.cos(hF),hH=Math.abs((hG*=H)-hC),hI=Math.cos(hH);
dD+=Math.atan2(Math.sqrt((hH=hK*Math.sin(hH))*hH+(hH=e*hJ-hD*hK*hI)*hH),hD*hJ+e*hK*hI);
hC=hG,hD=hJ,e=hK
}}function ed(hD,hC){function e(hF,hE){var hI=Math.cos(hF),hH=Math.cos(hE),hG=hD(hI*hH);
return[hG*hH*Math.sin(hF),hG*Math.sin(hE)]
}e.invert=function(hE,hJ){var hH=Math.sqrt(hE*hE+hJ*hJ),hI=hC(hH),hF=Math.sin(hI),hG=Math.cos(hI);
return[Math.atan2(hE*hF,hH*hG),Math.asin(hH&&hJ*hF/hH)]
};
return e
}var bi=ed(function(e){return Math.sqrt(2/(1+e))
},function(e){return 2*Math.asin(e/2)
});
(gQ.geo.azimuthalEqualArea=function(){return ff(bi)
}).raw=bi;
var bw=ed(function(e){var hC=Math.acos(e);
return hC&&hC/Math.sin(hC)
},fV);
(gQ.geo.azimuthalEquidistant=function(){return ff(bw)
}).raw=bw;
function fo(hD,hC){var e=Math.cos(hD),hF=function(hI){return Math.tan(fO/4+hI/2)
},hH=hD===hC?Math.sin(hD):Math.log(e/Math.cos(hC))/Math.log(hF(hC)/hF(hD)),hG=e*Math.pow(hF(hD),hH)/hH;
if(!hH){return aO
}function hE(hJ,hI){var hK=Math.abs(Math.abs(hI)-fO/2)<fX?0:hG/Math.pow(hF(hI),hH);
return[hK*Math.sin(hH*hJ),hG-hK*Math.cos(hH*hJ)]
}hE.invert=function(hI,hL){var hK=hG-hL,hJ=bW(hH)*Math.sqrt(hI*hI+hK*hK);
return[Math.atan2(hI,hK)/hH,2*Math.atan(Math.pow(hG/hJ,1/hH))-fO/2]
};
return hE
}(gQ.geo.conicConformal=function(){return bT(fo)
}).raw=fo;
function g2(hD,hC){var e=Math.cos(hD),hG=hD===hC?Math.sin(hD):(e-Math.cos(hC))/(hC-hD),hF=e/hG+hD;
if(Math.abs(hG)<fX){return bm
}function hE(hI,hH){var hJ=hF-hH;
return[hJ*Math.sin(hG*hI),hF-hJ*Math.cos(hG*hI)]
}hE.invert=function(hH,hJ){var hI=hF-hJ;
return[Math.atan2(hH,hI)/hG,hF-bW(hG)*Math.sqrt(hH*hH+hI*hI)]
};
return hE
}(gQ.geo.conicEquidistant=function(){return bT(g2)
}).raw=g2;
var ek=ed(function(e){return 1/e
},Math.atan);
(gQ.geo.gnomonic=function(){return ff(ek)
}).raw=ek;
function aO(hC,e){return[hC,Math.log(Math.tan(fO/4+e/2))]
}aO.invert=function(e,hC){return[e,2*Math.atan(Math.exp(hC))-fO/2]
};
function cR(hG){var e=ff(hG),hF=e.scale,hE=e.translate,hC=e.clipExtent,hD;
e.scale=function(){var hH=hF.apply(e,arguments);
return hH===e?hD?e.clipExtent(null):e:hH
};
e.translate=function(){var hH=hE.apply(e,arguments);
return hH===e?hD?e.clipExtent(null):e:hH
};
e.clipExtent=function(hJ){var hI=hC.apply(e,arguments);
if(hI===e){if(hD=hJ==null){var hH=fO*hF(),hK=hE();
hC([[hK[0]-hH,hK[1]-hH],[hK[0]+hH,hK[1]+hH]])
}}else{if(hD){hI=null
}}return hI
};
return e.clipExtent(null)
}(gQ.geo.mercator=function(){return cR(aO)
}).raw=aO;
var fD=ed(function(){return 1
},Math.asin);
(gQ.geo.orthographic=function(){return ff(fD)
}).raw=fD;
var bZ=ed(function(e){return 1/(1+e)
},function(e){return 2*Math.atan(e)
});
(gQ.geo.stereographic=function(){return ff(bZ)
}).raw=bZ;
function af(hC,e){var hD=Math.cos(e)*Math.sin(hC);
return[Math.log((1+hD)/(1-hD))/2,Math.atan2(Math.tan(e),Math.cos(hC))]
}af.invert=function(e,hC){return[Math.atan2(dF(e),Math.cos(hC)),b1(Math.sin(hC)/br(e))]
};
(gQ.geo.transverseMercator=function(){return cR(af)
}).raw=af;
gQ.geom={};
gQ.svg={};
function eQ(hC){var e=gq,hI=go,hH=ae,hE=hj,hG=hE.key,hF=0.7;
function hD(hM){var hO=[],hR=[],hN=-1,hJ=hM.length,hQ,hL=Q(e),hK=Q(hI);
function hP(){hO.push("M",hE(hC(hR),hF))
}while(++hN<hJ){if(hH.call(this,hQ=hM[hN],hN)){hR.push([+hL.call(this,hQ,hN),+hK.call(this,hQ,hN)])
}else{if(hR.length){hP();
hR=[]
}}}if(hR.length){hP()
}return hO.length?hO.join(""):null
}hD.x=function(hJ){if(!arguments.length){return e
}e=hJ;
return hD
};
hD.y=function(hJ){if(!arguments.length){return hI
}hI=hJ;
return hD
};
hD.defined=function(hJ){if(!arguments.length){return hH
}hH=hJ;
return hD
};
hD.interpolate=function(hJ){if(!arguments.length){return hG
}if(typeof hJ==="function"){hG=hE=hJ
}else{hG=(hE=b0.get(hJ)||hj).key
}return hD
};
hD.tension=function(hJ){if(!arguments.length){return hF
}hF=hJ;
return hD
};
return hD
}gQ.svg.line=function(){return eQ(fV)
};
function gq(e){return e[0]
}function go(e){return e[1]
}var b0=gQ.map({linear:hj,"linear-closed":X,step:cV,"step-before":bc,"step-after":g0,basis:eU,"basis-open":a9,"basis-closed":cy,bundle:cB,cardinal:dC,"cardinal-open":bP,"cardinal-closed":s,monotone:c2});
b0.forEach(function(e,hC){hC.key=e;
hC.closed=/-closed$/.test(e)
});
function hj(e){return e.join("L")
}function X(e){return hj(e)+"Z"
}function cV(hC){var e=0,hF=hC.length,hE=hC[0],hD=[hE[0],",",hE[1]];
while(++e<hF){hD.push("H",(hE[0]+(hE=hC[e])[0])/2,"V",hE[1])
}if(hF>1){hD.push("H",hE[0])
}return hD.join("")
}function bc(hC){var e=0,hF=hC.length,hE=hC[0],hD=[hE[0],",",hE[1]];
while(++e<hF){hD.push("V",(hE=hC[e])[1],"H",hE[0])
}return hD.join("")
}function g0(hC){var e=0,hF=hC.length,hE=hC[0],hD=[hE[0],",",hE[1]];
while(++e<hF){hD.push("H",(hE=hC[e])[0],"V",hE[1])
}return hD.join("")
}function bP(hC,e){return hC.length<4?hj(hC):hC[1]+cJ(hC.slice(1,hC.length-1),bJ(hC,e))
}function s(hC,e){return hC.length<3?hj(hC):hC[0]+cJ((hC.push(hC[0]),hC),bJ([hC[hC.length-2]].concat(hC,[hC[1]]),e))
}function dC(hC,e){return hC.length<3?hj(hC):hC[0]+cJ(hC,bJ(hC,e))
}function cJ(hH,hG){if(hG.length<1||hH.length!=hG.length&&hH.length!=hG.length+2){return hj(hH)
}var hI=hH.length!=hG.length,hL="",hJ=hH[0],e=hH[1],hF=hG[0],hK=hF,hD=1;
if(hI){hL+="Q"+(e[0]-hF[0]*2/3)+","+(e[1]-hF[1]*2/3)+","+e[0]+","+e[1];
hJ=hH[1];
hD=2
}if(hG.length>1){hK=hG[1];
e=hH[hD];
hD++;
hL+="C"+(hJ[0]+hF[0])+","+(hJ[1]+hF[1])+","+(e[0]-hK[0])+","+(e[1]-hK[1])+","+e[0]+","+e[1];
for(var hC=2;
hC<hG.length;
hC++,hD++){e=hH[hD];
hK=hG[hC];
hL+="S"+(e[0]-hK[0])+","+(e[1]-hK[1])+","+e[0]+","+e[1]
}}if(hI){var hE=hH[hD];
hL+="Q"+(e[0]+hK[0]*2/3)+","+(e[1]+hK[1]*2/3)+","+hE[0]+","+hE[1]
}return hL
}function bJ(hH,hF){var hD=[],hE=(1-hF)/2,hJ,hI=hH[0],hG=hH[1],hC=1,e=hH.length;
while(++hC<e){hJ=hI;
hI=hG;
hG=hH[hC];
hD.push([hE*(hG[0]-hJ[0]),hE*(hG[1]-hJ[1])])
}return hD
}function eU(hI){if(hI.length<3){return hj(hI)
}var hD=1,hC=hI.length,hE=hI[0],e=hE[0],hG=hE[1],hH=[e,e,e,(hE=hI[1])[0]],hF=[hG,hG,hG,hE[1]],hJ=[e,",",hG,"L",fY(gR,hH),",",fY(gR,hF)];
hI.push(hI[hC-1]);
while(++hD<=hC){hE=hI[hD];
hH.shift();
hH.push(hE[0]);
hF.shift();
hF.push(hE[1]);
bC(hJ,hH,hF)
}hI.pop();
hJ.push("L",hE);
return hJ.join("")
}function a9(hE){if(hE.length<4){return hj(hE)
}var hG=[],hD=-1,hH=hE.length,hF,hC=[0],e=[0];
while(++hD<3){hF=hE[hD];
hC.push(hF[0]);
e.push(hF[1])
}hG.push(fY(gR,hC)+","+fY(gR,e));
--hD;
while(++hD<hH){hF=hE[hD];
hC.shift();
hC.push(hF[0]);
e.shift();
e.push(hF[1]);
bC(hG,hC,e)
}return hG.join("")
}function cy(hF){var hH,hE=-1,hI=hF.length,e=hI+4,hG,hD=[],hC=[];
while(++hE<4){hG=hF[hE%hI];
hD.push(hG[0]);
hC.push(hG[1])
}hH=[fY(gR,hD),",",fY(gR,hC)];
--hE;
while(++hE<e){hG=hF[hE%hI];
hD.shift();
hD.push(hG[0]);
hC.shift();
hC.push(hG[1]);
bC(hH,hD,hC)
}return hH.join("")
}function cB(hH,hG){var hD=hH.length-1;
if(hD){var hC=hH[0][0],hF=hH[0][1],hK=hH[hD][0]-hC,hJ=hH[hD][1]-hF,hE=-1,e,hI;
while(++hE<=hD){e=hH[hE];
hI=hE/hD;
e[0]=hG*e[0]+(1-hG)*(hC+hI*hK);
e[1]=hG*e[1]+(1-hG)*(hF+hI*hJ)
}}return eU(hH)
}function fY(hC,e){return hC[0]*e[0]+hC[1]*e[1]+hC[2]*e[2]+hC[3]*e[3]
}var gT=[0,2/3,1/3,0],gS=[0,1/3,2/3,0],gR=[0,1/6,2/3,1/6];
function bC(hC,e,hD){hC.push("C",fY(gT,e),",",fY(gT,hD),",",fY(gS,e),",",fY(gS,hD),",",fY(gR,e),",",fY(gR,hD))
}function hu(hC,e){return(e[1]-hC[1])/(e[0]-hC[0])
}function dS(hE){var hD=0,hC=hE.length-1,e=[],hH=hE[0],hG=hE[1],hF=e[0]=hu(hH,hG);
while(++hD<hC){e[hD]=(hF+(hF=hu(hH=hG,hG=hE[hD+1])))/2
}e[hD]=hF;
return e
}function ap(hI){var hF=[],hE,hH,hG,hJ,e=dS(hI),hD=-1,hC=hI.length-1;
while(++hD<hC){hE=hu(hI[hD],hI[hD+1]);
if(Math.abs(hE)<0.000001){e[hD]=e[hD+1]=0
}else{hH=e[hD]/hE;
hG=e[hD+1]/hE;
hJ=hH*hH+hG*hG;
if(hJ>9){hJ=hE*3/Math.sqrt(hJ);
e[hD]=hJ*hH;
e[hD+1]=hJ*hG
}}}hD=-1;
while(++hD<=hC){hJ=(hI[Math.min(hC,hD+1)][0]-hI[Math.max(0,hD-1)][0])/(6*(1+e[hD]*e[hD]));
hF.push([hJ||0,e[hD]*hJ||0])
}return hF
}function c2(e){return e.length<3?hj(e):e[0]+cJ(e,ap(e))
}gQ.geom.hull=function(hC){var e=gq,hE=go;
if(arguments.length){return hD(hC)
}function hD(hZ){if(hZ.length<3){return[]
}var hI=Q(e),hH=Q(hE),hP=hZ.length,hK,hM=hP-1,hS=[],hL=[],hX,hT,hQ,hU=0,hW,hG,hV,hF,hO,hN,hY,hR;
if(hI===gq&&hE===go){hK=hZ
}else{for(hT=0,hK=[];
hT<hP;
++hT){hK.push([+hI.call(this,hX=hZ[hT],hT),+hH.call(this,hX,hT)])
}}for(hT=1;
hT<hP;
++hT){if(hK[hT][1]<hK[hU][1]||hK[hT][1]==hK[hU][1]&&hK[hT][0]<hK[hU][0]){hU=hT
}}for(hT=0;
hT<hP;
++hT){if(hT===hU){continue
}hG=hK[hT][1]-hK[hU][1];
hW=hK[hT][0]-hK[hU][0];
hS.push({angle:Math.atan2(hG,hW),index:hT})
}hS.sort(function(h1,h0){return h1.angle-h0.angle
});
hY=hS[0].angle;
hN=hS[0].index;
hO=0;
for(hT=1;
hT<hM;
++hT){hQ=hS[hT].index;
if(hY==hS[hT].angle){hW=hK[hN][0]-hK[hU][0];
hG=hK[hN][1]-hK[hU][1];
hV=hK[hQ][0]-hK[hU][0];
hF=hK[hQ][1]-hK[hU][1];
if(hW*hW+hG*hG>=hV*hV+hF*hF){hS[hT].index=-1;
continue
}else{hS[hO].index=-1
}}hY=hS[hT].angle;
hO=hT;
hN=hQ
}hL.push(hU);
for(hT=0,hQ=0;
hT<2;
++hQ){if(hS[hQ].index>-1){hL.push(hS[hQ].index);
hT++
}}hR=hL.length;
for(;
hQ<hM;
++hQ){if(hS[hQ].index<0){continue
}while(!dp(hL[hR-2],hL[hR-1],hS[hQ].index,hK)){--hR
}hL[hR++]=hS[hQ].index
}var hJ=[];
for(hT=hR-1;
hT>=0;
--hT){hJ.push(hZ[hL[hT]])
}return hJ
}hD.x=function(hF){return arguments.length?(e=hF,hD):e
};
hD.y=function(hF){return arguments.length?(hE=hF,hD):hE
};
return hD
};
function dp(hE,hD,hC,hL){var hM,hK,hJ,hI,hH,hG,hF;
hM=hL[hE];
hK=hM[0];
hJ=hM[1];
hM=hL[hD];
hI=hM[0];
hH=hM[1];
hM=hL[hC];
hG=hM[0];
hF=hM[1];
return(hF-hJ)*(hI-hK)-(hH-hJ)*(hG-hK)>0
}gQ.geom.polygon=function(e){hw(e,d8);
return e
};
var d8=gQ.geom.polygon.prototype=[];
d8.area=function(){var hD=-1,hF=this.length,hC,e=this[hF-1],hE=0;
while(++hD<hF){hC=e;
e=this[hD];
hE+=hC[1]*e[0]-hC[0]*e[1]
}return hE*0.5
};
d8.centroid=function(hE){var hF=-1,hI=this.length,hC=0,hH=0,hD,e=this[hI-1],hG;
if(!arguments.length){hE=-1/(6*this.area())
}while(++hF<hI){hD=e;
e=this[hF];
hG=hD[0]*e[1]-e[0]*hD[1];
hC+=(hD[0]+e[0])*hG;
hH+=(hD[1]+e[1])*hG
}return[hC*hE,hH*hE]
};
d8.clip=function(hI){var hK,hF=gp(hI),hE=-1,e=this.length-gp(this),hD,hC,hL=this[e-1],hJ,hH,hG;
while(++hE<e){hK=hI.slice();
hI.length=0;
hJ=this[hE];
hH=hK[(hC=hK.length-hF)-1];
hD=-1;
while(++hD<hC){hG=hK[hD];
if(B(hG,hL,hJ)){if(!B(hH,hL,hJ)){hI.push(fW(hH,hG,hL,hJ))
}hI.push(hG)
}else{if(B(hH,hL,hJ)){hI.push(fW(hH,hG,hL,hJ))
}}hH=hG
}if(hF){hI.push(hI[0])
}hL=hJ
}return hI
};
function B(hD,hC,e){return(e[0]-hC[0])*(hD[1]-hC[1])<(e[1]-hC[1])*(hD[0]-hC[0])
}function fW(hH,hF,hL,hI){var hD=hH[0],e=hL[0],hE=hF[0]-hD,hM=hI[0]-e,hK=hH[1],hG=hL[1],hJ=hF[1]-hK,hN=hI[1]-hG,hC=(hM*(hK-hG)-hN*(hD-e))/(hN*hE-hM*hJ);
return[hD+hC*hE,hK+hC*hJ]
}function gp(hD){var hC=hD[0],e=hD[hD.length-1];
return !(hC[0]-e[0]||hC[1]-e[1])
}gQ.geom.delaunay=function(hC){var e=hC.map(function(){return[]
}),hD=[];
bj(hC,function(hE){e[hE.region.l.index].push(hC[hE.region.r.index])
});
e.forEach(function(hJ,hI){var hG=hC[hI],hF=hG[0],hK=hG[1];
hJ.forEach(function(hL){hL.angle=Math.atan2(hL[0]-hF,hL[1]-hK)
});
hJ.sort(function(hM,hL){return hM.angle-hL.angle
});
for(var hH=0,hE=hJ.length-1;
hH<hE;
hH++){hD.push([hG,hJ[hH],hJ[hH+1]])
}});
return hD
};
gQ.geom.voronoi=function(hC){var e=gq,hF=go,hD=null;
if(arguments.length){return hE(hC)
}function hE(hK){var hO,hN=hK.map(function(){return[]
}),hJ=Q(e),hI=Q(hF),hM,hL,hH=hK.length,hG=1000000;
if(hJ===gq&&hI===go){hO=hK
}else{for(hO=new Array(hH),hL=0;
hL<hH;
++hL){hO[hL]=[+hJ.call(this,hM=hK[hL],hL),+hI.call(this,hM,hL)]
}}bj(hO,function(hR){var hX,hW,hQ,hP,hU,hS;
if(hR.a===1&&hR.b>=0){hX=hR.ep.r;
hW=hR.ep.l
}else{hX=hR.ep.l;
hW=hR.ep.r
}if(hR.a===1){hU=hX?hX.y:-hG;
hQ=hR.c-hR.b*hU;
hS=hW?hW.y:hG;
hP=hR.c-hR.b*hS
}else{hQ=hX?hX.x:-hG;
hU=hR.c-hR.a*hQ;
hP=hW?hW.x:hG;
hS=hR.c-hR.a*hP
}var hV=[hQ,hU],hT=[hP,hS];
hN[hR.region.l.index].push(hV,hT);
hN[hR.region.r.index].push(hV,hT)
});
hN=hN.map(function(hS,hR){var hQ=hO[hR][0],hU=hO[hR][1],hT=hS.map(function(hV){return Math.atan2(hV[0]-hQ,hV[1]-hU)
}),hP=gQ.range(hS.length).sort(function(hW,hV){return hT[hW]-hT[hV]
});
return hP.filter(function(hW,hV){return !hV||hT[hW]-hT[hP[hV-1]]>fX
}).map(function(hV){return hS[hV]
})
});
hN.forEach(function(hZ,hT){var hS=hZ.length;
if(!hS){return hZ.push([-hG,-hG],[-hG,hG],[hG,hG],[hG,-hG])
}if(hS>2){return
}var h4=hO[hT],h2=hZ[0],h1=hZ[1],hR=h4[0],h0=h4[1],hQ=h2[0],hY=h2[1],hP=h1[0],hW=h1[1],h5=Math.abs(hP-hQ),h3=hW-hY;
if(Math.abs(h3)<fX){var hV=h0<hY?-hG:hG;
hZ.push([-hG,hV],[hG,hV])
}else{if(h5<fX){var hX=hR<hQ?-hG:hG;
hZ.push([hX,-hG],[hX,hG])
}else{var hV=(hP-hQ)*(hY-h0)<(hQ-hR)*(hW-hY)?hG:-hG,hU=Math.abs(h3)-h5;
if(Math.abs(hU)<fX){hZ.push([h3<0?hV:-hV,hV])
}else{if(hU>0){hV*=-1
}hZ.push([-hG,hV],[hG,hV])
}}}});
if(hD){for(hL=0;
hL<hH;
++hL){hD.clip(hN[hL])
}}for(hL=0;
hL<hH;
++hL){hN[hL].point=hK[hL]
}return hN
}hE.x=function(hG){return arguments.length?(e=hG,hE):e
};
hE.y=function(hG){return arguments.length?(hF=hG,hE):hF
};
hE.clipExtent=function(hI){if(!arguments.length){return hD&&[hD[0],hD[2]]
}if(hI==null){hD=null
}else{var hH=+hI[0][0],hK=+hI[0][1],hG=+hI[1][0],hJ=+hI[1][1];
hD=gQ.geom.polygon([[hH,hK],[hH,hJ],[hG,hJ],[hG,hK]])
}return hE
};
hE.size=function(hG){if(!arguments.length){return hD&&hD[2]
}return hE.clipExtent(hG&&[[0,0],hG])
};
hE.links=function(hJ){var hM,hN=hJ.map(function(){return[]
}),hO=[],hI=Q(e),hH=Q(hF),hL,hK,hG=hJ.length;
if(hI===gq&&hH===go){hM=hJ
}else{for(hM=new Array(hG),hK=0;
hK<hG;
++hK){hM[hK]=[+hI.call(this,hL=hJ[hK],hK),+hH.call(this,hL,hK)]
}}bj(hM,function(hR){var hP=hR.region.l.index,hQ=hR.region.r.index;
if(hN[hP][hQ]){return
}hN[hP][hQ]=hN[hQ][hP]=true;
hO.push({source:hJ[hP],target:hJ[hQ]})
});
return hO
};
hE.triangles=function(hK){if(e===gq&&hF===go){return gQ.geom.delaunay(hK)
}var hI=new Array(hM),hJ=Q(e),hH=Q(hF),hL,hG=-1,hM=hK.length;
while(++hG<hM){(hI[hG]=[+hJ.call(this,hL=hK[hG],hG),+hH.call(this,hL,hG)]).data=hL
}return gQ.geom.delaunay(hI).map(function(hN){return hN.map(function(hO){return hO.data
})
})
};
return hE
};
var bS={l:"r",r:"l"};
function bj(hO,hE){var hU={list:hO.map(function(e,hW){return{index:hW,x:e[0],y:e[1]}
}).sort(function(hW,e){return hW.y<e.y?-1:hW.y>e.y?1:hW.x<e.x?-1:hW.x>e.x?1:0
}),bottomSite:null};
var hD={list:[],leftEnd:null,rightEnd:null,init:function(){hD.leftEnd=hD.createHalfEdge(null,"l");
hD.rightEnd=hD.createHalfEdge(null,"l");
hD.leftEnd.r=hD.rightEnd;
hD.rightEnd.l=hD.leftEnd;
hD.list.unshift(hD.leftEnd,hD.rightEnd)
},createHalfEdge:function(hW,e){return{edge:hW,side:e,vertex:null,l:null,r:null}
},insert:function(hW,e){e.l=hW;
e.r=hW.r;
hW.r.l=e;
hW.r=e
},leftBound:function(hW){var e=hD.leftEnd;
do{e=e.r
}while(e!=hD.rightEnd&&hT.rightOf(e,hW));
e=e.l;
return e
},del:function(e){e.l.r=e.r;
e.r.l=e.l;
e.edge=null
},right:function(e){return e.r
},left:function(e){return e.l
},leftRegion:function(e){return e.edge==null?hU.bottomSite:e.edge.region[e.side]
},rightRegion:function(e){return e.edge==null?hU.bottomSite:e.edge.region[bS[e.side]]
}};
var hT={bisect:function(hZ,hX){var hY={region:{l:hZ,r:hX},ep:{l:null,r:null}};
var hW=hX.x-hZ.x,e=hX.y-hZ.y,h1=hW>0?hW:-hW,h0=e>0?e:-e;
hY.c=hZ.x*hW+hZ.y*e+(hW*hW+e*e)*0.5;
if(h1>h0){hY.a=1;
hY.b=e/hW;
hY.c/=hW
}else{hY.b=1;
hY.a=hW/e;
hY.c/=e
}return hY
},intersect:function(hZ,hY){var h4=hZ.edge,h3=hY.edge;
if(!h4||!h3||h4.region.r==h3.region.r){return null
}var h2=h4.a*h3.b-h4.b*h3.a;
if(Math.abs(h2)<1e-10){return null
}var hX=(h4.c*h3.b-h3.c*h4.b)/h2,h7=(h3.c*h4.a-h4.c*h3.a)/h2,h6=h4.region.r,h1=h3.region.r,hW,h0;
if(h6.y<h1.y||h6.y==h1.y&&h6.x<h1.x){hW=hZ;
h0=h4
}else{hW=hY;
h0=h3
}var h5=hX>=h0.region.r.x;
if(h5&&hW.side==="l"||!h5&&hW.side==="r"){return null
}return{x:hX,y:h7}
},rightOf:function(h1,hW){var h5=h1.edge,hZ=h5.region.r,h8=hW.x>hZ.x;
if(h8&&h1.side==="l"){return 1
}if(!h8&&h1.side==="r"){return 0
}if(h5.a===1){var h7=hW.y-hZ.y,hX=hW.x-hZ.x,h2=0,h6=0;
if(!h8&&h5.b<0||h8&&h5.b>=0){h6=h2=h7>=h5.b*hX
}else{h6=hW.x+hW.y*h5.b>h5.c;
if(h5.b<0){h6=!h6
}if(!h6){h2=1
}}if(!h2){var h9=hZ.x-h5.region.l.x;
h6=h5.b*(hX*hX-h7*h7)<h9*h7*(1+2*hX/h9+h5.b*h5.b);
if(h5.b<0){h6=!h6
}}}else{var hY=h5.c-h5.a*hW.x,h4=hW.y-hY,h3=hW.x-hZ.x,h0=hY-hZ.y;
h6=h4*h4>h3*h3+h0*h0
}return h1.side==="l"?h6:!h6
},endPoint:function(hX,hW,e){hX.ep[hW]=e;
if(!hX.ep[bS[hW]]){return
}hE(hX)
},distance:function(hY,hX){var hW=hY.x-hX.x,e=hY.y-hX.y;
return Math.sqrt(hW*hW+e*e)
}};
var hC={list:[],insert:function(h0,hW,h1){h0.vertex=hW;
h0.ystar=hW.y+h1;
for(var hX=0,hZ=hC.list,e=hZ.length;
hX<e;
hX++){var hY=hZ[hX];
if(h0.ystar>hY.ystar||h0.ystar==hY.ystar&&hW.x>hY.vertex.x){continue
}else{break
}}hZ.splice(hX,0,h0)
},del:function(hY){for(var hX=0,hW=hC.list,e=hW.length;
hX<e&&hW[hX]!=hY;
++hX){}hW.splice(hX,1)
},empty:function(){return hC.list.length===0
},nextEvent:function(hY){for(var hX=0,hW=hC.list,e=hW.length;
hX<e;
++hX){if(hW[hX]==hY){return hW[hX+1]
}}return null
},min:function(){var e=hC.list[0];
return{x:e.vertex.x,y:e.ystar}
},extractMin:function(){return hC.list.shift()
}};
hD.init();
hU.bottomSite=hU.list.shift();
var hV=hU.list.shift(),hH;
var hM,hJ,hF,hR,hG;
var hK,hL,hS,hN,hI;
var hQ,hP;
while(true){if(!hC.empty()){hH=hC.min()
}if(hV&&(hC.empty()||hV.y<hH.y||hV.y==hH.y&&hV.x<hH.x)){hM=hD.leftBound(hV);
hJ=hD.right(hM);
hK=hD.rightRegion(hM);
hQ=hT.bisect(hK,hV);
hG=hD.createHalfEdge(hQ,"l");
hD.insert(hM,hG);
hN=hT.intersect(hM,hG);
if(hN){hC.del(hM);
hC.insert(hM,hN,hT.distance(hN,hV))
}hM=hG;
hG=hD.createHalfEdge(hQ,"r");
hD.insert(hM,hG);
hN=hT.intersect(hG,hJ);
if(hN){hC.insert(hG,hN,hT.distance(hN,hV))
}hV=hU.list.shift()
}else{if(!hC.empty()){hM=hC.extractMin();
hF=hD.left(hM);
hJ=hD.right(hM);
hR=hD.right(hJ);
hK=hD.leftRegion(hM);
hL=hD.rightRegion(hJ);
hI=hM.vertex;
hT.endPoint(hM.edge,hM.side,hI);
hT.endPoint(hJ.edge,hJ.side,hI);
hD.del(hM);
hC.del(hJ);
hD.del(hJ);
hP="l";
if(hK.y>hL.y){hS=hK;
hK=hL;
hL=hS;
hP="r"
}hQ=hT.bisect(hK,hL);
hG=hD.createHalfEdge(hQ,hP);
hD.insert(hF,hG);
hT.endPoint(hQ,bS[hP],hI);
hN=hT.intersect(hF,hG);
if(hN){hC.del(hF);
hC.insert(hF,hN,hT.distance(hN,hK))
}hN=hT.intersect(hG,hR);
if(hN){hC.insert(hG,hN,hT.distance(hN,hK))
}}else{break
}}}for(hM=hD.right(hD.leftEnd);
hM!=hD.rightEnd;
hM=hD.right(hM)){hE(hM.edge)
}}gQ.geom.quadtree=function(hI,hC,hG,e,hF){var hH=gq,hE=go,hJ;
if(hJ=arguments.length){hH=fH;
hE=fG;
if(hJ===3){hF=hG;
e=hC;
hG=hC=0
}return hD(hI)
}function hD(h2){var hZ,hO=Q(hH),hM=Q(hE),hQ,hW,hX,hU,hK,hT,hP,h1;
if(hC!=null){hK=hC,hT=hG,hP=e,h1=hF
}else{hP=h1=-(hK=hT=Infinity);
hQ=[],hW=[];
hU=h2.length;
if(hJ){for(hX=0;
hX<hU;
++hX){hZ=h2[hX];
if(hZ.x<hK){hK=hZ.x
}if(hZ.y<hT){hT=hZ.y
}if(hZ.x>hP){hP=hZ.x
}if(hZ.y>h1){h1=hZ.y
}hQ.push(hZ.x);
hW.push(hZ.y)
}}else{for(hX=0;
hX<hU;
++hX){var hY=+hO(hZ=h2[hX],hX),hN=+hM(hZ,hX);
if(hY<hK){hK=hY
}if(hN<hT){hT=hN
}if(hY>hP){hP=hY
}if(hN>h1){h1=hN
}hQ.push(hY);
hW.push(hN)
}}}var hS=hP-hK,hR=h1-hT;
if(hS>hR){h1=hT+hS
}else{hP=hK+hR
}function hL(h5,h9,id,ia,h4,ic,h3,ib){if(isNaN(id)||isNaN(ia)){return
}if(h5.leaf){var h8=h5.x,h7=h5.y;
if(h8!=null){if(Math.abs(h8-id)+Math.abs(h7-ia)<0.01){h0(h5,h9,id,ia,h4,ic,h3,ib)
}else{var h6=h5.point;
h5.x=h5.y=h5.point=null;
h0(h5,h6,h8,h7,h4,ic,h3,ib);
h0(h5,h9,id,ia,h4,ic,h3,ib)
}}else{h5.x=id,h5.y=ia,h5.point=h9
}}else{h0(h5,h9,id,ia,h4,ic,h3,ib)
}}function h0(h6,h8,ie,ia,h5,id,h4,ib){var ic=(h5+h4)*0.5,h9=(id+ib)*0.5,ig=ie>=ic,h3=ia>=h9,h7=(h3<<1)+ig;
h6.leaf=false;
h6=h6.nodes[h7]||(h6.nodes[h7]=fm());
if(ig){h5=ic
}else{h4=ic
}if(h3){id=h9
}else{ib=h9
}hL(h6,h8,ie,ia,h5,id,h4,ib)
}var hV=fm();
hV.add=function(h3){hL(hV,h3,+hO(h3,++hX),+hM(h3,hX),hK,hT,hP,h1)
};
hV.visit=function(h3){cx(h3,hV,hK,hT,hP,h1)
};
hX=-1;
if(hC==null){while(++hX<hU){hL(hV,h2[hX],hQ[hX],hW[hX],hK,hT,hP,h1)
}--hX
}else{h2.forEach(hV.add)
}hQ=hW=h2=hZ=null;
return hV
}hD.x=function(hK){return arguments.length?(hH=hK,hD):hH
};
hD.y=function(hK){return arguments.length?(hE=hK,hD):hE
};
hD.extent=function(hK){if(!arguments.length){return hC==null?null:[[hC,hG],[e,hF]]
}if(hK==null){hC=hG=e=hF=null
}else{hC=+hK[0][0],hG=+hK[0][1],e=+hK[1][0],hF=+hK[1][1]
}return hD
};
hD.size=function(hK){if(!arguments.length){return hC==null?null:[e-hC,hF-hG]
}if(hK==null){hC=hG=e=hF=null
}else{hC=hG=0,e=+hK[0],hF=+hK[1]
}return hD
};
return hD
};
function fH(e){return e.x
}function fG(e){return e.y
}function fm(){return{leaf:true,nodes:[],point:null,x:null,y:null}
}function cx(hF,hE,hC,hJ,e,hH){if(!hF(hE,hC,hJ,e,hH)){var hI=(hC+e)*0.5,hG=(hJ+hH)*0.5,hD=hE.nodes;
if(hD[0]){cx(hF,hD[0],hC,hJ,hI,hG)
}if(hD[1]){cx(hF,hD[1],hI,hJ,e,hG)
}if(hD[2]){cx(hF,hD[2],hC,hG,hI,hH)
}if(hD[3]){cx(hF,hD[3],hI,hG,e,hH)
}}}gQ.interpolateRgb=aJ;
function aJ(hC,e){hC=gQ.rgb(hC);
e=gQ.rgb(e);
var hE=hC.r,hD=hC.g,hH=hC.b,hG=e.r-hE,hF=e.g-hD,hI=e.b-hH;
return function(hJ){return"#"+ci(Math.round(hE+hG*hJ))+ci(Math.round(hD+hF*hJ))+ci(Math.round(hH+hI*hJ))
}
}gQ.interpolateObject=bz;
function bz(hC,e){var hE={},hF={},hD;
for(hD in hC){if(hD in e){hE[hD]=fh(hC[hD],e[hD])
}else{hF[hD]=hC[hD]
}}for(hD in e){if(!(hD in hC)){hF[hD]=e[hD]
}}return function(hG){for(hD in hE){hF[hD]=hE[hD](hG)
}return hF
}
}gQ.interpolateNumber=bt;
function bt(hC,e){e-=hC=+hC;
return function(hD){return hC+e*hD
}
}gQ.interpolateString=bM;
function bM(hI,hH){var hE,hG,hF,hK=0,hJ=0,hL=[],e=[],hD,hC;
hI=hI+"",hH=hH+"";
fw.lastIndex=0;
for(hG=0;
hE=fw.exec(hH);
++hG){if(hE.index){hL.push(hH.substring(hK,hJ=hE.index))
}e.push({i:hL.length,x:hE[0]});
hL.push(null);
hK=fw.lastIndex
}if(hK<hH.length){hL.push(hH.substring(hK))
}for(hG=0,hD=e.length;
(hE=fw.exec(hI))&&hG<hD;
++hG){hC=e[hG];
if(hC.x==hE[0]){if(hC.i){if(hL[hC.i+1]==null){hL[hC.i-1]+=hC.x;
hL.splice(hC.i,1);
for(hF=hG+1;
hF<hD;
++hF){e[hF].i--
}}else{hL[hC.i-1]+=hC.x+hL[hC.i+1];
hL.splice(hC.i,2);
for(hF=hG+1;
hF<hD;
++hF){e[hF].i-=2
}}}else{if(hL[hC.i+1]==null){hL[hC.i]=hC.x
}else{hL[hC.i]=hC.x+hL[hC.i+1];
hL.splice(hC.i+1,1);
for(hF=hG+1;
hF<hD;
++hF){e[hF].i--
}}}e.splice(hG,1);
hD--;
hG--
}else{hC.x=bt(parseFloat(hE[0]),parseFloat(hC.x))
}}while(hG<hD){hC=e.pop();
if(hL[hC.i+1]==null){hL[hC.i]=hC.x
}else{hL[hC.i]=hC.x+hL[hC.i+1];
hL.splice(hC.i+1,1)
}hD--
}if(hL.length===1){return hL[0]==null?(hC=e[0].x,function(hM){return hC(hM)+""
}):function(){return hH
}
}return function(hM){for(hG=0;
hG<hD;
++hG){hL[(hC=e[hG]).i]=hC.x(hM)
}return hL.join("")
}
}var fw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
gQ.interpolate=fh;
function fh(hC,e){var hD=gQ.interpolators.length,hE;
while(--hD>=0&&!(hE=gQ.interpolators[hD](hC,e))){}return hE
}gQ.interpolators=[function(hC,e){var hD=typeof e;
return(hD==="string"?ah.has(e)||/^(#|rgb\(|hsl\()/.test(e)?aJ:bM:e instanceof E?aJ:hD==="object"?Array.isArray(e)?er:bz:bt)(hC,e)
}];
gQ.interpolateArray=er;
function er(hF,hD){var hC=[],hI=[],hE=hF.length,e=hD.length,hH=Math.min(hF.length,hD.length),hG;
for(hG=0;
hG<hH;
++hG){hC.push(fh(hF[hG],hD[hG]))
}for(;
hG<hE;
++hG){hI[hG]=hF[hG]
}for(;
hG<e;
++hG){hI[hG]=hD[hG]
}return function(hJ){for(hG=0;
hG<hH;
++hG){hI[hG]=hC[hG](hJ)
}return hI
}
}var gO=function(){return fV
};
var Y=gQ.map({linear:gO,poly:aN,quad:function(){return bK
},cubic:function(){return G
},sin:function(){return fN
},exp:function(){return e8
},circle:function(){return dP
},elastic:V,back:gw,bounce:function(){return b6
}});
var j=gQ.map({"in":fV,out:A,"in-out":aV,"out-in":function(e){return aV(A(e))
}});
gQ.ease=function(hC){var hE=hC.indexOf("-"),hD=hE>=0?hC.substring(0,hE):hC,e=hE>=0?hC.substring(hE+1):"in";
hD=Y.get(hD)||gO;
e=j.get(e)||fV;
return fe(e(hD.apply(null,Array.prototype.slice.call(arguments,1))))
};
function fe(e){return function(hC){return hC<=0?0:hC>=1?1:e(hC)
}
}function A(e){return function(hC){return 1-e(1-hC)
}
}function aV(e){return function(hC){return 0.5*(hC<0.5?e(2*hC):2-e(2-2*hC))
}
}function bK(e){return e*e
}function G(e){return e*e*e
}function aq(hC){if(hC<=0){return 0
}if(hC>=1){return 1
}var hD=hC*hC,e=hD*hC;
return 4*(hC<0.5?e:3*(hC-hD)+e-0.75)
}function aN(hC){return function(e){return Math.pow(e,hC)
}
}function fN(e){return 1-Math.cos(e*fO/2)
}function e8(e){return Math.pow(2,10*(e-1))
}function dP(e){return 1-Math.sqrt(1-e*e)
}function V(e,hD){var hC;
if(arguments.length<2){hD=0.45
}if(arguments.length){hC=hD/(2*fO)*Math.asin(1/e)
}else{e=1,hC=hD/4
}return function(hE){return 1+e*Math.pow(2,10*-hE)*Math.sin((hE-hC)*2*fO/hD)
}
}function gw(e){if(!e){e=1.70158
}return function(hC){return hC*hC*((e+1)*hC-e)
}
}function b6(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+0.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+0.9375:7.5625*(e-=2.625/2.75)*e+0.984375
}gQ.interpolateHcl=gm;
function gm(hD,e){hD=gQ.hcl(hD);
e=gQ.hcl(e);
var hC=hD.h,hF=hD.c,hH=hD.l,hE=e.h-hC,hG=e.c-hF,hI=e.l-hH;
if(isNaN(hG)){hG=0,hF=isNaN(hF)?e.c:hF
}if(isNaN(hE)){hE=0,hC=isNaN(hC)?e.h:hC
}else{if(hE>180){hE-=360
}else{if(hE<-180){hE+=360
}}}return function(hJ){return bq(hC+hE*hJ,hF+hG*hJ,hH+hI*hJ)+""
}
}gQ.interpolateHsl=aW;
function aW(hE,e){hE=gQ.hsl(hE);
e=gQ.hsl(e);
var hD=hE.h,hC=hE.s,hH=hE.l,hG=e.h-hD,hF=e.s-hC,hI=e.l-hH;
if(isNaN(hF)){hF=0,hC=isNaN(hC)?e.s:hC
}if(isNaN(hG)){hG=0,hD=isNaN(hD)?e.h:hD
}else{if(hG>180){hG-=360
}else{if(hG<-180){hG+=360
}}}return function(hJ){return a7(hD+hG*hJ,hC+hF*hJ,hH+hI*hJ)+""
}
}gQ.interpolateLab=gZ;
function gZ(hC,e){hC=gQ.lab(hC);
e=gQ.lab(e);
var hF=hC.l,hE=hC.a,hD=hC.b,hI=e.l-hF,hH=e.a-hE,hG=e.b-hD;
return function(hJ){return aw(hF+hI*hJ,hE+hH*hJ,hD+hG*hJ)+""
}
}gQ.interpolateRound=fc;
function fc(hC,e){e-=hC;
return function(hD){return Math.round(hC+e*hD)
}
}gQ.transform=function(e){var hC=bA.createElementNS(gQ.ns.prefix.svg,"g");
return(gQ.transform=function(hD){if(hD!=null){hC.setAttribute("transform",hD);
var hE=hC.transform.baseVal.consolidate()
}return new o(hE?hE.matrix:fL)
})(e)
};
function o(e){var hE=[e.a,e.b],hC=[e.c,e.d],hG=e4(hE),hD=eA(hE,hC),hF=e4(bF(hC,hE,-hD))||0;
if(hE[0]*hC[1]<hC[0]*hE[1]){hE[0]*=-1;
hE[1]*=-1;
hG*=-1;
hD*=-1
}this.rotate=(hG?Math.atan2(hE[1],hE[0]):Math.atan2(-hC[0],hC[1]))*g4;
this.translate=[e.e,e.f];
this.scale=[hG,hF];
this.skew=hF?Math.atan2(hD,hF)*g4:0
}o.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"
};
function eA(hC,e){return hC[0]*e[0]+hC[1]*e[1]
}function e4(e){var hC=Math.sqrt(eA(e,e));
if(hC){e[0]/=hC;
e[1]/=hC
}return hC
}function bF(hC,e,hD){hC[0]+=hD*e[0];
hC[1]+=hD*e[1];
return hC
}var fL={a:1,b:0,c:0,d:1,e:0,f:0};
gQ.interpolateTransform=dZ;
function dZ(hO,hN){var hP=[],hC=[],hG,hF=gQ.transform(hO),hE=gQ.transform(hN),hK=hF.translate,hJ=hE.translate,hD=hF.rotate,e=hE.rotate,hI=hF.skew,hH=hE.skew,hM=hF.scale,hL=hE.scale;
if(hK[0]!=hJ[0]||hK[1]!=hJ[1]){hP.push("translate(",null,",",null,")");
hC.push({i:1,x:bt(hK[0],hJ[0])},{i:3,x:bt(hK[1],hJ[1])})
}else{if(hJ[0]||hJ[1]){hP.push("translate("+hJ+")")
}else{hP.push("")
}}if(hD!=e){if(hD-e>180){e+=360
}else{if(e-hD>180){hD+=360
}}hC.push({i:hP.push(hP.pop()+"rotate(",null,")")-2,x:bt(hD,e)})
}else{if(e){hP.push(hP.pop()+"rotate("+e+")")
}}if(hI!=hH){hC.push({i:hP.push(hP.pop()+"skewX(",null,")")-2,x:bt(hI,hH)})
}else{if(hH){hP.push(hP.pop()+"skewX("+hH+")")
}}if(hM[0]!=hL[0]||hM[1]!=hL[1]){hG=hP.push(hP.pop()+"scale(",null,",",null,")");
hC.push({i:hG-4,x:bt(hM[0],hL[0])},{i:hG-2,x:bt(hM[1],hL[1])})
}else{if(hL[0]!=1||hL[1]!=1){hP.push(hP.pop()+"scale("+hL+")")
}}hG=hC.length;
return function(hR){var hQ=-1,hS;
while(++hQ<hG){hP[(hS=hC[hQ]).i]=hS.x(hR)
}return hP.join("")
}
}function gX(hC,e){e=e-(hC=+hC)?1/(e-hC):0;
return function(hD){return(hD-hC)*e
}
}function au(hC,e){e=e-(hC=+hC)?1/(e-hC):0;
return function(hD){return Math.max(0,Math.min(1,(hD-hC)*e))
}
}gQ.layout={};
gQ.layout.bundle=function(){return function(e){var hD=[],hC=-1,hE=e.length;
while(++hC<hE){hD.push(eo(e[hC]))
}return hD
}
};
function eo(hE){var hG=hE.source,e=hE.target,hF=fp(hG,e),hD=[hG];
while(hG!==hF){hG=hG.parent;
hD.push(hG)
}var hC=hD.length;
while(e!==hF){hD.splice(hC,0,e);
e=e.parent
}return hD
}function e3(hD){var hC=[],e=hD.parent;
while(e!=null){hC.push(hD);
hD=e;
e=e.parent
}hC.push(hD);
return hC
}function fp(hE,hC){if(hE===hC){return hE
}var hD=e3(hE),e=e3(hC),hF=hD.pop(),hG=e.pop(),hH=null;
while(hF===hG){hH=hF;
hF=hD.pop();
hG=e.pop()
}return hH
}gQ.layout.chord=function(){var hG={},hH,hE,hL,hD,hK=0,e,hC,hF;
function hJ(){var hQ={},hT=[],h1=gQ.range(hD),hX=[],hR,hZ,hP,hU,hS;
hH=[];
hE=[];
hR=0,hU=-1;
while(++hU<hD){hZ=0,hS=-1;
while(++hS<hD){hZ+=hL[hU][hS]
}hT.push(hZ);
hX.push(gQ.range(hD));
hR+=hZ
}if(e){h1.sort(function(h3,h2){return e(hT[h3],hT[h2])
})
}if(hC){hX.forEach(function(h3,h2){h3.sort(function(h5,h4){return hC(hL[h2][h5],hL[h2][h4])
})
})
}hR=(2*fO-hK*hD)/hR;
hZ=0,hU=-1;
while(++hU<hD){hP=hZ,hS=-1;
while(++hS<hD){var hY=h1[hU],hW=hX[hY][hS],h0=hL[hY][hW],hO=hZ,hN=hZ+=h0*hR;
hQ[hY+"-"+hW]={index:hY,subindex:hW,startAngle:hO,endAngle:hN,value:h0}
}hE[hY]={index:hY,startAngle:hP,endAngle:hZ,value:(hZ-hP)/hR};
hZ+=hK
}hU=-1;
while(++hU<hD){hS=hU-1;
while(++hS<hD){var hM=hQ[hU+"-"+hS],hV=hQ[hS+"-"+hU];
if(hM.value||hV.value){hH.push(hM.value<hV.value?{source:hV,target:hM}:{source:hM,target:hV})
}}}if(hF){hI()
}}function hI(){hH.sort(function(hN,hM){return hF((hN.source.value+hN.target.value)/2,(hM.source.value+hM.target.value)/2)
})
}hG.matrix=function(hM){if(!arguments.length){return hL
}hD=(hL=hM)&&hL.length;
hH=hE=null;
return hG
};
hG.padding=function(hM){if(!arguments.length){return hK
}hK=hM;
hH=hE=null;
return hG
};
hG.sortGroups=function(hM){if(!arguments.length){return e
}e=hM;
hH=hE=null;
return hG
};
hG.sortSubgroups=function(hM){if(!arguments.length){return hC
}hC=hM;
hH=null;
return hG
};
hG.sortChords=function(hM){if(!arguments.length){return hF
}hF=hM;
if(hH){hI()
}return hG
};
hG.chords=function(){if(!hH){hJ()
}return hH
};
hG.groups=function(){if(!hE){hJ()
}return hE
};
return hG
};
gQ.layout.force=function(){var hC={},hP=gQ.dispatch("start","tick","end"),hL=[1,1],hR,hF,hI=0.9,hS=fv,hE=cf,hO=-30,hG=0.1,hJ=0.8,hN=[],hD=[],hH,e,hK;
function hQ(hT){return function(hW,h1,h0,hZ){if(hW.point!==hT){var hY=hW.cx-hT.x,hV=hW.cy-hT.y,hU=1/Math.sqrt(hY*hY+hV*hV);
if((hZ-h1)*hU<hJ){var hX=hW.charge*hU*hU;
hT.px-=hY*hX;
hT.py-=hV*hX;
return true
}if(hW.point&&isFinite(hU)){var hX=hW.pointCharge*hU*hU;
hT.px-=hY*hX;
hT.py-=hV*hX
}}return !hW.charge
}
}hC.tick=function(){if((hF*=0.99)<0.005){hP.end({type:"end",alpha:hF=0});
return true
}var hV=hN.length,hW=hD.length,hT,hZ,hU,h3,h2,hX,hY,h1,h0;
for(hZ=0;
hZ<hW;
++hZ){hU=hD[hZ];
h3=hU.source;
h2=hU.target;
h1=h2.x-h3.x;
h0=h2.y-h3.y;
if(hX=h1*h1+h0*h0){hX=hF*e[hZ]*((hX=Math.sqrt(hX))-hH[hZ])/hX;
h1*=hX;
h0*=hX;
h2.x-=h1*(hY=h3.weight/(h2.weight+h3.weight));
h2.y-=h0*hY;
h3.x+=h1*(hY=1-hY);
h3.y+=h0*hY
}}if(hY=hF*hG){h1=hL[0]/2;
h0=hL[1]/2;
hZ=-1;
if(hY){while(++hZ<hV){hU=hN[hZ];
hU.x+=(h1-hU.x)*hY;
hU.y+=(h0-hU.y)*hY
}}}if(hO){f9(hT=gQ.geom.quadtree(hN),hF,hK);
hZ=-1;
while(++hZ<hV){if(!(hU=hN[hZ]).fixed){hT.visit(hQ(hU))
}}}hZ=-1;
while(++hZ<hV){hU=hN[hZ];
if(hU.fixed){hU.x=hU.px;
hU.y=hU.py
}else{hU.x-=(hU.px-(hU.px=hU.x))*hI;
hU.y-=(hU.py-(hU.py=hU.y))*hI
}}hP.tick({type:"tick",alpha:hF})
};
hC.nodes=function(hT){if(!arguments.length){return hN
}hN=hT;
return hC
};
hC.links=function(hT){if(!arguments.length){return hD
}hD=hT;
return hC
};
hC.size=function(hT){if(!arguments.length){return hL
}hL=hT;
return hC
};
hC.linkDistance=function(hT){if(!arguments.length){return hS
}hS=typeof hT==="function"?hT:+hT;
return hC
};
hC.distance=hC.linkDistance;
hC.linkStrength=function(hT){if(!arguments.length){return hE
}hE=typeof hT==="function"?hT:+hT;
return hC
};
hC.friction=function(hT){if(!arguments.length){return hI
}hI=+hT;
return hC
};
hC.charge=function(hT){if(!arguments.length){return hO
}hO=typeof hT==="function"?hT:+hT;
return hC
};
hC.gravity=function(hT){if(!arguments.length){return hG
}hG=+hT;
return hC
};
hC.theta=function(hT){if(!arguments.length){return hJ
}hJ=+hT;
return hC
};
hC.alpha=function(hT){if(!arguments.length){return hF
}hT=+hT;
if(hF){if(hT>0){hF=hT
}else{hF=0
}}else{if(hT>0){hP.start({type:"start",alpha:hF=hT});
gQ.timer(hC.tick)
}}return hC
};
hC.start=function(){var hX,hW,hU=hN.length,hV=hD.length,h0=hL[0],hZ=hL[1],h2,hT;
for(hX=0;
hX<hU;
++hX){(hT=hN[hX]).index=hX;
hT.weight=0
}for(hX=0;
hX<hV;
++hX){hT=hD[hX];
if(typeof hT.source=="number"){hT.source=hN[hT.source]
}if(typeof hT.target=="number"){hT.target=hN[hT.target]
}++hT.source.weight;
++hT.target.weight
}for(hX=0;
hX<hU;
++hX){hT=hN[hX];
if(isNaN(hT.x)){hT.x=hY("x",h0)
}if(isNaN(hT.y)){hT.y=hY("y",hZ)
}if(isNaN(hT.px)){hT.px=hT.x
}if(isNaN(hT.py)){hT.py=hT.y
}}hH=[];
if(typeof hS==="function"){for(hX=0;
hX<hV;
++hX){hH[hX]=+hS.call(this,hD[hX],hX)
}}else{for(hX=0;
hX<hV;
++hX){hH[hX]=hS
}}e=[];
if(typeof hE==="function"){for(hX=0;
hX<hV;
++hX){e[hX]=+hE.call(this,hD[hX],hX)
}}else{for(hX=0;
hX<hV;
++hX){e[hX]=hE
}}hK=[];
if(typeof hO==="function"){for(hX=0;
hX<hU;
++hX){hK[hX]=+hO.call(this,hN[hX],hX)
}}else{for(hX=0;
hX<hU;
++hX){hK[hX]=hO
}}function hY(h8,h7){var h6=h1(hX),h5=-1,h4=h6.length,h3;
while(++h5<h4){if(!isNaN(h3=h6[h5][h8])){return h3
}}return Math.random()*h7
}function h1(){if(!h2){h2=[];
for(hW=0;
hW<hU;
++hW){h2[hW]=[]
}for(hW=0;
hW<hV;
++hW){var h3=hD[hW];
h2[h3.source.index].push(h3.target);
h2[h3.target.index].push(h3.source)
}}return h2[hX]
}return hC.resume()
};
hC.resume=function(){return hC.alpha(0.1)
};
hC.stop=function(){return hC.alpha(0)
};
hC.drag=function(){if(!hR){hR=gQ.behavior.drag().origin(fV).on("dragstart.force",r).on("drag.force",hM).on("dragend.force",dW)
}if(!arguments.length){return hR
}this.on("mouseover.force",cj).on("mouseout.force",d2).call(hR)
};
function hM(hT){hT.px=gQ.event.x,hT.py=gQ.event.y;
hC.resume()
}return gQ.rebind(hC,hP,"on")
};
function r(e){e.fixed|=2
}function dW(e){e.fixed&=~6
}function cj(e){e.fixed|=4;
e.px=e.x,e.py=e.y
}function d2(e){e.fixed&=~4
}function f9(hK,hF,hJ){var hG=0,hD=0;
hK.charge=0;
if(!hK.leaf){var e=hK.nodes,hC=e.length,hH=-1,hI;
while(++hH<hC){hI=e[hH];
if(hI==null){continue
}f9(hI,hF,hJ);
hK.charge+=hI.charge;
hG+=hI.charge*hI.cx;
hD+=hI.charge*hI.cy
}}if(hK.point){if(!hK.leaf){hK.point.x+=Math.random()-0.5;
hK.point.y+=Math.random()-0.5
}var hE=hF*hJ[hK.point.index];
hK.charge+=hK.pointCharge=hE;
hG+=hE*hK.point.x;
hD+=hE*hK.point.y
}hK.cx=hG/hK.charge;
hK.cy=hD/hK.charge
}var fv=20,cf=1;
gQ.layout.hierarchy=function(){var hD=dz,hC=aZ,hF=hb;
function hE(hJ,hL,hH){var hO=hC.call(e,hJ,hL);
hJ.depth=hL;
hH.push(hJ);
if(hO&&(hI=hO.length)){var hM=-1,hI,hP=hJ.children=[],hQ=0,hK=hL+1,hN;
while(++hM<hI){hN=hE(hO[hM],hK,hH);
hN.parent=hJ;
hP.push(hN);
hQ+=hN.value
}if(hD){hP.sort(hD)
}if(hF){hJ.value=hQ
}}else{if(hF){hJ.value=+hF.call(e,hJ,hL)||0
}}return hJ
}function hG(hL,hM){var hK=hL.children,hH=0;
if(hK&&(hN=hK.length)){var hJ=-1,hN,hI=hM+1;
while(++hJ<hN){hH+=hG(hK[hJ],hI)
}}else{if(hF){hH=+hF.call(e,hL,hM)||0
}}if(hF){hL.value=hH
}return hH
}function e(hI){var hH=[];
hE(hI,0,hH);
return hH
}e.sort=function(hH){if(!arguments.length){return hD
}hD=hH;
return e
};
e.children=function(hH){if(!arguments.length){return hC
}hC=hH;
return e
};
e.value=function(hH){if(!arguments.length){return hF
}hF=hH;
return e
};
e.revalue=function(hH){hG(hH,0);
return hH
};
return e
};
function f2(hC,e){gQ.rebind(hC,e,"sort","children","value");
hC.nodes=hC;
hC.links=f5;
return hC
}function aZ(e){return e.children
}function hb(e){return e.value
}function dz(hC,e){return e.value-hC.value
}function f5(e){return gQ.merge(e.map(function(hC){return(hC.children||[]).map(function(hD){return{source:hC,target:hD}
})
}))
}gQ.layout.partition=function(){var hD=gQ.layout.hierarchy(),hE=[1,1];
function e(hI,hM,hO,hN){var hG=hI.children;
hI.x=hM;
hI.y=hI.depth*hN;
hI.dx=hO;
hI.dy=hN;
if(hG&&(hH=hG.length)){var hJ=-1,hH,hL,hK;
hO=hI.value?hO/hI.value:0;
while(++hJ<hH){e(hL=hG[hJ],hM,hK=hL.value*hO,hN);
hM+=hK
}}}function hF(hI){var hH=hI.children,hJ=0;
if(hH&&(hK=hH.length)){var hG=-1,hK;
while(++hG<hK){hJ=Math.max(hJ,hF(hH[hG]))
}}return 1+hJ
}function hC(hI,hH){var hG=hD.call(this,hI,hH);
e(hG[0],0,hE[0],hE[1]/hF(hG[0]));
return hG
}hC.size=function(hG){if(!arguments.length){return hE
}hE=hG;
return hC
};
return f2(hC,hD)
};
gQ.layout.pie=function(){var hF=Number,hE=T,hD=0,hC=2*fO;
function e(hL){var hI=hL.map(function(hN,hM){return +hF.call(e,hN,hM)
});
var hG=+(typeof hD==="function"?hD.apply(this,arguments):hD);
var hH=((typeof hC==="function"?hC.apply(this,arguments):hC)-hG)/gQ.sum(hI);
var hJ=gQ.range(hL.length);
if(hE!=null){hJ.sort(hE===T?function(hN,hM){return hI[hM]-hI[hN]
}:function(hN,hM){return hE(hL[hN],hL[hM])
})
}var hK=[];
hJ.forEach(function(hM){var hN;
hK[hM]={data:hL[hM],value:hN=hI[hM],startAngle:hG,endAngle:hG+=hN*hH}
});
return hK
}e.value=function(hG){if(!arguments.length){return hF
}hF=hG;
return e
};
e.sort=function(hG){if(!arguments.length){return hE
}hE=hG;
return e
};
e.startAngle=function(hG){if(!arguments.length){return hD
}hD=hG;
return e
};
e.endAngle=function(hG){if(!arguments.length){return hC
}hC=hG;
return e
};
return e
};
var T={};
gQ.layout.stack=function(){var hE=fV,hD=bE,hG=fj,hF=fk,hC=ai,hH=ag;
function e(hP,hR){var hQ=hP.map(function(hU,hT){return hE.call(e,hU,hT)
});
var hS=hQ.map(function(hT){return hT.map(function(hU,hV){return[hC.call(e,hU,hV),hH.call(e,hU,hV)]
})
});
var hM=hD.call(e,hS,hR);
hQ=gQ.permute(hQ,hM);
hS=gQ.permute(hS,hM);
var hL=hG.call(e,hS,hR);
var hJ=hQ.length,hK=hQ[0].length,hO,hN,hI;
for(hN=0;
hN<hK;
++hN){hF.call(e,hQ[0][hN],hI=hL[hN],hS[0][hN][1]);
for(hO=1;
hO<hJ;
++hO){hF.call(e,hQ[hO][hN],hI+=hS[hO-1][hN][1],hS[hO][hN][1])
}}return hP
}e.values=function(hI){if(!arguments.length){return hE
}hE=hI;
return e
};
e.order=function(hI){if(!arguments.length){return hD
}hD=typeof hI==="function"?hI:aX.get(hI)||bE;
return e
};
e.offset=function(hI){if(!arguments.length){return hG
}hG=typeof hI==="function"?hI:ad.get(hI)||fj;
return e
};
e.x=function(hI){if(!arguments.length){return hC
}hC=hI;
return e
};
e.y=function(hI){if(!arguments.length){return hH
}hH=hI;
return e
};
e.out=function(hI){if(!arguments.length){return hF
}hF=hI;
return e
};
return e
};
function ai(e){return e.x
}function ag(e){return e.y
}function fk(hC,e,hD){hC.y0=e;
hC.y=hD
}var aX=gQ.map({"inside-out":function(hF){var hD=hF.length,hG,hE,hK=hF.map(bI),hH=hF.map(db),hI=gQ.range(hD).sort(function(hN,hM){return hK[hN]-hK[hM]
}),hJ=0,e=0,hL=[],hC=[];
for(hG=0;
hG<hD;
++hG){hE=hI[hG];
if(hJ<e){hJ+=hH[hE];
hL.push(hE)
}else{e+=hH[hE];
hC.push(hE)
}}return hC.reverse().concat(hL)
},reverse:function(e){return gQ.range(e.length).reverse()
},"default":bE});
var ad=gQ.map({silhouette:function(hF){var hC=hF.length,hD=hF[0].length,hH=[],hI=0,hG,hE,e,hJ=[];
for(hE=0;
hE<hD;
++hE){for(hG=0,e=0;
hG<hC;
hG++){e+=hF[hG][hE][1]
}if(e>hI){hI=e
}hH.push(e)
}for(hE=0;
hE<hD;
++hE){hJ[hE]=(hI-hH[hE])/2
}return hJ
},wiggle:function(hH){var hC=hH.length,hK=hH[0],hD=hK.length,hI,hG,hF,hN,hM,hJ,hO,e,hE,hL=[];
hL[0]=e=hE=0;
for(hG=1;
hG<hD;
++hG){for(hI=0,hN=0;
hI<hC;
++hI){hN+=hH[hI][hG][1]
}for(hI=0,hM=0,hO=hK[hG][0]-hK[hG-1][0];
hI<hC;
++hI){for(hF=0,hJ=(hH[hI][hG][1]-hH[hI][hG-1][1])/(2*hO);
hF<hI;
++hF){hJ+=(hH[hF][hG][1]-hH[hF][hG-1][1])/hO
}hM+=hJ*hH[hI][hG][1]
}hL[hG]=e-=hN?hM/hN*hO:0;
if(e<hE){hE=e
}}for(hG=0;
hG<hD;
++hG){hL[hG]-=hE
}return hL
},expand:function(hG){var hI=hG.length,e=hG[0].length,hC=1/hI,hE,hD,hH,hF=[];
for(hD=0;
hD<e;
++hD){for(hE=0,hH=0;
hE<hI;
hE++){hH+=hG[hE][hD][1]
}if(hH){for(hE=0;
hE<hI;
hE++){hG[hE][hD][1]/=hH
}}else{for(hE=0;
hE<hI;
hE++){hG[hE][hD][1]=hC
}}}for(hD=0;
hD<e;
++hD){hF[hD]=0
}return hF
},zero:fj});
function bE(e){return gQ.range(e.length)
}function fj(hE){var hC=-1,e=hE[0].length,hD=[];
while(++hC<e){hD[hC]=0
}return hD
}function bI(hG){var hE=1,hD=0,hC=hG[0][1],e,hF=hG.length;
for(;
hE<hF;
++hE){if((e=hG[hE][1])>hC){hD=hE;
hC=e
}}return hD
}function db(e){return e.reduce(fi,0)
}function fi(e,hC){return e+hC[1]
}gQ.layout.histogram=function(){var hF=true,hC=Number,e=ba,hD=gY;
function hE(hJ,hK){var hP=[],hN=hJ.map(hC,this),hL=e.call(this,hN,hK),hO=hD.call(this,hL,hN,hK),hQ,hK=-1,hG=hN.length,hH=hO.length-1,hI=hF?1:1/hG,hM;
while(++hK<hH){hQ=hP[hK]=[];
hQ.dx=hO[hK+1]-(hQ.x=hO[hK]);
hQ.y=0
}if(hH>0){hK=-1;
while(++hK<hG){hM=hN[hK];
if(hM>=hL[0]&&hM<=hL[1]){hQ=hP[gQ.bisect(hO,hM,1,hH)-1];
hQ.y+=hI;
hQ.push(hJ[hK])
}}}return hP
}hE.value=function(hG){if(!arguments.length){return hC
}hC=hG;
return hE
};
hE.range=function(hG){if(!arguments.length){return e
}e=Q(hG);
return hE
};
hE.bins=function(hG){if(!arguments.length){return hD
}hD=typeof hG==="number"?function(hH){return h(hH,hG)
}:Q(hG);
return hE
};
hE.frequency=function(hG){if(!arguments.length){return hF
}hF=!!hG;
return hE
};
return hE
};
function gY(hC,e){return h(hC,Math.ceil(Math.log(e.length)/Math.LN2+1))
}function h(hE,hG){var hD=-1,hC=+hE[0],e=(hE[1]-hC)/hG,hF=[];
while(++hD<=hG){hF[hD]=e*hD+hC
}return hF
}function ba(e){return[gQ.min(e),gQ.max(e)]
}gQ.layout.tree=function(){var hD=gQ.layout.hierarchy().sort(null).value(null),hF=df,hE=[1,1],hC=false;
function e(hN,hL){var hH=hD.call(this,hN,hL),hP=hH[0];
function hM(hX,hT){var hV=hX.children,h0=hX._tree;
if(hV&&(hW=hV.length)){var hW,h2=hV[0],h1,hZ=h2,hU,hY=-1;
while(++hY<hW){hU=hV[hY];
hM(hU,h1);
hZ=hG(hU,h1,hZ);
h1=hU
}di(hX);
var h3=0.5*(h2._tree.prelim+hU._tree.prelim);
if(hT){h0.prelim=hT._tree.prelim+hF(hX,hT);
h0.mod=h0.prelim-h3
}else{h0.prelim=h3
}}else{if(hT){h0.prelim=hT._tree.prelim+hF(hX,hT)
}}}function hO(hW,hT){hW.x=hW._tree.prelim+hT;
var hV=hW.children;
if(hV&&(hX=hV.length)){var hU=-1,hX;
hT+=hW._tree.mod;
while(++hU<hX){hO(hV[hU],hT)
}}}function hG(hX,hT,h0){if(hT){var hW=hX,hV=hX,hZ=hT,hY=hX.parent.children[0],h2=hW._tree.mod,h1=hV._tree.mod,h4=hZ._tree.mod,h3=hY._tree.mod,hU;
while(hZ=av(hZ),hW=hn(hW),hZ&&hW){hY=hn(hY);
hV=av(hV);
hV._tree.ancestor=hX;
hU=hZ._tree.prelim+h4-hW._tree.prelim-h2+hF(hZ,hW);
if(hU>0){hr(fC(hZ,hX,h0),hX,hU);
h2+=hU;
h1+=hU
}h4+=hZ._tree.mod;
h2+=hW._tree.mod;
h3+=hY._tree.mod;
h1+=hV._tree.mod
}if(hZ&&!av(hV)){hV._tree.thread=hZ;
hV._tree.mod+=h4-h1
}if(hW&&!hn(hY)){hY._tree.thread=hW;
hY._tree.mod+=h2-h3;
h0=hX
}}return h0
}g5(hP,function(hU,hT){hU._tree={ancestor:hU,prelim:0,mod:0,change:0,shift:0,number:hT?hT._tree.number+1:0}
});
hM(hP);
hO(hP,-hP._tree.prelim);
var hK=dM(hP,bu),hS=dM(hP,cL),hR=dM(hP,C),hJ=hK.x-hF(hK,hS)/2,hI=hS.x+hF(hS,hK)/2,hQ=hR.depth||1;
g5(hP,hC?function(hT){hT.x*=hE[0];
hT.y=hT.depth*hE[1];
delete hT._tree
}:function(hT){hT.x=(hT.x-hJ)/(hI-hJ)*hE[0];
hT.y=hT.depth/hQ*hE[1];
delete hT._tree
});
return hH
}e.separation=function(hG){if(!arguments.length){return hF
}hF=hG;
return e
};
e.size=function(hG){if(!arguments.length){return hC?null:hE
}hC=(hE=hG)==null;
return e
};
e.nodeSize=function(hG){if(!arguments.length){return hC?hE:null
}hC=(hE=hG)!=null;
return e
};
return f2(e,hD)
};
function df(hC,e){return hC.parent==e.parent?1:2
}function hn(hC){var e=hC.children;
return e&&e.length?e[0]:hC._tree.thread
}function av(hC){var e=hC.children,hD;
return e&&(hD=e.length)?e[hD-1]:hC._tree.thread
}function dM(hD,hE){var hC=hD.children;
if(hC&&(hF=hC.length)){var hG,hF,e=-1;
while(++e<hF){if(hE(hG=dM(hC[e],hE),hD)>0){hD=hG
}}}return hD
}function cL(hC,e){return hC.x-e.x
}function bu(hC,e){return e.x-hC.x
}function C(hC,e){return hC.depth-e.depth
}function g5(hC,hD){function e(hI,hH){var hG=hI.children;
if(hG&&(hJ=hG.length)){var hK,hF=null,hE=-1,hJ;
while(++hE<hJ){hK=hG[hE];
e(hK,hF);
hF=hK
}}hD(hI,hH)
}e(hC,null)
}function di(hE){var e=0,hG=0,hD=hE.children,hC=hD.length,hF;
while(--hC>=0){hF=hD[hC]._tree;
hF.prelim+=e;
hF.mod+=e;
e+=hF.shift+(hG+=hF.change)
}}function hr(hC,hD,e){hC=hC._tree;
hD=hD._tree;
var hE=e/(hD.number-hC.number);
hC.change+=hE;
hD.change-=hE;
hD.shift+=e;
hD.prelim+=e;
hD.mod+=e
}function fC(e,hD,hC){return e._tree.ancestor.parent==hD.parent?e._tree.ancestor:hC
}gQ.layout.pack=function(){var hC=gQ.layout.hierarchy().sort(ef),hF=0,hE=[1,1],e;
function hD(hN,hJ){var hI=hC.call(this,hN,hJ),hH=hI[0],hG=hE[0],hK=hE[1],hL=e==null?Math.sqrt:typeof e==="function"?e:function(){return e
};
hH.x=hH.y=0;
g5(hH,function(hO){hO.r=+hL(hO.value)
});
g5(hH,S);
if(hF){var hM=hF*(e?1:Math.max(2*hH.r/hG,2*hH.r/hK))/2;
g5(hH,function(hO){hO.r+=hM
});
g5(hH,S);
g5(hH,function(hO){hO.r-=hM
})
}e2(hH,hG/2,hK/2,e?1:1/Math.max(2*hH.r/hG,2*hH.r/hK));
return hI
}hD.size=function(hG){if(!arguments.length){return hE
}hE=hG;
return hD
};
hD.radius=function(hG){if(!arguments.length){return e
}e=hG==null||typeof hG==="function"?hG:+hG;
return hD
};
hD.padding=function(hG){if(!arguments.length){return hF
}hF=+hG;
return hD
};
return f2(hD,hC)
};
function ef(hC,e){return hC.value-e.value
}function bD(hC,e){var hD=hC._pack_next;
hC._pack_next=e;
e._pack_prev=hC;
e._pack_next=hD;
hD._pack_prev=e
}function a5(hC,e){hC._pack_next=e;
e._pack_prev=hC
}function d4(hD,e){var hE=e.x-hD.x,hC=e.y-hD.y,hF=hD.r+e.r;
return 0.999*hF*hF>hE*hE+hC*hC
}function S(hM){if(!(hL=hM.children)||!(hK=hL.length)){return
}var hL,hQ=Infinity,hU=-Infinity,e=Infinity,hF=-Infinity,hT,hS,hR,hP,hO,hN,hK;
function hD(hV){hQ=Math.min(hV.x-hV.r,hQ);
hU=Math.max(hV.x+hV.r,hU);
e=Math.min(hV.y-hV.r,e);
hF=Math.max(hV.y+hV.r,hF)
}hL.forEach(aM);
hT=hL[0];
hT.x=-hT.r;
hT.y=0;
hD(hT);
if(hK>1){hS=hL[1];
hS.x=hS.r;
hS.y=0;
hD(hS);
if(hK>2){hR=hL[2];
a4(hT,hS,hR);
hD(hR);
bD(hT,hR);
hT._pack_prev=hR;
bD(hR,hS);
hS=hT._pack_next;
for(hP=3;
hP<hK;
hP++){a4(hT,hS,hR=hL[hP]);
var hC=0,hG=1,hE=1;
for(hO=hS._pack_next;
hO!==hS;
hO=hO._pack_next,hG++){if(d4(hO,hR)){hC=1;
break
}}if(hC==1){for(hN=hT._pack_prev;
hN!==hO._pack_prev;
hN=hN._pack_prev,hE++){if(d4(hN,hR)){break
}}}if(hC){if(hG<hE||hG==hE&&hS.r<hT.r){a5(hT,hS=hO)
}else{a5(hT=hN,hS)
}hP--
}else{bD(hT,hR);
hS=hR;
hD(hR)
}}}}var hI=(hQ+hU)/2,hH=(e+hF)/2,hJ=0;
for(hP=0;
hP<hK;
hP++){hR=hL[hP];
hR.x-=hI;
hR.y-=hH;
hJ=Math.max(hJ,hR.r+Math.sqrt(hR.x*hR.x+hR.y*hR.y))
}hM.r=hJ;
hL.forEach(es)
}function aM(e){e._pack_next=e._pack_prev=e
}function es(e){delete e._pack_next;
delete e._pack_prev
}function e2(hF,e,hH,hC){var hE=hF.children;
hF.x=e+=hC*hF.x;
hF.y=hH+=hC*hF.y;
hF.r*=hC;
if(hE){var hD=-1,hG=hE.length;
while(++hD<hG){e2(hE[hD],e,hH,hC)
}}}function a4(hF,hD,e){var hH=hF.r+e.r,hK=hD.x-hF.x,hI=hD.y-hF.y;
if(hH&&(hK||hI)){var hJ=hD.r+e.r,hG=hK*hK+hI*hI;
hJ*=hJ;
hH*=hH;
var hE=0.5+(hH-hJ)/(2*hG),hC=Math.sqrt(Math.max(0,2*hJ*(hH+hG)-(hH-=hG)*hH-hJ*hJ))/(2*hG);
e.x=hF.x+hE*hK+hC*hI;
e.y=hF.y+hE*hI-hC*hK
}else{e.x=hF.x+hH;
e.y=hF.y
}}gQ.layout.cluster=function(){var hD=gQ.layout.hierarchy().sort(null).value(null),hF=df,hE=[1,1],hC=false;
function e(hL,hK){var hG=hD.call(this,hL,hK),hM=hG[0],hN,hO=0;
g5(hM,function(hR){var hQ=hR.children;
if(hQ&&hQ.length){hR.x=bl(hQ);
hR.y=bk(hQ)
}else{hR.x=hN?hO+=hF(hR,hN):0;
hR.y=0;
hN=hR
}});
var hJ=eh(hM),hP=dm(hM),hI=hJ.x-hF(hJ,hP)/2,hH=hP.x+hF(hP,hJ)/2;
g5(hM,hC?function(hQ){hQ.x=(hQ.x-hM.x)*hE[0];
hQ.y=(hM.y-hQ.y)*hE[1]
}:function(hQ){hQ.x=(hQ.x-hI)/(hH-hI)*hE[0];
hQ.y=(1-(hM.y?hQ.y/hM.y:1))*hE[1]
});
return hG
}e.separation=function(hG){if(!arguments.length){return hF
}hF=hG;
return e
};
e.size=function(hG){if(!arguments.length){return hC?null:hE
}hC=(hE=hG)==null;
return e
};
e.nodeSize=function(hG){if(!arguments.length){return hC?hE:null
}hC=(hE=hG)!=null;
return e
};
return f2(e,hD)
};
function bk(e){return 1+gQ.max(e,function(hC){return hC.y
})
}function bl(e){return e.reduce(function(hC,hD){return hC+hD.x
},0)/e.length
}function eh(hC){var e=hC.children;
return e&&e.length?eh(e[0]):hC
}function dm(hC){var e=hC.children,hD;
return e&&(hD=e.length)?dm(e[hD-1]):hC
}gQ.layout.treemap=function(){var hJ=gQ.layout.hierarchy(),hN=Math.round,hP=[1,1],hK=null,e=eO,hL=false,hH,hG="squarify",hI=0.5*(1+Math.sqrt(5));
function hC(hS,hQ){var hR=-1,hV=hS.length,hU,hT;
while(++hR<hV){hT=(hU=hS[hR]).value*(hQ<0?0:hQ);
hU.area=isNaN(hT)||hT<=0?0:hT
}}function hE(hU){var hR=hU.children;
if(hR&&hR.length){var hX=e(hU),hZ=[],hW=hR.slice(),hQ,hV=Infinity,hT,hY=hG==="slice"?hX.dx:hG==="dice"?hX.dy:hG==="slice-dice"?hU.depth&1?hX.dy:hX.dx:Math.min(hX.dx,hX.dy),hS;
hC(hW,hX.dx*hX.dy/hU.value);
hZ.area=0;
while((hS=hW.length)>0){hZ.push(hQ=hW[hS-1]);
hZ.area+=hQ.area;
if(hG!=="squarify"||(hT=hD(hZ,hY))<=hV){hW.pop();
hV=hT
}else{hZ.area-=hZ.pop().area;
hF(hZ,hY,hX,false);
hY=Math.min(hX.dx,hX.dy);
hZ.length=hZ.area=0;
hV=Infinity
}}if(hZ.length){hF(hZ,hY,hX,true);
hZ.length=hZ.area=0
}hR.forEach(hE)
}}function hO(hT){var hQ=hT.children;
if(hQ&&hQ.length){var hS=e(hT),hR=hQ.slice(),hV,hU=[];
hC(hR,hS.dx*hS.dy/hT.value);
hU.area=0;
while(hV=hR.pop()){hU.push(hV);
hU.area+=hV.area;
if(hV.z!=null){hF(hU,hV.z?hS.dx:hS.dy,hS,!hR.length);
hU.length=hU.area=0
}}hQ.forEach(hO)
}}function hD(hV,hR){var hT=hV.area,hU,hX=0,hQ=Infinity,hS=-1,hW=hV.length;
while(++hS<hW){if(!(hU=hV[hS].area)){continue
}if(hU<hQ){hQ=hU
}if(hU>hX){hX=hU
}}hT*=hT;
hR*=hR;
return hT?Math.max(hR*hX*hI/hT,hT/(hR*hQ*hI)):Infinity
}function hF(hZ,hY,hU,hX){var hS=-1,hR=hZ.length,hV=hU.x,hT=hU.y,hW=hY?hN(hZ.area/hY):0,hQ;
if(hY==hU.dx){if(hX||hW>hU.dy){hW=hU.dy
}while(++hS<hR){hQ=hZ[hS];
hQ.x=hV;
hQ.y=hT;
hQ.dy=hW;
hV+=hQ.dx=Math.min(hU.x+hU.dx-hV,hW?hN(hQ.area/hW):0)
}hQ.z=true;
hQ.dx+=hU.x+hU.dx-hV;
hU.y+=hW;
hU.dy-=hW
}else{if(hX||hW>hU.dx){hW=hU.dx
}while(++hS<hR){hQ=hZ[hS];
hQ.x=hV;
hQ.y=hT;
hQ.dx=hW;
hT+=hQ.dy=Math.min(hU.y+hU.dy-hT,hW?hN(hQ.area/hW):0)
}hQ.z=false;
hQ.dy+=hU.y+hU.dy-hT;
hU.x+=hW;
hU.dx-=hW
}}function hM(hS){var hR=hH||hJ(hS),hQ=hR[0];
hQ.x=0;
hQ.y=0;
hQ.dx=hP[0];
hQ.dy=hP[1];
if(hH){hJ.revalue(hQ)
}hC([hQ],hQ.dx*hQ.dy/hQ.value);
(hH?hO:hE)(hQ);
if(hL){hH=hR
}return hR
}hM.size=function(hQ){if(!arguments.length){return hP
}hP=hQ;
return hM
};
hM.padding=function(hQ){if(!arguments.length){return hK
}function hT(hU){var hV=hQ.call(hM,hU,hU.depth);
return hV==null?eO(hU):aT(hU,typeof hV==="number"?[hV,hV,hV,hV]:hV)
}function hS(hU){return aT(hU,hQ)
}var hR;
e=(hK=hQ)==null?eO:(hR=typeof hQ)==="function"?hT:hR==="number"?(hQ=[hQ,hQ,hQ,hQ],hS):hS;
return hM
};
hM.round=function(hQ){if(!arguments.length){return hN!=Number
}hN=hQ?Math.round:Number;
return hM
};
hM.sticky=function(hQ){if(!arguments.length){return hL
}hL=hQ;
hH=null;
return hM
};
hM.ratio=function(hQ){if(!arguments.length){return hI
}hI=hQ;
return hM
};
hM.mode=function(hQ){if(!arguments.length){return hG
}hG=hQ+"";
return hM
};
return f2(hM,hJ)
};
function eO(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}
}function aT(hE,hF){var e=hE.x+hF[3],hG=hE.y+hF[0],hD=hE.dx-hF[1]-hF[3],hC=hE.dy-hF[0]-hF[2];
if(hD<0){e+=hD/2;
hD=0
}if(hC<0){hG+=hC/2;
hC=0
}return{x:e,y:hG,dx:hD,dy:hC}
}gQ.random={normal:function(hC,e){var hD=arguments.length;
if(hD<2){e=1
}if(hD<1){hC=0
}return function(){var hE,hG,hF;
do{hE=Math.random()*2-1;
hG=Math.random()*2-1;
hF=hE*hE+hG*hG
}while(!hF||hF>1);
return hC+e*hE*Math.sqrt(-2*Math.log(hF)/hF)
}
},logNormal:function(){var e=gQ.random.normal.apply(gQ,arguments);
return function(){return Math.exp(e())
}
},irwinHall:function(e){return function(){for(var hD=0,hC=0;
hC<e;
hC++){hD+=Math.random()
}return hD/e
}
}};
gQ.scale={};
function d9(hC){var hD=hC[0],e=hC[hC.length-1];
return hD<e?[hD,e]:[e,hD]
}function aS(e){return e.rangeExtent?e.rangeExtent():d9(e.range())
}function aA(hF,e,hG,hD){var hC=hG(hF[0],hF[1]),hE=hD(e[0],e[1]);
return function(hH){return hE(hC(hH))
}
}function fT(hH,hF){var hG=0,hE=hH.length-1,hD=hH[hG],hC=hH[hE],e;
if(hC<hD){e=hG,hG=hE,hE=e;
e=hD,hD=hC,hC=e
}hH[hG]=hF.floor(hD);
hH[hE]=hF.ceil(hC);
return hH
}function aY(e){return e?{floor:function(hC){return Math.floor(hC/e)*e
},ceil:function(hC){return Math.ceil(hC/e)*e
}}:eg
}var eg={floor:fV,ceil:fV};
function K(hH,hC,hI,hF){var hE=[],hG=[],hD=0,e=Math.min(hH.length,hC.length)-1;
if(hH[e]<hH[0]){hH=hH.slice().reverse();
hC=hC.slice().reverse()
}while(++hD<=e){hE.push(hI(hH[hD-1],hH[hD]));
hG.push(hF(hC[hD-1],hC[hD]))
}return function(hJ){var hK=gQ.bisect(hH,hJ,1,e)-1;
return hG[hK](hE[hK](hJ))
}
}gQ.scale.linear=function(){return d1([0,1],[0,1],fh,false)
};
function d1(hG,hE,hF,hI){var hD,hC;
function e(){var hJ=Math.min(hG.length,hE.length)>2?K:aA,hK=hI?au:gX;
hD=hJ(hG,hE,hK,hF);
hC=hJ(hE,hG,hK,fh);
return hH
}function hH(hJ){return hD(hJ)
}hH.invert=function(hJ){return hC(hJ)
};
hH.domain=function(hJ){if(!arguments.length){return hG
}hG=hJ.map(Number);
return e()
};
hH.range=function(hJ){if(!arguments.length){return hE
}hE=hJ;
return e()
};
hH.rangeRound=function(hJ){return hH.range(hJ).interpolate(fc)
};
hH.clamp=function(hJ){if(!arguments.length){return hI
}hI=hJ;
return e()
};
hH.interpolate=function(hJ){if(!arguments.length){return hF
}hF=hJ;
return e()
};
hH.ticks=function(hJ){return eE(hG,hJ)
};
hH.tickFormat=function(hJ,hK){return eP(hG,hJ,hK)
};
hH.nice=function(hJ){aI(hG,hJ);
return e()
};
hH.copy=function(){return d1(hG,hE,hF,hI)
};
return e()
}function fM(hC,e){return gQ.rebind(hC,e,"range","rangeRound","interpolate","clamp")
}function aI(hC,e){return fT(hC,aY(e?q(hC,e)[2]:gt(hC)))
}function gt(hD){var hC=d9(hD),e=hC[1]-hC[0];
return Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1)
}function q(hG,e){var hD=d9(hG),hC=hD[1]-hD[0],hF=Math.pow(10,Math.floor(Math.log(hC/e)/Math.LN10)),hE=e/hC*hF;
if(hE<=0.15){hF*=10
}else{if(hE<=0.35){hF*=5
}else{if(hE<=0.75){hF*=2
}}}hD[0]=Math.ceil(hD[0]/hF)*hF;
hD[1]=Math.floor(hD[1]/hF)*hF+hF*0.5;
hD[2]=hF;
return hD
}function eE(hC,e){return gQ.range.apply(gQ,q(hC,e))
}function eP(hD,e,hE){var hC=-Math.floor(Math.log(q(hD,e)[2])/Math.LN10+0.01);
return gQ.format(hE?hE.replace(cl,function(hO,hN,hM,hL,hK,hJ,hI,hH,hG,hF){return[hN,hM,hL,hK,hJ,hI,hH,hG||"."+(hC-(hF==="%")*2),hF].join("")
}):",."+hC+"f")
}gQ.scale.log=function(){return gc(gQ.scale.linear().domain([0,1]),10,true,[1,10])
};
function gc(hC,hG,e,hF){function hD(hI){return(e?Math.log(hI<0?0:hI):-Math.log(hI>0?0:-hI))/Math.log(hG)
}function hE(hI){return e?Math.pow(hG,hI):-Math.pow(hG,-hI)
}function hH(hI){return hC(hD(hI))
}hH.invert=function(hI){return hE(hC.invert(hI))
};
hH.domain=function(hI){if(!arguments.length){return hF
}e=hI[0]>=0;
hC.domain((hF=hI.map(Number)).map(hD));
return hH
};
hH.base=function(hI){if(!arguments.length){return hG
}hG=+hI;
hC.domain(hF.map(hD));
return hH
};
hH.nice=function(){var hI=fT(hF.map(hD),e?Math:gh);
hC.domain(hI);
hF=hI.map(hE);
return hH
};
hH.ticks=function(){var hN=d9(hF),hO=[];
if(hN.every(isFinite)){var hL=hN[0],hJ=hN[1],hM=Math.floor(hD(hL)),hK=Math.ceil(hD(hJ)),hP=hG%1?2:hG;
if(e){for(;
hM<hK;
hM++){for(var hI=1;
hI<hP;
hI++){hO.push(hE(hM)*hI)
}}hO.push(hE(hM))
}else{hO.push(hE(hM));
for(;
hM++<hK;
){for(var hI=hP-1;
hI>0;
hI--){hO.push(hE(hM)*hI)
}}}for(hM=0;
hO[hM]<hL;
hM++){}for(hK=hO.length;
hO[hK-1]>hJ;
hK--){}hO=hO.slice(hM,hK)
}return hO
};
hH.tickFormat=function(hM,hL){if(!arguments.length){return da
}if(arguments.length<2){hL=da
}else{if(typeof hL!=="function"){hL=gQ.format(hL)
}}var hI=Math.max(0.1,hM/hH.ticks().length),hJ=e?(hK=1e-12,Math.ceil):(hK=-1e-12,Math.floor),hK;
return function(hN){return hN/hE(hJ(hD(hN)+hK))<=hI?hL(hN):""
}
};
hH.copy=function(){return gc(hC.copy(),hG,e,hF)
};
return fM(hH,hC)
}var da=gQ.format(".0e"),gh={floor:function(e){return -Math.ceil(-e)
},ceil:function(e){return -Math.floor(-e)
}};
gQ.scale.pow=function(){return f1(gQ.scale.linear(),1,[0,1])
};
function f1(e,hE,hD){var hC=fy(hE),hF=fy(1/hE);
function hG(hH){return e(hC(hH))
}hG.invert=function(hH){return hF(e.invert(hH))
};
hG.domain=function(hH){if(!arguments.length){return hD
}e.domain((hD=hH.map(Number)).map(hC));
return hG
};
hG.ticks=function(hH){return eE(hD,hH)
};
hG.tickFormat=function(hH,hI){return eP(hD,hH,hI)
};
hG.nice=function(hH){return hG.domain(aI(hD,hH))
};
hG.exponent=function(hH){if(!arguments.length){return hE
}hC=fy(hE=hH);
hF=fy(1/hE);
e.domain(hD.map(hC));
return hG
};
hG.copy=function(){return f1(e.copy(),hE,hD)
};
return fM(hG,e)
}function fy(hC){return function(e){return e<0?-Math.pow(-e,hC):Math.pow(e,hC)
}
}gQ.scale.sqrt=function(){return gQ.scale.pow().exponent(0.5)
};
gQ.scale.ordinal=function(){return ce([],{t:"range",a:[[]]})
};
function ce(hG,hD){var hF,hC,hE;
function hH(hI){return hC[((hF.get(hI)||hF.set(hI,hG.push(hI)))-1)%hC.length]
}function e(hJ,hI){return gQ.range(hG.length).map(function(hK){return hJ+hI*hK
})
}hH.domain=function(hI){if(!arguments.length){return hG
}hG=[];
hF=new aC();
var hK=-1,hL=hI.length,hJ;
while(++hK<hL){if(!hF.has(hJ=hI[hK])){hF.set(hJ,hG.push(hJ))
}}return hH[hD.t].apply(hH,hD.a)
};
hH.range=function(hI){if(!arguments.length){return hC
}hC=hI;
hE=0;
hD={t:"range",a:arguments};
return hH
};
hH.rangePoints=function(hI,hL){if(arguments.length<2){hL=0
}var hM=hI[0],hJ=hI[1],hK=(hJ-hM)/(Math.max(1,hG.length-1)+hL);
hC=e(hG.length<2?(hM+hJ)/2:hM+hK*hL/2,hK);
hE=0;
hD={t:"rangePoints",a:arguments};
return hH
};
hH.rangeBands=function(hJ,hN,hI){if(arguments.length<2){hN=0
}if(arguments.length<3){hI=hN
}var hK=hJ[1]<hJ[0],hO=hJ[hK-0],hL=hJ[1-hK],hM=(hL-hO)/(hG.length-hN+2*hI);
hC=e(hO+hM*hI,hM);
if(hK){hC.reverse()
}hE=hM*(1-hN);
hD={t:"rangeBands",a:arguments};
return hH
};
hH.rangeRoundBands=function(hJ,hO,hI){if(arguments.length<2){hO=0
}if(arguments.length<3){hI=hO
}var hL=hJ[1]<hJ[0],hP=hJ[hL-0],hM=hJ[1-hL],hN=Math.floor((hM-hP)/(hG.length-hO+2*hI)),hK=hM-hP-(hG.length-hO)*hN;
hC=e(hP+Math.round(hK/2),hN);
if(hL){hC.reverse()
}hE=Math.round(hN*(1-hO));
hD={t:"rangeRoundBands",a:arguments};
return hH
};
hH.rangeBand=function(){return hE
};
hH.rangeExtent=function(){return d9(hD.a[0])
};
hH.copy=function(){return ce(hG,hD)
};
return hH.domain(hG)
}gQ.scale.category10=function(){return gQ.scale.ordinal().range(cn)
};
gQ.scale.category20=function(){return gQ.scale.ordinal().range(b4)
};
gQ.scale.category20b=function(){return gQ.scale.ordinal().range(gI)
};
gQ.scale.category20c=function(){return gQ.scale.ordinal().range(gG)
};
var cn=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(dc);
var b4=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(dc);
var gI=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(dc);
var gG=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(dc);
gQ.scale.quantile=function(){return z([],[])
};
function z(hD,hC){var hE;
function e(){var hG=0,hH=hC.length;
hE=[];
while(++hG<hH){hE[hG-1]=gQ.quantile(hD,hG/hH)
}return hF
}function hF(hG){if(!isNaN(hG=+hG)){return hC[gQ.bisect(hE,hG)]
}}hF.domain=function(hG){if(!arguments.length){return hD
}hD=hG.filter(function(hH){return !isNaN(hH)
}).sort(gQ.ascending);
return e()
};
hF.range=function(hG){if(!arguments.length){return hC
}hC=hG;
return e()
};
hF.quantiles=function(){return hE
};
hF.invertExtent=function(hG){hG=hC.indexOf(hG);
return hG<0?[NaN,NaN]:[hG>0?hE[hG-1]:hD[0],hG<hE.length?hE[hG]:hD[hD.length-1]]
};
hF.copy=function(){return z(hD,hC)
};
return e()
}gQ.scale.quantize=function(){return dl(0,1,[0,1])
};
function dl(hF,hD,hC){var hG,hE;
function hH(hI){return hC[Math.max(0,Math.min(hE,Math.floor(hG*(hI-hF))))]
}function e(){hG=hC.length/(hD-hF);
hE=hC.length-1;
return hH
}hH.domain=function(hI){if(!arguments.length){return[hF,hD]
}hF=+hI[0];
hD=+hI[hI.length-1];
return e()
};
hH.range=function(hI){if(!arguments.length){return hC
}hC=hI;
return e()
};
hH.invertExtent=function(hI){hI=hC.indexOf(hI);
hI=hI<0?NaN:hI/hG+hF;
return[hI,hI+1/hG]
};
hH.copy=function(){return dl(hF,hD,hC)
};
return e()
}gQ.scale.threshold=function(){return fI([0.5],[0,1])
};
function fI(hC,e){function hD(hE){if(hE<=hE){return e[gQ.bisect(hC,hE)]
}}hD.domain=function(hE){if(!arguments.length){return hC
}hC=hE;
return hD
};
hD.range=function(hE){if(!arguments.length){return e
}e=hE;
return hD
};
hD.invertExtent=function(hE){hE=e.indexOf(hE);
return[hC[hE-1],hC[hE]]
};
hD.copy=function(){return fI(hC,e)
};
return hD
}gQ.scale.identity=function(){return ev([0,1])
};
function ev(hC){function e(hD){return +hD
}e.invert=e;
e.domain=e.range=function(hD){if(!arguments.length){return hC
}hC=hD.map(e);
return e
};
e.ticks=function(hD){return eE(hC,hD)
};
e.tickFormat=function(hD,hE){return eP(hC,hD,hE)
};
e.copy=function(){return ev(hC)
};
return e
}gQ.svg.arc=function(){var hF=bo,hE=cC,hD=fQ,e=aj;
function hC(){var hJ=hF.apply(this,arguments),hI=hE.apply(this,arguments),hH=hD.apply(this,arguments)+g7,hG=e.apply(this,arguments)+g7,hP=(hG<hH&&(hP=hH,hH=hG,hG=hP),hG-hH),hM=hP<fO?"0":"1",hL=Math.cos(hH),hO=Math.sin(hH),hK=Math.cos(hG),hN=Math.sin(hG);
return hP>=hd?hJ?"M0,"+hI+"A"+hI+","+hI+" 0 1,1 0,"+-hI+"A"+hI+","+hI+" 0 1,1 0,"+hI+"M0,"+hJ+"A"+hJ+","+hJ+" 0 1,0 0,"+-hJ+"A"+hJ+","+hJ+" 0 1,0 0,"+hJ+"Z":"M0,"+hI+"A"+hI+","+hI+" 0 1,1 0,"+-hI+"A"+hI+","+hI+" 0 1,1 0,"+hI+"Z":hJ?"M"+hI*hL+","+hI*hO+"A"+hI+","+hI+" 0 "+hM+",1 "+hI*hK+","+hI*hN+"L"+hJ*hK+","+hJ*hN+"A"+hJ+","+hJ+" 0 "+hM+",0 "+hJ*hL+","+hJ*hO+"Z":"M"+hI*hL+","+hI*hO+"A"+hI+","+hI+" 0 "+hM+",1 "+hI*hK+","+hI*hN+"L0,0Z"
}hC.innerRadius=function(hG){if(!arguments.length){return hF
}hF=Q(hG);
return hC
};
hC.outerRadius=function(hG){if(!arguments.length){return hE
}hE=Q(hG);
return hC
};
hC.startAngle=function(hG){if(!arguments.length){return hD
}hD=Q(hG);
return hC
};
hC.endAngle=function(hG){if(!arguments.length){return e
}e=Q(hG);
return hC
};
hC.centroid=function(){var hH=(hF.apply(this,arguments)+hE.apply(this,arguments))/2,hG=(hD.apply(this,arguments)+e.apply(this,arguments))/2+g7;
return[Math.cos(hG)*hH,Math.sin(hG)*hH]
};
return hC
};
var g7=-fO/2,hd=2*fO-0.000001;
function bo(e){return e.innerRadius
}function cC(e){return e.outerRadius
}function fQ(e){return e.startAngle
}function aj(e){return e.endAngle
}gQ.svg.line.radial=function(){var e=eQ(N);
e.radius=e.x,delete e.x;
e.angle=e.y,delete e.y;
return e
};
function N(hE){var e,hD=-1,hG=hE.length,hF,hC;
while(++hD<hG){e=hE[hD];
hF=e[0];
hC=e[1]+g7;
e[0]=hF*Math.cos(hC);
e[1]=hF*Math.sin(hC)
}return hE
}function hx(hF){var hD=gq,hC=gq,hL=0,hJ=go,hE=ae,hG=hj,hM=hG.key,hI=hG,hH="L",hK=0.7;
function e(hR){var hT=[],hN=[],h0=[],hS=-1,hO=hR.length,hV,hQ=Q(hD),hZ=Q(hL),hP=hD===hC?function(){return hX
}:Q(hC),hY=hL===hJ?function(){return hW
}:Q(hJ),hX,hW;
function hU(){hT.push("M",hG(hF(h0),hK),hH,hI(hF(hN.reverse()),hK),"Z")
}while(++hS<hO){if(hE.call(this,hV=hR[hS],hS)){hN.push([hX=+hQ.call(this,hV,hS),hW=+hZ.call(this,hV,hS)]);
h0.push([+hP.call(this,hV,hS),+hY.call(this,hV,hS)])
}else{if(hN.length){hU();
hN=[];
h0=[]
}}}if(hN.length){hU()
}return hT.length?hT.join(""):null
}e.x=function(hN){if(!arguments.length){return hC
}hD=hC=hN;
return e
};
e.x0=function(hN){if(!arguments.length){return hD
}hD=hN;
return e
};
e.x1=function(hN){if(!arguments.length){return hC
}hC=hN;
return e
};
e.y=function(hN){if(!arguments.length){return hJ
}hL=hJ=hN;
return e
};
e.y0=function(hN){if(!arguments.length){return hL
}hL=hN;
return e
};
e.y1=function(hN){if(!arguments.length){return hJ
}hJ=hN;
return e
};
e.defined=function(hN){if(!arguments.length){return hE
}hE=hN;
return e
};
e.interpolate=function(hN){if(!arguments.length){return hM
}if(typeof hN==="function"){hM=hG=hN
}else{hM=(hG=b0.get(hN)||hj).key
}hI=hG.reverse||hG;
hH=hG.closed?"M":"L";
return e
};
e.tension=function(hN){if(!arguments.length){return hK
}hK=hN;
return e
};
return e
}bc.reverse=g0;
g0.reverse=bc;
gQ.svg.area=function(){return hx(fV)
};
gQ.svg.area.radial=function(){var e=hx(N);
e.radius=e.x,delete e.x;
e.innerRadius=e.x0,delete e.x0;
e.outerRadius=e.x1,delete e.x1;
e.angle=e.y,delete e.y;
e.startAngle=e.y0,delete e.y0;
e.endAngle=e.y1,delete e.y1;
return e
};
gQ.svg.chord=function(){var e=g8,hI=hi,hH=F,hJ=fQ,hF=aj;
function hG(hO,hM){var hN=hK(this,e,hO,hM),hL=hK(this,hI,hO,hM);
return"M"+hN.p0+hC(hN.r,hN.p1,hN.a1-hN.a0)+(hD(hN,hL)?hE(hN.r,hN.p1,hN.r,hN.p0):hE(hN.r,hN.p1,hL.r,hL.p0)+hC(hL.r,hL.p1,hL.a1-hL.a0)+hE(hL.r,hL.p1,hN.r,hN.p0))+"Z"
}function hK(hO,hR,hS,hP){var hN=hR.call(hO,hS,hP),hQ=hH.call(hO,hN,hP),hM=hJ.call(hO,hN,hP)+g7,hL=hF.call(hO,hN,hP)+g7;
return{r:hQ,a0:hM,a1:hL,p0:[hQ*Math.cos(hM),hQ*Math.sin(hM)],p1:[hQ*Math.cos(hL),hQ*Math.sin(hL)]}
}function hD(hM,hL){return hM.a0==hL.a0&&hM.a1==hL.a1
}function hC(hM,hN,hL){return"A"+hM+","+hM+" 0 "+ +(hL>fO)+",1 "+hN
}function hE(hM,hO,hL,hN){return"Q 0,0 "+hN
}hG.radius=function(hL){if(!arguments.length){return hH
}hH=Q(hL);
return hG
};
hG.source=function(hL){if(!arguments.length){return e
}e=Q(hL);
return hG
};
hG.target=function(hL){if(!arguments.length){return hI
}hI=Q(hL);
return hG
};
hG.startAngle=function(hL){if(!arguments.length){return hJ
}hJ=Q(hL);
return hG
};
hG.endAngle=function(hL){if(!arguments.length){return hF
}hF=Q(hL);
return hG
};
return hG
};
function F(e){return e.radius
}gQ.svg.diagonal=function(){var hD=g8,hE=hi,e=m;
function hC(hJ,hG){var hK=hD.call(this,hJ,hG),hH=hE.call(this,hJ,hG),hF=(hK.y+hH.y)/2,hI=[hK,{x:hK.x,y:hF},{x:hH.x,y:hF},hH];
hI=hI.map(e);
return"M"+hI[0]+"C"+hI[1]+" "+hI[2]+" "+hI[3]
}hC.source=function(hF){if(!arguments.length){return hD
}hD=Q(hF);
return hC
};
hC.target=function(hF){if(!arguments.length){return hE
}hE=Q(hF);
return hC
};
hC.projection=function(hF){if(!arguments.length){return e
}e=hF;
return hC
};
return hC
};
function m(e){return[e.x,e.y]
}gQ.svg.diagonal.radial=function(){var hD=gQ.svg.diagonal(),e=m,hC=hD.projection;
hD.projection=function(hE){return arguments.length?hC(n(e=hE)):e
};
return hD
};
function n(e){return function(){var hE=e.apply(this,arguments),hD=hE[0],hC=hE[1]+g7;
return[hD*Math.cos(hC),hD*Math.sin(hC)]
}
}gQ.svg.symbol=function(){var hC=aP,e=eK;
function hD(hF,hE){return(hf.get(hC.call(this,hF,hE))||b2)(e.call(this,hF,hE))
}hD.type=function(hE){if(!arguments.length){return hC
}hC=Q(hE);
return hD
};
hD.size=function(hE){if(!arguments.length){return e
}e=Q(hE);
return hD
};
return hD
};
function eK(){return 64
}function aP(){return"circle"
}function b2(e){var hC=Math.sqrt(e/fO);
return"M0,"+hC+"A"+hC+","+hC+" 0 1,1 0,"+-hC+"A"+hC+","+hC+" 0 1,1 0,"+hC+"Z"
}var hf=gQ.map({circle:b2,cross:function(e){var hC=Math.sqrt(e/5)/2;
return"M"+-3*hC+","+-hC+"H"+-hC+"V"+-3*hC+"H"+hC+"V"+-hC+"H"+3*hC+"V"+hC+"H"+hC+"V"+3*hC+"H"+-hC+"V"+hC+"H"+-3*hC+"Z"
},diamond:function(e){var hC=Math.sqrt(e/(2*b8)),hD=hC*b8;
return"M0,"+-hC+"L"+hD+",0 0,"+hC+" "+-hD+",0Z"
},square:function(e){var hC=Math.sqrt(e)/2;
return"M"+-hC+","+-hC+"L"+hC+","+-hC+" "+hC+","+hC+" "+-hC+","+hC+"Z"
},"triangle-down":function(e){var hD=Math.sqrt(e/bU),hC=hD*bU/2;
return"M0,"+hC+"L"+hD+","+-hC+" "+-hD+","+-hC+"Z"
},"triangle-up":function(e){var hD=Math.sqrt(e/bU),hC=hD*bU/2;
return"M0,"+-hC+"L"+hD+","+hC+" "+-hD+","+hC+"Z"
}});
gQ.svg.symbolTypes=hf.keys();
var bU=Math.sqrt(3),b8=Math.tan(30*H);
function gl(e,hC){hw(e,ea);
e.id=hC;
return e
}var ea=[],gH=0,am,dO;
ea.call=dH.call;
ea.empty=dH.empty;
ea.node=dH.node;
ea.size=dH.size;
gQ.transition=function(e){return arguments.length?am?e.transition():e:gn.transition()
};
gQ.transition.prototype=ea;
ea.select=function(hH){var e=this.id,hE=[],hL,hC,hF;
hH=w(hH);
for(var hI=-1,hG=this.length;
++hI<hG;
){hE.push(hL=[]);
for(var hK=this[hI],hJ=-1,hD=hK.length;
++hJ<hD;
){if((hF=hK[hJ])&&(hC=hH.call(hF,hF.__data__,hJ,hI))){if("__data__" in hF){hC.__data__=hF.__data__
}fg(hC,hJ,e,hF.__transition__[e]);
hL.push(hC)
}else{hL.push(null)
}}}return gl(hE,e)
};
ea.selectAll=function(hJ){var hC=this.id,hG=[],hP,e,hI,hD,hN;
hJ=cM(hJ);
for(var hL=-1,hH=this.length;
++hL<hH;
){for(var hO=this[hL],hM=-1,hF=hO.length;
++hM<hF;
){if(hI=hO[hM]){hN=hI.__transition__[hC];
e=hJ.call(hI,hI.__data__,hM,hL);
hG.push(hP=[]);
for(var hK=-1,hE=e.length;
++hK<hE;
){if(hD=e[hK]){fg(hD,hK,hC,hN)
}hP.push(hD)
}}}}return gl(hG,hC)
};
ea.filter=function(e){var hD=[],hJ,hI,hE;
if(typeof e!=="function"){e=a0(e)
}for(var hG=0,hF=this.length;
hG<hF;
hG++){hD.push(hJ=[]);
for(var hI=this[hG],hH=0,hC=hI.length;
hH<hC;
hH++){if((hE=hI[hH])&&e.call(hE,hE.__data__,hH)){hJ.push(hE)
}}}return gl(hD,this.id)
};
ea.tween=function(e,hC){var hD=this.id;
if(arguments.length<2){return this.node().__transition__[hD].tween.get(e)
}return cu(this,hC==null?function(hE){hE.__transition__[hD].tween.remove(e)
}:function(hE){hE.__transition__[hD].tween.set(e,hC)
})
};
function he(e,hC,hE,hD){var hF=e.id;
return cu(e,typeof hE==="function"?function(hI,hH,hG){hI.__transition__[hF].tween.set(hC,hD(hE.call(hI,hI.__data__,hH,hG)))
}:(hE=hD(hE),function(hG){hG.__transition__[hF].tween.set(hC,hE)
}))
}ea.attr=function(e,hG){if(arguments.length<2){for(hG in e){this.attr(hG,e[hG])
}return this
}var hE=e=="transform"?dZ:fh,hD=gQ.ns.qualify(e);
function hC(){this.removeAttribute(hD)
}function hI(){this.removeAttributeNS(hD.space,hD.local)
}function hF(hJ){return hJ==null?hC:(hJ+="",function(){var hK=this.getAttribute(hD),hL;
return hK!==hJ&&(hL=hE(hK,hJ),function(hM){this.setAttribute(hD,hL(hM))
})
})
}function hH(hJ){return hJ==null?hI:(hJ+="",function(){var hK=this.getAttributeNS(hD.space,hD.local),hL;
return hK!==hJ&&(hL=hE(hK,hJ),function(hM){this.setAttributeNS(hD.space,hD.local,hL(hM))
})
})
}return he(this,"attr."+e,hG,hD.local?hH:hF)
};
ea.attrTween=function(e,hD){var hC=gQ.ns.qualify(e);
function hE(hI,hG){var hH=hD.call(this,hI,hG,this.getAttribute(hC));
return hH&&function(hJ){this.setAttribute(hC,hH(hJ))
}
}function hF(hI,hG){var hH=hD.call(this,hI,hG,this.getAttributeNS(hC.space,hC.local));
return hH&&function(hJ){this.setAttributeNS(hC.space,hC.local,hH(hJ))
}
}return this.tween("attr."+e,hC.local?hF:hE)
};
ea.style=function(hD,hF,hE){var hG=arguments.length;
if(hG<3){if(typeof hD!=="string"){if(hG<2){hF=""
}for(hE in hD){this.style(hE,hD[hE],hF)
}return this
}hE=""
}function hC(){this.style.removeProperty(hD)
}function e(hH){return hH==null?hC:(hH+="",function(){var hI=fd.getComputedStyle(this,null).getPropertyValue(hD),hJ;
return hI!==hH&&(hJ=fh(hI,hH),function(hK){this.style.setProperty(hD,hJ(hK),hE)
})
})
}return he(this,"style."+hD,hF,e)
};
ea.styleTween=function(e,hD,hC){if(arguments.length<3){hC=""
}function hE(hH,hF){var hG=hD.call(this,hH,hF,fd.getComputedStyle(this,null).getPropertyValue(e));
return hG&&function(hI){this.style.setProperty(e,hG(hI),hC)
}
}return this.tween("style."+e,hE)
};
ea.text=function(e){return he(this,"text",e,hB)
};
function hB(e){if(e==null){e=""
}return function(){this.textContent=e
}
}ea.remove=function(){return this.each("end.transition",function(){var e;
if(!this.__transition__&&(e=this.parentNode)){e.removeChild(this)
}})
};
ea.ease=function(e){var hC=this.id;
if(arguments.length<1){return this.node().__transition__[hC].ease
}if(typeof e!=="function"){e=gQ.ease.apply(gQ,arguments)
}return cu(this,function(hD){hD.__transition__[hC].ease=e
})
};
ea.delay=function(e){var hC=this.id;
return cu(this,typeof e==="function"?function(hF,hE,hD){hF.__transition__[hC].delay=e.call(hF,hF.__data__,hE,hD)|0
}:(e|=0,function(hD){hD.__transition__[hC].delay=e
}))
};
ea.duration=function(e){var hC=this.id;
return cu(this,typeof e==="function"?function(hF,hE,hD){hF.__transition__[hC].duration=Math.max(1,e.call(hF,hF.__data__,hE,hD)|0)
}:(e=Math.max(1,e|0),function(hD){hD.__transition__[hC].duration=e
}))
};
ea.each=function(hC,hD){var hF=this.id;
if(arguments.length<2){var e=dO,hE=am;
am=hF;
cu(this,function(hI,hH,hG){dO=hI.__transition__[hF];
hC.call(hI,hI.__data__,hH,hG)
});
dO=e;
am=hE
}else{cu(this,function(hG){var hH=hG.__transition__[hF];
(hH.event||(hH.event=gQ.dispatch("start","end"))).on(hC,hD)
})
}return this
};
ea.transition=function(){var hL=this.id,hK=++gH,hC=[],hJ,hI,hE,hH;
for(var hF=0,hD=this.length;
hF<hD;
hF++){hC.push(hJ=[]);
for(var hI=this[hF],hG=0,e=hI.length;
hG<e;
hG++){if(hE=hI[hG]){hH=Object.create(hE.__transition__[hL]);
hH.delay+=hH.duration;
fg(hE,hG,hK,hH)
}hJ.push(hE)
}}return gl(hC,hK)
};
function fg(hE,hD,hH,e){var hC=hE.__transition__||(hE.__transition__={active:0,count:0}),hG=hC[hH];
if(!hG){var hF=e.time;
hG=hC[hH]={tween:new aC(),time:hF,ease:e.ease,delay:e.delay,duration:e.duration};
++hC.count;
gQ.timer(function(hQ){var hN=hE.__data__,hJ=hG.ease,hL=hG.delay,hK=hG.duration,hP=[];
if(hL<=hQ){return hI(hQ)
}ha(hI,hL,hF);
function hI(hR){if(hC.active>hH){return hO()
}hC.active=hH;
hG.event&&hG.event.start.call(hE,hN,hD);
hG.tween.forEach(function(hS,hT){if(hT=hT.call(hE,hN,hD)){hP.push(hT)
}});
if(hM(hR)){return 1
}ha(hM,0,hF)
}function hM(hR){if(hC.active!==hH){return hO()
}var hS=(hR-hL)/hK,hT=hJ(hS),hU=hP.length;
while(hU>0){hP[--hU].call(hE,hT)
}if(hS>=1){hO();
hG.event&&hG.event.end.call(hE,hN,hD);
return 1
}}function hO(){if(--hC.count){delete hC[hH]
}else{delete hE.__transition__
}return 1
}},0,hF)
}}gQ.svg.axis=function(){var hE=gQ.scale.linear(),hH=hm,hF=6,e=6,hC=6,hL=3,hK=[10],hG=null,hJ,hI=0;
function hD(hM){hM.each(function(){var h8=gQ.select(this);
var ia=hG==null?hE.ticks?hE.ticks.apply(hE,hK):hE.domain():hG,h1=hJ==null?hE.tickFormat?hE.tickFormat.apply(hE,hK):String:hJ;
var hR=cF(hE,ia,hI),hQ=h8.selectAll(".tick.minor").data(hR,String),h3=hQ.enter().insert("line",".tick").attr("class","tick minor").style("opacity",0.000001),h2=gQ.transition(hQ.exit()).style("opacity",0.000001).remove(),hO=gQ.transition(hQ).style("opacity",1);
var h6=h8.selectAll(".tick.major").data(ia,String),hY=h6.enter().insert("g",".domain").attr("class","tick major").style("opacity",0.000001),h0=gQ.transition(h6.exit()).style("opacity",0.000001).remove(),hT=gQ.transition(h6).style("opacity",1),hN;
var hX=aS(hE),hZ=h8.selectAll(".domain").data([0]),ib=(hZ.enter().append("path").attr("class","domain"),gQ.transition(hZ));
var h4=hE.copy(),h5=this.__chart__||h4;
this.__chart__=h4;
hY.append("line");
hY.append("text");
var hP=hY.select("line"),h9=hT.select("line"),hW=h6.select("text").text(h1),hS=hY.select("text"),h7=hT.select("text");
switch(hH){case"bottom":hN=e1;
h3.attr("y2",e);
hO.attr("x2",0).attr("y2",e);
hP.attr("y2",hF);
hS.attr("y",Math.max(hF,0)+hL);
h9.attr("x2",0).attr("y2",hF);
h7.attr("x",0).attr("y",Math.max(hF,0)+hL);
hW.attr("dy",".71em").style("text-anchor","middle");
ib.attr("d","M"+hX[0]+","+hC+"V0H"+hX[1]+"V"+hC);
break;
case"top":hN=e1;
h3.attr("y2",-e);
hO.attr("x2",0).attr("y2",-e);
hP.attr("y2",-hF);
hS.attr("y",-(Math.max(hF,0)+hL));
h9.attr("x2",0).attr("y2",-hF);
h7.attr("x",0).attr("y",-(Math.max(hF,0)+hL));
hW.attr("dy","0em").style("text-anchor","middle");
ib.attr("d","M"+hX[0]+","+-hC+"V0H"+hX[1]+"V"+-hC);
break;
case"left":hN=e0;
h3.attr("x2",-e);
hO.attr("x2",-e).attr("y2",0);
hP.attr("x2",-hF);
hS.attr("x",-(Math.max(hF,0)+hL));
h9.attr("x2",-hF).attr("y2",0);
h7.attr("x",-(Math.max(hF,0)+hL)).attr("y",0);
hW.attr("dy",".32em").style("text-anchor","end");
ib.attr("d","M"+-hC+","+hX[0]+"H0V"+hX[1]+"H"+-hC);
break;
case"right":hN=e0;
h3.attr("x2",e);
hO.attr("x2",e).attr("y2",0);
hP.attr("x2",hF);
hS.attr("x",Math.max(hF,0)+hL);
h9.attr("x2",hF).attr("y2",0);
h7.attr("x",Math.max(hF,0)+hL).attr("y",0);
hW.attr("dy",".32em").style("text-anchor","start");
ib.attr("d","M"+hC+","+hX[0]+"H0V"+hX[1]+"H"+hC);
break
}if(hE.rangeBand){var hV=h4.rangeBand()/2,hU=function(ic){return h4(ic)+hV
};
hY.call(hN,hU);
hT.call(hN,hU)
}else{hY.call(hN,h5);
hT.call(hN,h4);
h0.call(hN,h4);
h3.call(hN,h5);
hO.call(hN,h4);
h2.call(hN,h4)
}})
}hD.scale=function(hM){if(!arguments.length){return hE
}hE=hM;
return hD
};
hD.orient=function(hM){if(!arguments.length){return hH
}hH=hM in eF?hM+"":hm;
return hD
};
hD.ticks=function(){if(!arguments.length){return hK
}hK=arguments;
return hD
};
hD.tickValues=function(hM){if(!arguments.length){return hG
}hG=hM;
return hD
};
hD.tickFormat=function(hM){if(!arguments.length){return hJ
}hJ=hM;
return hD
};
hD.tickSize=function(hM,hO){if(!arguments.length){return hF
}var hN=arguments.length-1;
hF=+hM;
e=hN>1?+hO:hF;
hC=hN>0?+arguments[hN]:hF;
return hD
};
hD.tickPadding=function(hM){if(!arguments.length){return hL
}hL=+hM;
return hD
};
hD.tickSubdivide=function(hM){if(!arguments.length){return hI
}hI=+hM;
return hD
};
return hD
};
var hm="bottom",eF={top:1,right:1,bottom:1,left:1};
function e1(hC,e){hC.attr("transform",function(hD){return"translate("+e(hD)+",0)"
})
}function e0(e,hC){e.attr("transform",function(hD){return"translate(0,"+hC(hD)+")"
})
}function cF(hD,hH,hC){hI=[];
if(hC&&hH.length>1){var hK=d9(hD.domain()),hI,hF=-1,e=hH.length,hG=(hH[1]-hH[0])/++hC,hE,hJ;
while(++hF<e){for(hE=hC;
--hE>0;
){if((hJ=+hH[hF]-hE*hG)>=hK[0]){hI.push(hJ)
}}}for(--hF,hE=0;
++hE<hC&&(hJ=+hH[hF]+hE*hG)<hK[1];
){hI.push(hJ)
}}return hI
}gQ.svg.brush=function(){var e=gN(hG,"brushstart","brush","brushend"),hI=null,hH=null,hJ=an[0],hM=[[0,0],[0,0]],hF=[true,true],hC;
function hG(hN){hN.each(function(){var hQ=gQ.select(this),hP=hQ.selectAll(".background").data([0]),hO=hQ.selectAll(".extent").data([0]),hS=hQ.selectAll(".resize").data(hJ,String),hR;
hQ.style("pointer-events","all").on("mousedown.brush",hK).on("touchstart.brush",hK);
hP.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");
hO.enter().append("rect").attr("class","extent").style("cursor","move");
hS.enter().append("g").attr("class",function(hT){return"resize "+hT
}).style("cursor",function(hT){return ey[hT]
}).append("rect").attr("x",function(hT){return/[ew]$/.test(hT)?-3:null
}).attr("y",function(hT){return/^[ns]/.test(hT)?-3:null
}).attr("width",6).attr("height",6).style("visibility","hidden");
hS.style("display",hG.empty()?"none":null);
hS.exit().remove();
if(hI){hR=aS(hI);
hP.attr("x",hR[0]).attr("width",hR[1]-hR[0]);
hE(hQ)
}if(hH){hR=aS(hH);
hP.attr("y",hR[0]).attr("height",hR[1]-hR[0]);
hD(hQ)
}hL(hQ)
})
}function hL(hN){hN.selectAll(".resize").attr("transform",function(hO){return"translate("+hM[+/e$/.test(hO)][0]+","+hM[+/^s/.test(hO)][1]+")"
})
}function hE(hN){hN.select(".extent").attr("x",hM[0][0]);
hN.selectAll(".extent,.n>rect,.s>rect").attr("width",hM[1][0]-hM[0][0])
}function hD(hN){hN.select(".extent").attr("y",hM[0][1]);
hN.selectAll(".extent,.e>rect,.w>rect").attr("height",hM[1][1]-hM[0][1])
}function hK(){var h7=this,hO=gQ.select(gQ.event.target),hV=e.of(h7,arguments),h2=gQ.select(h7),h4=hO.datum(),h0=!/^(n|s)$/.test(h4)&&hI,hY=!/^(e|w)$/.test(h4)&&hH,hZ=hO.classed("extent"),hQ=by(),h5,h6=hW(),hP;
var hT=gQ.select(fd).on("keydown.brush",hX).on("keyup.brush",hS);
if(gQ.event.changedTouches){hT.on("touchmove.brush",hU).on("touchend.brush",hN)
}else{hT.on("mousemove.brush",hU).on("mouseup.brush",hN)
}if(hZ){h6[0]=hM[0][0]-h6[0];
h6[1]=hM[0][1]-h6[1]
}else{if(h4){var h3=+/w$/.test(h4),h1=+/^n/.test(h4);
hP=[hM[1-h3][0]-h6[0],hM[1-h1][1]-h6[1]];
h6[0]=hM[h3][0];
h6[1]=hM[h1][1]
}else{if(gQ.event.altKey){h5=h6.slice()
}}}h2.style("pointer-events","none").selectAll(".resize").style("display",null);
gQ.select("body").style("cursor",hO.style("cursor"));
hV({type:"brushstart"});
hU();
function hW(){var h8=gQ.event.changedTouches;
return h8?gQ.touches(h7,h8)[0]:gQ.mouse(h7)
}function hX(){if(gQ.event.keyCode==32){if(!hZ){h5=null;
h6[0]-=hM[1][0];
h6[1]-=hM[1][1];
hZ=2
}u()
}}function hS(){if(gQ.event.keyCode==32&&hZ==2){h6[0]+=hM[1][0];
h6[1]+=hM[1][1];
hZ=0;
u()
}}function hU(){var h8=hW(),h9=false;
if(hP){h8[0]+=hP[0];
h8[1]+=hP[1]
}if(!hZ){if(gQ.event.altKey){if(!h5){h5=[(hM[0][0]+hM[1][0])/2,(hM[0][1]+hM[1][1])/2]
}h6[0]=hM[+(h8[0]<h5[0])][0];
h6[1]=hM[+(h8[1]<h5[1])][1]
}else{h5=null
}}if(h0&&hR(h8,hI,0)){hE(h2);
h9=true
}if(hY&&hR(h8,hH,1)){hD(h2);
h9=true
}if(h9){hL(h2);
hV({type:"brush",mode:hZ?"move":"resize"})
}}function hR(ih,ia,ic){var id=aS(ia),h9=id[0],h8=id[1],ie=h6[ic],ii=hM[1][ic]-hM[0][ic],ib,ig;
if(hZ){h9-=ie;
h8-=ii+ie
}ib=hF[ic]?Math.max(h9,Math.min(h8,ih[ic])):ih[ic];
if(hZ){ig=(ib+=ie)+ii
}else{if(h5){ie=Math.max(h9,Math.min(h8,2*h5[ic]-ib))
}if(ie<ib){ig=ib;
ib=ie
}else{ig=ie
}}if(hM[0][ic]!==ib||hM[1][ic]!==ig){hC=null;
hM[0][ic]=ib;
hM[1][ic]=ig;
return true
}}function hN(){hU();
h2.style("pointer-events","all").selectAll(".resize").style("display",hG.empty()?"none":null);
gQ.select("body").style("cursor",null);
hT.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);
hQ();
hV({type:"brushend"})
}}hG.x=function(hN){if(!arguments.length){return hI
}hI=hN;
hJ=an[!hI<<1|!hH];
return hG
};
hG.y=function(hN){if(!arguments.length){return hH
}hH=hN;
hJ=an[!hI<<1|!hH];
return hG
};
hG.clamp=function(hN){if(!arguments.length){return hI&&hH?hF:hI||hH?hF[+!hI]:null
}if(hI&&hH){hF=[!!hN[0],!!hN[1]]
}else{if(hI||hH){hF[+!hI]=!!hN
}}return hG
};
hG.extent=function(hS){var hP,hN,hR,hQ,hO;
if(!arguments.length){hS=hC||hM;
if(hI){hP=hS[0][0],hN=hS[1][0];
if(!hC){hP=hM[0][0],hN=hM[1][0];
if(hI.invert){hP=hI.invert(hP),hN=hI.invert(hN)
}if(hN<hP){hO=hP,hP=hN,hN=hO
}}}if(hH){hR=hS[0][1],hQ=hS[1][1];
if(!hC){hR=hM[0][1],hQ=hM[1][1];
if(hH.invert){hR=hH.invert(hR),hQ=hH.invert(hQ)
}if(hQ<hR){hO=hR,hR=hQ,hQ=hO
}}}return hI&&hH?[[hP,hR],[hN,hQ]]:hI?[hP,hN]:hH&&[hR,hQ]
}hC=[[0,0],[0,0]];
if(hI){hP=hS[0],hN=hS[1];
if(hH){hP=hP[0],hN=hN[0]
}hC[0][0]=hP,hC[1][0]=hN;
if(hI.invert){hP=hI(hP),hN=hI(hN)
}if(hN<hP){hO=hP,hP=hN,hN=hO
}hM[0][0]=hP|0,hM[1][0]=hN|0
}if(hH){hR=hS[0],hQ=hS[1];
if(hI){hR=hR[1],hQ=hQ[1]
}hC[0][1]=hR,hC[1][1]=hQ;
if(hH.invert){hR=hH(hR),hQ=hH(hQ)
}if(hQ<hR){hO=hR,hR=hQ,hQ=hO
}hM[0][1]=hR|0,hM[1][1]=hQ|0
}return hG
};
hG.clear=function(){hC=null;
hM[0][0]=hM[0][1]=hM[1][0]=hM[1][1]=0;
return hG
};
hG.empty=function(){return hI&&hM[0][0]===hM[1][0]||hH&&hM[0][1]===hM[1][1]
};
return gQ.rebind(hG,e,"on")
};
var ey={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};
var an=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];
gQ.time={};
var fl=Date,p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
function gz(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])
}gz.prototype={getDate:function(){return this._.getUTCDate()
},getDay:function(){return this._.getUTCDay()
},getFullYear:function(){return this._.getUTCFullYear()
},getHours:function(){return this._.getUTCHours()
},getMilliseconds:function(){return this._.getUTCMilliseconds()
},getMinutes:function(){return this._.getUTCMinutes()
},getMonth:function(){return this._.getUTCMonth()
},getSeconds:function(){return this._.getUTCSeconds()
},getTime:function(){return this._.getTime()
},getTimezoneOffset:function(){return 0
},valueOf:function(){return this._.valueOf()
},setDate:function(){fF.setUTCDate.apply(this._,arguments)
},setDay:function(){fF.setUTCDay.apply(this._,arguments)
},setFullYear:function(){fF.setUTCFullYear.apply(this._,arguments)
},setHours:function(){fF.setUTCHours.apply(this._,arguments)
},setMilliseconds:function(){fF.setUTCMilliseconds.apply(this._,arguments)
},setMinutes:function(){fF.setUTCMinutes.apply(this._,arguments)
},setMonth:function(){fF.setUTCMonth.apply(this._,arguments)
},setSeconds:function(){fF.setUTCSeconds.apply(this._,arguments)
},setTime:function(){fF.setTime.apply(this._,arguments)
}};
var fF=Date.prototype;
var P="%a %b %e %X %Y",ex="%m/%d/%Y",cW="%H:%M:%S";
var b7=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],cD=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],cb=["January","February","March","April","May","June","July","August","September","October","November","December"],aE=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
function cK(hG,e,hC){function hJ(hK){var hM=hG(hK),hL=hE(hM,1);
return hK-hM<hL-hK?hM:hL
}function hI(hK){e(hK=hG(new fl(hK-1)),1);
return hK
}function hE(hL,hK){e(hL=new fl(+hL),hK);
return hL
}function hF(hM,hL,hK){var hN=hI(hM),hO=[];
if(hK>1){while(hN<hL){if(!(hC(hN)%hK)){hO.push(new Date(+hN))
}e(hN,1)
}}else{while(hN<hL){hO.push(new Date(+hN)),e(hN,1)
}}return hO
}function hD(hN,hM,hL){try{fl=gz;
var hK=new gz();
hK._=hN;
return hF(hK,hM,hL)
}finally{fl=Date
}}hG.floor=hG;
hG.round=hJ;
hG.ceil=hI;
hG.offset=hE;
hG.range=hF;
var hH=hG.utc=dB(hG);
hH.floor=hH;
hH.round=dB(hJ);
hH.ceil=dB(hI);
hH.offset=dB(hE);
hH.range=hD;
return hG
}function dB(e){return function(hD,hC){try{fl=gz;
var hE=new gz();
hE._=hD;
return e(hE,hC)._
}finally{fl=Date
}}
}gQ.time.year=cK(function(e){e=gQ.time.day(e);
e.setMonth(0,1);
return e
},function(e,hC){e.setFullYear(e.getFullYear()+hC)
},function(e){return e.getFullYear()
});
gQ.time.years=gQ.time.year.range;
gQ.time.years.utc=gQ.time.year.utc.range;
gQ.time.day=cK(function(hC){var e=new fl(2000,0);
e.setFullYear(hC.getFullYear(),hC.getMonth(),hC.getDate());
return e
},function(e,hC){e.setDate(e.getDate()+hC)
},function(e){return e.getDate()-1
});
gQ.time.days=gQ.time.day.range;
gQ.time.days.utc=gQ.time.day.utc.range;
gQ.time.dayOfYear=function(e){var hC=gQ.time.year(e);
return Math.floor((e-hC-(e.getTimezoneOffset()-hC.getTimezoneOffset())*60000)/86400000)
};
p.forEach(function(hC,hD){hC=hC.toLowerCase();
hD=7-hD;
var e=gQ.time[hC]=cK(function(hE){(hE=gQ.time.day(hE)).setDate(hE.getDate()-(hE.getDay()+hD)%7);
return hE
},function(hE,hF){hE.setDate(hE.getDate()+Math.floor(hF)*7)
},function(hF){var hE=gQ.time.year(hF).getDay();
return Math.floor((gQ.time.dayOfYear(hF)+(hE+hD)%7)/7)-(hE!==hD)
});
gQ.time[hC+"s"]=e.range;
gQ.time[hC+"s"].utc=e.utc.range;
gQ.time[hC+"OfYear"]=function(hF){var hE=gQ.time.year(hF).getDay();
return Math.floor((gQ.time.dayOfYear(hF)+(hE+hD)%7)/7)
}
});
gQ.time.week=gQ.time.sunday;
gQ.time.weeks=gQ.time.sunday.range;
gQ.time.weeks.utc=gQ.time.sunday.utc.range;
gQ.time.weekOfYear=gQ.time.sundayOfYear;
gQ.time.format=function(e){var hD=e.length;
function hC(hG){var hF=[],hH=-1,hE=0,hK,hJ,hI;
while(++hH<hD){if(e.charCodeAt(hH)===37){hF.push(e.substring(hE,hH));
if((hJ=aH[hK=e.charAt(++hH)])!=null){hK=e.charAt(++hH)
}if(hI=f7[hK]){hK=hI(hG,hJ==null?hK==="e"?" ":"0":hJ)
}hF.push(hK);
hE=hH+1
}}hF.push(e.substring(hE,hH));
return hF.join("")
}hC.parse=function(hF){var hH={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},hG=dN(hH,e,hF,0);
if(hG!=hF.length){return null
}if("p" in hH){hH.H=hH.H%12+hH.p*12
}var hE=new fl();
if("j" in hH){hE.setFullYear(hH.y,0,hH.j)
}else{if("w" in hH&&("W" in hH||"U" in hH)){hE.setFullYear(hH.y,0,1);
hE.setFullYear(hH.y,0,"W" in hH?(hH.w+6)%7+hH.W*7-(hE.getDay()+5)%7:hH.w+hH.U*7-(hE.getDay()+6)%7)
}else{hE.setFullYear(hH.y,hH.m,hH.d)
}}hE.setHours(hH.H,hH.M,hH.S,hH.L);
return hE
};
hC.toString=function(){return e
};
return hC
};
function dN(hE,hJ,hH,hF){var hI,e,hG=0,hC=hJ.length,hD=hH.length;
while(hG<hC){if(hF>=hD){return -1
}hI=hJ.charCodeAt(hG++);
if(hI===37){e=hg[hJ.charAt(hG++)];
if(!e||(hF=e(hE,hH,hF))<0){return -1
}}else{if(hI!=hH.charCodeAt(hF++)){return -1
}}}return hF
}function cv(e){return new RegExp("^(?:"+e.map(gQ.requote).join("|")+")","i")
}function gr(hD){var hC=new aC(),e=-1,hE=hD.length;
while(++e<hE){hC.set(hD[e].toLowerCase(),e)
}return hC
}function de(hF,hG,hD){var e=hF<0?"-":"",hC=(e?-hF:hF)+"",hE=hC.length;
return e+(hE<hD?new Array(hD-hE+1).join(hG)+hC:hC)
}var g3=cv(b7),a2=gr(b7),fn=cv(cD),dT=gr(cD),gF=cv(cb),fa=gr(cb),eB=cv(aE),eI=gr(aE),eN=/^%/;
var aH={"-":"",_:" ","0":"0"};
var f7={a:function(e){return cD[e.getDay()]
},A:function(e){return b7[e.getDay()]
},b:function(e){return aE[e.getMonth()]
},B:function(e){return cb[e.getMonth()]
},c:gQ.time.format(P),d:function(hC,e){return de(hC.getDate(),e,2)
},e:function(hC,e){return de(hC.getDate(),e,2)
},H:function(hC,e){return de(hC.getHours(),e,2)
},I:function(hC,e){return de(hC.getHours()%12||12,e,2)
},j:function(hC,e){return de(1+gQ.time.dayOfYear(hC),e,3)
},L:function(hC,e){return de(hC.getMilliseconds(),e,3)
},m:function(hC,e){return de(hC.getMonth()+1,e,2)
},M:function(hC,e){return de(hC.getMinutes(),e,2)
},p:function(e){return e.getHours()>=12?"PM":"AM"
},S:function(hC,e){return de(hC.getSeconds(),e,2)
},U:function(hC,e){return de(gQ.time.sundayOfYear(hC),e,2)
},w:function(e){return e.getDay()
},W:function(hC,e){return de(gQ.time.mondayOfYear(hC),e,2)
},x:gQ.time.format(ex),X:gQ.time.format(cW),y:function(hC,e){return de(hC.getFullYear()%100,e,2)
},Y:function(hC,e){return de(hC.getFullYear()%10000,e,4)
},Z:fA,"%":function(){return"%"
}};
var hg={a:gy,A:cq,b:aU,B:eC,c:eb,d:bO,e:bO,H:aK,I:aK,j:D,L:gs,m:gf,M:cH,p:g1,S:dG,U:bg,w:dA,W:dq,x:hy,X:gb,y:M,Y:bn,"%":e7};
function gy(hC,e,hD){fn.lastIndex=0;
var hE=fn.exec(e.substring(hD));
return hE?(hC.w=dT.get(hE[0].toLowerCase()),hD+hE[0].length):-1
}function cq(hC,e,hD){g3.lastIndex=0;
var hE=g3.exec(e.substring(hD));
return hE?(hC.w=a2.get(hE[0].toLowerCase()),hD+hE[0].length):-1
}function dA(hC,e,hD){fJ.lastIndex=0;
var hE=fJ.exec(e.substring(hD,hD+1));
return hE?(hC.w=+hE[0],hD+hE[0].length):-1
}function bg(hC,e,hD){fJ.lastIndex=0;
var hE=fJ.exec(e.substring(hD));
return hE?(hC.U=+hE[0],hD+hE[0].length):-1
}function dq(hC,e,hD){fJ.lastIndex=0;
var hE=fJ.exec(e.substring(hD));
return hE?(hC.W=+hE[0],hD+hE[0].length):-1
}function aU(hC,e,hD){eB.lastIndex=0;
var hE=eB.exec(e.substring(hD));
return hE?(hC.m=eI.get(hE[0].toLowerCase()),hD+hE[0].length):-1
}function eC(hC,e,hD){gF.lastIndex=0;
var hE=gF.exec(e.substring(hD));
return hE?(hC.m=fa.get(hE[0].toLowerCase()),hD+hE[0].length):-1
}function eb(hC,e,hD){return dN(hC,f7.c.toString(),e,hD)
}function hy(hC,e,hD){return dN(hC,f7.x.toString(),e,hD)
}function gb(hC,e,hD){return dN(hC,f7.X.toString(),e,hD)
}function bn(hC,e,hD){fJ.lastIndex=0;
var hE=fJ.exec(e.substring(hD,hD+4));
return hE?(hC.y=+hE[0],hD+hE[0].length):-1
}function M(hC,e,hD){fJ.lastIndex=0;
var hE=fJ.exec(e.substring(hD,hD+2));
return hE?(hC.y=cN(+hE[0]),hD+hE[0].length):-1
}function cN(e){return e+(e>68?1900:2000)
}function gf(hC,e,hD){fJ.lastIndex=0;
var hE=fJ.exec(e.substring(hD,hD+2));
return hE?(hC.m=hE[0]-1,hD+hE[0].length):-1
}function bO(hC,e,hD){fJ.lastIndex=0;
var hE=fJ.exec(e.substring(hD,hD+2));
return hE?(hC.d=+hE[0],hD+hE[0].length):-1
}function D(hC,e,hD){fJ.lastIndex=0;
var hE=fJ.exec(e.substring(hD,hD+3));
return hE?(hC.j=+hE[0],hD+hE[0].length):-1
}function aK(hC,e,hD){fJ.lastIndex=0;
var hE=fJ.exec(e.substring(hD,hD+2));
return hE?(hC.H=+hE[0],hD+hE[0].length):-1
}function cH(hC,e,hD){fJ.lastIndex=0;
var hE=fJ.exec(e.substring(hD,hD+2));
return hE?(hC.M=+hE[0],hD+hE[0].length):-1
}function dG(hC,e,hD){fJ.lastIndex=0;
var hE=fJ.exec(e.substring(hD,hD+2));
return hE?(hC.S=+hE[0],hD+hE[0].length):-1
}function gs(hC,e,hD){fJ.lastIndex=0;
var hE=fJ.exec(e.substring(hD,hD+3));
return hE?(hC.L=+hE[0],hD+hE[0].length):-1
}var fJ=/^\s*\d+/;
function g1(hC,e,hD){var hE=d.get(e.substring(hD,hD+=2).toLowerCase());
return hE==null?-1:(hC.p=hE,hD)
}var d=gQ.map({am:0,pm:1});
function fA(hF){var hE=hF.getTimezoneOffset(),hD=hE>0?"-":"+",hC=~~(Math.abs(hE)/60),e=Math.abs(hE)%60;
return hD+de(hC,"0",2)+de(e,"0",2)
}function e7(hC,e,hD){eN.lastIndex=0;
var hE=eN.exec(e.substring(hD,hD+1));
return hE?hD+hE[0].length:-1
}gQ.time.format.utc=function(hC){var e=gQ.time.format(hC);
function hD(hE){try{fl=gz;
var hF=new fl();
hF._=hE;
return e(hF)
}finally{fl=Date
}}hD.parse=function(hF){try{fl=gz;
var hE=e.parse(hF);
return hE&&hE._
}finally{fl=Date
}};
hD.toString=e.toString;
return hD
};
var dy=gQ.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");
gQ.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?dd:dy;
function dd(e){return e.toISOString()
}dd.parse=function(hC){var e=new Date(hC);
return isNaN(e)?null:e
};
dd.toString=dy.toString;
gQ.time.second=cK(function(e){return new fl(Math.floor(e/1000)*1000)
},function(e,hC){e.setTime(e.getTime()+Math.floor(hC)*1000)
},function(e){return e.getSeconds()
});
gQ.time.seconds=gQ.time.second.range;
gQ.time.seconds.utc=gQ.time.second.utc.range;
gQ.time.minute=cK(function(e){return new fl(Math.floor(e/60000)*60000)
},function(e,hC){e.setTime(e.getTime()+Math.floor(hC)*60000)
},function(e){return e.getMinutes()
});
gQ.time.minutes=gQ.time.minute.range;
gQ.time.minutes.utc=gQ.time.minute.utc.range;
gQ.time.hour=cK(function(e){var hC=e.getTimezoneOffset()/60;
return new fl((Math.floor(e/3600000-hC)+hC)*3600000)
},function(e,hC){e.setTime(e.getTime()+Math.floor(hC)*3600000)
},function(e){return e.getHours()
});
gQ.time.hours=gQ.time.hour.range;
gQ.time.hours.utc=gQ.time.hour.utc.range;
gQ.time.month=cK(function(e){e=gQ.time.day(e);
e.setDate(1);
return e
},function(e,hC){e.setMonth(e.getMonth()+hC)
},function(e){return e.getMonth()
});
gQ.time.months=gQ.time.month.range;
gQ.time.months.utc=gQ.time.month.utc.range;
function bd(e,hC,hD){function hE(hF){return e(hF)
}hE.invert=function(hF){return fE(e.invert(hF))
};
hE.domain=function(hF){if(!arguments.length){return e.domain().map(fE)
}e.domain(hF);
return hE
};
hE.nice=function(hF){return hE.domain(fT(hE.domain(),hF))
};
hE.ticks=function(hF,hG){var hJ=d9(hE.domain());
if(typeof hF!=="function"){var hI=hJ[1]-hJ[0],hK=hI/hF,hH=gQ.bisect(eR,hK);
if(hH==eR.length){return hC.year(hJ,hF)
}if(!hH){return e.ticks(hF).map(fE)
}if(hK/eR[hH-1]<eR[hH]/hK){--hH
}hF=hC[hH];
hG=hF[1];
hF=hF[0].range
}return hF(hJ[0],new Date(+hJ[1]+1),hG)
};
hE.tickFormat=function(){return hD
};
hE.copy=function(){return bd(e.copy(),hC,hD)
};
return fM(hE,e)
}function fE(e){return new Date(e)
}function cG(e){return function(hC){var hD=e.length-1,hE=e[hD];
while(!hE[1](hC)){hE=e[--hD]
}return hE[0](hC)
}
}function dJ(hC){var e=new Date(hC,0,1);
e.setFullYear(hC);
return e
}function gD(hD){var hE=hD.getFullYear(),hC=dJ(hE),e=dJ(hE+1);
return hE+(hD-hC)/(e-hC)
}var eR=[1000,5000,15000,30000,60000,300000,900000,1800000,3600000,10800000,21600000,43200000,86400000,172800000,604800000,2592000000,7776000000,31536000000];
var cp=[[gQ.time.second,1],[gQ.time.second,5],[gQ.time.second,15],[gQ.time.second,30],[gQ.time.minute,1],[gQ.time.minute,5],[gQ.time.minute,15],[gQ.time.minute,30],[gQ.time.hour,1],[gQ.time.hour,3],[gQ.time.hour,6],[gQ.time.hour,12],[gQ.time.day,1],[gQ.time.day,2],[gQ.time.week,1],[gQ.time.month,1],[gQ.time.month,3],[gQ.time.year,1]];
var fb=[[gQ.time.format("%Y"),ae],[gQ.time.format("%B"),function(e){return e.getMonth()
}],[gQ.time.format("%b %d"),function(e){return e.getDate()!=1
}],[gQ.time.format("%a %d"),function(e){return e.getDay()&&e.getDate()!=1
}],[gQ.time.format("%I %p"),function(e){return e.getHours()
}],[gQ.time.format("%I:%M"),function(e){return e.getMinutes()
}],[gQ.time.format(":%S"),function(e){return e.getSeconds()
}],[gQ.time.format(".%L"),function(e){return e.getMilliseconds()
}]];
var cm=gQ.scale.linear(),R=cG(fb);
cp.year=function(hC,e){return cm.domain(hC.map(gD)).ticks(e).map(dJ)
};
gQ.time.scale=function(){return bd(gQ.scale.linear(),cp,R)
};
var hl=cp.map(function(e){return[e[0].utc,e[1]]
});
var b3=[[gQ.time.format.utc("%Y"),ae],[gQ.time.format.utc("%B"),function(e){return e.getUTCMonth()
}],[gQ.time.format.utc("%b %d"),function(e){return e.getUTCDate()!=1
}],[gQ.time.format.utc("%a %d"),function(e){return e.getUTCDay()&&e.getUTCDate()!=1
}],[gQ.time.format.utc("%I %p"),function(e){return e.getUTCHours()
}],[gQ.time.format.utc("%I:%M"),function(e){return e.getUTCMinutes()
}],[gQ.time.format.utc(":%S"),function(e){return e.getUTCSeconds()
}],[gQ.time.format.utc(".%L"),function(e){return e.getUTCMilliseconds()
}]];
var eH=cG(b3);
function cQ(hC){var e=new Date(Date.UTC(hC,0,1));
e.setUTCFullYear(hC);
return e
}function fS(hD){var hE=hD.getUTCFullYear(),hC=cQ(hE),e=cQ(hE+1);
return hE+(hD-hC)/(e-hC)
}hl.year=function(hC,e){return cm.domain(hC.map(fS)).ticks(e).map(cQ)
};
gQ.time.scale.utc=function(){return bd(gQ.scale.linear(),hl,eH)
};
gQ.text=W(function(e){return e.responseText
});
gQ.json=function(e,hC){return ho(e,"application/json",du,hC)
};
function du(e){return JSON.parse(e.responseText)
}gQ.html=function(e,hC){return ho(e,"text/html",hA,hC)
};
function hA(hC){var e=bA.createRange();
e.selectNode(bA.body);
return e.createContextualFragment(hC.responseText)
}gQ.xml=W(function(e){return e.responseXML
});
return gQ
}();(function(){var c=window.nv||{};
c.version="0.0.1a";
c.dev=true;
window.nv=c;
c.tooltip={};
c.utils={};
c.models={};
c.charts={};
c.graphs=[];
c.logs={};
c.dispatch=d3.dispatch("render_start","render_end");
if(c.dev){c.dispatch.on("render_start",function(f){c.logs.startTime=+new Date()
});
c.dispatch.on("render_end",function(f){c.logs.endTime=+new Date();
c.logs.totalTime=c.logs.endTime-c.logs.startTime;
c.log("total",c.logs.totalTime)
})
}c.log=function(){if(c.dev&&console.log&&console.log.apply){console.log.apply(console,arguments)
}else{if(c.dev&&console.log&&Function.prototype.bind){var e=Function.prototype.bind.call(console.log,console);
e.apply(console,arguments)
}}return arguments[arguments.length-1]
};
c.render=function d(e){e=e||1;
c.render.active=true;
c.dispatch.render_start();
setTimeout(function(){var g,h;
for(var f=0;
f<e&&(h=c.render.queue[f]);
f++){g=h.generate();
if(typeof h.callback==typeof(Function)){h.callback(g)
}c.graphs.push(g)
}c.render.queue.splice(0,f);
if(c.render.queue.length){setTimeout(arguments.callee,0)
}else{c.render.active=false;
c.dispatch.render_end()
}},0)
};
c.render.active=false;
c.render.queue=[];
c.addGraph=function(e){if(typeof arguments[0]===typeof(Function)){e={generate:arguments[0],callback:arguments[1]}
}c.render.queue.push(e);
if(!c.render.active){c.render()
}};
c.identity=function(e){return e
};
c.strip=function(e){return e.replace(/(\s|&)/g,"")
};
function b(f,e){return(new Date(e,f+1,0)).getDate()
}function a(g,f,e){return function(l,j,i){var m=g(l),n=[];
if(m<l){f(m)
}if(i>1){while(m<j){var h=new Date(+m);
if((e(h)%i===0)){n.push(h)
}f(m)
}}else{while(m<j){n.push(new Date(+m));
f(m)
}}return n
}
}d3.time.monthEnd=function(e){return new Date(e.getFullYear(),e.getMonth(),0)
};
d3.time.monthEnds=a(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1);
e.setDate(b(e.getMonth()+1,e.getFullYear()))
},function(e){return e.getMonth()
});
(function(){var e=window.nv.tooltip={};
e.show=function(l,v,j,t,p,y){var q=document.createElement("div");
q.className="nvtooltip "+(y?y:"xy-tooltip");
j=j||"s";
t=t||20;
var o=p;
if(!p||p.tagName.match(/g|svg/i)){o=document.getElementsByTagName("body")[0]
}q.innerHTML=v;
q.style.left=0;
q.style.top=0;
q.style.opacity=0;
o.appendChild(q);
var s=parseInt(q.offsetHeight),u=parseInt(q.offsetWidth),z=c.utils.windowSize().width,n=c.utils.windowSize().height,g=window.scrollY,w=window.scrollX,i,r;
n=window.innerWidth>=document.body.scrollWidth?n:n-16;
z=window.innerHeight>=document.body.scrollHeight?z:z-16;
var m=function(A){var B=r;
do{if(!isNaN(A.offsetTop)){B+=(A.offsetTop)
}}while(A=A.offsetParent);
return B
};
var x=function(A){var B=i;
do{if(!isNaN(A.offsetLeft)){B+=(A.offsetLeft)
}}while(A=A.offsetParent);
return B
};
switch(j){case"e":i=l[0]-u-t;
r=l[1]-(s/2);
var f=x(q);
var h=m(q);
if(f<w){i=l[0]+t>w?l[0]+t:w-f+i
}if(h<g){r=g-h+r
}if(h+s>g+n){r=g+n-h+r-s
}break;
case"w":i=l[0]+t;
r=l[1]-(s/2);
if(f+u>z){i=l[0]-u-t
}if(h<g){r=g+5
}if(h+s>g+n){r=g-s-5
}break;
case"n":i=l[0]-(u/2)-5;
r=l[1]+t;
var f=x(q);
var h=m(q);
if(f<w){i=w+5
}if(f+u>z){i=i-u/2+5
}if(h+s>g+n){r=g+n-h+r-s
}break;
case"s":i=l[0]-(u/2);
r=l[1]-s-t;
var f=x(q);
var h=m(q);
if(f<w){i=w+5
}if(f+u>z){i=i-u/2+5
}if(g>h){r=g
}break
}q.style.left=i+"px";
q.style.top=r+"px";
q.style.opacity=1;
q.style.position="absolute";
q.style.pointerEvents="none";
return q
};
e.cleanup=function(){var f=document.getElementsByClassName("nvtooltip");
var g=[];
while(f.length){g.push(f[0]);
f[0].style.transitionDelay="0 !important";
f[0].style.opacity=0;
f[0].className="nvtooltip-pending-removal"
}setTimeout(function(){while(g.length){var h=g.pop();
h.parentNode.removeChild(h)
}},500)
}
})();
c.utils.windowSize=function(){var e={width:640,height:480};
if(document.body&&document.body.offsetWidth){e.width=document.body.offsetWidth;
e.height=document.body.offsetHeight
}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){e.width=document.documentElement.offsetWidth;
e.height=document.documentElement.offsetHeight
}if(window.innerWidth&&window.innerHeight){e.width=window.innerWidth;
e.height=window.innerHeight
}return(e)
};
c.utils.windowResize=function(e){var f=window.onresize;
window.onresize=function(g){if(typeof f=="function"){f(g)
}e(g)
}
};
c.utils.getColor=function(e){if(!arguments.length){return c.utils.defaultColor()
}if(Object.prototype.toString.call(e)==="[object Array]"){return function(g,f){return g.color||e[f%e.length]
}
}else{return e
}};
c.utils.defaultColor=function(){var e=d3.scale.category20().range();
return function(g,f){return g.color||e[f%e.length]
}
};
c.utils.customTheme=function(h,f,g){f=f||function(i){return i.key
};
g=g||d3.scale.category20().range();
var e=g.length;
return function(l,i){var j=f(l);
if(!e){e=g.length
}if(typeof h[j]!=="undefined"){return(typeof h[j]==="function")?h[j]():h[j]
}else{return g[--e]
}}
};
c.utils.pjax=function(e,f){d3.selectAll(e).on("click",function(){history.pushState(this.href,this.textContent,this.href);
g(this.href);
d3.event.preventDefault()
});
function g(h){d3.html(h,function(i){var j=d3.select(f).node();
j.parentNode.replaceChild(d3.select(i).select(f).node(),j);
c.utils.pjax(e,f)
})
}d3.select(window).on("popstate",function(){if(d3.event.state){g(d3.event.state)
}})
};
c.utils.calcApproxTextWidth=function(e){if(e instanceof d3.selection){var g=parseInt(e.style("font-size").replace("px",""));
var f=e.text().length;
return f*g*0.5
}return 0
};
c.models.axis=function(){var j=d3.svg.axis();
var n={top:0,right:0,bottom:0,left:0},g=75,t=60,m=d3.scale.linear(),o=null,i=true,l=true,f=0,h=true,p=false,e=false,s=null;
j.scale(m).orient("bottom").tickFormat(function(u){return u
});
var q;
function r(u){u.each(function(G){var x=d3.select(this);
var z=x.selectAll("g.nv-wrap.nv-axis").data([G]);
var C=z.enter().append("g").attr("class","nvd3 nv-wrap nv-axis");
var v=C.append("g");
var I=z.select("g");
if(s!==null){j.ticks(s)
}else{if(j.orient()=="top"||j.orient()=="bottom"){j.ticks(Math.abs(m.range()[1]-m.range()[0])/100)
}}d3.transition(I).call(j);
q=q||j.scale();
var B=j.tickFormat();
if(B==null){B=q.tickFormat()
}var A=I.selectAll("text.nv-axislabel").data([o||null]);
A.exit().remove();
switch(j.orient()){case"top":A.enter().append("text").attr("class","nv-axislabel");
var K=(m.range().length==2)?m.range()[1]:(m.range()[m.range().length-1]+(m.range()[1]-m.range()[0]));
A.attr("text-anchor","middle").attr("y",0).attr("x",K/2);
if(i){var H=z.selectAll("g.nv-axisMaxMin").data(m.domain());
H.enter().append("g").attr("class","nv-axisMaxMin").append("text");
H.exit().remove();
H.attr("transform",function(L,w){return"translate("+m(L)+",0)"
}).select("text").attr("dy","0em").attr("y",-j.tickPadding()).attr("text-anchor","middle").text(function(M,L){var w=B(M);
return(""+w).match("NaN")?"":w
});
d3.transition(H).attr("transform",function(L,w){return"translate("+m.range()[w]+",0)"
})
}break;
case"bottom":var F=36;
var y=30;
var D=I.selectAll("g").select("text");
if(f%360){D.each(function(M,w){var L=this.getBBox().width;
if(L>y){y=L
}});
var J=Math.abs(Math.sin(f*Math.PI/180));
var F=(J?J*y:y)+30;
D.attr("transform",function(M,L,w){return"rotate("+f+" 0,0)"
}).attr("text-anchor",f%360>0?"start":"end")
}A.enter().append("text").attr("class","nv-axislabel");
var K=(m.range().length==2)?m.range()[1]:(m.range()[m.range().length-1]+(m.range()[1]-m.range()[0]));
A.attr("text-anchor","middle").attr("y",F).attr("x",K/2);
if(i){var H=z.selectAll("g.nv-axisMaxMin").data([m.domain()[0],m.domain()[m.domain().length-1]]);
H.enter().append("g").attr("class","nv-axisMaxMin").append("text");
H.exit().remove();
H.attr("transform",function(L,w){return"translate("+(m(L)+(e?m.rangeBand()/2:0))+",0)"
}).select("text").attr("dy",".71em").attr("y",j.tickPadding()).attr("transform",function(M,L,w){return"rotate("+f+" 0,0)"
}).attr("text-anchor",f?(f%360>0?"start":"end"):"middle").text(function(M,L){var w=B(M);
return(""+w).match("NaN")?"":w
});
d3.transition(H).attr("transform",function(L,w){return"translate("+(m(L)+(e?m.rangeBand()/2:0))+",0)"
})
}if(p){D.attr("transform",function(L,w){return"translate(0,"+(w%2==0?"0":"12")+")"
})
}break;
case"right":A.enter().append("text").attr("class","nv-axislabel");
A.attr("text-anchor",h?"middle":"begin").attr("transform",h?"rotate(90)":"").attr("y",h?(-Math.max(n.right,g)+12):-10).attr("x",h?(m.range()[0]/2):j.tickPadding());
if(i){var H=z.selectAll("g.nv-axisMaxMin").data(m.domain());
H.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0);
H.exit().remove();
H.attr("transform",function(L,w){return"translate(0,"+m(L)+")"
}).select("text").attr("dy",".32em").attr("y",0).attr("x",j.tickPadding()).attr("text-anchor","start").text(function(M,L){var w=B(M);
return(""+w).match("NaN")?"":w
});
d3.transition(H).attr("transform",function(L,w){return"translate(0,"+m.range()[w]+")"
}).select("text").style("opacity",1)
}break;
case"left":A.enter().append("text").attr("class","nv-axislabel");
A.attr("text-anchor",h?"middle":"end").attr("transform",h?"rotate(-90)":"").attr("y",h?(-Math.max(n.left,g)+12):-10).attr("x",h?(-m.range()[0]/2):-j.tickPadding());
if(i){var H=z.selectAll("g.nv-axisMaxMin").data(m.domain());
H.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0);
H.exit().remove();
H.attr("transform",function(L,w){return"translate(0,"+q(L)+")"
}).select("text").attr("dy",".32em").attr("y",0).attr("x",-j.tickPadding()).attr("text-anchor","end").text(function(M,L){var w=B(M);
return(""+w).match("NaN")?"":w
});
d3.transition(H).attr("transform",function(L,w){return"translate(0,"+m.range()[w]+")"
}).select("text").style("opacity",1)
}break
}A.text(function(w){return w
});
if(i&&(j.orient()==="left"||j.orient()==="right")){I.selectAll("g").each(function(L,w){d3.select(this).select("text").attr("opacity",1);
if(m(L)<m.range()[1]+10||m(L)>m.range()[0]-10){if(L>1e-10||L<-1e-10){d3.select(this).attr("opacity",0)
}d3.select(this).select("text").attr("opacity",0)
}});
if(m.domain()[0]==m.domain()[1]&&m.domain()[0]==0){z.selectAll("g.nv-axisMaxMin").style("opacity",function(L,w){return !w?1:0
})
}}if(i&&(j.orient()==="top"||j.orient()==="bottom")){var E=[];
z.selectAll("g.nv-axisMaxMin").each(function(M,w){try{if(w){E.push(m(M)-this.getBBox().width-4)
}else{E.push(m(M)+this.getBBox().width+4)
}}catch(L){if(w){E.push(m(M)-4)
}else{E.push(m(M)+4)
}}});
I.selectAll("g").each(function(L,w){if(m(L)<E[0]||m(L)>E[1]){if(L>1e-10||L<-1e-10){d3.select(this).remove()
}else{d3.select(this).select("text").remove()
}}})
}if(l){I.selectAll(".tick").filter(function(w){return !parseFloat(Math.round(w.__data__*100000)/1000000)&&(w.__data__!==undefined)
}).classed("zero",true)
}q=m.copy()
});
return r
}r.axis=j;
d3.rebind(r,j,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat");
d3.rebind(r,m,"domain","range","rangeBand","rangeBands");
r.margin=function(u){if(!arguments.length){return n
}n.top=typeof u.top!="undefined"?u.top:n.top;
n.right=typeof u.right!="undefined"?u.right:n.right;
n.bottom=typeof u.bottom!="undefined"?u.bottom:n.bottom;
n.left=typeof u.left!="undefined"?u.left:n.left;
return r
};
r.width=function(u){if(!arguments.length){return g
}g=u;
return r
};
r.ticks=function(u){if(!arguments.length){return s
}s=u;
return r
};
r.height=function(u){if(!arguments.length){return t
}t=u;
return r
};
r.axisLabel=function(u){if(!arguments.length){return o
}o=u;
return r
};
r.showMaxMin=function(u){if(!arguments.length){return i
}i=u;
return r
};
r.highlightZero=function(u){if(!arguments.length){return l
}l=u;
return r
};
r.scale=function(u){if(!arguments.length){return m
}m=u;
j.scale(m);
e=typeof m.rangeBands==="function";
d3.rebind(r,m,"domain","range","rangeBand","rangeBands");
return r
};
r.rotateYLabel=function(u){if(!arguments.length){return h
}h=u;
return r
};
r.rotateLabels=function(u){if(!arguments.length){return f
}f=u;
return r
};
r.staggerLabels=function(u){if(!arguments.length){return p
}p=u;
return r
};
return r
};
c.models.bullet=function(){var j={top:0,right:0,bottom:0,left:0},m="left",p=false,f=function(s){return s.ranges
},l=function(s){return s.markers
},e=function(s){return s.measures
},n=[0],g=380,r=30,h=null,i=c.utils.getColor(["#1f77b4"]),o=d3.dispatch("elementMouseover","elementMouseout");
function q(s){s.each(function(N,J){var t=g-j.left-j.right,u=r-j.top-j.bottom,G=d3.select(this);
var O=f.call(this,N,J).slice().sort(d3.descending),H=l.call(this,N,J).slice().sort(d3.descending),F=e.call(this,N,J).slice().sort(d3.descending);
var L=d3.scale.linear().domain(d3.extent(d3.merge([n,O]))).range(p?[t,0]:[0,t]);
var M=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(L.range());
this.__chart__=L;
var w=d3.min(O),y=d3.max(O),v=O[1];
var A=G.selectAll("g.nv-wrap.nv-bullet").data([N]);
var x=A.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet");
var I=x.append("g");
var K=A.select("g");
I.append("rect").attr("class","nv-range nv-rangeMax");
I.append("rect").attr("class","nv-range nv-rangeAvg");
I.append("rect").attr("class","nv-range nv-rangeMin");
I.append("rect").attr("class","nv-measure");
I.append("path").attr("class","nv-markerTriangle");
A.attr("transform","translate("+j.left+","+j.top+")");
var E=function(P){return Math.abs(M(P)-M(0))
},C=function(P){return Math.abs(L(P)-L(0))
};
var D=function(P){return P<0?M(P):M(0)
},B=function(P){return P<0?L(P):L(0)
};
K.select("rect.nv-rangeMax").attr("height",u).attr("width",C(y>0?y:w)).attr("x",B(y>0?y:w)).datum(y>0?y:w);
K.select("rect.nv-rangeAvg").attr("height",u).attr("width",C(v)).attr("x",B(v)).datum(v);
K.select("rect.nv-rangeMin").attr("height",u).attr("width",C(y)).attr("x",B(y)).attr("width",C(y>0?w:y)).attr("x",B(y>0?w:y)).datum(y>0?w:y);
K.select("rect.nv-measure").style("fill",i).attr("height",u/3).attr("y",u/3).attr("width",F<0?L(0)-L(F[0]):L(F[0])-L(0)).attr("x",B(F)).on("mouseover",function(){o.elementMouseover({value:F[0],label:"Current",pos:[L(F[0]),u/2]})
}).on("mouseout",function(){o.elementMouseout({value:F[0],label:"Current"})
});
var z=u/6;
if(H[0]){K.selectAll("path.nv-markerTriangle").attr("transform",function(P){return"translate("+L(H[0])+","+(u/2)+")"
}).attr("d","M0,"+z+"L"+z+","+(-z)+" "+(-z)+","+(-z)+"Z").on("mouseover",function(){o.elementMouseover({value:H[0],label:"Previous",pos:[L(H[0]),u/2]})
}).on("mouseout",function(){o.elementMouseout({value:H[0],label:"Previous"})
})
}else{K.selectAll("path.nv-markerTriangle").remove()
}A.selectAll(".nv-range").on("mouseover",function(R,Q){var P=!Q?"Maximum":Q==1?"Mean":"Minimum";
o.elementMouseover({value:R,label:P,pos:[L(R),u/2]})
}).on("mouseout",function(R,Q){var P=!Q?"Maximum":Q==1?"Mean":"Minimum";
o.elementMouseout({value:R,label:P})
})
});
return q
}q.dispatch=o;
q.orient=function(s){if(!arguments.length){return m
}m=s;
p=m=="right"||m=="bottom";
return q
};
q.ranges=function(s){if(!arguments.length){return f
}f=s;
return q
};
q.markers=function(s){if(!arguments.length){return l
}l=s;
return q
};
q.measures=function(s){if(!arguments.length){return e
}e=s;
return q
};
q.forceX=function(s){if(!arguments.length){return n
}n=s;
return q
};
q.width=function(s){if(!arguments.length){return g
}g=s;
return q
};
q.height=function(s){if(!arguments.length){return r
}r=s;
return q
};
q.margin=function(s){if(!arguments.length){return j
}j.top=typeof s.top!="undefined"?s.top:j.top;
j.right=typeof s.right!="undefined"?s.right:j.right;
j.bottom=typeof s.bottom!="undefined"?s.bottom:j.bottom;
j.left=typeof s.left!="undefined"?s.left:j.left;
return q
};
q.tickFormat=function(s){if(!arguments.length){return h
}h=s;
return q
};
q.color=function(s){if(!arguments.length){return i
}i=c.utils.getColor(s);
return q
};
return q
};
c.models.bulletChart=function(){var e=c.models.bullet();
var m="left",o=false,j={top:5,right:40,bottom:20,left:120},g=function(v){return v.ranges
},l=function(v){return v.markers
},f=function(v){return v.measures
},h=null,t=55,i=null,q=true,u=function(w,v,B,A,z){return"<h3>"+v+"</h3><p>"+B+"</p>"
},s="No Data Available.",n=d3.dispatch("tooltipShow","tooltipHide");
var r=function(z,v){var y=z.pos[0]+(v.offsetLeft||0)+j.left,x=z.pos[1]+(v.offsetTop||0)+j.top,w=u(z.key,z.label,z.value,z,p);
c.tooltip.show([y,x],w,z.value<0?"e":"w",null,v)
};
function p(v){v.each(function(Q,K){var G=d3.select(this);
var w=(h||parseInt(G.style("width"))||960)-j.left-j.right,x=t-j.top-j.bottom,A=this;
p.update=function(){p(v)
};
p.container=this;
if(!Q||!g.call(this,Q,K)){var C=G.selectAll(".nv-noData").data([s]);
C.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
C.attr("x",j.left+w/2).attr("y",18+j.top+x/2).text(function(U){return U
});
return p
}else{G.selectAll(".nv-noData").remove()
}var T=g.call(this,Q,K).slice().sort(d3.descending),I=l.call(this,Q,K).slice().sort(d3.descending),E=f.call(this,Q,K).slice().sort(d3.descending);
var B=G.selectAll("g.nv-wrap.nv-bulletChart").data([Q]);
var y=B.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart");
var J=y.append("g");
var N=B.select("g");
J.append("g").attr("class","nv-bulletWrap");
J.append("g").attr("class","nv-titles");
B.attr("transform","translate("+j.left+","+j.top+")");
var O=d3.scale.linear().domain([0,Math.max(T[0],I[0],E[0])]).range(o?[w,0]:[0,w]);
var P=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(O.range());
this.__chart__=O;
var F=function(U){return Math.abs(P(U)-P(0))
},D=function(U){return Math.abs(O(U)-O(0))
};
var S=J.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(t-j.top-j.bottom)/2+")");
S.append("text").attr("class","nv-title").text(function(U){return U.title
});
S.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(U){return U.subtitle
});
e.width(w).height(x);
var R=N.select(".nv-bulletWrap");
d3.transition(R).call(e);
var M=i||O.tickFormat(w/100);
var L=N.selectAll("g.nv-tick").data(O.ticks(w/50),function(U){return this.textContent||M(U)
});
var H=L.enter().append("g").attr("class","nv-tick").attr("transform",function(U){return"translate("+P(U)+",0)"
}).style("opacity",0.000001);
H.append("line").attr("y1",x).attr("y2",x*7/6);
H.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",x*7/6).text(M);
var z=d3.transition(L).attr("transform",function(U){return"translate("+O(U)+",0)"
}).style("opacity",1);
z.select("line").attr("y1",x).attr("y2",x*7/6);
z.select("text").attr("y",x*7/6);
d3.transition(L.exit()).attr("transform",function(U){return"translate("+O(U)+",0)"
}).style("opacity",0.000001).remove();
n.on("tooltipShow",function(U){U.key=Q.title;
if(q){r(U,A.parentNode)
}})
});
d3.timer.flush();
return p
}e.dispatch.on("elementMouseover.tooltip",function(v){n.tooltipShow(v)
});
e.dispatch.on("elementMouseout.tooltip",function(v){n.tooltipHide(v)
});
n.on("tooltipHide",function(){if(q){c.tooltip.cleanup()
}});
p.dispatch=n;
p.bullet=e;
d3.rebind(p,e,"color");
p.orient=function(v){if(!arguments.length){return m
}m=v;
o=m=="right"||m=="bottom";
return p
};
p.ranges=function(v){if(!arguments.length){return g
}g=v;
return p
};
p.markers=function(v){if(!arguments.length){return l
}l=v;
return p
};
p.measures=function(v){if(!arguments.length){return f
}f=v;
return p
};
p.width=function(v){if(!arguments.length){return h
}h=v;
return p
};
p.height=function(v){if(!arguments.length){return t
}t=v;
return p
};
p.margin=function(v){if(!arguments.length){return j
}j.top=typeof v.top!="undefined"?v.top:j.top;
j.right=typeof v.right!="undefined"?v.right:j.right;
j.bottom=typeof v.bottom!="undefined"?v.bottom:j.bottom;
j.left=typeof v.left!="undefined"?v.left:j.left;
return p
};
p.tickFormat=function(v){if(!arguments.length){return i
}i=v;
return p
};
p.tooltips=function(v){if(!arguments.length){return q
}q=v;
return p
};
p.tooltipContent=function(v){if(!arguments.length){return u
}u=v;
return p
};
p.noData=function(v){if(!arguments.length){return s
}s=v;
return p
};
return p
};
c.models.cumulativeLineChart=function(){var f=c.models.line(),r=c.models.axis(),e=c.models.axis(),h=c.models.legend(),v=c.models.legend();
var z={top:30,right:30,bottom:50,left:60},D=c.utils.defaultColor(),C=null,A=null,E=true,g=true,F=true,q=true,n=function(J,I,M,L,K){return"<h3>"+J+"</h3><p>"+M+" at "+I+"</p>"
},t,s,B=f.id(),m={index:0,rescaleY:q},o=null,l="No Data Available.",i=function(x){return x.average
},H=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");
r.orient("bottom").tickPadding(7);
e.orient("left");
var u=d3.scale.linear(),p={i:0,x:0};
var j=function(N,J){var M=N.pos[0]+(J.offsetLeft||0),L=N.pos[1]+(J.offsetTop||0),I=r.tickFormat()(f.x()(N.point,N.pointIndex)),O=e.tickFormat()(f.y()(N.point,N.pointIndex)),K=n(N.series.key,I,O,N,w);
c.tooltip.show([M,L],K,null,null,J)
};
function w(x){x.each(function(ac){var Q=d3.select(this).classed("nv-chart-"+B,true),N=this;
var I=(C||parseInt(Q.style("width"))||960)-z.left-z.right,K=(A||parseInt(Q.style("height"))||400)-z.top-z.bottom;
w.update=function(){Q.transition().call(w)
};
w.container=this;
m.disabled=ac.map(function(ae){return !!ae.disabled
});
if(!o){var ad;
o={};
for(ad in m){if(m[ad] instanceof Array){o[ad]=m[ad].slice(0)
}else{o[ad]=m[ad]
}}}var ab=d3.behavior.drag().on("dragstart",Z).on("drag",aa).on("dragend",V);
function Z(af,ae){d3.select(w.container).style("cursor","ew-resize")
}function aa(af,ae){p.x=d3.event.x;
p.i=Math.round(u.invert(p.x));
T()
}function V(af,ae){d3.select(w.container).style("cursor","auto");
m.index=p.i;
H.stateChange(m)
}if(!ac||!ac.length||!ac.filter(function(ae){return ae.values.length
}).length){var P=Q.selectAll(".nv-noData").data([l]);
P.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
P.attr("x",z.left+I/2).attr("y",z.top+K/2).text(function(ae){return ae
});
return w
}else{Q.selectAll(".nv-noData").remove()
}t=f.xScale();
s=f.yScale();
if(!q){var J=ac.filter(function(ae){return !ae.disabled
}).map(function(ag,af){var ae=d3.extent(ag.values,f.y());
if(ae[0]<-0.95){ae[0]=-0.95
}return[(ae[0]-ae[1])/(1+ae[1]),(ae[1]-ae[0])/(1+ae[0])]
});
var L=[d3.min(J,function(ae){return ae[0]
}),d3.max(J,function(ae){return ae[1]
})];
f.yDomain(L)
}else{f.yDomain(null)
}u.domain([0,ac[0].values.length-1]).range([0,I]).clamp(true);
var ac=G(p.i,ac);
var O=Q.selectAll("g.nv-wrap.nv-cumulativeLine").data([ac]);
var S=O.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g");
var Y=O.select("g");
S.append("g").attr("class","nv-x nv-axis");
S.append("g").attr("class","nv-y nv-axis");
S.append("g").attr("class","nv-background");
S.append("g").attr("class","nv-linesWrap");
S.append("g").attr("class","nv-avgLinesWrap");
S.append("g").attr("class","nv-legendWrap");
S.append("g").attr("class","nv-controlsWrap");
if(E){h.width(I);
Y.select(".nv-legendWrap").datum(ac).call(h);
if(z.top!=h.height()){z.top=h.height();
K=(A||parseInt(Q.style("height"))||400)-z.top-z.bottom
}Y.select(".nv-legendWrap").attr("transform","translate(0,"+(-z.top)+")")
}if(F){var M=[{key:"Re-scale y-axis",disabled:!q}];
v.width(140).color(["#444","#444","#444"]);
Y.select(".nv-controlsWrap").datum(M).attr("transform","translate(0,"+(-z.top)+")").call(v)
}O.attr("transform","translate("+z.left+","+z.top+")");
var y=ac.filter(function(ae){return ae.tempDisabled
});
O.select(".tempDisabled").remove();
if(y.length){O.append("text").attr("class","tempDisabled").attr("x",I/2).attr("y","-.71em").style("text-anchor","end").text(y.map(function(ae){return ae.key
}).join(", ")+" values cannot be calculated for this time period.")
}S.select(".nv-background").append("rect");
Y.select(".nv-background rect").attr("width",I).attr("height",K);
f.y(function(ae){return ae.display.y
}).width(I).height(K).color(ac.map(function(af,ae){return af.color||D(af,ae)
}).filter(function(af,ae){return !ac[ae].disabled&&!ac[ae].tempDisabled
}));
var U=Y.select(".nv-linesWrap").datum(ac.filter(function(ae){return !ae.disabled&&!ae.tempDisabled
}));
U.call(f);
ac.forEach(function(af,ae){af.seriesIndex=ae
});
var X=ac.filter(function(ae){return !ae.disabled&&!!i(ae)
});
var W=Y.select(".nv-avgLinesWrap").selectAll("line").data(X,function(ae){return ae.key
});
W.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(af,ae){return f.color()(af,af.seriesIndex)
}).attr("x1",0).attr("x2",I).attr("y1",function(ae){return s(i(ae))
}).attr("y2",function(ae){return s(i(ae))
});
W.attr("x1",0).attr("x2",I).attr("y1",function(ae){return s(i(ae))
}).attr("y2",function(ae){return s(i(ae))
});
W.exit().remove();
var R=U.selectAll(".nv-indexLine").data([p]);
R.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",0.5).call(ab);
R.attr("transform",function(ae){return"translate("+u(ae.i)+",0)"
}).attr("height",K);
r.scale(t).ticks(Math.min(ac[0].values.length,I/70)).tickSize(-K,0);
Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+s.range()[0]+")");
d3.transition(Y.select(".nv-x.nv-axis")).call(r);
e.scale(s).ticks(K/36).tickSize(-I,0);
d3.transition(Y.select(".nv-y.nv-axis")).call(e);
function T(){R.data([p]);
Q.call(w)
}Y.select(".nv-background rect").on("click",function(){p.x=d3.mouse(this)[0];
p.i=Math.round(u.invert(p.x));
m.index=p.i;
H.stateChange(m);
T()
});
f.dispatch.on("elementClick",function(ae){p.i=ae.pointIndex;
p.x=u(p.i);
m.index=p.i;
H.stateChange(m);
T()
});
v.dispatch.on("legendClick",function(af,ae){af.disabled=!af.disabled;
q=!af.disabled;
m.rescaleY=q;
H.stateChange(m);
w.update()
});
h.dispatch.on("legendClick",function(af,ae){af.disabled=!af.disabled;
if(!ac.filter(function(ag){return !ag.disabled
}).length){ac.map(function(ag){ag.disabled=false;
O.selectAll(".nv-series").classed("disabled",false);
return ag
})
}m.disabled=ac.map(function(ag){return !!ag.disabled
});
H.stateChange(m);
w.update()
});
h.dispatch.on("legendDblclick",function(ae){ac.forEach(function(af){af.disabled=true
});
ae.disabled=false;
m.disabled=ac.map(function(af){return !!af.disabled
});
H.stateChange(m);
w.update()
});
H.on("tooltipShow",function(ae){if(g){j(ae,N.parentNode)
}});
H.on("changeState",function(ae){if(typeof ae.disabled!=="undefined"){ac.forEach(function(ag,af){ag.disabled=ae.disabled[af]
});
m.disabled=ae.disabled
}if(typeof ae.index!=="undefined"){p.i=ae.index;
p.x=u(p.i);
m.index=ae.index;
R.data([p])
}if(typeof ae.rescaleY!=="undefined"){q=ae.rescaleY
}w.update()
})
});
return w
}f.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];
H.tooltipShow(x)
});
f.dispatch.on("elementMouseout.tooltip",function(x){H.tooltipHide(x)
});
H.on("tooltipHide",function(){if(g){c.tooltip.cleanup()
}});
w.dispatch=H;
w.lines=f;
w.legend=h;
w.xAxis=r;
w.yAxis=e;
d3.rebind(w,f,"defined","isArea","x","y","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id");
w.margin=function(x){if(!arguments.length){return z
}z.top=typeof x.top!="undefined"?x.top:z.top;
z.right=typeof x.right!="undefined"?x.right:z.right;
z.bottom=typeof x.bottom!="undefined"?x.bottom:z.bottom;
z.left=typeof x.left!="undefined"?x.left:z.left;
return w
};
w.width=function(x){if(!arguments.length){return C
}C=x;
return w
};
w.height=function(x){if(!arguments.length){return A
}A=x;
return w
};
w.color=function(x){if(!arguments.length){return D
}D=c.utils.getColor(x);
h.color(D);
return w
};
w.rescaleY=function(x){if(!arguments.length){return q
}q=x;
return q
};
w.showControls=function(x){if(!arguments.length){return F
}F=x;
return w
};
w.showLegend=function(x){if(!arguments.length){return E
}E=x;
return w
};
w.tooltips=function(x){if(!arguments.length){return g
}g=x;
return w
};
w.tooltipContent=function(x){if(!arguments.length){return n
}n=x;
return w
};
w.state=function(x){if(!arguments.length){return m
}m=x;
return w
};
w.defaultState=function(x){if(!arguments.length){return o
}o=x;
return w
};
w.noData=function(x){if(!arguments.length){return l
}l=x;
return w
};
w.average=function(x){if(!arguments.length){return i
}i=x;
return w
};
function G(x,y){return y.map(function(I,K){if(!I.values){return I
}var J=f.y()(I.values[x],x);
if(J<-0.95){I.tempDisabled=true;
return I
}I.tempDisabled=false;
I.values=I.values.map(function(L,M){L.display={y:(f.y()(L,M)-J)/(1+J)};
return L
});
return I
})
}return w
};
c.models.discreteBar=function(){var l={top:0,right:0,bottom:0,left:0},o=960,m=500,n=Math.floor(Math.random()*10000),i=d3.scale.ordinal(),h=d3.scale.linear(),t=function(x){return x.x
},s=function(x){return x.y
},f=[0],r=c.utils.defaultColor(),v=false,g=d3.format(",.2f"),q,p,z=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),w="discreteBar";
var u,e;
function j(x){x.each(function(H){var K=o-l.left-l.right,D=m-l.top-l.bottom,A=d3.select(this);
H=H.map(function(M,L){M.values=M.values.map(function(N){N.series=L;
return N
});
return M
});
var C=(q&&p)?[]:H.map(function(L){return L.values.map(function(N,M){return{x:t(N,M),y:s(N,M),y0:N.y0}
})
});
i.domain(q||d3.merge(C).map(function(L){return L.x
})).rangeBands([0,K],0.1);
h.domain(p||d3.extent(d3.merge(C).map(function(L){return L.y
}).concat(f)));
if(v){h.range([D-(h.domain()[0]<0?12:0),h.domain()[1]>0?12:0])
}else{h.range([D,0])
}u=u||i;
e=e||h.copy().range([h(0),h(0)]);
var B=A.selectAll("g.nv-wrap.nv-discretebar").data([H]);
var F=B.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar");
var y=F.append("g");
var I=B.select("g");
y.append("g").attr("class","nv-groups");
B.attr("transform","translate("+l.left+","+l.top+")");
var E=B.select(".nv-groups").selectAll(".nv-group").data(function(L){return L
},function(L){return L.key
});
E.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);
d3.transition(E.exit()).style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove();
E.attr("class",function(M,L){return"nv-group nv-series-"+L
}).classed("hover",function(L){return L.hover
});
d3.transition(E).style("stroke-opacity",1).style("fill-opacity",0.75);
var J=E.selectAll("g.nv-bar").data(function(L){return L.values
});
J.exit().remove();
var G=J.enter().append("g").attr("transform",function(N,M,L){return"translate("+(i(t(N,M))+i.rangeBand()*0.05)+", "+h(0)+")"
}).on("mouseover",function(M,L){d3.select(this).classed("hover",true);
z.elementMouseover({value:s(M,L),point:M,series:H[M.series],pos:[i(t(M,L))+(i.rangeBand()*(M.series+0.5)/H.length),h(s(M,L))],pointIndex:L,seriesIndex:M.series,e:d3.event})
}).on("mouseout",function(M,L){d3.select(this).classed("hover",false);
z.elementMouseout({value:s(M,L),point:M,series:H[M.series],pointIndex:L,seriesIndex:M.series,e:d3.event})
}).on("click",function(M,L){z.elementClick({value:s(M,L),point:M,series:H[M.series],pos:[i(t(M,L))+(i.rangeBand()*(M.series+0.5)/H.length),h(s(M,L))],pointIndex:L,seriesIndex:M.series,e:d3.event});
d3.event.stopPropagation()
}).on("dblclick",function(M,L){z.elementDblClick({value:s(M,L),point:M,series:H[M.series],pos:[i(t(M,L))+(i.rangeBand()*(M.series+0.5)/H.length),h(s(M,L))],pointIndex:L,seriesIndex:M.series,e:d3.event});
d3.event.stopPropagation()
});
G.append("rect").attr("height",0).attr("width",i.rangeBand()*0.9/H.length);
if(v){G.append("text").attr("text-anchor","middle");
J.select("text").attr("x",i.rangeBand()*0.9/2).attr("y",function(M,L){return s(M,L)<0?h(s(M,L))-h(0)+12:-4
}).text(function(M,L){return g(s(M,L))
})
}else{J.selectAll("text").remove()
}J.attr("class",function(M,L){return s(M,L)<0?"nv-bar negative":"nv-bar positive"
}).style("fill",function(M,L){return M.color||r(M,L)
}).style("stroke",function(M,L){return M.color||r(M,L)
}).select("rect").attr("class",w).attr("width",i.rangeBand()*0.9/H.length);
d3.transition(J).attr("transform",function(O,L){var N=i(t(O,L))+i.rangeBand()*0.05,M=s(O,L)<0?h(0):h(0)-h(s(O,L))<1?h(0)-1:h(s(O,L));
return"translate("+N+", "+M+")"
}).select("rect").attr("height",function(M,L){return Math.max(Math.abs(h(s(M,L))-h(0))||1)
});
u=i.copy();
e=h.copy()
});
return j
}j.dispatch=z;
j.x=function(x){if(!arguments.length){return t
}t=x;
return j
};
j.y=function(x){if(!arguments.length){return s
}s=x;
return j
};
j.margin=function(x){if(!arguments.length){return l
}l.top=typeof x.top!="undefined"?x.top:l.top;
l.right=typeof x.right!="undefined"?x.right:l.right;
l.bottom=typeof x.bottom!="undefined"?x.bottom:l.bottom;
l.left=typeof x.left!="undefined"?x.left:l.left;
return j
};
j.width=function(x){if(!arguments.length){return o
}o=x;
return j
};
j.height=function(x){if(!arguments.length){return m
}m=x;
return j
};
j.xScale=function(x){if(!arguments.length){return i
}i=x;
return j
};
j.yScale=function(x){if(!arguments.length){return h
}h=x;
return j
};
j.xDomain=function(x){if(!arguments.length){return q
}q=x;
return j
};
j.yDomain=function(x){if(!arguments.length){return p
}p=x;
return j
};
j.forceY=function(x){if(!arguments.length){return f
}f=x;
return j
};
j.color=function(x){if(!arguments.length){return r
}r=c.utils.getColor(x);
return j
};
j.id=function(x){if(!arguments.length){return n
}n=x;
return j
};
j.showValues=function(x){if(!arguments.length){return v
}v=x;
return j
};
j.valueFormat=function(x){if(!arguments.length){return g
}g=x;
return j
};
j.rectClass=function(x){if(!arguments.length){return w
}w=x;
return j
};
return j
};
c.models.discreteBarChart=function(){var s=c.models.discreteBar(),g=c.models.axis(),e=c.models.axis();
var h={top:15,right:10,bottom:50,left:60},f=null,t=null,i=c.utils.getColor(),j=false,n=true,u=function(w,v,B,A,z){return"<h3>"+v+"</h3><p>"+B+"</p>"
},p,o,r="No Data Available.",l=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate");
g.orient("bottom").highlightZero(false).showMaxMin(false).tickFormat(function(v){return v
});
e.orient("left").tickFormat(d3.format(",.1f"));
var q=function(C,w){var B=C.pos[0]+(w.offsetLeft||0),A=C.pos[1]+(w.offsetTop||0),v=g.tickFormat()(s.x()(C.point,C.pointIndex)),D=e.tickFormat()(s.y()(C.point,C.pointIndex)),z=u(C.series.key,v,D,C,m);
c.tooltip.show([B,A],z,C.value<0?"n":"s",null,w)
};
function m(v){v.each(function(D){var x=d3.select(this),G=this;
var H=(f||parseInt(x.style("width"))||960)-h.left-h.right,B=(t||parseInt(x.style("height"))||400)-h.top-h.bottom;
m.update=function(){l.beforeUpdate();
x.transition().call(m)
};
m.container=this;
if(!D||!D.length||!D.filter(function(I){return I.values.length
}).length){var y=x.selectAll(".nv-noData").data([r]);
y.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
y.attr("x",h.left+H/2).attr("y",h.top+B/2).text(function(I){return I
});
return m
}else{x.selectAll(".nv-noData").remove()
}p=s.xScale();
o=s.yScale();
var z=x.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([D]);
var w=z.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g");
var A=w.append("defs");
var E=z.select("g");
w.append("g").attr("class","nv-x nv-axis");
w.append("g").attr("class","nv-y nv-axis");
w.append("g").attr("class","nv-barsWrap");
E.attr("transform","translate("+h.left+","+h.top+")");
s.width(H).height(B);
var F=E.select(".nv-barsWrap").datum(D.filter(function(I){return !I.disabled
}));
d3.transition(F).call(s);
A.append("clipPath").attr("id","nv-x-label-clip-"+s.id()).append("rect");
E.select("#nv-x-label-clip-"+s.id()+" rect").attr("width",p.rangeBand()*(j?2:1)).attr("height",16).attr("x",-p.rangeBand()/(j?1:2));
g.scale(p).ticks(H/100).tickSize(-B,0);
E.select(".nv-x.nv-axis").attr("transform","translate(0,"+(o.range()[0]+((s.showValues()&&o.domain()[0]<0)?16:0))+")");
E.select(".nv-x.nv-axis").transition().duration(0).call(g);
var C=E.select(".nv-x.nv-axis").selectAll("g");
if(j){C.selectAll("text").attr("transform",function(K,J,I){return"translate(0,"+(I%2==0?"5":"17")+")"
})
}e.scale(o).ticks(B/36).tickSize(-H,0);
d3.transition(E.select(".nv-y.nv-axis")).call(e);
l.on("tooltipShow",function(I){if(n){q(I,G.parentNode)
}})
});
return m
}s.dispatch.on("elementMouseover.tooltip",function(v){v.pos=[v.pos[0]+h.left,v.pos[1]+h.top];
l.tooltipShow(v)
});
s.dispatch.on("elementMouseout.tooltip",function(v){l.tooltipHide(v)
});
l.on("tooltipHide",function(){if(n){c.tooltip.cleanup()
}});
m.dispatch=l;
m.discretebar=s;
m.xAxis=g;
m.yAxis=e;
d3.rebind(m,s,"x","y","xDomain","yDomain","forceX","forceY","id","showValues","valueFormat");
m.margin=function(v){if(!arguments.length){return h
}h.top=typeof v.top!="undefined"?v.top:h.top;
h.right=typeof v.right!="undefined"?v.right:h.right;
h.bottom=typeof v.bottom!="undefined"?v.bottom:h.bottom;
h.left=typeof v.left!="undefined"?v.left:h.left;
return m
};
m.width=function(v){if(!arguments.length){return f
}f=v;
return m
};
m.height=function(v){if(!arguments.length){return t
}t=v;
return m
};
m.color=function(v){if(!arguments.length){return i
}i=c.utils.getColor(v);
s.color(i);
return m
};
m.staggerLabels=function(v){if(!arguments.length){return j
}j=v;
return m
};
m.tooltips=function(v){if(!arguments.length){return n
}n=v;
return m
};
m.tooltipContent=function(v){if(!arguments.length){return u
}u=v;
return m
};
m.noData=function(v){if(!arguments.length){return r
}r=v;
return m
};
return m
};
c.models.distribution=function(){var h={top:0,right:0,bottom:0,left:0},e=400,o=8,f="x",l=function(p){return p[f]
},i=c.utils.defaultColor(),g=d3.scale.linear(),j;
var m;
function n(p){p.each(function(u){var v=e-(f==="x"?h.left+h.right:h.top+h.bottom),y=f=="x"?"y":"x",r=d3.select(this);
m=m||g;
var s=r.selectAll("g.nv-distribution").data([u]);
var t=s.enter().append("g").attr("class","nvd3 nv-distribution");
var q=t.append("g");
var w=s.select("g");
s.attr("transform","translate("+h.left+","+h.top+")");
var z=w.selectAll("g.nv-dist").data(function(A){return A
},function(A){return A.key
});
z.enter().append("g");
z.attr("class",function(B,A){return"nv-dist nv-series-"+A
}).style("stroke",function(B,A){return i(B,A)
});
var x=z.selectAll("line.nv-dist"+f).data(function(A){return A.values
});
x.enter().append("line").attr(f+"1",function(B,A){return m(l(B,A))
}).attr(f+"2",function(B,A){return m(l(B,A))
});
d3.transition(z.exit().selectAll("line.nv-dist"+f)).attr(f+"1",function(B,A){return g(l(B,A))
}).attr(f+"2",function(B,A){return g(l(B,A))
}).style("stroke-opacity",0).remove();
x.attr("class",function(B,A){return"nv-dist"+f+" nv-dist"+f+"-"+A
}).attr(y+"1",0).attr(y+"2",o);
d3.transition(x).attr(f+"1",function(B,A){return g(l(B,A))
}).attr(f+"2",function(B,A){return g(l(B,A))
});
m=g.copy()
});
return n
}n.margin=function(p){if(!arguments.length){return h
}h.top=typeof p.top!="undefined"?p.top:h.top;
h.right=typeof p.right!="undefined"?p.right:h.right;
h.bottom=typeof p.bottom!="undefined"?p.bottom:h.bottom;
h.left=typeof p.left!="undefined"?p.left:h.left;
return n
};
n.width=function(p){if(!arguments.length){return e
}e=p;
return n
};
n.axis=function(p){if(!arguments.length){return f
}f=p;
return n
};
n.size=function(p){if(!arguments.length){return o
}o=p;
return n
};
n.getData=function(p){if(!arguments.length){return l
}l=d3.functor(p);
return n
};
n.scale=function(p){if(!arguments.length){return g
}g=p;
return n
};
n.color=function(p){if(!arguments.length){return i
}i=c.utils.getColor(p);
return n
};
return n
};
c.models.historicalBar=function(){var i={top:0,right:0,bottom:0,left:0},g=960,v=500,f=Math.floor(Math.random()*10000),r=d3.scale.linear(),q=d3.scale.linear(),u=function(w){return w.x
},t=function(w){return w.y
},l=[],j=[0],m=false,s=true,h=c.utils.defaultColor(),o,e,n=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");
function p(w){w.each(function(E){var H=g-i.left-i.right,A=v-i.top-i.bottom,y=d3.select(this);
r.domain(o||d3.extent(E[0].values.map(u).concat(l)));
if(m){r.range([H*0.5/E[0].values.length,H*(E[0].values.length-0.5)/E[0].values.length])
}else{r.range([0,H])
}q.domain(e||d3.extent(E[0].values.map(t).concat(j))).range([A,0]);
if(r.domain()[0]===r.domain()[1]||q.domain()[0]===q.domain()[1]){singlePoint=true
}if(r.domain()[0]===r.domain()[1]){r.domain()[0]?r.domain([r.domain()[0]-r.domain()[0]*0.01,r.domain()[1]+r.domain()[1]*0.01]):r.domain([-1,1])
}if(q.domain()[0]===q.domain()[1]){q.domain()[0]?q.domain([q.domain()[0]+q.domain()[0]*0.01,q.domain()[1]-q.domain()[1]*0.01]):q.domain([-1,1])
}var z=y.selectAll("g.nv-wrap.nv-bar").data([E[0].values]);
var C=z.enter().append("g").attr("class","nvd3 nv-wrap nv-bar");
var B=C.append("defs");
var x=C.append("g");
var F=z.select("g");
x.append("g").attr("class","nv-bars");
z.attr("transform","translate("+i.left+","+i.top+")");
y.on("click",function(J,I){n.chartClick({data:J,index:I,pos:d3.event,id:f})
});
B.append("clipPath").attr("id","nv-chart-clip-path-"+f).append("rect");
z.select("#nv-chart-clip-path-"+f+" rect").attr("width",H).attr("height",A);
F.attr("clip-path",s?"url(#nv-chart-clip-path-"+f+")":"");
var G=z.select(".nv-bars").selectAll(".nv-bar").data(function(I){return I
});
G.exit().remove();
var D=G.enter().append("rect").attr("x",0).attr("y",function(J,I){return q(Math.max(0,t(J,I)))
}).attr("height",function(J,I){return Math.abs(q(t(J,I))-q(0))
}).on("mouseover",function(J,I){d3.select(this).classed("hover",true);
n.elementMouseover({point:J,series:E[0],pos:[r(u(J,I)),q(t(J,I))],pointIndex:I,seriesIndex:0,e:d3.event})
}).on("mouseout",function(J,I){d3.select(this).classed("hover",false);
n.elementMouseout({point:J,series:E[0],pointIndex:I,seriesIndex:0,e:d3.event})
}).on("click",function(J,I){n.elementClick({value:t(J,I),data:J,index:I,pos:[r(u(J,I)),q(t(J,I))],e:d3.event,id:f});
d3.event.stopPropagation()
}).on("dblclick",function(J,I){n.elementDblClick({value:t(J,I),data:J,index:I,pos:[r(u(J,I)),q(t(J,I))],e:d3.event,id:f});
d3.event.stopPropagation()
});
G.attr("fill",function(J,I){return h(J,I)
}).attr("class",function(K,J,I){return(t(K,J)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+I+"-"+J
}).attr("transform",function(J,I){return"translate("+(r(u(J,I))-H/E[0].values.length*0.45)+",0)"
}).attr("width",(H/E[0].values.length)*0.9);
d3.transition(G).attr("y",function(J,I){return t(J,I)<0?q(0):q(0)-q(t(J,I))<1?q(0)-1:q(t(J,I))
}).attr("height",function(J,I){return Math.max(Math.abs(q(t(J,I))-q(0)),1)
})
});
return p
}p.dispatch=n;
p.x=function(w){if(!arguments.length){return u
}u=w;
return p
};
p.y=function(w){if(!arguments.length){return t
}t=w;
return p
};
p.margin=function(w){if(!arguments.length){return i
}i.top=typeof w.top!="undefined"?w.top:i.top;
i.right=typeof w.right!="undefined"?w.right:i.right;
i.bottom=typeof w.bottom!="undefined"?w.bottom:i.bottom;
i.left=typeof w.left!="undefined"?w.left:i.left;
return p
};
p.width=function(w){if(!arguments.length){return g
}g=w;
return p
};
p.height=function(w){if(!arguments.length){return v
}v=w;
return p
};
p.xScale=function(w){if(!arguments.length){return r
}r=w;
return p
};
p.yScale=function(w){if(!arguments.length){return q
}q=w;
return p
};
p.xDomain=function(w){if(!arguments.length){return o
}o=w;
return p
};
p.yDomain=function(w){if(!arguments.length){return e
}e=w;
return p
};
p.forceX=function(w){if(!arguments.length){return l
}l=w;
return p
};
p.forceY=function(w){if(!arguments.length){return j
}j=w;
return p
};
p.padData=function(w){if(!arguments.length){return m
}m=w;
return p
};
p.clipEdge=function(w){if(!arguments.length){return s
}s=w;
return p
};
p.color=function(w){if(!arguments.length){return h
}h=c.utils.getColor(w);
return p
};
p.id=function(w){if(!arguments.length){return f
}f=w;
return p
};
return p
};
c.models.historicalBarChart=function(){var v=c.models.historicalBar(),o=c.models.axis(),e=c.models.axis(),g=c.models.legend();
var t={top:30,right:90,bottom:50,left:90},z=c.utils.defaultColor(),w=null,u=null,A=false,B=true,r=true,n=false,f=true,j=function(E,D,H,G,F){return"<h3>"+E+"</h3><p>"+H+" at "+D+"</p>"
},q,p,l={},m=null,i="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");
o.orient("bottom").tickPadding(7);
e.orient((n)?"right":"left");
var h=function(G,L){if(L){var E=d3.select(L).select("svg");
var M=(E.node())?E.attr("viewBox"):null;
if(M){M=M.split(" ");
var H=parseInt(E.style("width"))/M[2];
G.pos[0]=G.pos[0]*H;
G.pos[1]=G.pos[1]*H
}}var D=G.pos[0]+(L.offsetLeft||0),J=G.pos[1]+(L.offsetTop||0),K=o.tickFormat()(v.x()(G.point,G.pointIndex)),I=e.tickFormat()(v.y()(G.point,G.pointIndex)),F=j(G.series.key,K,I,G,s);
c.tooltip.show([D,J],F,null,null,L)
};
function s(x){x.each(function(H){var D=d3.select(this),K=this;
var M=(w||parseInt(D.style("width"))||960)-t.left-t.right,G=(u||parseInt(D.style("height"))||400)-t.top-t.bottom;
s.update=function(){s(x)
};
s.container=this;
l.disabled=H.map(function(N){return !!N.disabled
});
if(!m){var L;
m={};
for(L in l){if(l[L] instanceof Array){m[L]=l[L].slice(0)
}else{m[L]=l[L]
}}}if(!H||!H.length||!H.filter(function(N){return N.values.length
}).length){var E=D.selectAll(".nv-noData").data([i]);
E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
E.attr("x",t.left+M/2).attr("y",t.top+G/2).text(function(N){return N
});
return s
}else{D.selectAll(".nv-noData").remove()
}q=v.xScale();
p=v.yScale();
var F=D.selectAll("g.nv-wrap.nv-lineChart").data([H]);
var y=F.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g");
var I=F.select("g");
y.append("g").attr("class","nv-x nv-axis");
y.append("g").attr("class","nv-y nv-axis");
y.append("g").attr("class","nv-barsWrap");
y.append("g").attr("class","nv-legendWrap");
if(A){g.width(M);
I.select(".nv-legendWrap").datum(H).call(g);
if(t.top!=g.height()){t.top=g.height();
G=(u||parseInt(D.style("height"))||400)-t.top-t.bottom
}F.select(".nv-legendWrap").attr("transform","translate(0,"+(-t.top)+")")
}F.attr("transform","translate("+t.left+","+t.top+")");
if(n){I.select(".nv-y.nv-axis").attr("transform","translate("+M+",0)")
}v.width(M).height(G).color(H.map(function(O,N){return O.color||z(O,N)
}).filter(function(O,N){return !H[N].disabled
}));
var J=I.select(".nv-barsWrap").datum(H.filter(function(N){return !N.disabled
}));
d3.transition(J).call(v);
if(B){o.scale(q).tickSize(-G,0);
I.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")");
I.select(".nv-x.nv-axis").transition().call(o)
}if(r){e.scale(p).ticks(G/36).tickSize(-M,0);
I.select(".nv-y.nv-axis").transition().duration(0).call(e)
}g.dispatch.on("legendClick",function(O,N){O.disabled=!O.disabled;
if(!H.filter(function(P){return !P.disabled
}).length){H.map(function(P){P.disabled=false;
F.selectAll(".nv-series").classed("disabled",false);
return P
})
}l.disabled=H.map(function(P){return !!P.disabled
});
C.stateChange(l);
x.transition().call(s)
});
g.dispatch.on("legendDblclick",function(N){H.forEach(function(O){O.disabled=true
});
N.disabled=false;
l.disabled=H.map(function(O){return !!O.disabled
});
C.stateChange(l);
s.update()
});
C.on("tooltipShow",function(N){if(f){h(N,K.parentNode)
}});
C.on("changeState",function(N){if(typeof N.disabled!=="undefined"){H.forEach(function(P,O){P.disabled=N.disabled[O]
});
l.disabled=N.disabled
}x.call(s)
})
});
return s
}v.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+t.left,x.pos[1]+t.top];
C.tooltipShow(x)
});
v.dispatch.on("elementMouseout.tooltip",function(x){C.tooltipHide(x)
});
C.on("tooltipHide",function(){if(f){c.tooltip.cleanup()
}});
s.dispatch=C;
s.bars=v;
s.legend=g;
s.xAxis=o;
s.yAxis=e;
d3.rebind(s,v,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate");
s.margin=function(x){if(!arguments.length){return t
}t.top=typeof x.top!="undefined"?x.top:t.top;
t.right=typeof x.right!="undefined"?x.right:t.right;
t.bottom=typeof x.bottom!="undefined"?x.bottom:t.bottom;
t.left=typeof x.left!="undefined"?x.left:t.left;
return s
};
s.width=function(x){if(!arguments.length){return w
}w=x;
return s
};
s.height=function(x){if(!arguments.length){return u
}u=x;
return s
};
s.color=function(x){if(!arguments.length){return z
}z=c.utils.getColor(x);
g.color(z);
return s
};
s.showLegend=function(x){if(!arguments.length){return A
}A=x;
return s
};
s.showXAxis=function(x){if(!arguments.length){return B
}B=x;
return s
};
s.showYAxis=function(x){if(!arguments.length){return r
}r=x;
return s
};
s.rightAlignYAxis=function(x){if(!arguments.length){return n
}n=x;
e.orient((x)?"right":"left");
return s
};
s.tooltips=function(x){if(!arguments.length){return f
}f=x;
return s
};
s.tooltipContent=function(x){if(!arguments.length){return j
}j=x;
return s
};
s.state=function(x){if(!arguments.length){return l
}l=x;
return s
};
s.defaultState=function(x){if(!arguments.length){return m
}m=x;
return s
};
s.noData=function(x){if(!arguments.length){return i
}i=x;
return s
};
return s
};
c.models.indentedTree=function(){var i={top:0,right:0,bottom:0,left:0},g=960,t=500,j=c.utils.defaultColor(),f=Math.floor(Math.random()*10000),m=true,u=false,s="No Data Available.",n=20,h=[{key:"key",label:"Name",type:"text"}],q=null,e="images/grey-plus.png",l="images/grey-minus.png",o=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout");
var r=0;
function p(v){v.each(function(L){var M=1,A=d3.select(this);
var B=d3.layout.tree().children(function(O){return O.values
}).size([t,n]);
p.update=function(){A.transition().duration(600).call(p)
};
if(!L[0]){L[0]={key:s}
}var D=B.nodes(L[0]);
var z=d3.select(this).selectAll("div").data([[D]]);
var x=z.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree");
var N=x.append("table");
var I=z.select("table").attr("width","100%").attr("class",q);
if(m){var H=N.append("thead");
var K=H.append("tr");
h.forEach(function(O){K.append("th").attr("width",O.width?O.width:"10%").style("text-align",O.type=="numeric"?"right":"left").append("span").text(O.label)
})
}var w=I.selectAll("tbody").data(function(O){return O
});
w.enter().append("tbody");
M=d3.max(D,function(O){return O.depth
});
B.size([t,M*n]);
var F=w.selectAll("tr").data(function(O){return O.filter(function(P){return(u&&!P.children)?u(P):true
})
},function(P,O){return P.id||(P.id||++r)
});
F.exit().remove();
F.select("img.nv-treeicon").attr("src",J).classed("folded",C);
var y=F.enter().append("tr");
h.forEach(function(P,O){var Q=y.append("td").style("padding-left",function(R){return(O?0:R.depth*n+12+(J(R)?0:16))+"px"
},"important").style("text-align",P.type=="numeric"?"right":"left");
if(O==0){Q.append("img").classed("nv-treeicon",true).classed("nv-folded",C).attr("src",J).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(R){return J(R)?"inline-block":"none"
}).on("click",E)
}Q.append("span").attr("class",d3.functor(P.classes)).text(function(R){return P.format?P.format(R):(R[P.key]||"-")
});
if(P.showCount){Q.append("span").attr("class","nv-childrenCount");
F.selectAll("span.nv-childrenCount").text(function(R){return((R.values&&R.values.length)||(R._values&&R._values.length))?"("+((R.values&&(R.values.filter(function(S){return u?u(S):true
}).length))||(R._values&&R._values.filter(function(S){return u?u(S):true
}).length)||0)+")":""
})
}if(P.click){Q.select("span").on("click",P.click)
}});
F.order().on("click",function(O){o.elementClick({row:this,data:O,pos:[O.x,O.y]})
}).on("dblclick",function(O){o.elementDblclick({row:this,data:O,pos:[O.x,O.y]})
}).on("mouseover",function(O){o.elementMouseover({row:this,data:O,pos:[O.x,O.y]})
}).on("mouseout",function(O){o.elementMouseout({row:this,data:O,pos:[O.x,O.y]})
});
function E(Q,P,O){d3.event.stopPropagation();
if(d3.event.shiftKey&&!O){d3.event.shiftKey=false;
Q.values&&Q.values.forEach(function(R){if(R.values||R._values){E(R,0,true)
}});
return true
}if(!G(Q)){return true
}if(Q.values){Q._values=Q.values;
Q.values=null
}else{Q.values=Q._values;
Q._values=null
}p.update()
}function J(O){return(O._values&&O._values.length)?e:(O.values&&O.values.length)?l:""
}function C(O){return(O._values&&O._values.length)
}function G(P){var O=P.values||P._values;
return(O&&O.length)
}});
return p
}p.margin=function(v){if(!arguments.length){return i
}i.top=typeof v.top!="undefined"?v.top:i.top;
i.right=typeof v.right!="undefined"?v.right:i.right;
i.bottom=typeof v.bottom!="undefined"?v.bottom:i.bottom;
i.left=typeof v.left!="undefined"?v.left:i.left;
return p
};
p.width=function(v){if(!arguments.length){return g
}g=v;
return p
};
p.height=function(v){if(!arguments.length){return t
}t=v;
return p
};
p.color=function(v){if(!arguments.length){return j
}j=c.utils.getColor(v);
scatter.color(j);
return p
};
p.id=function(v){if(!arguments.length){return f
}f=v;
return p
};
p.header=function(v){if(!arguments.length){return m
}m=v;
return p
};
p.noData=function(v){if(!arguments.length){return s
}s=v;
return p
};
p.filterZero=function(v){if(!arguments.length){return u
}u=v;
return p
};
p.columns=function(v){if(!arguments.length){return h
}h=v;
return p
};
p.tableClass=function(v){if(!arguments.length){return q
}q=v;
return p
};
p.iconOpen=function(v){if(!arguments.length){return e
}e=v;
return p
};
p.iconClose=function(v){if(!arguments.length){return l
}l=v;
return p
};
return p
};
c.models.legend=function(){var l={top:5,right:0,bottom:5,left:0},j=400,e=20,h=function(n){return n.key
},f=c.utils.defaultColor(),m=true,g=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout");
function i(n){n.each(function(G){var o=j-l.left-l.right,z=d3.select(this);
var x=z.selectAll("g.nv-legend").data([G]);
var D=x.enter().append("g").attr("class","nvd3 nv-legend").append("g");
var F=x.select("g");
x.attr("transform","translate("+l.left+","+l.top+")");
var y=F.selectAll(".nv-series").data(function(H){return H
});
var s=y.enter().append("g").attr("class","nv-series").on("mouseover",function(I,H){g.legendMouseover(I,H)
}).on("mouseout",function(I,H){g.legendMouseout(I,H)
}).on("click",function(I,H){g.legendClick(I,H)
}).on("dblclick",function(I,H){g.legendDblclick(I,H)
});
s.append("circle").style("stroke-width",2).attr("r",5);
s.append("text").attr("text-anchor","start").attr("dy",".32em").attr("dx","8");
y.classed("disabled",function(H){return H.disabled
});
y.exit().remove();
y.select("circle").style("fill",function(I,H){return I.color||f(I,H)
}).style("stroke",function(I,H){return I.color||f(I,H)
});
y.select("text").text(h);
if(m){var r=[];
y.each(function(K,J){var I=d3.select(this).select("text");
var H=I.node().getComputedTextLength()||c.utils.calcApproxTextWidth(I);
r.push(H+28)
});
var v=0;
var C=0;
var A=[];
while(C<o&&v<r.length){A[v]=r[v];
C+=r[v++]
}while(C>o&&v>1){A=[];
v--;
for(k=0;
k<r.length;
k++){if(r[k]>(A[k%v]||0)){A[k%v]=r[k]
}}C=A.reduce(function(I,J,H,K){return I+J
})
}var p=[];
for(var E=0,w=0;
E<v;
E++){p[E]=w;
w+=A[E]
}y.attr("transform",function(I,H){return"translate("+p[H%v]+","+(5+Math.floor(H/v)*20)+")"
});
F.attr("transform","translate("+(j-l.right-C)+","+l.top+")");
e=l.top+l.bottom+(Math.ceil(r.length/v)*20)
}else{var t=5,u=5,B=0,q;
y.attr("transform",function(J,H){var I=d3.select(this).select("text").node().getComputedTextLength()+28;
q=u;
if(j<l.left+l.right+q+I){u=q=5;
t+=20
}u+=I;
if(u>B){B=u
}return"translate("+q+","+t+")"
});
F.attr("transform","translate("+(j-l.right-B)+","+l.top+")");
e=l.top+l.bottom+t+15
}});
return i
}i.dispatch=g;
i.margin=function(n){if(!arguments.length){return l
}l.top=typeof n.top!="undefined"?n.top:l.top;
l.right=typeof n.right!="undefined"?n.right:l.right;
l.bottom=typeof n.bottom!="undefined"?n.bottom:l.bottom;
l.left=typeof n.left!="undefined"?n.left:l.left;
return i
};
i.width=function(n){if(!arguments.length){return j
}j=n;
return i
};
i.height=function(n){if(!arguments.length){return e
}e=n;
return i
};
i.key=function(n){if(!arguments.length){return h
}h=n;
return i
};
i.color=function(n){if(!arguments.length){return f
}f=c.utils.getColor(n);
return i
};
i.align=function(n){if(!arguments.length){return m
}m=n;
return i
};
return i
};
c.models.line=function(){var e=c.models.scatter();
var i={top:0,right:0,bottom:0,left:0},f=960,u=500,j=c.utils.defaultColor(),t=function(v){return v.x
},s=function(v){return v.y
},h=function(w,v){return !isNaN(s(w,v))&&s(w,v)!==null
},n=function(v){return v.area
},r=false,p,o,l="linear";
e.size(16).sizeDomain([16,256]);
var g,q;
function m(v){v.each(function(F){var I=f-i.left-i.right,A=u-i.top-i.bottom,x=d3.select(this);
p=e.xScale();
o=e.yScale();
g=g||p;
q=q||o;
var y=x.selectAll("g.nv-wrap.nv-line").data([F]);
var D=y.enter().append("g").attr("class","nvd3 nv-wrap nv-line");
var B=D.append("defs");
var w=D.append("g");
var G=y.select("g");
w.append("g").attr("class","nv-groups");
w.append("g").attr("class","nv-scatterWrap");
y.attr("transform","translate("+i.left+","+i.top+")");
e.width(I).height(A);
var z=y.select(".nv-scatterWrap");
d3.transition(z).call(e);
B.append("clipPath").attr("id","nv-edge-clip-"+e.id()).append("rect");
y.select("#nv-edge-clip-"+e.id()+" rect").attr("width",I).attr("height",A);
G.attr("clip-path",r?"url(#nv-edge-clip-"+e.id()+")":"");
z.attr("clip-path",r?"url(#nv-edge-clip-"+e.id()+")":"");
var C=y.select(".nv-groups").selectAll(".nv-group").data(function(J){return J
},function(J){return J.key
});
C.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);
d3.transition(C.exit()).style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove();
C.attr("class",function(K,J){return"nv-group nv-series-"+J
}).classed("hover",function(J){return J.hover
}).style("fill",function(K,J){return j(K,J)
}).style("stroke",function(K,J){return j(K,J)
});
d3.transition(C).style("stroke-opacity",1).style("fill-opacity",0.5);
var H=C.selectAll("path.nv-area").data(function(J){return n(J)?[J]:[]
});
H.enter().append("path").attr("class","nv-area").attr("d",function(J){return d3.svg.area().interpolate(l).defined(h).x(function(L,K){return g(t(L,K))
}).y0(function(L,K){return q(s(L,K))
}).y1(function(L,K){return q(o.domain()[0]<=0?o.domain()[1]>=0?0:o.domain()[1]:o.domain()[0])
}).apply(this,[J.values])
});
d3.transition(C.exit().selectAll("path.nv-area")).attr("d",function(J){return d3.svg.area().interpolate(l).defined(h).x(function(L,K){return p(t(L,K))
}).y0(function(L,K){return o(s(L,K))
}).y1(function(L,K){return o(o.domain()[0]<=0?o.domain()[1]>=0?0:o.domain()[1]:o.domain()[0])
}).apply(this,[J.values])
});
d3.transition(H).attr("d",function(J){return d3.svg.area().interpolate(l).defined(h).x(function(L,K){return p(t(L,K))
}).y0(function(L,K){return o(s(L,K))
}).y1(function(L,K){return o(o.domain()[0]<=0?o.domain()[1]>=0?0:o.domain()[1]:o.domain()[0])
}).apply(this,[J.values])
});
var E=C.selectAll("path.nv-line").data(function(J){return[J.values]
});
E.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(l).defined(h).x(function(K,J){return g(t(K,J))
}).y(function(K,J){return q(s(K,J))
}));
d3.transition(C.exit().selectAll("path.nv-line")).attr("d",d3.svg.line().interpolate(l).defined(h).x(function(K,J){return p(t(K,J))
}).y(function(K,J){return o(s(K,J))
}));
d3.transition(E).attr("d",d3.svg.line().interpolate(l).defined(h).x(function(K,J){return p(t(K,J))
}).y(function(K,J){return o(s(K,J))
}));
g=p.copy();
q=o.copy()
});
return m
}m.dispatch=e.dispatch;
m.scatter=e;
d3.rebind(m,e,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius","padData");
m.margin=function(v){if(!arguments.length){return i
}i.top=typeof v.top!="undefined"?v.top:i.top;
i.right=typeof v.right!="undefined"?v.right:i.right;
i.bottom=typeof v.bottom!="undefined"?v.bottom:i.bottom;
i.left=typeof v.left!="undefined"?v.left:i.left;
return m
};
m.width=function(v){if(!arguments.length){return f
}f=v;
return m
};
m.height=function(v){if(!arguments.length){return u
}u=v;
return m
};
m.x=function(v){if(!arguments.length){return t
}t=v;
e.x(v);
return m
};
m.y=function(v){if(!arguments.length){return s
}s=v;
e.y(v);
return m
};
m.clipEdge=function(v){if(!arguments.length){return r
}r=v;
return m
};
m.color=function(v){if(!arguments.length){return j
}j=c.utils.getColor(v);
e.color(j);
return m
};
m.interpolate=function(v){if(!arguments.length){return l
}l=v;
return m
};
m.defined=function(v){if(!arguments.length){return h
}h=v;
return m
};
m.isArea=function(v){if(!arguments.length){return n
}n=d3.functor(v);
return m
};
return m
};
c.models.lineChart=function(){var f=c.models.line(),p=c.models.axis(),e=c.models.axis(),h=c.models.legend();
var u={top:30,right:20,bottom:50,left:60},z=c.utils.defaultColor(),w=null,v=null,A=true,B=true,s=true,o=false,g=true,l=function(E,D,H,G,F){return"<h3>"+E+"</h3><p>"+H+" at "+D+"</p>"
},r,q,m={},n=null,j="No Data Available.",C=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");
p.orient("bottom").tickPadding(7);
e.orient((o)?"right":"left");
var i=function(G,L){if(L){var E=d3.select(L).select("svg");
var M=(E.node())?E.attr("viewBox"):null;
if(M){M=M.split(" ");
var H=parseInt(E.style("width"))/M[2];
G.pos[0]=G.pos[0]*H;
G.pos[1]=G.pos[1]*H
}}var D=G.pos[0]+(L.offsetLeft||0),J=G.pos[1]+(L.offsetTop||0),K=p.tickFormat()(f.x()(G.point,G.pointIndex)),I=e.tickFormat()(f.y()(G.point,G.pointIndex)),F=l(G.series.key,K,I,G,t);
c.tooltip.show([D,J],F,null,null,L)
};
function t(x){x.each(function(I){var E=d3.select(this),K=this;
var M=(w||parseInt(E.style("width"))||960)-u.left-u.right,H=(v||parseInt(E.style("height"))||400)-u.top-u.bottom;
t.update=function(){E.transition().call(t)
};
t.container=this;
m.disabled=I.map(function(N){return !!N.disabled
});
if(!n){var L;
n={};
for(L in m){if(m[L] instanceof Array){n[L]=m[L].slice(0)
}else{n[L]=m[L]
}}}if(!I||!I.length||!I.filter(function(N){return N.values.length
}).length){var F=E.selectAll(".nv-noData").data([j]);
F.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
F.attr("x",u.left+M/2).attr("y",u.top+H/2).text(function(N){return N
});
return t
}else{E.selectAll(".nv-noData").remove()
}r=f.xScale();
q=f.yScale();
var G=E.selectAll("g.nv-wrap.nv-lineChart").data([I]);
var y=G.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g");
var J=G.select("g");
y.append("g").attr("class","nv-x nv-axis");
y.append("g").attr("class","nv-y nv-axis");
y.append("g").attr("class","nv-linesWrap");
y.append("g").attr("class","nv-legendWrap");
if(A){h.width(M);
J.select(".nv-legendWrap").datum(I).call(h);
if(u.top!=h.height()){u.top=h.height();
H=(v||parseInt(E.style("height"))||400)-u.top-u.bottom
}G.select(".nv-legendWrap").attr("transform","translate(0,"+(-u.top)+")")
}G.attr("transform","translate("+u.left+","+u.top+")");
if(o){J.select(".nv-y.nv-axis").attr("transform","translate("+M+",0)")
}f.width(M).height(H).color(I.map(function(O,N){return O.color||z(O,N)
}).filter(function(O,N){return !I[N].disabled
}));
var D=J.select(".nv-linesWrap").datum(I.filter(function(N){return !N.disabled
}));
d3.transition(D).call(f);
if(B){p.scale(r).ticks(M/100).tickSize(-H,0);
J.select(".nv-x.nv-axis").attr("transform","translate(0,"+q.range()[0]+")");
d3.transition(J.select(".nv-x.nv-axis")).call(p)
}if(s){e.scale(q).ticks(H/36).tickSize(-M,0);
d3.transition(J.select(".nv-y.nv-axis")).call(e)
}h.dispatch.on("legendClick",function(O,N){O.disabled=!O.disabled;
if(!I.filter(function(P){return !P.disabled
}).length){I.map(function(P){P.disabled=false;
G.selectAll(".nv-series").classed("disabled",false);
return P
})
}m.disabled=I.map(function(P){return !!P.disabled
});
C.stateChange(m);
t.update()
});
h.dispatch.on("legendDblclick",function(N){I.forEach(function(O){O.disabled=true
});
N.disabled=false;
m.disabled=I.map(function(O){return !!O.disabled
});
C.stateChange(m);
t.update()
});
C.on("tooltipShow",function(N){if(g){i(N,K.parentNode)
}});
C.on("changeState",function(N){if(typeof N.disabled!=="undefined"){I.forEach(function(P,O){P.disabled=N.disabled[O]
});
m.disabled=N.disabled
}t.update()
})
});
return t
}f.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+u.left,x.pos[1]+u.top];
C.tooltipShow(x)
});
f.dispatch.on("elementMouseout.tooltip",function(x){C.tooltipHide(x)
});
C.on("tooltipHide",function(){if(g){c.tooltip.cleanup()
}});
t.dispatch=C;
t.lines=f;
t.legend=h;
t.xAxis=p;
t.yAxis=e;
d3.rebind(t,f,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate");
t.margin=function(x){if(!arguments.length){return u
}u.top=typeof x.top!="undefined"?x.top:u.top;
u.right=typeof x.right!="undefined"?x.right:u.right;
u.bottom=typeof x.bottom!="undefined"?x.bottom:u.bottom;
u.left=typeof x.left!="undefined"?x.left:u.left;
return t
};
t.width=function(x){if(!arguments.length){return w
}w=x;
return t
};
t.height=function(x){if(!arguments.length){return v
}v=x;
return t
};
t.color=function(x){if(!arguments.length){return z
}z=c.utils.getColor(x);
h.color(z);
return t
};
t.showLegend=function(x){if(!arguments.length){return A
}A=x;
return t
};
t.showXAxis=function(x){if(!arguments.length){return B
}B=x;
return t
};
t.showYAxis=function(x){if(!arguments.length){return s
}s=x;
return t
};
t.rightAlignYAxis=function(x){if(!arguments.length){return o
}o=x;
e.orient((x)?"right":"left");
return t
};
t.tooltips=function(x){if(!arguments.length){return g
}g=x;
return t
};
t.tooltipContent=function(x){if(!arguments.length){return l
}l=x;
return t
};
t.state=function(x){if(!arguments.length){return m
}m=x;
return t
};
t.defaultState=function(x){if(!arguments.length){return n
}n=x;
return t
};
t.noData=function(x){if(!arguments.length){return j
}j=x;
return t
};
return t
};
c.models.linePlusBarChart=function(){var e=c.models.line(),w=c.models.historicalBar(),q=c.models.axis(),s=c.models.axis(),h=c.models.axis(),g=c.models.legend();
var u={top:30,right:60,bottom:50,left:60},y=null,v=null,B=function(x){return x.x
},A=function(x){return x.y
},z=c.utils.defaultColor(),C=true,f=true,o=function(F,E,I,H,G){return"<h3>"+F+"</h3><p>"+I+" at "+E+"</p>"
},r,j,i,n={},p=null,m="No Data Available.",D=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");
w.padData(true);
e.clipEdge(false).padData(true);
q.orient("bottom").tickPadding(7).highlightZero(false);
s.orient("left");
h.orient("right");
var l=function(J,F){var I=J.pos[0]+(F.offsetLeft||0),H=J.pos[1]+(F.offsetTop||0),E=q.tickFormat()(e.x()(J.point,J.pointIndex)),K=(J.series.bar?s:h).tickFormat()(e.y()(J.point,J.pointIndex)),G=o(J.series.key,E,K,J,t);
c.tooltip.show([I,H],G,J.value<0?"n":"s",null,F)
};
function t(x){x.each(function(L){var G=d3.select(this),O=this;
var Q=(y||parseInt(G.style("width"))||960)-u.left-u.right,J=(v||parseInt(G.style("height"))||400)-u.top-u.bottom;
t.update=function(){G.transition().call(t)
};
n.disabled=L.map(function(S){return !!S.disabled
});
if(!p){var P;
p={};
for(P in n){if(n[P] instanceof Array){p[P]=n[P].slice(0)
}else{p[P]=n[P]
}}}if(!L||!L.length||!L.filter(function(S){return S.values.length
}).length){var H=G.selectAll(".nv-noData").data([m]);
H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
H.attr("x",u.left+Q/2).attr("y",u.top+J/2).text(function(S){return S
});
return t
}else{G.selectAll(".nv-noData").remove()
}var R=L.filter(function(S){return !S.disabled&&S.bar
});
var K=L.filter(function(S){return !S.bar
});
r=K.filter(function(S){return !S.disabled
}).length&&K.filter(function(S){return !S.disabled
})[0].values.length?e.xScale():w.xScale();
j=w.yScale();
i=e.yScale();
var I=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([L]);
var E=I.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g");
var M=I.select("g");
E.append("g").attr("class","nv-x nv-axis");
E.append("g").attr("class","nv-y1 nv-axis");
E.append("g").attr("class","nv-y2 nv-axis");
E.append("g").attr("class","nv-barsWrap");
E.append("g").attr("class","nv-linesWrap");
E.append("g").attr("class","nv-legendWrap");
if(C){g.width(Q/2);
M.select(".nv-legendWrap").datum(L.map(function(S){S.originalKey=S.originalKey===undefined?S.key:S.originalKey;
S.key=S.originalKey+(S.bar?" (left axis)":" (right axis)");
return S
})).call(g);
if(u.top!=g.height()){u.top=g.height();
J=(v||parseInt(G.style("height"))||400)-u.top-u.bottom
}M.select(".nv-legendWrap").attr("transform","translate("+(Q/2)+","+(-u.top)+")")
}I.attr("transform","translate("+u.left+","+u.top+")");
e.width(Q).height(J).color(L.map(function(T,S){return T.color||z(T,S)
}).filter(function(T,S){return !L[S].disabled&&!L[S].bar
}));
w.width(Q).height(J).color(L.map(function(T,S){return T.color||z(T,S)
}).filter(function(T,S){return !L[S].disabled&&L[S].bar
}));
var N=M.select(".nv-barsWrap").datum(R.length?R:[{values:[]}]);
var F=M.select(".nv-linesWrap").datum(K[0]&&!K[0].disabled?K:[{values:[]}]);
d3.transition(N).call(w);
d3.transition(F).call(e);
q.scale(r).ticks(Q/100).tickSize(-J,0);
M.select(".nv-x.nv-axis").attr("transform","translate(0,"+j.range()[0]+")");
d3.transition(M.select(".nv-x.nv-axis")).call(q);
s.scale(j).ticks(J/36).tickSize(-Q,0);
d3.transition(M.select(".nv-y1.nv-axis")).style("opacity",R.length?1:0).call(s);
h.scale(i).ticks(J/36).tickSize(R.length?0:-Q,0);
M.select(".nv-y2.nv-axis").style("opacity",K.length?1:0).attr("transform","translate("+Q+",0)");
d3.transition(M.select(".nv-y2.nv-axis")).call(h);
g.dispatch.on("legendClick",function(T,S){T.disabled=!T.disabled;
if(!L.filter(function(U){return !U.disabled
}).length){L.map(function(U){U.disabled=false;
I.selectAll(".nv-series").classed("disabled",false);
return U
})
}n.disabled=L.map(function(U){return !!U.disabled
});
D.stateChange(n);
t.update()
});
g.dispatch.on("legendDblclick",function(S){L.forEach(function(T){T.disabled=true
});
S.disabled=false;
n.disabled=L.map(function(T){return !!T.disabled
});
D.stateChange(n);
t.update()
});
D.on("tooltipShow",function(S){if(f){l(S,O.parentNode)
}});
D.on("changeState",function(S){if(typeof S.disabled!=="undefined"){L.forEach(function(U,T){U.disabled=S.disabled[T]
});
n.disabled=S.disabled
}t.update()
})
});
return t
}e.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+u.left,x.pos[1]+u.top];
D.tooltipShow(x)
});
e.dispatch.on("elementMouseout.tooltip",function(x){D.tooltipHide(x)
});
w.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+u.left,x.pos[1]+u.top];
D.tooltipShow(x)
});
w.dispatch.on("elementMouseout.tooltip",function(x){D.tooltipHide(x)
});
D.on("tooltipHide",function(){if(f){c.tooltip.cleanup()
}});
t.dispatch=D;
t.legend=g;
t.lines=e;
t.bars=w;
t.xAxis=q;
t.y1Axis=s;
t.y2Axis=h;
d3.rebind(t,e,"defined","size","clipVoronoi","interpolate");
t.x=function(x){if(!arguments.length){return B
}B=x;
e.x(x);
w.x(x);
return t
};
t.y=function(x){if(!arguments.length){return A
}A=x;
e.y(x);
w.y(x);
return t
};
t.margin=function(x){if(!arguments.length){return u
}u.top=typeof x.top!="undefined"?x.top:u.top;
u.right=typeof x.right!="undefined"?x.right:u.right;
u.bottom=typeof x.bottom!="undefined"?x.bottom:u.bottom;
u.left=typeof x.left!="undefined"?x.left:u.left;
return t
};
t.width=function(x){if(!arguments.length){return y
}y=x;
return t
};
t.height=function(x){if(!arguments.length){return v
}v=x;
return t
};
t.color=function(x){if(!arguments.length){return z
}z=c.utils.getColor(x);
g.color(z);
return t
};
t.showLegend=function(x){if(!arguments.length){return C
}C=x;
return t
};
t.tooltips=function(x){if(!arguments.length){return f
}f=x;
return t
};
t.tooltipContent=function(x){if(!arguments.length){return o
}o=x;
return t
};
t.state=function(x){if(!arguments.length){return n
}n=x;
return t
};
t.defaultState=function(x){if(!arguments.length){return p
}p=x;
return t
};
t.noData=function(x){if(!arguments.length){return m
}m=x;
return t
};
return t
};
c.models.lineWithFocusChart=function(){var g=c.models.line(),q=c.models.line(),r=c.models.axis(),e=c.models.axis(),G=c.models.axis(),j=c.models.axis(),h=c.models.legend(),i=d3.svg.brush();
var z={top:30,right:30,bottom:30,left:60},u={top:0,right:30,bottom:20,left:60},C=c.utils.defaultColor(),B=null,A=null,o=100,t,s,D,l,E=true,v=null,f=true,p=function(I,H,L,K,J){return"<h3>"+I+"</h3><p>"+L+" at "+H+"</p>"
},n="No Data Available.",F=d3.dispatch("tooltipShow","tooltipHide","brush");
g.clipEdge(true);
q.interactive(false);
r.orient("bottom").tickPadding(5);
e.orient("left");
G.orient("bottom").tickPadding(5);
j.orient("left");
var m=function(M,I){var L=M.pos[0]+(I.offsetLeft||0),K=M.pos[1]+(I.offsetTop||0),H=r.tickFormat()(g.x()(M.point,M.pointIndex)),N=e.tickFormat()(g.y()(M.point,M.pointIndex)),J=p(M.series.key,H,N,M,w);
c.tooltip.show([L,K],J,null,null,I)
};
function w(x){x.each(function(X){var P=d3.select(this),L=this;
var y=(B||parseInt(P.style("width"))||960)-z.left-z.right,M=(A||parseInt(P.style("height"))||400)-z.top-z.bottom-o,K=o-u.top-u.bottom;
w.update=function(){P.transition().call(w)
};
w.container=this;
if(!X||!X.length||!X.filter(function(Y){return Y.values.length
}).length){var O=P.selectAll(".nv-noData").data([n]);
O.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
O.attr("x",z.left+y/2).attr("y",z.top+M/2).text(function(Y){return Y
});
return w
}else{P.selectAll(".nv-noData").remove()
}t=g.xScale();
s=g.yScale();
D=q.xScale();
l=q.yScale();
var N=P.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([X]);
var S=N.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g");
var U=N.select("g");
S.append("g").attr("class","nv-legendWrap");
var J=S.append("g").attr("class","nv-focus");
J.append("g").attr("class","nv-x nv-axis");
J.append("g").attr("class","nv-y nv-axis");
J.append("g").attr("class","nv-linesWrap");
var H=S.append("g").attr("class","nv-context");
H.append("g").attr("class","nv-x nv-axis");
H.append("g").attr("class","nv-y nv-axis");
H.append("g").attr("class","nv-linesWrap");
H.append("g").attr("class","nv-brushBackground");
H.append("g").attr("class","nv-x nv-brush");
if(E){h.width(y);
U.select(".nv-legendWrap").datum(X).call(h);
if(z.top!=h.height()){z.top=h.height();
M=(A||parseInt(P.style("height"))||400)-z.top-z.bottom-o
}U.select(".nv-legendWrap").attr("transform","translate(0,"+(-z.top)+")")
}N.attr("transform","translate("+z.left+","+z.top+")");
g.width(y).height(M).color(X.map(function(Z,Y){return Z.color||C(Z,Y)
}).filter(function(Z,Y){return !X[Y].disabled
}));
q.defined(g.defined()).width(y).height(K).color(X.map(function(Z,Y){return Z.color||C(Z,Y)
}).filter(function(Z,Y){return !X[Y].disabled
}));
U.select(".nv-context").attr("transform","translate(0,"+(M+z.bottom+u.top)+")");
var I=U.select(".nv-context .nv-linesWrap").datum(X.filter(function(Y){return !Y.disabled
}));
d3.transition(I).call(q);
r.scale(t).ticks(y/100).tickSize(-M,0);
e.scale(s).ticks(M/36).tickSize(-y,0);
U.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+M+")");
i.x(D).on("brush",R);
if(v){i.extent(v)
}var W=U.select(".nv-brushBackground").selectAll("g").data([v||i.extent()]);
var V=W.enter().append("g");
V.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",K);
V.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",K);
gBrush=U.select(".nv-x.nv-brush").call(i);
gBrush.selectAll("rect").attr("height",K);
gBrush.selectAll(".resize").append("path").attr("d",Q);
R();
G.scale(D).ticks(y/100).tickSize(-K,0);
U.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+l.range()[0]+")");
d3.transition(U.select(".nv-context .nv-x.nv-axis")).call(G);
j.scale(l).ticks(K/36).tickSize(-y,0);
d3.transition(U.select(".nv-context .nv-y.nv-axis")).call(j);
U.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+l.range()[0]+")");
h.dispatch.on("legendClick",function(Z,Y){Z.disabled=!Z.disabled;
if(!X.filter(function(aa){return !aa.disabled
}).length){X.map(function(aa){aa.disabled=false;
N.selectAll(".nv-series").classed("disabled",false);
return aa
})
}P.transition().call(w)
});
F.on("tooltipShow",function(Y){if(f){m(Y,L.parentNode)
}});
function Q(aa){var Z=+(aa=="e"),Y=Z?1:-1,ab=K/3;
return"M"+(0.5*Y)+","+ab+"A6,6 0 0 "+Z+" "+(6.5*Y)+","+(ab+6)+"V"+(2*ab-6)+"A6,6 0 0 "+Z+" "+(0.5*Y)+","+(2*ab)+"ZM"+(2.5*Y)+","+(ab+8)+"V"+(2*ab-8)+"M"+(4.5*Y)+","+(ab+8)+"V"+(2*ab-8)
}function T(){if(!i.empty()){i.extent(v)
}W.data([i.empty()?D.domain():v]).each(function(ab,Y){var Z=D(ab[0])-t.range()[0],aa=t.range()[1]-D(ab[1]);
d3.select(this).select(".left").attr("width",Z<0?0:Z);
d3.select(this).select(".right").attr("x",D(ab[1])).attr("width",aa<0?0:aa)
})
}function R(){v=i.empty()?null:i.extent();
extent=i.empty()?D.domain():i.extent();
F.brush({extent:extent,brush:i});
T();
var Y=U.select(".nv-focus .nv-linesWrap").datum(X.filter(function(Z){return !Z.disabled
}).map(function(aa,Z){return{key:aa.key,values:aa.values.filter(function(ac,ab){return g.x()(ac,ab)>=extent[0]&&g.x()(ac,ab)<=extent[1]
})}
}));
d3.transition(Y).call(g);
d3.transition(U.select(".nv-focus .nv-x.nv-axis")).call(r);
d3.transition(U.select(".nv-focus .nv-y.nv-axis")).call(e)
}});
return w
}g.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];
F.tooltipShow(x)
});
g.dispatch.on("elementMouseout.tooltip",function(x){F.tooltipHide(x)
});
F.on("tooltipHide",function(){if(f){c.tooltip.cleanup()
}});
w.dispatch=F;
w.legend=h;
w.lines=g;
w.lines2=q;
w.xAxis=r;
w.yAxis=e;
w.x2Axis=G;
w.y2Axis=j;
d3.rebind(w,g,"defined","isArea","size","xDomain","yDomain","forceX","forceY","interactive","clipEdge","clipVoronoi","id");
w.x=function(x){if(!arguments.length){return g.x
}g.x(x);
q.x(x);
return w
};
w.y=function(x){if(!arguments.length){return g.y
}g.y(x);
q.y(x);
return w
};
w.margin=function(x){if(!arguments.length){return z
}z.top=typeof x.top!="undefined"?x.top:z.top;
z.right=typeof x.right!="undefined"?x.right:z.right;
z.bottom=typeof x.bottom!="undefined"?x.bottom:z.bottom;
z.left=typeof x.left!="undefined"?x.left:z.left;
return w
};
w.margin2=function(x){if(!arguments.length){return u
}u=x;
return w
};
w.width=function(x){if(!arguments.length){return B
}B=x;
return w
};
w.height=function(x){if(!arguments.length){return A
}A=x;
return w
};
w.height2=function(x){if(!arguments.length){return o
}o=x;
return w
};
w.color=function(x){if(!arguments.length){return C
}C=c.utils.getColor(x);
h.color(C);
return w
};
w.showLegend=function(x){if(!arguments.length){return E
}E=x;
return w
};
w.tooltips=function(x){if(!arguments.length){return f
}f=x;
return w
};
w.tooltipContent=function(x){if(!arguments.length){return p
}p=x;
return w
};
w.interpolate=function(x){if(!arguments.length){return g.interpolate()
}g.interpolate(x);
q.interpolate(x);
return w
};
w.noData=function(x){if(!arguments.length){return n
}n=x;
return w
};
w.xTickFormat=function(x){if(!arguments.length){return r.tickFormat()
}r.tickFormat(x);
G.tickFormat(x);
return w
};
w.yTickFormat=function(x){if(!arguments.length){return e.tickFormat()
}e.tickFormat(x);
j.tickFormat(x);
return w
};
return w
};
c.models.linePlusBarWithFocusChart=function(){var f=c.models.line(),u=c.models.line(),F=c.models.historicalBar(),g=c.models.historicalBar(),v=c.models.axis(),O=c.models.axis(),A=c.models.axis(),m=c.models.axis(),I=c.models.axis(),t=c.models.axis(),i=c.models.legend(),l=d3.svg.brush();
var D={top:30,right:30,bottom:30,left:60},y={top:0,right:30,bottom:20,left:60},G=null,E=null,r=100,M=function(x){return x.x
},K=function(x){return x.y
},H=c.utils.defaultColor(),L=true,B,z=null,e=true,s=function(Q,P,T,S,R){return"<h3>"+Q+"</h3><p>"+T+" at "+P+"</p>"
},w,J,o,n,j,h,q="No Data Available.",N=d3.dispatch("tooltipShow","tooltipHide","brush");
f.clipEdge(true);
u.interactive(false);
v.orient("bottom").tickPadding(5);
A.orient("left");
m.orient("right");
O.orient("bottom").tickPadding(5);
I.orient("left");
t.orient("right");
var p=function(U,Q){if(B){U.pointIndex+=Math.ceil(B[0])
}var T=U.pos[0]+(Q.offsetLeft||0),S=U.pos[1]+(Q.offsetTop||0),P=v.tickFormat()(f.x()(U.point,U.pointIndex)),V=(U.series.bar?A:m).tickFormat()(f.y()(U.point,U.pointIndex)),R=s(U.series.key,P,V,U,C);
c.tooltip.show([T,S],R,U.value<0?"n":"s",null,Q)
};
function C(x){x.each(function(am){var aa=d3.select(this),U=this;
var P=(G||parseInt(aa.style("width"))||960)-D.left-D.right,V=(E||parseInt(aa.style("height"))||400)-D.top-D.bottom-r,T=r-y.top-y.bottom;
C.update=function(){aa.transition().call(C)
};
C.container=this;
if(!am||!am.length||!am.filter(function(an){return an.values.length
}).length){var Z=aa.selectAll(".nv-noData").data([q]);
Z.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
Z.attr("x",D.left+P/2).attr("y",D.top+V/2).text(function(an){return an
});
return C
}else{aa.selectAll(".nv-noData").remove()
}var Q=am.filter(function(an){return !an.disabled&&an.bar
});
var ag=am.filter(function(an){return !an.bar
});
w=F.xScale();
J=O.scale();
o=F.yScale();
n=f.yScale();
j=g.yScale();
h=u.yScale();
var X=am.filter(function(an){return !an.disabled&&an.bar
}).map(function(an){return an.values.map(function(ap,ao){return{x:M(ap,ao),y:K(ap,ao)}
})
});
var W=am.filter(function(an){return !an.disabled&&!an.bar
}).map(function(an){return an.values.map(function(ap,ao){return{x:M(ap,ao),y:K(ap,ao)}
})
});
w.range([0,P]);
J.domain(d3.extent(d3.merge(X.concat(W)),function(an){return an.x
})).range([0,P]);
var Y=aa.selectAll("g.nv-wrap.nv-linePlusBar").data([am]);
var ad=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g");
var ah=Y.select("g");
ad.append("g").attr("class","nv-legendWrap");
var S=ad.append("g").attr("class","nv-focus");
S.append("g").attr("class","nv-x nv-axis");
S.append("g").attr("class","nv-y1 nv-axis");
S.append("g").attr("class","nv-y2 nv-axis");
S.append("g").attr("class","nv-barsWrap");
S.append("g").attr("class","nv-linesWrap");
var R=ad.append("g").attr("class","nv-context");
R.append("g").attr("class","nv-x nv-axis");
R.append("g").attr("class","nv-y1 nv-axis");
R.append("g").attr("class","nv-y2 nv-axis");
R.append("g").attr("class","nv-barsWrap");
R.append("g").attr("class","nv-linesWrap");
R.append("g").attr("class","nv-brushBackground");
R.append("g").attr("class","nv-x nv-brush");
if(L){i.width(P/2);
ah.select(".nv-legendWrap").datum(am.map(function(an){an.originalKey=an.originalKey===undefined?an.key:an.originalKey;
an.key=an.originalKey+(an.bar?" (left axis)":" (right axis)");
return an
})).call(i);
if(D.top!=i.height()){D.top=i.height();
V=(E||parseInt(aa.style("height"))||400)-D.top-D.bottom-r
}ah.select(".nv-legendWrap").attr("transform","translate("+(P/2)+","+(-D.top)+")")
}Y.attr("transform","translate("+D.left+","+D.top+")");
g.width(P).height(T).color(am.map(function(ao,an){return ao.color||H(ao,an)
}).filter(function(ao,an){return !am[an].disabled&&am[an].bar
}));
u.width(P).height(T).color(am.map(function(ao,an){return ao.color||H(ao,an)
}).filter(function(ao,an){return !am[an].disabled&&!am[an].bar
}));
var ai=ah.select(".nv-context .nv-barsWrap").datum(Q.length?Q:[{values:[]}]);
var af=ah.select(".nv-context .nv-linesWrap").datum(!ag[0].disabled?ag:[{values:[]}]);
ah.select(".nv-context").attr("transform","translate(0,"+(V+D.bottom+y.top)+")");
d3.transition(ai).call(g);
d3.transition(af).call(u);
l.x(J).on("brush",ac);
if(z){l.extent(z)
}var al=ah.select(".nv-brushBackground").selectAll("g").data([z||l.extent()]);
var aj=al.enter().append("g");
aj.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",T);
aj.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",T);
var ak=ah.select(".nv-x.nv-brush").call(l);
ak.selectAll("rect").attr("height",T);
ak.selectAll(".resize").append("path").attr("d",ab);
O.ticks(P/100).tickSize(-T,0);
ah.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+j.range()[0]+")");
d3.transition(ah.select(".nv-context .nv-x.nv-axis")).call(O);
I.scale(j).ticks(T/36).tickSize(-P,0);
ah.select(".nv-context .nv-y1.nv-axis").style("opacity",Q.length?1:0).attr("transform","translate(0,"+J.range()[0]+")");
d3.transition(ah.select(".nv-context .nv-y1.nv-axis")).call(I);
t.scale(h).ticks(T/36).tickSize(Q.length?0:-P,0);
ah.select(".nv-context .nv-y2.nv-axis").style("opacity",ag.length?1:0).attr("transform","translate("+J.range()[1]+",0)");
d3.transition(ah.select(".nv-context .nv-y2.nv-axis")).call(t);
i.dispatch.on("legendClick",function(ao,an){ao.disabled=!ao.disabled;
if(!am.filter(function(ap){return !ap.disabled
}).length){am.map(function(ap){ap.disabled=false;
Y.selectAll(".nv-series").classed("disabled",false);
return ap
})
}C.update()
});
N.on("tooltipShow",function(an){if(e){p(an,U.parentNode)
}});
function ab(ap){var ao=+(ap=="e"),an=ao?1:-1,aq=T/3;
return"M"+(0.5*an)+","+aq+"A6,6 0 0 "+ao+" "+(6.5*an)+","+(aq+6)+"V"+(2*aq-6)+"A6,6 0 0 "+ao+" "+(0.5*an)+","+(2*aq)+"ZM"+(2.5*an)+","+(aq+8)+"V"+(2*aq-8)+"M"+(4.5*an)+","+(aq+8)+"V"+(2*aq-8)
}function ae(){if(!l.empty()){l.extent(z)
}al.data([l.empty()?J.domain():z]).each(function(aq,an){var ao=J(aq[0])-J.range()[0],ap=J.range()[1]-J(aq[1]);
d3.select(this).select(".left").attr("width",ao<0?0:ao);
d3.select(this).select(".right").attr("x",J(aq[1])).attr("width",ap<0?0:ap)
})
}function ac(){z=l.empty()?null:l.extent();
B=l.empty()?J.domain():l.extent();
N.brush({extent:B,brush:l});
ae();
F.width(P).height(V).color(am.map(function(aq,ap){return aq.color||H(aq,ap)
}).filter(function(aq,ap){return !am[ap].disabled&&am[ap].bar
}));
f.width(P).height(V).color(am.map(function(aq,ap){return aq.color||H(aq,ap)
}).filter(function(aq,ap){return !am[ap].disabled&&!am[ap].bar
}));
var ao=ah.select(".nv-focus .nv-barsWrap").datum(!Q.length?[{values:[]}]:Q.map(function(aq,ap){return{key:aq.key,values:aq.values.filter(function(at,ar){return F.x()(at,ar)>=B[0]&&F.x()(at,ar)<=B[1]
})}
}));
var an=ah.select(".nv-focus .nv-linesWrap").datum(ag[0].disabled?[{values:[]}]:ag.map(function(aq,ap){return{key:aq.key,values:aq.values.filter(function(at,ar){return f.x()(at,ar)>=B[0]&&f.x()(at,ar)<=B[1]
})}
}));
if(Q.length){w=F.xScale()
}else{w=f.xScale()
}v.scale(w).ticks(P/100).tickSize(-V,0);
v.domain([Math.ceil(B[0]),Math.floor(B[1])]);
d3.transition(ah.select(".nv-x.nv-axis")).call(v);
d3.transition(ao).call(F);
d3.transition(an).call(f);
ah.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")");
A.scale(o).ticks(V/36).tickSize(-P,0);
ah.select(".nv-focus .nv-y1.nv-axis").style("opacity",Q.length?1:0);
m.scale(n).ticks(V/36).tickSize(Q.length?0:-P,0);
ah.select(".nv-focus .nv-y2.nv-axis").style("opacity",ag.length?1:0).attr("transform","translate("+w.range()[1]+",0)");
d3.transition(ah.select(".nv-focus .nv-y1.nv-axis")).call(A);
d3.transition(ah.select(".nv-focus .nv-y2.nv-axis")).call(m)
}ac()
});
return C
}f.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+D.left,x.pos[1]+D.top];
N.tooltipShow(x)
});
f.dispatch.on("elementMouseout.tooltip",function(x){N.tooltipHide(x)
});
F.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+D.left,x.pos[1]+D.top];
N.tooltipShow(x)
});
F.dispatch.on("elementMouseout.tooltip",function(x){N.tooltipHide(x)
});
N.on("tooltipHide",function(){if(e){c.tooltip.cleanup()
}});
C.dispatch=N;
C.legend=i;
C.lines=f;
C.lines2=u;
C.bars=F;
C.bars2=g;
C.xAxis=v;
C.x2Axis=O;
C.y1Axis=A;
C.y2Axis=m;
C.y3Axis=I;
C.y4Axis=t;
d3.rebind(C,f,"defined","size","clipVoronoi","interpolate");
C.x=function(x){if(!arguments.length){return M
}M=x;
f.x(x);
F.x(x);
return C
};
C.y=function(x){if(!arguments.length){return K
}K=x;
f.y(x);
F.y(x);
return C
};
C.margin=function(x){if(!arguments.length){return D
}D.top=typeof x.top!="undefined"?x.top:D.top;
D.right=typeof x.right!="undefined"?x.right:D.right;
D.bottom=typeof x.bottom!="undefined"?x.bottom:D.bottom;
D.left=typeof x.left!="undefined"?x.left:D.left;
return C
};
C.width=function(x){if(!arguments.length){return G
}G=x;
return C
};
C.height=function(x){if(!arguments.length){return E
}E=x;
return C
};
C.color=function(x){if(!arguments.length){return H
}H=c.utils.getColor(x);
i.color(H);
return C
};
C.showLegend=function(x){if(!arguments.length){return L
}L=x;
return C
};
C.tooltips=function(x){if(!arguments.length){return e
}e=x;
return C
};
C.tooltipContent=function(x){if(!arguments.length){return s
}s=x;
return C
};
C.noData=function(x){if(!arguments.length){return q
}q=x;
return C
};
C.brushExtent=function(x){if(!arguments.length){return z
}z=x;
return C
};
return C
};
c.models.multiBar=function(){var m={top:0,right:0,bottom:0,left:0},r=960,n=500,j=d3.scale.ordinal(),i=d3.scale.linear(),o=Math.floor(Math.random()*10000),w=function(x){return x.x
},u=function(x){return x.y
},f=[0],A=true,z=false,t=c.utils.defaultColor(),C=false,p=null,g,B=1200,h=500,s,q,D=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");
var v,e;
function l(x){x.each(function(M){var P=r-m.left-m.right,H=n-m.top-m.bottom,E=d3.select(this);
if(C&&M.length){C=[{values:M[0].values.map(function(Q){return{x:Q.x,y:0,series:Q.series,size:0.01}
})}]
}if(z){M=d3.layout.stack().offset("zero").values(function(Q){return Q.values
}).y(u)(!M.length&&C?C:M)
}M=M.map(function(R,Q){R.values=R.values.map(function(S){S.series=Q;
return S
});
return R
});
if(z){M[0].values.map(function(S,Q){var T=0,R=0;
M.map(function(V){var U=V.values[Q];
U.size=Math.abs(U.y);
if(U.y<0){U.y1=R;
R=R-U.size
}else{U.y1=U.size+T;
T=T+U.size
}})
})
}var G=(s&&q)?[]:M.map(function(Q){return Q.values.map(function(S,R){return{x:w(S,R),y:u(S,R),y0:S.y0,y1:S.y1}
})
});
j.domain(d3.merge(G).map(function(Q){return Q.x
})).rangeBands([0,P],0.1);
i.domain(q||d3.extent(d3.merge(G).map(function(Q){return z?(Q.y>0?Q.y1:Q.y1+Q.y):Q.y
}).concat(f))).range([H,0]);
if(j.domain()[0]===j.domain()[1]||i.domain()[0]===i.domain()[1]){singlePoint=true
}if(j.domain()[0]===j.domain()[1]){j.domain()[0]?j.domain([j.domain()[0]-j.domain()[0]*0.01,j.domain()[1]+j.domain()[1]*0.01]):j.domain([-1,1])
}if(i.domain()[0]===i.domain()[1]){i.domain()[0]?i.domain([i.domain()[0]+i.domain()[0]*0.01,i.domain()[1]-i.domain()[1]*0.01]):i.domain([-1,1])
}v=v||j;
e=e||i;
var F=E.selectAll("g.nv-wrap.nv-multibar").data([M]);
var K=F.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar");
var I=K.append("defs");
var y=K.append("g");
var N=F.select("g");
y.append("g").attr("class","nv-groups");
F.attr("transform","translate("+m.left+","+m.top+")");
I.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect");
F.select("#nv-edge-clip-"+o+" rect").attr("width",P).attr("height",H);
N.attr("clip-path",A?"url(#nv-edge-clip-"+o+")":"");
var J=F.select(".nv-groups").selectAll(".nv-group").data(function(Q){return Q
},function(Q){return Q.key
});
J.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);
J.exit().selectAll("rect.nv-bar").transition().delay(function(R,Q){return Q*B/M[0].values.length
}).attr("y",function(Q){return z?e(Q.y0):e(0)
}).attr("height",0).remove();
J.attr("class",function(R,Q){return"nv-group nv-series-"+Q
}).classed("hover",function(Q){return Q.hover
}).style("fill",function(R,Q){return t(R,Q)
}).style("stroke",function(R,Q){return t(R,Q)
});
d3.transition(J).style("stroke-opacity",1).style("fill-opacity",0.75);
var O=J.selectAll("rect.nv-bar").data(function(Q){return(C&&!M.length)?C.values:Q.values
});
O.exit().remove();
var L=O.enter().append("rect").attr("class",function(R,Q){return u(R,Q)<0?"nv-bar negative":"nv-bar positive"
}).attr("x",function(S,R,Q){return z?0:(Q*j.rangeBand()/M.length)
}).attr("y",function(Q){return e(z?Q.y0:0)
}).attr("height",0).attr("width",j.rangeBand()/(z?1:M.length));
O.style("fill",function(S,R,Q){return t(S,Q,R)
}).style("stroke",function(S,R,Q){return t(S,Q,R)
}).on("mouseover",function(R,Q){d3.select(this).classed("hover",true);
D.elementMouseover({value:u(R,Q),point:R,series:M[R.series],pos:[j(w(R,Q))+(j.rangeBand()*(z?M.length/2:R.series+0.5)/M.length),i(u(R,Q)+(z?R.y0:0))],pointIndex:Q,seriesIndex:R.series,e:d3.event})
}).on("mouseout",function(R,Q){d3.select(this).classed("hover",false);
D.elementMouseout({value:u(R,Q),point:R,series:M[R.series],pointIndex:Q,seriesIndex:R.series,e:d3.event})
}).on("click",function(R,Q){D.elementClick({value:u(R,Q),point:R,series:M[R.series],pos:[j(w(R,Q))+(j.rangeBand()*(z?M.length/2:R.series+0.5)/M.length),i(u(R,Q)+(z?R.y0:0))],pointIndex:Q,seriesIndex:R.series,e:d3.event});
d3.event.stopPropagation()
}).on("dblclick",function(R,Q){D.elementDblClick({value:u(R,Q),point:R,series:M[R.series],pos:[j(w(R,Q))+(j.rangeBand()*(z?M.length/2:R.series+0.5)/M.length),i(u(R,Q)+(z?R.y0:0))],pointIndex:Q,seriesIndex:R.series,e:d3.event});
d3.event.stopPropagation()
});
O.attr("class",function(R,Q){return u(R,Q)<0?"nv-bar negative":"nv-bar positive"
}).attr("transform",function(R,Q){return"translate("+j(w(R,Q))+",0)"
});
if(p){if(!g){g=M.map(function(){return true
})
}O.style("fill",function(S,R,Q){return d3.rgb(p(S,R)).darker(g.map(function(U,T){return T
}).filter(function(U,T){return !g[T]
})[Q]).toString()
}).style("stroke",function(S,R,Q){return d3.rgb(p(S,R)).darker(g.map(function(U,T){return T
}).filter(function(U,T){return !g[T]
})[Q]).toString()
})
}if(z){O.transition().delay(function(R,Q){return Q*B/M[0].values.length
}).attr("y",function(R,Q){return i((z?R.y1:0))
}).attr("height",function(R,Q){return Math.max(Math.abs(i(R.y+(z?R.y0:0))-i((z?R.y0:0))),1)
}).each("end",function(){d3.select(this).transition().duration(h).attr("x",function(R,Q){return z?0:(R.series*j.rangeBand()/M.length)
}).attr("width",j.rangeBand()/(z?1:M.length))
})
}else{d3.transition(O).duration(h).delay(function(R,Q){return Q*B/M[0].values.length
}).attr("x",function(R,Q){return R.series*j.rangeBand()/M.length
}).attr("width",j.rangeBand()/M.length).each("end",function(){d3.select(this).transition().duration(h).attr("y",function(R,Q){return u(R,Q)<0?i(0):i(0)-i(u(R,Q))<1?i(0)-1:i(u(R,Q))||0
}).attr("height",function(R,Q){return Math.max(Math.abs(i(u(R,Q))-i(0)),1)||0
})
})
}v=j.copy();
e=i.copy()
});
return l
}l.dispatch=D;
l.x=function(x){if(!arguments.length){return w
}w=x;
return l
};
l.y=function(x){if(!arguments.length){return u
}u=x;
return l
};
l.margin=function(x){if(!arguments.length){return m
}m.top=typeof x.top!="undefined"?x.top:m.top;
m.right=typeof x.right!="undefined"?x.right:m.right;
m.bottom=typeof x.bottom!="undefined"?x.bottom:m.bottom;
m.left=typeof x.left!="undefined"?x.left:m.left;
return l
};
l.width=function(x){if(!arguments.length){return r
}r=x;
return l
};
l.height=function(x){if(!arguments.length){return n
}n=x;
return l
};
l.xScale=function(x){if(!arguments.length){return j
}j=x;
return l
};
l.yScale=function(x){if(!arguments.length){return i
}i=x;
return l
};
l.xDomain=function(x){if(!arguments.length){return s
}s=x;
return l
};
l.yDomain=function(x){if(!arguments.length){return q
}q=x;
return l
};
l.forceY=function(x){if(!arguments.length){return f
}f=x;
return l
};
l.stacked=function(x){if(!arguments.length){return z
}z=x;
return l
};
l.clipEdge=function(x){if(!arguments.length){return A
}A=x;
return l
};
l.color=function(x){if(!arguments.length){return t
}t=c.utils.getColor(x);
return l
};
l.barColor=function(x){if(!arguments.length){return p
}p=c.utils.getColor(x);
return l
};
l.disabled=function(x){if(!arguments.length){return g
}g=x;
return l
};
l.id=function(x){if(!arguments.length){return o
}o=x;
return l
};
l.hideable=function(x){if(!arguments.length){return C
}C=x;
return l
};
l.delay=function(x){if(!arguments.length){return B
}B=x;
return l
};
l.drawTime=function(x){if(!arguments.length){return h
}h=x;
return l
};
return l
};
c.models.multiBarChart=function(){var j=c.models.multiBar(),r=c.models.axis(),f=c.models.axis(),i=c.models.legend(),v=c.models.legend();
var z={top:30,right:20,bottom:50,left:60},B=null,A=null,C=c.utils.defaultColor(),E=true,D=true,u=true,h=false,l=0,g=true,p=function(H,G,K,J,I){return"<h3>"+H+"</h3><p>"+K+" on "+G+"</p>"
},t,s,o={stacked:false},q=null,n="No Data Available.",F=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),e=function(){return E?180:0
};
j.stacked(false);
r.orient("bottom").tickPadding(7).highlightZero(true).showMaxMin(false).tickFormat(function(x){return x
});
f.orient("left").tickFormat(d3.format(",.1f"));
var m=function(L,H){var K=L.pos[0]+(H.offsetLeft||0),J=L.pos[1]+(H.offsetTop||0),G=r.tickFormat()(j.x()(L.point,L.pointIndex)),M=f.tickFormat()(j.y()(L.point,L.pointIndex)),I=p(L.series.key,G,M,L,w);
c.tooltip.show([K,J],I,L.value<0?"n":"s",null,H)
};
function w(x){x.each(function(O){var H=d3.select(this),R=this;
var V=(B||parseInt(H.style("width"))||960)-z.left-z.right,K=(A||parseInt(H.style("height"))||400)-z.top-z.bottom;
w.update=function(){H.transition().call(w)
};
w.container=this;
o.disabled=O.map(function(W){return !!W.disabled
});
if(!q){var U;
q={};
for(U in o){if(o[U] instanceof Array){q[U]=o[U].slice(0)
}else{q[U]=o[U]
}}}if(!O||!O.length||!O.filter(function(W){return W.values.length
}).length){var I=H.selectAll(".nv-noData").data([n]);
I.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
I.attr("x",z.left+V/2).attr("y",z.top+K/2).text(function(W){return W
});
return w
}else{H.selectAll(".nv-noData").remove()
}t=j.xScale();
s=j.yScale();
var J=H.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([O]);
var y=J.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");
var P=J.select("g");
y.append("g").attr("class","nv-x nv-axis");
y.append("g").attr("class","nv-y nv-axis");
y.append("g").attr("class","nv-barsWrap");
y.append("g").attr("class","nv-legendWrap");
y.append("g").attr("class","nv-controlsWrap");
if(D){i.width(V-e());
if(j.barColor()){O.forEach(function(X,W){X.color=d3.rgb("#ccc").darker(W*1.5).toString()
})
}P.select(".nv-legendWrap").datum(O).call(i);
if(z.top!=i.height()){z.top=i.height();
K=(A||parseInt(H.style("height"))||400)-z.top-z.bottom
}P.select(".nv-legendWrap").attr("transform","translate("+e()+","+(-z.top)+")")
}if(E){var S=[{key:"Grouped",disabled:j.stacked()},{key:"Stacked",disabled:!j.stacked()}];
v.width(e()).color(["#444","#444","#444"]);
P.select(".nv-controlsWrap").datum(S).attr("transform","translate(0,"+(-z.top)+")").call(v)
}J.attr("transform","translate("+z.left+","+z.top+")");
j.disabled(O.map(function(W){return W.disabled
})).width(V).height(K).color(O.map(function(X,W){return X.color||C(X,W)
}).filter(function(X,W){return !O[W].disabled
}));
var Q=P.select(".nv-barsWrap").datum(O.filter(function(W){return !W.disabled
}));
d3.transition(Q).call(j);
r.scale(t).ticks(V/100).tickSize(-K,0);
P.select(".nv-x.nv-axis").attr("transform","translate(0,"+s.range()[0]+")");
d3.transition(P.select(".nv-x.nv-axis")).call(r);
var N=P.select(".nv-x.nv-axis > g").selectAll("g");
N.selectAll("line, text").style("opacity",1);
if(h){var T=function(W,X){return"translate("+W+","+X+")"
};
var G=5,M=17;
N.selectAll("text").attr("transform",function(Y,X,W){return T(0,(W%2==0?G:M))
});
var L=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;
P.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(X,W){return T(0,(W===0||L%2!==0)?M:G)
})
}if(u){N.filter(function(X,W){return W%Math.ceil(O[0].values.length/(V/100))!==0
}).selectAll("text, line").style("opacity",0)
}if(l){N.selectAll("text").attr("transform","rotate("+l+" 0,0)").attr("text-anchor",l>0?"start":"end")
}P.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1);
f.scale(s).ticks(K/36).tickSize(-V,0);
d3.transition(P.select(".nv-y.nv-axis")).call(f);
i.dispatch.on("legendClick",function(X,W){X.disabled=!X.disabled;
if(!O.filter(function(Y){return !Y.disabled
}).length){O.map(function(Y){Y.disabled=false;
J.selectAll(".nv-series").classed("disabled",false);
return Y
})
}o.disabled=O.map(function(Y){return !!Y.disabled
});
F.stateChange(o);
w.update()
});
i.dispatch.on("legendDblclick",function(W){O.forEach(function(X){X.disabled=true
});
W.disabled=false;
o.disabled=O.map(function(X){return !!X.disabled
});
F.stateChange(o);
w.update()
});
v.dispatch.on("legendClick",function(X,W){if(!X.disabled){return
}S=S.map(function(Y){Y.disabled=true;
return Y
});
X.disabled=false;
switch(X.key){case"Grouped":j.stacked(false);
break;
case"Stacked":j.stacked(true);
break
}o.stacked=j.stacked();
F.stateChange(o);
w.update()
});
F.on("tooltipShow",function(W){if(g){m(W,R.parentNode)
}});
F.on("changeState",function(W){if(typeof W.disabled!=="undefined"){O.forEach(function(Y,X){Y.disabled=W.disabled[X]
});
o.disabled=W.disabled
}if(typeof W.stacked!=="undefined"){j.stacked(W.stacked);
o.stacked=W.stacked
}w.update()
})
});
return w
}j.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+z.left,x.pos[1]+z.top];
F.tooltipShow(x)
});
j.dispatch.on("elementMouseout.tooltip",function(x){F.tooltipHide(x)
});
F.on("tooltipHide",function(){if(g){c.tooltip.cleanup()
}});
w.dispatch=F;
w.multibar=j;
w.legend=i;
w.xAxis=r;
w.yAxis=f;
d3.rebind(w,j,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","stacked","delay","barColor");
w.margin=function(x){if(!arguments.length){return z
}z.top=typeof x.top!="undefined"?x.top:z.top;
z.right=typeof x.right!="undefined"?x.right:z.right;
z.bottom=typeof x.bottom!="undefined"?x.bottom:z.bottom;
z.left=typeof x.left!="undefined"?x.left:z.left;
return w
};
w.width=function(x){if(!arguments.length){return B
}B=x;
return w
};
w.height=function(x){if(!arguments.length){return A
}A=x;
return w
};
w.color=function(x){if(!arguments.length){return C
}C=c.utils.getColor(x);
i.color(C);
return w
};
w.showControls=function(x){if(!arguments.length){return E
}E=x;
return w
};
w.showLegend=function(x){if(!arguments.length){return D
}D=x;
return w
};
w.reduceXTicks=function(x){if(!arguments.length){return u
}u=x;
return w
};
w.rotateLabels=function(x){if(!arguments.length){return l
}l=x;
return w
};
w.staggerLabels=function(x){if(!arguments.length){return h
}h=x;
return w
};
w.tooltip=function(x){if(!arguments.length){return p
}p=x;
return w
};
w.tooltips=function(x){if(!arguments.length){return g
}g=x;
return w
};
w.tooltipContent=function(x){if(!arguments.length){return p
}p=x;
return w
};
w.state=function(x){if(!arguments.length){return o
}o=x;
return w
};
w.defaultState=function(x){if(!arguments.length){return q
}q=x;
return w
};
w.noData=function(x){if(!arguments.length){return n
}n=x;
return w
};
return w
};
c.models.multiBarHorizontal=function(){var n={top:0,right:0,bottom:0,left:0},s=960,o=500,p=Math.floor(Math.random()*10000),j=d3.scale.ordinal(),i=d3.scale.linear(),z=function(x){return x.x
},v=function(x){return x.y
},f=[0],u=c.utils.defaultColor(),q=null,g,B=false,A=false,l=60,h=d3.format(",.2f"),C=1200,t,r,D=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");
var w,e;
function m(x){x.each(function(M){var P=s-n.left-n.right,H=o-n.top-n.bottom,E=d3.select(this);
if(B){M=d3.layout.stack().offset("zero").values(function(Q){return Q.values
}).y(v)(M)
}M=M.map(function(R,Q){R.values=R.values.map(function(S){S.series=Q;
return S
});
return R
});
if(B){M[0].values.map(function(S,Q){var T=0,R=0;
M.map(function(V){var U=V.values[Q];
U.size=Math.abs(U.y);
if(U.y<0){U.y1=R-U.size;
R=R-U.size
}else{U.y1=T;
T=T+U.size
}})
})
}var G=(t&&r)?[]:M.map(function(Q){return Q.values.map(function(S,R){return{x:z(S,R),y:v(S,R),y0:S.y0,y1:S.y1}
})
});
j.domain(t||d3.merge(G).map(function(Q){return Q.x
})).rangeBands([0,H],0.1);
i.domain(r||d3.extent(d3.merge(G).map(function(Q){return B?(Q.y>0?Q.y1+Q.y:Q.y1):Q.y
}).concat(f)));
if(A&&!B){i.range([(i.domain()[0]<0?l:0),P-(i.domain()[1]>0?l:0)])
}else{i.range([0,P])
}w=w||j;
e=e||d3.scale.linear().domain(i.domain()).range([i(0),i(0)]);
var F=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([M]);
var K=F.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");
var I=K.append("defs");
var y=K.append("g");
var N=F.select("g");
y.append("g").attr("class","nv-groups");
F.attr("transform","translate("+n.left+","+n.top+")");
var J=F.select(".nv-groups").selectAll(".nv-group").data(function(Q){return Q
},function(Q){return Q.key
});
J.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);
d3.transition(J.exit()).style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove();
J.attr("class",function(R,Q){return"nv-group nv-series-"+Q
}).classed("hover",function(Q){return Q.hover
}).style("fill",function(R,Q){return u(R,Q)
}).style("stroke",function(R,Q){return u(R,Q)
});
d3.transition(J).style("stroke-opacity",1).style("fill-opacity",0.75);
var O=J.selectAll("g.nv-bar").data(function(Q){return Q.values
});
O.exit().remove();
var L=O.enter().append("g").attr("transform",function(S,R,Q){return"translate("+e(B?S.y0:0)+","+(B?0:(Q*j.rangeBand()/M.length)+j(z(S,R)))+")"
});
L.append("rect").attr("width",0).attr("height",j.rangeBand()/(B?1:M.length));
O.on("mouseover",function(R,Q){d3.select(this).classed("hover",true);
D.elementMouseover({value:v(R,Q),point:R,series:M[R.series],pos:[i(v(R,Q)+(B?R.y0:0)),j(z(R,Q))+(j.rangeBand()*(B?M.length/2:R.series+0.5)/M.length)],pointIndex:Q,seriesIndex:R.series,e:d3.event})
}).on("mouseout",function(R,Q){d3.select(this).classed("hover",false);
D.elementMouseout({value:v(R,Q),point:R,series:M[R.series],pointIndex:Q,seriesIndex:R.series,e:d3.event})
}).on("click",function(R,Q){D.elementClick({value:v(R,Q),point:R,series:M[R.series],pos:[j(z(R,Q))+(j.rangeBand()*(B?M.length/2:R.series+0.5)/M.length),i(v(R,Q)+(B?R.y0:0))],pointIndex:Q,seriesIndex:R.series,e:d3.event});
d3.event.stopPropagation()
}).on("dblclick",function(R,Q){D.elementDblClick({value:v(R,Q),point:R,series:M[R.series],pos:[j(z(R,Q))+(j.rangeBand()*(B?M.length/2:R.series+0.5)/M.length),i(v(R,Q)+(B?R.y0:0))],pointIndex:Q,seriesIndex:R.series,e:d3.event});
d3.event.stopPropagation()
});
L.append("text");
if(A&&!B){O.select("text").attr("text-anchor",function(R,Q){return v(R,Q)<0?"end":"start"
}).attr("y",j.rangeBand()/(M.length*2)).attr("dy",".32em").text(function(R,Q){return h(v(R,Q))
});
d3.transition(O).select("text").attr("x",function(R,Q){return v(R,Q)<0?-4:i(v(R,Q))-i(0)+4
})
}else{O.selectAll("text").text("")
}O.attr("class",function(R,Q){return v(R,Q)<0?"nv-bar negative":"nv-bar positive"
});
if(q){if(!g){g=M.map(function(){return true
})
}O.style("fill",function(S,R,Q){return d3.rgb(q(S,R)).darker(g.map(function(U,T){return T
}).filter(function(U,T){return !g[T]
})[Q]).toString()
}).style("stroke",function(S,R,Q){return d3.rgb(q(S,R)).darker(g.map(function(U,T){return T
}).filter(function(U,T){return !g[T]
})[Q]).toString()
})
}if(B){d3.transition(O).attr("transform",function(R,Q){return"translate("+i(R.y1)+","+j(z(R,Q))+")"
}).select("rect").attr("width",function(R,Q){return Math.abs(i(v(R,Q)+R.y0)-i(R.y0))
}).attr("height",j.rangeBand())
}else{d3.transition(O).attr("transform",function(R,Q){return"translate("+(v(R,Q)<0?i(v(R,Q)):i(0))+","+(R.series*j.rangeBand()/M.length+j(z(R,Q)))+")"
}).select("rect").attr("height",j.rangeBand()/M.length).attr("width",function(R,Q){return Math.max(Math.abs(i(v(R,Q))-i(0)),1)
})
}w=j.copy();
e=i.copy()
});
return m
}m.dispatch=D;
m.x=function(x){if(!arguments.length){return z
}z=x;
return m
};
m.y=function(x){if(!arguments.length){return v
}v=x;
return m
};
m.margin=function(x){if(!arguments.length){return n
}n.top=typeof x.top!="undefined"?x.top:n.top;
n.right=typeof x.right!="undefined"?x.right:n.right;
n.bottom=typeof x.bottom!="undefined"?x.bottom:n.bottom;
n.left=typeof x.left!="undefined"?x.left:n.left;
return m
};
m.width=function(x){if(!arguments.length){return s
}s=x;
return m
};
m.height=function(x){if(!arguments.length){return o
}o=x;
return m
};
m.xScale=function(x){if(!arguments.length){return j
}j=x;
return m
};
m.yScale=function(x){if(!arguments.length){return i
}i=x;
return m
};
m.xDomain=function(x){if(!arguments.length){return t
}t=x;
return m
};
m.yDomain=function(x){if(!arguments.length){return r
}r=x;
return m
};
m.forceY=function(x){if(!arguments.length){return f
}f=x;
return m
};
m.stacked=function(x){if(!arguments.length){return B
}B=x;
return m
};
m.color=function(x){if(!arguments.length){return u
}u=c.utils.getColor(x);
return m
};
m.barColor=function(x){if(!arguments.length){return q
}q=c.utils.getColor(x);
return m
};
m.disabled=function(x){if(!arguments.length){return g
}g=x;
return m
};
m.id=function(x){if(!arguments.length){return p
}p=x;
return m
};
m.delay=function(x){if(!arguments.length){return C
}C=x;
return m
};
m.showValues=function(x){if(!arguments.length){return A
}A=x;
return m
};
m.valueFormat=function(x){if(!arguments.length){return h
}h=x;
return m
};
m.valuePadding=function(x){if(!arguments.length){return l
}l=x;
return m
};
return m
};
c.models.multiBarHorizontalChart=function(){var i=c.models.multiBarHorizontal(),p=c.models.axis(),f=c.models.axis(),h=c.models.legend().height(30),s=c.models.legend().height(30);
var u={top:30,right:20,bottom:50,left:60},w=null,v=null,z=c.utils.defaultColor(),C=true,A=true,B=false,g=true,m=function(F,E,I,H,G){return"<h3>"+F+" - "+E+"</h3><p>"+I+"</p>"
},r,q,n={stacked:B},o=null,l="No Data Available.",D=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),e=function(){return C?180:0
};
i.stacked(B);
p.orient("left").tickPadding(5).highlightZero(false).showMaxMin(false).tickFormat(function(x){return x
});
f.orient("bottom").tickFormat(d3.format(",.1f"));
var j=function(J,F){var I=J.pos[0]+(F.offsetLeft||0),H=J.pos[1]+(F.offsetTop||0),E=p.tickFormat()(i.x()(J.point,J.pointIndex)),K=f.tickFormat()(i.y()(J.point,J.pointIndex)),G=m(J.series.key,E,K,J,t);
c.tooltip.show([I,H],G,J.value<0?"e":"w",null,F)
};
function t(x){x.each(function(J){var E=d3.select(this),M=this;
var P=(w||parseInt(E.style("width"))||960)-u.left-u.right,H=(v||parseInt(E.style("height"))||400)-u.top-u.bottom;
t.update=function(){E.transition().call(t)
};
t.container=this;
n.disabled=J.map(function(Q){return !!Q.disabled
});
if(!o){var O;
o={};
for(O in n){if(n[O] instanceof Array){o[O]=n[O].slice(0)
}else{o[O]=n[O]
}}}if(!J||!J.length||!J.filter(function(Q){return Q.values.length
}).length){var F=E.selectAll(".nv-noData").data([l]);
F.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
F.attr("x",u.left+P/2).attr("y",u.top+H/2).text(function(Q){return Q
});
return t
}else{E.selectAll(".nv-noData").remove()
}r=i.xScale();
q=i.yScale();
var G=E.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([J]);
var y=G.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g");
var K=G.select("g");
y.append("g").attr("class","nv-x nv-axis");
y.append("g").attr("class","nv-y nv-axis");
y.append("g").attr("class","nv-barsWrap");
y.append("g").attr("class","nv-legendWrap");
y.append("g").attr("class","nv-controlsWrap");
if(A){h.width(P-e());
if(i.barColor()){J.forEach(function(R,Q){R.color=d3.rgb("#ccc").darker(Q*1.5).toString()
})
}K.select(".nv-legendWrap").datum(J).call(h);
if(u.top!=h.height()){u.top=h.height();
H=(v||parseInt(E.style("height"))||400)-u.top-u.bottom
}K.select(".nv-legendWrap").attr("transform","translate("+e()+","+(-u.top)+")")
}if(C){var N=[{key:"Grouped",disabled:i.stacked()},{key:"Stacked",disabled:!i.stacked()}];
s.width(e()).color(["#444","#444","#444"]);
K.select(".nv-controlsWrap").datum(N).attr("transform","translate(0,"+(-u.top)+")").call(s)
}G.attr("transform","translate("+u.left+","+u.top+")");
i.disabled(J.map(function(Q){return Q.disabled
})).width(P).height(H).color(J.map(function(R,Q){return R.color||z(R,Q)
}).filter(function(R,Q){return !J[Q].disabled
}));
var L=K.select(".nv-barsWrap").datum(J.filter(function(Q){return !Q.disabled
}));
d3.transition(L).call(i);
p.scale(r).ticks(H/24).tickSize(-P,0);
d3.transition(K.select(".nv-x.nv-axis")).call(p);
var I=K.select(".nv-x.nv-axis").selectAll("g");
I.selectAll("line, text").style("opacity",1);
f.scale(q).ticks(P/100).tickSize(-H,0);
K.select(".nv-y.nv-axis").attr("transform","translate(0,"+H+")");
d3.transition(K.select(".nv-y.nv-axis")).call(f);
h.dispatch.on("legendClick",function(R,Q){R.disabled=!R.disabled;
if(!J.filter(function(S){return !S.disabled
}).length){J.map(function(S){S.disabled=false;
G.selectAll(".nv-series").classed("disabled",false);
return S
})
}n.disabled=J.map(function(S){return !!S.disabled
});
D.stateChange(n);
t.update()
});
h.dispatch.on("legendDblclick",function(Q){J.forEach(function(R){R.disabled=true
});
Q.disabled=false;
n.disabled=J.map(function(R){return !!R.disabled
});
D.stateChange(n);
t.update()
});
s.dispatch.on("legendClick",function(R,Q){if(!R.disabled){return
}N=N.map(function(S){S.disabled=true;
return S
});
R.disabled=false;
switch(R.key){case"Grouped":i.stacked(false);
break;
case"Stacked":i.stacked(true);
break
}n.stacked=i.stacked();
D.stateChange(n);
t.update()
});
D.on("tooltipShow",function(Q){if(g){j(Q,M.parentNode)
}});
D.on("changeState",function(Q){if(typeof Q.disabled!=="undefined"){J.forEach(function(S,R){S.disabled=Q.disabled[R]
});
n.disabled=Q.disabled
}if(typeof Q.stacked!=="undefined"){i.stacked(Q.stacked);
n.stacked=Q.stacked
}x.call(t)
})
});
return t
}i.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+u.left,x.pos[1]+u.top];
D.tooltipShow(x)
});
i.dispatch.on("elementMouseout.tooltip",function(x){D.tooltipHide(x)
});
D.on("tooltipHide",function(){if(g){c.tooltip.cleanup()
}});
t.dispatch=D;
t.multibar=i;
t.legend=h;
t.xAxis=p;
t.yAxis=f;
d3.rebind(t,i,"x","y","xDomain","yDomain","forceX","forceY","clipEdge","id","delay","showValues","valueFormat","stacked","barColor");
t.margin=function(x){if(!arguments.length){return u
}u.top=typeof x.top!="undefined"?x.top:u.top;
u.right=typeof x.right!="undefined"?x.right:u.right;
u.bottom=typeof x.bottom!="undefined"?x.bottom:u.bottom;
u.left=typeof x.left!="undefined"?x.left:u.left;
return t
};
t.width=function(x){if(!arguments.length){return w
}w=x;
return t
};
t.height=function(x){if(!arguments.length){return v
}v=x;
return t
};
t.color=function(x){if(!arguments.length){return z
}z=c.utils.getColor(x);
h.color(z);
return t
};
t.showControls=function(x){if(!arguments.length){return C
}C=x;
return t
};
t.showLegend=function(x){if(!arguments.length){return A
}A=x;
return t
};
t.tooltip=function(x){if(!arguments.length){return m
}m=x;
return t
};
t.tooltips=function(x){if(!arguments.length){return g
}g=x;
return t
};
t.tooltipContent=function(x){if(!arguments.length){return m
}m=x;
return t
};
t.state=function(x){if(!arguments.length){return n
}n=x;
return t
};
t.defaultState=function(x){if(!arguments.length){return o
}o=x;
return t
};
t.noData=function(x){if(!arguments.length){return l
}l=x;
return t
};
return t
};
c.models.multiChart=function(){var v={top:30,right:20,bottom:50,left:60},A=d3.scale.category20().range(),z=null,w=null,B=true,h=true,m=function(G,F,J,I,H){return"<h3>"+G+"</h3><p>"+J+" at "+F+"</p>"
},t,s;
var t=d3.scale.linear(),D=d3.scale.linear(),C=d3.scale.linear(),q=c.models.line().yScale(D),p=c.models.line().yScale(C),j=c.models.multiBar().stacked(false).yScale(D),g=c.models.multiBar().stacked(false).yScale(C),o=c.models.stackedArea().yScale(D),n=c.models.stackedArea().yScale(C),r=c.models.axis().scale(t).orient("bottom").tickPadding(5),f=c.models.axis().scale(D).orient("left"),e=c.models.axis().scale(C).orient("right"),i=c.models.legend().height(30),E=d3.dispatch("tooltipShow","tooltipHide");
var l=function(K,G){var J=K.pos[0]+(G.offsetLeft||0),I=K.pos[1]+(G.offsetTop||0),F=r.tickFormat()(q.x()(K.point,K.pointIndex)),L=((K.series.yAxis==2)?e:f).tickFormat()(q.y()(K.point,K.pointIndex)),H=m(K.series.key,F,L,K,u);
c.tooltip.show([J,I],H,undefined,undefined,G.offsetParent)
};
function u(x){x.each(function(ab){var Q=d3.select(this),I=this;
u.update=function(){Q.transition().call(u)
};
u.container=this;
var y=(z||parseInt(Q.style("width"))||960)-v.left-v.right,G=(w||parseInt(Q.style("height"))||400)-v.top-v.bottom;
var T=ab.filter(function(ac){return !ac.disabled&&ac.type=="line"&&ac.yAxis==1
});
var S=ab.filter(function(ac){return !ac.disabled&&ac.type=="line"&&ac.yAxis==2
});
var X=ab.filter(function(ac){return !ac.disabled&&ac.type=="bar"&&ac.yAxis==1
});
var W=ab.filter(function(ac){return !ac.disabled&&ac.type=="bar"&&ac.yAxis==2
});
var P=ab.filter(function(ac){return !ac.disabled&&ac.type=="area"&&ac.yAxis==1
});
var N=ab.filter(function(ac){return !ac.disabled&&ac.type=="area"&&ac.yAxis==2
});
var K=ab.filter(function(ac){return !ac.disabled&&ac.yAxis==1
}).map(function(ac){return ac.values.map(function(ae,ad){return{x:ae.x,y:ae.y}
})
});
var J=ab.filter(function(ac){return !ac.disabled&&ac.yAxis==2
}).map(function(ac){return ac.values.map(function(ae,ad){return{x:ae.x,y:ae.y}
})
});
t.domain(d3.extent(d3.merge(K.concat(J)),function(ac){return ac.x
})).range([0,y]);
var L=Q.selectAll("g.wrap.multiChart").data([ab]);
var U=L.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");
U.append("g").attr("class","x axis");
U.append("g").attr("class","y1 axis");
U.append("g").attr("class","y2 axis");
U.append("g").attr("class","lines1Wrap");
U.append("g").attr("class","lines2Wrap");
U.append("g").attr("class","bars1Wrap");
U.append("g").attr("class","bars2Wrap");
U.append("g").attr("class","stack1Wrap");
U.append("g").attr("class","stack2Wrap");
U.append("g").attr("class","legendWrap");
var Y=L.select("g");
if(B){i.width(y/2);
Y.select(".legendWrap").datum(ab.map(function(ac){ac.originalKey=ac.originalKey===undefined?ac.key:ac.originalKey;
ac.key=ac.originalKey+(ac.yAxis==1?"":" (right axis)");
return ac
})).call(i);
if(v.top!=i.height()){v.top=i.height();
G=(w||parseInt(Q.style("height"))||400)-v.top-v.bottom
}Y.select(".legendWrap").attr("transform","translate("+(y/2)+","+(-v.top)+")")
}q.width(y).height(G).interpolate("monotone").color(ab.map(function(ad,ac){return ad.color||A[ac%A.length]
}).filter(function(ad,ac){return !ab[ac].disabled&&ab[ac].yAxis==1&&ab[ac].type=="line"
}));
p.width(y).height(G).interpolate("monotone").color(ab.map(function(ad,ac){return ad.color||A[ac%A.length]
}).filter(function(ad,ac){return !ab[ac].disabled&&ab[ac].yAxis==2&&ab[ac].type=="line"
}));
j.width(y).height(G).color(ab.map(function(ad,ac){return ad.color||A[ac%A.length]
}).filter(function(ad,ac){return !ab[ac].disabled&&ab[ac].yAxis==1&&ab[ac].type=="bar"
}));
g.width(y).height(G).color(ab.map(function(ad,ac){return ad.color||A[ac%A.length]
}).filter(function(ad,ac){return !ab[ac].disabled&&ab[ac].yAxis==2&&ab[ac].type=="bar"
}));
o.width(y).height(G).color(ab.map(function(ad,ac){return ad.color||A[ac%A.length]
}).filter(function(ad,ac){return !ab[ac].disabled&&ab[ac].yAxis==1&&ab[ac].type=="area"
}));
n.width(y).height(G).color(ab.map(function(ad,ac){return ad.color||A[ac%A.length]
}).filter(function(ad,ac){return !ab[ac].disabled&&ab[ac].yAxis==2&&ab[ac].type=="area"
}));
Y.attr("transform","translate("+v.left+","+v.top+")");
var F=Y.select(".lines1Wrap").datum(T);
var H=Y.select(".bars1Wrap").datum(X);
var aa=Y.select(".stack1Wrap").datum(P);
var V=Y.select(".lines2Wrap").datum(S);
var Z=Y.select(".bars2Wrap").datum(W);
var R=Y.select(".stack2Wrap").datum(N);
var O=P.length?P.map(function(ac){return ac.values
}).reduce(function(ad,ac){return ad.map(function(ae,af){return{x:ae.x,y:ae.y+ac[af].y}
})
}).concat([{x:0,y:0}]):[];
var M=N.length?N.map(function(ac){return ac.values
}).reduce(function(ad,ac){return ad.map(function(ae,af){return{x:ae.x,y:ae.y+ac[af].y}
})
}).concat([{x:0,y:0}]):[];
D.domain(d3.extent(d3.merge(K).concat(O),function(ac){return ac.y
})).range([0,G]);
C.domain(d3.extent(d3.merge(J).concat(M),function(ac){return ac.y
})).range([0,G]);
q.yDomain(D.domain());
j.yDomain(D.domain());
o.yDomain(D.domain());
p.yDomain(C.domain());
g.yDomain(C.domain());
n.yDomain(C.domain());
if(P.length){d3.transition(aa).call(o)
}if(N.length){d3.transition(R).call(n)
}if(X.length){d3.transition(H).call(j)
}if(W.length){d3.transition(Z).call(g)
}if(T.length){d3.transition(F).call(q)
}if(S.length){d3.transition(V).call(p)
}r.ticks(y/100).tickSize(-G,0);
Y.select(".x.axis").attr("transform","translate(0,"+G+")");
d3.transition(Y.select(".x.axis")).call(r);
f.ticks(G/36).tickSize(-y,0);
d3.transition(Y.select(".y1.axis")).call(f);
e.ticks(G/36).tickSize(-y,0);
d3.transition(Y.select(".y2.axis")).call(e);
Y.select(".y2.axis").style("opacity",J.length?1:0).attr("transform","translate("+t.range()[1]+",0)");
i.dispatch.on("legendClick",function(ad,ac){ad.disabled=!ad.disabled;
if(!ab.filter(function(ae){return !ae.disabled
}).length){ab.map(function(ae){ae.disabled=false;
L.selectAll(".series").classed("disabled",false);
return ae
})
}u.update()
});
E.on("tooltipShow",function(ac){if(h){l(ac,I.parentNode)
}})
});
return u
}q.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+v.left,x.pos[1]+v.top];
E.tooltipShow(x)
});
q.dispatch.on("elementMouseout.tooltip",function(x){E.tooltipHide(x)
});
p.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+v.left,x.pos[1]+v.top];
E.tooltipShow(x)
});
p.dispatch.on("elementMouseout.tooltip",function(x){E.tooltipHide(x)
});
j.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+v.left,x.pos[1]+v.top];
E.tooltipShow(x)
});
j.dispatch.on("elementMouseout.tooltip",function(x){E.tooltipHide(x)
});
g.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+v.left,x.pos[1]+v.top];
E.tooltipShow(x)
});
g.dispatch.on("elementMouseout.tooltip",function(x){E.tooltipHide(x)
});
o.dispatch.on("tooltipShow",function(x){if(!Math.round(o.y()(x.point)*100)){setTimeout(function(){d3.selectAll(".point.hover").classed("hover",false)
},0);
return false
}x.pos=[x.pos[0]+v.left,x.pos[1]+v.top],E.tooltipShow(x)
});
o.dispatch.on("tooltipHide",function(x){E.tooltipHide(x)
});
n.dispatch.on("tooltipShow",function(x){if(!Math.round(n.y()(x.point)*100)){setTimeout(function(){d3.selectAll(".point.hover").classed("hover",false)
},0);
return false
}x.pos=[x.pos[0]+v.left,x.pos[1]+v.top],E.tooltipShow(x)
});
n.dispatch.on("tooltipHide",function(x){E.tooltipHide(x)
});
q.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+v.left,x.pos[1]+v.top];
E.tooltipShow(x)
});
q.dispatch.on("elementMouseout.tooltip",function(x){E.tooltipHide(x)
});
p.dispatch.on("elementMouseover.tooltip",function(x){x.pos=[x.pos[0]+v.left,x.pos[1]+v.top];
E.tooltipShow(x)
});
p.dispatch.on("elementMouseout.tooltip",function(x){E.tooltipHide(x)
});
E.on("tooltipHide",function(){if(h){c.tooltip.cleanup()
}});
u.dispatch=E;
u.lines1=q;
u.lines2=p;
u.bars1=j;
u.bars2=g;
u.stack1=o;
u.stack2=n;
u.xAxis=r;
u.yAxis1=f;
u.yAxis2=e;
u.x=function(x){if(!arguments.length){return getX
}getX=x;
q.x(x);
j.x(x);
return u
};
u.y=function(x){if(!arguments.length){return getY
}getY=x;
q.y(x);
j.y(x);
return u
};
u.margin=function(x){if(!arguments.length){return v
}v=x;
return u
};
u.width=function(x){if(!arguments.length){return z
}z=x;
return u
};
u.height=function(x){if(!arguments.length){return w
}w=x;
return u
};
u.color=function(x){if(!arguments.length){return A
}A=x;
i.color(x);
return u
};
u.showLegend=function(x){if(!arguments.length){return B
}B=x;
return u
};
u.tooltips=function(x){if(!arguments.length){return h
}h=x;
return u
};
u.tooltipContent=function(x){if(!arguments.length){return m
}m=x;
return u
};
return u
};
c.models.ohlcBar=function(){var o={top:0,right:0,bottom:0,left:0},s=960,p=500,q=Math.floor(Math.random()*10000),j=d3.scale.linear(),i=d3.scale.linear(),w=function(x){return x.x
},v=function(x){return x.y
},f=function(x){return x.open
},e=function(x){return x.close
},A=function(x){return x.high
},l=function(x){return x.low
},h=[],g=[],m=false,z=true,u=c.utils.defaultColor(),t,r,B=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");
function n(x){x.each(function(I){var L=s-o.left-o.right,F=p-o.top-o.bottom,C=d3.select(this);
j.domain(t||d3.extent(I[0].values.map(w).concat(h)));
if(m){j.range([L*0.5/I[0].values.length,L*(I[0].values.length-0.5)/I[0].values.length])
}else{j.range([0,L])
}i.domain(r||[d3.min(I[0].values.map(l).concat(g)),d3.max(I[0].values.map(A).concat(g))]).range([F,0]);
if(j.domain()[0]===j.domain()[1]||i.domain()[0]===i.domain()[1]){singlePoint=true
}if(j.domain()[0]===j.domain()[1]){j.domain()[0]?j.domain([j.domain()[0]-j.domain()[0]*0.01,j.domain()[1]+j.domain()[1]*0.01]):j.domain([-1,1])
}if(i.domain()[0]===i.domain()[1]){i.domain()[0]?i.domain([i.domain()[0]+i.domain()[0]*0.01,i.domain()[1]-i.domain()[1]*0.01]):i.domain([-1,1])
}var D=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([I[0].values]);
var H=D.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar");
var G=H.append("defs");
var y=H.append("g");
var J=D.select("g");
y.append("g").attr("class","nv-ticks");
D.attr("transform","translate("+o.left+","+o.top+")");
C.on("click",function(N,M){B.chartClick({data:N,index:M,pos:d3.event,id:q})
});
G.append("clipPath").attr("id","nv-chart-clip-path-"+q).append("rect");
D.select("#nv-chart-clip-path-"+q+" rect").attr("width",L).attr("height",F);
J.attr("clip-path",z?"url(#nv-chart-clip-path-"+q+")":"");
var K=D.select(".nv-ticks").selectAll(".nv-tick").data(function(M){return M
});
K.exit().remove();
var E=K.enter().append("path").attr("class",function(O,N,M){return(f(O,N)>e(O,N)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+M+"-"+N
}).attr("d",function(O,N){var M=(L/I[0].values.length)*0.9;
return"m0,0l0,"+(i(f(O,N))-i(A(O,N)))+"l"+(-M/2)+",0l"+(M/2)+",0l0,"+(i(l(O,N))-i(f(O,N)))+"l0,"+(i(e(O,N))-i(l(O,N)))+"l"+(M/2)+",0l"+(-M/2)+",0z"
}).attr("transform",function(N,M){return"translate("+j(w(N,M))+","+i(A(N,M))+")"
}).on("mouseover",function(N,M){d3.select(this).classed("hover",true);
B.elementMouseover({point:N,series:I[0],pos:[j(w(N,M)),i(v(N,M))],pointIndex:M,seriesIndex:0,e:d3.event})
}).on("mouseout",function(N,M){d3.select(this).classed("hover",false);
B.elementMouseout({point:N,series:I[0],pointIndex:M,seriesIndex:0,e:d3.event})
}).on("click",function(N,M){B.elementClick({value:v(N,M),data:N,index:M,pos:[j(w(N,M)),i(v(N,M))],e:d3.event,id:q});
d3.event.stopPropagation()
}).on("dblclick",function(N,M){B.elementDblClick({value:v(N,M),data:N,index:M,pos:[j(w(N,M)),i(v(N,M))],e:d3.event,id:q});
d3.event.stopPropagation()
});
K.attr("class",function(O,N,M){return(f(O,N)>e(O,N)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+M+"-"+N
});
d3.transition(K).attr("transform",function(N,M){return"translate("+j(w(N,M))+","+i(A(N,M))+")"
}).attr("d",function(O,N){var M=(L/I[0].values.length)*0.9;
return"m0,0l0,"+(i(f(O,N))-i(A(O,N)))+"l"+(-M/2)+",0l"+(M/2)+",0l0,"+(i(l(O,N))-i(f(O,N)))+"l0,"+(i(e(O,N))-i(l(O,N)))+"l"+(M/2)+",0l"+(-M/2)+",0z"
})
});
return n
}n.dispatch=B;
n.x=function(x){if(!arguments.length){return w
}w=x;
return n
};
n.y=function(x){if(!arguments.length){return v
}v=x;
return n
};
n.open=function(x){if(!arguments.length){return f
}f=x;
return n
};
n.close=function(x){if(!arguments.length){return e
}e=x;
return n
};
n.high=function(x){if(!arguments.length){return A
}A=x;
return n
};
n.low=function(x){if(!arguments.length){return l
}l=x;
return n
};
n.margin=function(x){if(!arguments.length){return o
}o.top=typeof x.top!="undefined"?x.top:o.top;
o.right=typeof x.right!="undefined"?x.right:o.right;
o.bottom=typeof x.bottom!="undefined"?x.bottom:o.bottom;
o.left=typeof x.left!="undefined"?x.left:o.left;
return n
};
n.width=function(x){if(!arguments.length){return s
}s=x;
return n
};
n.height=function(x){if(!arguments.length){return p
}p=x;
return n
};
n.xScale=function(x){if(!arguments.length){return j
}j=x;
return n
};
n.yScale=function(x){if(!arguments.length){return i
}i=x;
return n
};
n.xDomain=function(x){if(!arguments.length){return t
}t=x;
return n
};
n.yDomain=function(x){if(!arguments.length){return r
}r=x;
return n
};
n.forceX=function(x){if(!arguments.length){return h
}h=x;
return n
};
n.forceY=function(x){if(!arguments.length){return g
}g=x;
return n
};
n.padData=function(x){if(!arguments.length){return m
}m=x;
return n
};
n.clipEdge=function(x){if(!arguments.length){return z
}z=x;
return n
};
n.color=function(x){if(!arguments.length){return u
}u=c.utils.getColor(x);
return n
};
n.id=function(x){if(!arguments.length){return q
}q=x;
return n
};
return n
};
c.models.pie=function(){var n={top:0,right:0,bottom:0,left:0},s=500,o=500,e=function(A){return A.values
},y=function(A){return A.x
},x=function(A){return A.y
},i=function(A){return A.description
},q=Math.floor(Math.random()*10000),u=c.utils.defaultColor(),g=d3.format(",.2f"),p=true,h=true,t=false,v=0.02,j=false,f=false,w=false,r=false,l=0.5,z=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");
function m(A){A.each(function(T){var B=s-n.left-n.right,E=o-n.top-n.bottom,F=Math.min(B,E)/2,I=F-(F/5),L=d3.select(this);
var K=L.selectAll(".nv-wrap.nv-pie").data([e(T[0])]);
var G=K.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+q);
var P=G.append("g");
var Q=K.select("g");
P.append("g").attr("class","nv-pie");
K.attr("transform","translate("+n.left+","+n.top+")");
Q.select(".nv-pie").attr("transform","translate("+B/2+","+E/2+")");
L.on("click",function(V,U){z.chartClick({data:V,index:U,pos:d3.event,id:q})
});
var J=d3.svg.arc().outerRadius(I);
if(w){J.startAngle(w)
}if(r){J.endAngle(r)
}if(j){J.innerRadius(F*l)
}var M=d3.layout.pie().sort(null).value(function(U){return U.disabled?0:x(U)
});
var C=K.select(".nv-pie").selectAll(".nv-slice").data(M);
C.exit().remove();
var S=C.enter().append("g").attr("class","nv-slice").on("mouseover",function(V,U){d3.select(this).classed("hover",true);
z.elementMouseover({label:y(V.data),value:x(V.data),point:V.data,pointIndex:U,pos:[d3.event.pageX,d3.event.pageY],id:q})
}).on("mouseout",function(V,U){d3.select(this).classed("hover",false);
z.elementMouseout({label:y(V.data),value:x(V.data),point:V.data,index:U,id:q})
}).on("click",function(V,U){z.elementClick({label:y(V.data),value:x(V.data),point:V.data,index:U,pos:d3.event,id:q});
d3.event.stopPropagation()
}).on("dblclick",function(V,U){z.elementDblClick({label:y(V.data),value:x(V.data),point:V.data,index:U,pos:d3.event,id:q});
d3.event.stopPropagation()
});
C.attr("fill",function(V,U){return u(V,U)
}).attr("stroke",function(V,U){return u(V,U)
});
var O=S.append("path").each(function(U){this._current=U
});
d3.transition(C.select("path")).attr("d",J).attrTween("d",D);
if(p){var H=d3.svg.arc().innerRadius(0);
if(h){H=J
}if(t){H=d3.svg.arc().outerRadius(J.outerRadius())
}S.append("g").classed("nv-label",true).each(function(W,U){var V=d3.select(this);
V.attr("transform",function(Y){if(f){Y.outerRadius=I+10;
Y.innerRadius=I+15;
var X=(Y.startAngle+Y.endAngle)/2*(180/Math.PI);
if((Y.startAngle+Y.endAngle)/2<Math.PI){X-=90
}else{X+=90
}return"translate("+H.centroid(Y)+") rotate("+X+")"
}else{Y.outerRadius=F+10;
Y.innerRadius=F+15;
return"translate("+H.centroid(Y)+")"
}});
V.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);
V.append("text").style("text-anchor",f?((W.startAngle+W.endAngle)/2<Math.PI?"start":"end"):"middle").style("fill","#000")
});
C.select(".nv-label").transition().attr("transform",function(V){if(f){V.outerRadius=I+10;
V.innerRadius=I+15;
var U=(V.startAngle+V.endAngle)/2*(180/Math.PI);
if((V.startAngle+V.endAngle)/2<Math.PI){U-=90
}else{U+=90
}return"translate("+H.centroid(V)+") rotate("+U+")"
}else{V.outerRadius=F+10;
V.innerRadius=F+15;
return"translate("+H.centroid(V)+")"
}});
C.each(function(X,U){var W=d3.select(this);
W.select(".nv-label text").style("text-anchor",f?((X.startAngle+X.endAngle)/2<Math.PI?"start":"end"):"middle").text(function(aa,Y){var Z=(aa.endAngle-aa.startAngle)/(2*Math.PI);
return(aa.value&&Z>v)?y(aa.data):""
});
var V=W.select("text").node().getBBox();
W.select(".nv-label rect").attr("width",V.width+10).attr("height",V.height+10).attr("transform",function(){return"translate("+[V.x-5,V.y-5]+")"
})
})
}function R(V){var U=(V.startAngle+V.endAngle)*90/Math.PI-90;
return U>90?U-180:U
}function D(U){U.endAngle=isNaN(U.endAngle)?0:U.endAngle;
U.startAngle=isNaN(U.startAngle)?0:U.startAngle;
if(!j){U.innerRadius=0
}var V=d3.interpolate(this._current,U);
this._current=V(0);
return function(W){return J(V(W))
}
}function N(U){U.innerRadius=0;
var V=d3.interpolate({startAngle:0,endAngle:0},U);
return function(W){return J(V(W))
}
}});
return m
}m.dispatch=z;
m.margin=function(A){if(!arguments.length){return n
}n.top=typeof A.top!="undefined"?A.top:n.top;
n.right=typeof A.right!="undefined"?A.right:n.right;
n.bottom=typeof A.bottom!="undefined"?A.bottom:n.bottom;
n.left=typeof A.left!="undefined"?A.left:n.left;
return m
};
m.width=function(A){if(!arguments.length){return s
}s=A;
return m
};
m.height=function(A){if(!arguments.length){return o
}o=A;
return m
};
m.values=function(A){if(!arguments.length){return e
}e=A;
return m
};
m.x=function(A){if(!arguments.length){return y
}y=A;
return m
};
m.y=function(A){if(!arguments.length){return x
}x=d3.functor(A);
return m
};
m.description=function(A){if(!arguments.length){return i
}i=A;
return m
};
m.showLabels=function(A){if(!arguments.length){return p
}p=A;
return m
};
m.labelSunbeamLayout=function(A){if(!arguments.length){return f
}f=A;
return m
};
m.donutLabelsOutside=function(A){if(!arguments.length){return t
}t=A;
return m
};
m.pieLabelsOutside=function(A){if(!arguments.length){return h
}h=A;
return m
};
m.donut=function(A){if(!arguments.length){return j
}j=A;
return m
};
m.donutRatio=function(A){if(!arguments.length){return l
}l=A;
return m
};
m.startAngle=function(A){if(!arguments.length){return w
}w=A;
return m
};
m.endAngle=function(A){if(!arguments.length){return r
}r=A;
return m
};
m.id=function(A){if(!arguments.length){return q
}q=A;
return m
};
m.color=function(A){if(!arguments.length){return u
}u=c.utils.getColor(A);
return m
};
m.valueFormat=function(A){if(!arguments.length){return g
}g=A;
return m
};
m.labelThreshold=function(A){if(!arguments.length){return v
}v=A;
return m
};
return m
};
c.models.pieChart=function(){var i=c.models.pie(),n=c.models.legend();
var g={top:30,right:20,bottom:20,left:20},f=null,r=null,q=true,h=c.utils.defaultColor(),m=true,t=function(u,x,w,v){return"<h3>"+u+"</h3><p>"+x+"</p>"
},e={},s=null,p="No Data Available.",j=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");
var o=function(A,u){var v=i.description()(A.point)||i.x()(A.point);
var z=A.pos[0]+((u&&u.offsetLeft)||0),x=A.pos[1]+((u&&u.offsetTop)||0),B=i.valueFormat()(i.y()(A.point)),w=t(v,B,A,l);
c.tooltip.show([z,x],w,A.value<0?"n":"s",null,u)
};
function l(u){u.each(function(A){var w=d3.select(this),C=this;
var F=(f||parseInt(w.style("width"))||960)-g.left-g.right,z=(r||parseInt(w.style("height"))||400)-g.top-g.bottom;
l.update=function(){w.transition().call(l)
};
l.container=this;
e.disabled=A[0].map(function(G){return !!G.disabled
});
if(!s){var E;
s={};
for(E in e){if(e[E] instanceof Array){s[E]=e[E].slice(0)
}else{s[E]=e[E]
}}}if(!A[0]||!A[0].length){var x=w.selectAll(".nv-noData").data([p]);
x.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
x.attr("x",g.left+F/2).attr("y",g.top+z/2).text(function(G){return G
});
return l
}else{w.selectAll(".nv-noData").remove()
}var y=w.selectAll("g.nv-wrap.nv-pieChart").data([A]);
var v=y.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g");
var B=y.select("g");
v.append("g").attr("class","nv-pieWrap");
v.append("g").attr("class","nv-legendWrap");
if(q){n.width(F).key(i.x());
y.select(".nv-legendWrap").datum(i.values()(A[0])).call(n);
if(g.top!=n.height()){g.top=n.height();
z=(r||parseInt(w.style("height"))||400)-g.top-g.bottom
}y.select(".nv-legendWrap").attr("transform","translate(0,"+(-g.top)+")")
}y.attr("transform","translate("+g.left+","+g.top+")");
i.width(F).height(z);
var D=B.select(".nv-pieWrap").datum(A);
d3.transition(D).call(i);
n.dispatch.on("legendClick",function(I,G,H){I.disabled=!I.disabled;
if(!i.values()(A[0]).filter(function(J){return !J.disabled
}).length){i.values()(A[0]).map(function(J){J.disabled=false;
y.selectAll(".nv-series").classed("disabled",false);
return J
})
}e.disabled=A[0].map(function(J){return !!J.disabled
});
j.stateChange(e);
l.update()
});
i.dispatch.on("elementMouseout.tooltip",function(G){j.tooltipHide(G)
});
j.on("changeState",function(G){if(typeof G.disabled!=="undefined"){A[0].forEach(function(I,H){I.disabled=G.disabled[H]
});
e.disabled=G.disabled
}l.update()
})
});
return l
}i.dispatch.on("elementMouseover.tooltip",function(u){u.pos=[u.pos[0]+g.left,u.pos[1]+g.top];
j.tooltipShow(u)
});
j.on("tooltipShow",function(u){if(m){o(u)
}});
j.on("tooltipHide",function(){if(m){c.tooltip.cleanup()
}});
l.legend=n;
l.dispatch=j;
l.pie=i;
d3.rebind(l,i,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","donut","donutRatio","labelThreshold");
l.margin=function(u){if(!arguments.length){return g
}g.top=typeof u.top!="undefined"?u.top:g.top;
g.right=typeof u.right!="undefined"?u.right:g.right;
g.bottom=typeof u.bottom!="undefined"?u.bottom:g.bottom;
g.left=typeof u.left!="undefined"?u.left:g.left;
return l
};
l.width=function(u){if(!arguments.length){return f
}f=u;
return l
};
l.height=function(u){if(!arguments.length){return r
}r=u;
return l
};
l.color=function(u){if(!arguments.length){return h
}h=c.utils.getColor(u);
n.color(h);
i.color(h);
return l
};
l.showLegend=function(u){if(!arguments.length){return q
}q=u;
return l
};
l.tooltips=function(u){if(!arguments.length){return m
}m=u;
return l
};
l.tooltipContent=function(u){if(!arguments.length){return t
}t=u;
return l
};
l.state=function(u){if(!arguments.length){return e
}e=u;
return l
};
l.defaultState=function(u){if(!arguments.length){return s
}s=u;
return l
};
l.noData=function(u){if(!arguments.length){return p
}p=u;
return l
};
return l
};
c.models.scatter=function(){var l={top:0,right:0,bottom:0,left:0},e=960,g=500,s=c.utils.defaultColor(),w=Math.floor(Math.random()*100000),G=d3.scale.linear(),E=d3.scale.linear(),C=d3.scale.linear(),L=function(x){return x.x
},K=function(x){return x.y
},v=function(x){return x.size||1
},p=function(x){return x.shape||"circle"
},O=true,D=[],B=[],N=[],j=true,M=null,P=function(x){return !x.notActive
},I=false,n=0.1,u=false,R=true,r=function(){return 25
},i=null,h=null,m=null,t=null,H=false,J=d3.dispatch("elementClick","elementMouseover","elementMouseout"),S=true;
var q,f,A,F,o=false;
function Q(x){x.each(function(Z){var ad=e-l.left-l.right,V=g-l.top-l.bottom,z=d3.select(this);
Z=Z.map(function(af,ae){af.values=af.values.map(function(ag){ag.series=ae;
return ag
});
return af
});
var U=(i&&h&&m)?[]:d3.merge(Z.map(function(ae){return ae.values.map(function(ag,af){return{x:L(ag,af),y:K(ag,af),size:v(ag,af)}
})
}));
G.domain(i||d3.extent(U.map(function(ae){return ae.x
}).concat(D)));
if(I&&Z[0]){G.range([(ad*n+ad)/(2*Z[0].values.length),ad-ad*(1+n)/(2*Z[0].values.length)])
}else{G.range([0,ad])
}E.domain(h||d3.extent(U.map(function(ae){return ae.y
}).concat(B))).range([V,0]);
C.domain(m||d3.extent(U.map(function(ae){return ae.size
}).concat(N))).range(t||[16,256]);
if(G.domain()[0]===G.domain()[1]||E.domain()[0]===E.domain()[1]){H=true
}if(G.domain()[0]===G.domain()[1]){G.domain()[0]?G.domain([G.domain()[0]-G.domain()[0]*0.01,G.domain()[1]+G.domain()[1]*0.01]):G.domain([-1,1])
}if(E.domain()[0]===E.domain()[1]){E.domain()[0]?E.domain([E.domain()[0]+E.domain()[0]*0.01,E.domain()[1]-E.domain()[1]*0.01]):E.domain([-1,1])
}if(isNaN(G.domain()[0])){G.domain([-1,1])
}if(isNaN(E.domain()[0])){E.domain([-1,1])
}q=q||G;
f=f||E;
A=A||C;
var T=z.selectAll("g.nv-wrap.nv-scatter").data([Z]);
var Y=T.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+w+(H?" nv-single-point":""));
var W=Y.append("defs");
var y=Y.append("g");
var aa=T.select("g");
y.append("g").attr("class","nv-groups");
y.append("g").attr("class","nv-point-paths");
T.attr("transform","translate("+l.left+","+l.top+")");
W.append("clipPath").attr("id","nv-edge-clip-"+w).append("rect");
T.select("#nv-edge-clip-"+w+" rect").attr("width",ad).attr("height",V);
aa.attr("clip-path",u?"url(#nv-edge-clip-"+w+")":"");
function ab(){if(!j){return false
}var ag;
var af=d3.merge(Z.map(function(am,al){return am.values.map(function(an,aq){var ap=L(an,aq)+Math.random()*1e-7;
var ao=K(an,aq)+Math.random()*1e-7;
return[G(ap),E(ao),al,aq,an]
}).filter(function(an,ao){return P(an[4],ao)
})
}));
if(S===true){if(R){var aj=T.select("defs").selectAll(".nv-point-clips").data([w]).enter();
aj.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+w);
var ah=T.select("#nv-points-clip-"+w).selectAll("circle").data(af);
ah.enter().append("circle").attr("r",r);
ah.exit().remove();
ah.attr("cx",function(al){return al[0]
}).attr("cy",function(al){return al[1]
});
T.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+w+")")
}if(af.length){af.push([G.range()[0]-20,E.range()[0]-20,null,null]);
af.push([G.range()[1]+20,E.range()[1]+20,null,null]);
af.push([G.range()[0]-20,E.range()[0]+20,null,null]);
af.push([G.range()[1]+20,E.range()[1]-20,null,null])
}var ai=d3.geom.polygon([[-10,-10],[-10,g+10],[e+10,g+10],[e+10,-10]]);
var ak=d3.geom.voronoi(af).map(function(am,al){return{data:ai.clip(am),series:af[al][2],point:af[al][3]}
});
var ae=T.select(".nv-point-paths").selectAll("path").data(ak);
ae.enter().append("path").attr("class",function(am,al){return"nv-path-"+al
});
ae.exit().remove();
ae.attr("d",function(al){if(al.data.length===0){return"M 0 0"
}else{return"M"+al.data.join("L")+"Z"
}});
ae.on("click",function(an){if(o){return 0
}var am=Z[an.series],al=am.values[an.point];
J.elementClick({point:al,series:am,pos:[G(L(al,an.point))+l.left,E(K(al,an.point))+l.top],seriesIndex:an.series,pointIndex:an.point})
}).on("mouseover",function(an){if(o){return 0
}var am=Z[an.series],al=am.values[an.point];
J.elementMouseover({point:al,series:am,pos:[G(L(al,an.point))+l.left,E(K(al,an.point))+l.top],seriesIndex:an.series,pointIndex:an.point})
}).on("mouseout",function(ao,an){if(o){return 0
}var am=Z[ao.series],al=am.values[ao.point];
J.elementMouseout({point:al,series:am,seriesIndex:ao.series,pointIndex:ao.point})
})
}else{T.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(ao,an){if(o||!Z[ao.series]){return 0
}var am=Z[ao.series],al=am.values[an];
J.elementClick({point:al,series:am,pos:[G(L(al,an))+l.left,E(K(al,an))+l.top],seriesIndex:ao.series,pointIndex:an})
}).on("mouseover",function(ao,an){if(o||!Z[ao.series]){return 0
}var am=Z[ao.series],al=am.values[an];
J.elementMouseover({point:al,series:am,pos:[G(L(al,an))+l.left,E(K(al,an))+l.top],seriesIndex:ao.series,pointIndex:an})
}).on("mouseout",function(ao,an){if(o||!Z[ao.series]){return 0
}var am=Z[ao.series],al=am.values[an];
J.elementMouseout({point:al,series:am,seriesIndex:ao.series,pointIndex:an})
})
}o=false
}o=true;
var X=T.select(".nv-groups").selectAll(".nv-group").data(function(ae){return ae
},function(ae){return ae.key
});
X.enter().append("g").style("stroke-opacity",0.000001).style("fill-opacity",0.000001);
d3.transition(X.exit()).style("stroke-opacity",0.000001).style("fill-opacity",0.000001).remove();
X.attr("class",function(af,ae){return"nv-group nv-series-"+ae
}).classed("hover",function(ae){return ae.hover
});
d3.transition(X).style("fill",function(af,ae){return s(af,ae)
}).style("stroke",function(af,ae){return s(af,ae)
}).style("stroke-opacity",1).style("fill-opacity",0.5);
if(O){var ac=X.selectAll("circle.nv-point").data(function(ae){return ae.values
},M);
ac.enter().append("circle").attr("cx",function(af,ae){return q(L(af,ae))
}).attr("cy",function(af,ae){return f(K(af,ae))
}).attr("r",function(af,ae){return Math.sqrt(C(v(af,ae))/Math.PI)
});
ac.exit().remove();
X.exit().selectAll("path.nv-point").transition().attr("cx",function(af,ae){return G(L(af,ae))
}).attr("cy",function(af,ae){return E(K(af,ae))
}).remove();
ac.each(function(af,ae){d3.select(this).classed("nv-point",true).classed("nv-point-"+ae,true)
});
ac.transition().attr("cx",function(af,ae){return G(L(af,ae))
}).attr("cy",function(af,ae){return E(K(af,ae))
}).attr("r",function(af,ae){return Math.sqrt(C(v(af,ae))/Math.PI)
})
}else{var ac=X.selectAll("path.nv-point").data(function(ae){return ae.values
});
ac.enter().append("path").attr("transform",function(af,ae){return"translate("+q(L(af,ae))+","+f(K(af,ae))+")"
}).attr("d",d3.svg.symbol().type(p).size(function(af,ae){return C(v(af,ae))
}));
ac.exit().remove();
d3.transition(X.exit().selectAll("path.nv-point")).attr("transform",function(af,ae){return"translate("+G(L(af,ae))+","+E(K(af,ae))+")"
}).remove();
ac.each(function(af,ae){d3.select(this).classed("nv-point",true).classed("nv-point-"+ae,true)
});
ac.transition().attr("transform",function(af,ae){return"translate("+G(L(af,ae))+","+E(K(af,ae))+")"
}).attr("d",d3.svg.symbol().type(p).size(function(af,ae){return C(v(af,ae))
}))
}clearTimeout(F);
F=setTimeout(ab,300);
q=G.copy();
f=E.copy();
A=C.copy()
});
return Q
}J.on("elementMouseover.point",function(x){if(j){d3.select(".nv-chart-"+w+" .nv-series-"+x.seriesIndex+" .nv-point-"+x.pointIndex).classed("hover",true)
}});
J.on("elementMouseout.point",function(x){if(j){d3.select(".nv-chart-"+w+" .nv-series-"+x.seriesIndex+" .nv-point-"+x.pointIndex).classed("hover",false)
}});
Q.dispatch=J;
Q.x=function(x){if(!arguments.length){return L
}L=d3.functor(x);
return Q
};
Q.y=function(x){if(!arguments.length){return K
}K=d3.functor(x);
return Q
};
Q.size=function(x){if(!arguments.length){return v
}v=d3.functor(x);
return Q
};
Q.margin=function(x){if(!arguments.length){return l
}l.top=typeof x.top!="undefined"?x.top:l.top;
l.right=typeof x.right!="undefined"?x.right:l.right;
l.bottom=typeof x.bottom!="undefined"?x.bottom:l.bottom;
l.left=typeof x.left!="undefined"?x.left:l.left;
return Q
};
Q.width=function(x){if(!arguments.length){return e
}e=x;
return Q
};
Q.height=function(x){if(!arguments.length){return g
}g=x;
return Q
};
Q.xScale=function(x){if(!arguments.length){return G
}G=x;
return Q
};
Q.yScale=function(x){if(!arguments.length){return E
}E=x;
return Q
};
Q.zScale=function(x){if(!arguments.length){return C
}C=x;
return Q
};
Q.xDomain=function(x){if(!arguments.length){return i
}i=x;
return Q
};
Q.yDomain=function(x){if(!arguments.length){return h
}h=x;
return Q
};
Q.sizeDomain=function(x){if(!arguments.length){return m
}m=x;
return Q
};
Q.sizeRange=function(x){if(!arguments.length){return t
}t=x;
return Q
};
Q.forceX=function(x){if(!arguments.length){return D
}D=x;
return Q
};
Q.forceY=function(x){if(!arguments.length){return B
}B=x;
return Q
};
Q.forceSize=function(x){if(!arguments.length){return N
}N=x;
return Q
};
Q.interactive=function(x){if(!arguments.length){return j
}j=x;
return Q
};
Q.pointKey=function(x){if(!arguments.length){return M
}M=x;
return Q
};
Q.pointActive=function(x){if(!arguments.length){return P
}P=x;
return Q
};
Q.padData=function(x){if(!arguments.length){return I
}I=x;
return Q
};
Q.padDataOuter=function(x){if(!arguments.length){return n
}n=x;
return Q
};
Q.clipEdge=function(x){if(!arguments.length){return u
}u=x;
return Q
};
Q.clipVoronoi=function(x){if(!arguments.length){return R
}R=x;
return Q
};
Q.useVoronoi=function(x){if(!arguments.length){return S
}S=x;
if(S===false){R=false
}return Q
};
Q.clipRadius=function(x){if(!arguments.length){return r
}r=x;
return Q
};
Q.color=function(x){if(!arguments.length){return s
}s=c.utils.getColor(x);
return Q
};
Q.shape=function(x){if(!arguments.length){return p
}p=x;
return Q
};
Q.onlyCircles=function(x){if(!arguments.length){return O
}O=x;
return Q
};
Q.id=function(x){if(!arguments.length){return w
}w=x;
return Q
};
Q.singlePoint=function(x){if(!arguments.length){return H
}H=x;
return Q
};
return Q
};
c.models.scatterChart=function(){var u=c.models.scatter(),r=c.models.axis(),f=c.models.axis(),i=c.models.legend(),v=c.models.legend(),B=c.models.distribution(),z=c.models.distribution();
var C={top:30,right:20,bottom:50,left:75},H=null,D=null,I=c.utils.defaultColor(),t=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):u.xScale(),s=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):u.yScale(),w=0,g=0,e=false,O=false,L=true,M=!!d3.fisheye,G=0,J=false,h=true,F=function(Q,P,R){return"<strong>"+P+"</strong>"
},E=function(Q,P,R){return"<strong>"+R+"</strong>"
},o=null,n={},p=null,N=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),m="No Data Available.";
u.xScale(t).yScale(s);
r.orient("bottom").tickPadding(10);
f.orient("left").tickPadding(10);
B.axis("x");
z.axis("y");
var K,j;
var l=function(S,V){var Q=S.pos[0]+(V.offsetLeft||0),U=S.pos[1]+(V.offsetTop||0),R=S.pos[0]+(V.offsetLeft||0),y=s.range()[0]+C.top+(V.offsetTop||0),P=t.range()[0]+C.left+(V.offsetLeft||0),x=S.pos[1]+(V.offsetTop||0),W=r.tickFormat()(u.x()(S.point,S.pointIndex)),T=f.tickFormat()(u.y()(S.point,S.pointIndex));
if(F!=null){c.tooltip.show([R,y],F(S.series.key,W,T,S,A),"n",1,V,"x-nvtooltip")
}if(E!=null){c.tooltip.show([P,x],E(S.series.key,W,T,S,A),"e",1,V,"y-nvtooltip")
}if(o!=null){c.tooltip.show([Q,U],o(S.series.key,W,T,S,A),S.value<0?"n":"s",null,V)
}};
var q=[{key:"Magnify",disabled:true}];
function A(x){x.each(function(X){var R=d3.select(this),Z=this;
var ab=(H||parseInt(R.style("width"))||960)-C.left-C.right,U=(D||parseInt(R.style("height"))||400)-C.top-C.bottom;
A.update=function(){R.transition().call(A)
};
n.disabled=X.map(function(ac){return !!ac.disabled
});
if(!p){var aa;
p={};
for(aa in n){if(n[aa] instanceof Array){p[aa]=n[aa].slice(0)
}else{p[aa]=n[aa]
}}}if(!X||!X.length||!X.filter(function(ac){return ac.values.length
}).length){var S=R.selectAll(".nv-noData").data([m]);
S.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
S.attr("x",C.left+ab/2).attr("y",C.top+U/2).text(function(ac){return ac
});
return A
}else{R.selectAll(".nv-noData").remove()
}K=K||t;
j=j||s;
var T=R.selectAll("g.nv-wrap.nv-scatterChart").data([X]);
var V=T.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+u.id());
var P=V.append("g");
var Y=T.select("g");
P.append("rect").attr("class","nvd3 nv-background");
P.append("g").attr("class","nv-x nv-axis");
P.append("g").attr("class","nv-y nv-axis");
P.append("g").attr("class","nv-scatterWrap");
P.append("g").attr("class","nv-distWrap");
P.append("g").attr("class","nv-legendWrap");
P.append("g").attr("class","nv-controlsWrap");
if(L){i.width(ab/2);
T.select(".nv-legendWrap").datum(X).call(i);
if(C.top!=i.height()){C.top=i.height();
U=(D||parseInt(R.style("height"))||400)-C.top-C.bottom
}T.select(".nv-legendWrap").attr("transform","translate("+(ab/2)+","+(-C.top)+")")
}if(M){v.width(180).color(["#444"]);
Y.select(".nv-controlsWrap").datum(q).attr("transform","translate(0,"+(-C.top)+")").call(v)
}T.attr("transform","translate("+C.left+","+C.top+")");
u.width(ab).height(U).color(X.map(function(ad,ac){return ad.color||I(ad,ac)
}).filter(function(ad,ac){return !X[ac].disabled
})).xDomain(null).yDomain(null);
T.select(".nv-scatterWrap").datum(X.filter(function(ac){return !ac.disabled
})).call(u);
if(w){var y=t.domain()[1]-t.domain()[0];
u.xDomain([t.domain()[0]-(w*y),t.domain()[1]+(w*y)])
}if(g){var W=s.domain()[1]-s.domain()[0];
u.yDomain([s.domain()[0]-(g*W),s.domain()[1]+(g*W)])
}T.select(".nv-scatterWrap").datum(X.filter(function(ac){return !ac.disabled
})).call(u);
r.scale(t).ticks(r.ticks()&&r.ticks().length?r.ticks():ab/100).tickSize(-U,0);
Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+s.range()[0]+")").call(r);
f.scale(s).ticks(f.ticks()&&f.ticks().length?f.ticks():U/36).tickSize(-ab,0);
Y.select(".nv-y.nv-axis").call(f);
if(e){B.getData(u.x()).scale(t).width(ab).color(X.map(function(ad,ac){return ad.color||I(ad,ac)
}).filter(function(ad,ac){return !X[ac].disabled
}));
P.select(".nv-distWrap").append("g").attr("class","nv-distributionX");
Y.select(".nv-distributionX").attr("transform","translate(0,"+s.range()[0]+")").datum(X.filter(function(ac){return !ac.disabled
})).call(B)
}if(O){z.getData(u.y()).scale(s).width(U).color(X.map(function(ad,ac){return ad.color||I(ad,ac)
}).filter(function(ad,ac){return !X[ac].disabled
}));
P.select(".nv-distWrap").append("g").attr("class","nv-distributionY");
Y.select(".nv-distributionY").attr("transform","translate(-"+z.size()+",0)").datum(X.filter(function(ac){return !ac.disabled
})).call(z)
}if(d3.fisheye){Y.select(".nv-background").attr("width",ab).attr("height",U);
Y.select(".nv-background").on("mousemove",Q);
Y.select(".nv-background").on("click",function(){J=!J
});
u.dispatch.on("elementClick.freezeFisheye",function(){J=!J
})
}function Q(){if(J){Y.select(".nv-point-paths").style("pointer-events","all");
return false
}Y.select(".nv-point-paths").style("pointer-events","none");
var ac=d3.mouse(this);
t.distortion(G).focus(ac[0]);
s.distortion(G).focus(ac[1]);
Y.select(".nv-scatterWrap").call(u);
Y.select(".nv-x.nv-axis").call(r);
Y.select(".nv-y.nv-axis").call(f);
Y.select(".nv-distributionX").datum(X.filter(function(ad){return !ad.disabled
})).call(B);
Y.select(".nv-distributionY").datum(X.filter(function(ad){return !ad.disabled
})).call(z)
}v.dispatch.on("legendClick",function(ad,ac){ad.disabled=!ad.disabled;
G=ad.disabled?0:2.5;
Y.select(".nv-background").style("pointer-events",ad.disabled?"none":"all");
Y.select(".nv-point-paths").style("pointer-events",ad.disabled?"all":"none");
if(ad.disabled){t.distortion(G).focus(0);
s.distortion(G).focus(0);
Y.select(".nv-scatterWrap").call(u);
Y.select(".nv-x.nv-axis").call(r);
Y.select(".nv-y.nv-axis").call(f)
}else{J=false
}A.update()
});
i.dispatch.on("legendClick",function(ae,ac,ad){ae.disabled=!ae.disabled;
if(!X.filter(function(af){return !af.disabled
}).length){X.map(function(af){af.disabled=false;
T.selectAll(".nv-series").classed("disabled",false);
return af
})
}n.disabled=X.map(function(af){return !!af.disabled
});
N.stateChange(n);
A.update()
});
i.dispatch.on("legendDblclick",function(ac){X.forEach(function(ad){ad.disabled=true
});
ac.disabled=false;
n.disabled=X.map(function(ad){return !!ad.disabled
});
N.stateChange(n);
A.update()
});
u.dispatch.on("elementMouseover.tooltip",function(ac){d3.select(".nv-chart-"+u.id()+" .nv-series-"+ac.seriesIndex+" .nv-distx-"+ac.pointIndex).attr("y1",function(ae,ad){return ac.pos[1]-U
});
d3.select(".nv-chart-"+u.id()+" .nv-series-"+ac.seriesIndex+" .nv-disty-"+ac.pointIndex).attr("x2",ac.pos[0]+B.size());
ac.pos=[ac.pos[0]+C.left,ac.pos[1]+C.top];
N.tooltipShow(ac)
});
N.on("tooltipShow",function(ac){if(h){l(ac,Z.parentNode)
}});
N.on("changeState",function(ac){if(typeof ac.disabled!=="undefined"){X.forEach(function(ae,ad){ae.disabled=ac.disabled[ad]
});
n.disabled=ac.disabled
}A.update()
});
K=t.copy();
j=s.copy()
});
return A
}u.dispatch.on("elementMouseout.tooltip",function(x){N.tooltipHide(x);
d3.select(".nv-chart-"+u.id()+" .nv-series-"+x.seriesIndex+" .nv-distx-"+x.pointIndex).attr("y1",0);
d3.select(".nv-chart-"+u.id()+" .nv-series-"+x.seriesIndex+" .nv-disty-"+x.pointIndex).attr("x2",z.size())
});
N.on("tooltipHide",function(){if(h){c.tooltip.cleanup()
}});
A.dispatch=N;
A.scatter=u;
A.legend=i;
A.controls=v;
A.xAxis=r;
A.yAxis=f;
A.distX=B;
A.distY=z;
d3.rebind(A,u,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");
A.margin=function(x){if(!arguments.length){return C
}C.top=typeof x.top!="undefined"?x.top:C.top;
C.right=typeof x.right!="undefined"?x.right:C.right;
C.bottom=typeof x.bottom!="undefined"?x.bottom:C.bottom;
C.left=typeof x.left!="undefined"?x.left:C.left;
return A
};
A.width=function(x){if(!arguments.length){return H
}H=x;
return A
};
A.height=function(x){if(!arguments.length){return D
}D=x;
return A
};
A.color=function(x){if(!arguments.length){return I
}I=c.utils.getColor(x);
i.color(I);
B.color(I);
z.color(I);
return A
};
A.showDistX=function(x){if(!arguments.length){return e
}e=x;
return A
};
A.showDistY=function(x){if(!arguments.length){return O
}O=x;
return A
};
A.showControls=function(x){if(!arguments.length){return M
}M=x;
return A
};
A.showLegend=function(x){if(!arguments.length){return L
}L=x;
return A
};
A.fisheye=function(x){if(!arguments.length){return G
}G=x;
return A
};
A.xPadding=function(x){if(!arguments.length){return w
}w=x;
return A
};
A.yPadding=function(x){if(!arguments.length){return g
}g=x;
return A
};
A.tooltips=function(x){if(!arguments.length){return h
}h=x;
return A
};
A.tooltipContent=function(x){if(!arguments.length){return o
}o=x;
return A
};
A.tooltipXContent=function(x){if(!arguments.length){return F
}F=x;
return A
};
A.tooltipYContent=function(x){if(!arguments.length){return E
}E=x;
return A
};
A.state=function(x){if(!arguments.length){return n
}n=x;
return A
};
A.defaultState=function(x){if(!arguments.length){return p
}p=x;
return A
};
A.noData=function(x){if(!arguments.length){return m
}m=x;
return A
};
return A
};
c.models.scatterPlusLineChart=function(){var t=c.models.scatter(),q=c.models.axis(),f=c.models.axis(),h=c.models.legend(),u=c.models.legend(),z=c.models.distribution(),v=c.models.distribution();
var A={top:30,right:20,bottom:50,left:75},F=null,B=null,G=c.utils.defaultColor(),s=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):t.xScale(),r=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):t.yScale(),e=false,M=false,J=true,K=!!d3.fisheye,E=0,H=false,g=true,D=function(O,N,P){return"<strong>"+N+"</strong>"
},C=function(O,N,P){return"<strong>"+P+"</strong>"
},n=function(P,N,Q,O){return"<h3>"+P+"</h3><p>"+O+"</p>"
},m={},o=null,L=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),l="No Data Available.";
t.xScale(s).yScale(r);
q.orient("bottom").tickPadding(10);
f.orient("left").tickPadding(10);
z.axis("x");
v.axis("y");
var I,i;
var j=function(Q,T){var O=Q.pos[0]+(T.offsetLeft||0),S=Q.pos[1]+(T.offsetTop||0),P=Q.pos[0]+(T.offsetLeft||0),y=r.range()[0]+A.top+(T.offsetTop||0),N=s.range()[0]+A.left+(T.offsetLeft||0),x=Q.pos[1]+(T.offsetTop||0),U=q.tickFormat()(t.x()(Q.point,Q.pointIndex)),R=f.tickFormat()(t.y()(Q.point,Q.pointIndex));
if(D!=null){c.tooltip.show([P,y],D(Q.series.key,U,R,Q,w),"n",1,T,"x-nvtooltip")
}if(C!=null){c.tooltip.show([N,x],C(Q.series.key,U,R,Q,w),"e",1,T,"y-nvtooltip")
}if(n!=null){c.tooltip.show([O,S],n(Q.series.key,U,R,Q.point.tooltip,Q,w),Q.value<0?"n":"s",null,T)
}};
var p=[{key:"Magnify",disabled:true}];
function w(x){x.each(function(U){var O=d3.select(this),W=this;
var Z=(F||parseInt(O.style("width"))||960)-A.left-A.right,R=(B||parseInt(O.style("height"))||400)-A.top-A.bottom;
w.update=function(){O.transition().call(w)
};
w.container=this;
m.disabled=U.map(function(aa){return !!aa.disabled
});
if(!o){var Y;
o={};
for(Y in m){if(m[Y] instanceof Array){o[Y]=m[Y].slice(0)
}else{o[Y]=m[Y]
}}}if(!U||!U.length||!U.filter(function(aa){return aa.values.length
}).length){var P=O.selectAll(".nv-noData").data([l]);
P.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
P.attr("x",A.left+Z/2).attr("y",A.top+R/2).text(function(aa){return aa
});
return w
}else{O.selectAll(".nv-noData").remove()
}s=t.xScale();
r=t.yScale();
I=I||s;
i=i||r;
var Q=O.selectAll("g.nv-wrap.nv-scatterChart").data([U]);
var S=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+t.id());
var y=S.append("g");
var V=Q.select("g");
y.append("rect").attr("class","nvd3 nv-background");
y.append("g").attr("class","nv-x nv-axis");
y.append("g").attr("class","nv-y nv-axis");
y.append("g").attr("class","nv-scatterWrap");
y.append("g").attr("class","nv-regressionLinesWrap");
y.append("g").attr("class","nv-distWrap");
y.append("g").attr("class","nv-legendWrap");
y.append("g").attr("class","nv-controlsWrap");
Q.attr("transform","translate("+A.left+","+A.top+")");
if(J){h.width(Z/2);
Q.select(".nv-legendWrap").datum(U).call(h);
if(A.top!=h.height()){A.top=h.height();
R=(B||parseInt(O.style("height"))||400)-A.top-A.bottom
}Q.select(".nv-legendWrap").attr("transform","translate("+(Z/2)+","+(-A.top)+")")
}if(K){u.width(180).color(["#444"]);
V.select(".nv-controlsWrap").datum(p).attr("transform","translate(0,"+(-A.top)+")").call(u)
}t.width(Z).height(R).color(U.map(function(ab,aa){return ab.color||G(ab,aa)
}).filter(function(ab,aa){return !U[aa].disabled
}));
Q.select(".nv-scatterWrap").datum(U.filter(function(aa){return !aa.disabled
})).call(t);
Q.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+t.id()+")");
var T=Q.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(aa){return aa
});
var X=T.enter().append("g").attr("class","nv-regLines").append("line").attr("class","nv-regLine").style("stroke-opacity",0);
T.selectAll(".nv-regLines line").attr("x1",s.range()[0]).attr("x2",s.range()[1]).attr("y1",function(ab,aa){return r(s.domain()[0]*ab.slope+ab.intercept)
}).attr("y2",function(ab,aa){return r(s.domain()[1]*ab.slope+ab.intercept)
}).style("stroke",function(ac,ab,aa){return G(ac,aa)
}).style("stroke-opacity",function(ab,aa){return(ab.disabled||typeof ab.slope==="undefined"||typeof ab.intercept==="undefined")?0:1
});
q.scale(s).ticks(q.ticks()?q.ticks():Z/100).tickSize(-R,0);
V.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")").call(q);
f.scale(r).ticks(f.ticks()?f.ticks():R/36).tickSize(-Z,0);
V.select(".nv-y.nv-axis").call(f);
if(e){z.getData(t.x()).scale(s).width(Z).color(U.map(function(ab,aa){return ab.color||G(ab,aa)
}).filter(function(ab,aa){return !U[aa].disabled
}));
y.select(".nv-distWrap").append("g").attr("class","nv-distributionX");
V.select(".nv-distributionX").attr("transform","translate(0,"+r.range()[0]+")").datum(U.filter(function(aa){return !aa.disabled
})).call(z)
}if(M){v.getData(t.y()).scale(r).width(R).color(U.map(function(ab,aa){return ab.color||G(ab,aa)
}).filter(function(ab,aa){return !U[aa].disabled
}));
y.select(".nv-distWrap").append("g").attr("class","nv-distributionY");
V.select(".nv-distributionY").attr("transform","translate(-"+v.size()+",0)").datum(U.filter(function(aa){return !aa.disabled
})).call(v)
}if(d3.fisheye){V.select(".nv-background").attr("width",Z).attr("height",R);
V.select(".nv-background").on("mousemove",N);
V.select(".nv-background").on("click",function(){H=!H
});
t.dispatch.on("elementClick.freezeFisheye",function(){H=!H
})
}function N(){if(H){V.select(".nv-point-paths").style("pointer-events","all");
return false
}V.select(".nv-point-paths").style("pointer-events","none");
var aa=d3.mouse(this);
s.distortion(E).focus(aa[0]);
r.distortion(E).focus(aa[1]);
V.select(".nv-scatterWrap").datum(U.filter(function(ab){return !ab.disabled
})).call(t);
V.select(".nv-x.nv-axis").call(q);
V.select(".nv-y.nv-axis").call(f);
V.select(".nv-distributionX").datum(U.filter(function(ab){return !ab.disabled
})).call(z);
V.select(".nv-distributionY").datum(U.filter(function(ab){return !ab.disabled
})).call(v)
}u.dispatch.on("legendClick",function(ab,aa){ab.disabled=!ab.disabled;
E=ab.disabled?0:2.5;
V.select(".nv-background").style("pointer-events",ab.disabled?"none":"all");
V.select(".nv-point-paths").style("pointer-events",ab.disabled?"all":"none");
if(ab.disabled){s.distortion(E).focus(0);
r.distortion(E).focus(0);
V.select(".nv-scatterWrap").call(t);
V.select(".nv-x.nv-axis").call(q);
V.select(".nv-y.nv-axis").call(f)
}else{H=false
}w.update()
});
h.dispatch.on("legendClick",function(ac,aa,ab){ac.disabled=!ac.disabled;
if(!U.filter(function(ad){return !ad.disabled
}).length){U.map(function(ad){ad.disabled=false;
Q.selectAll(".nv-series").classed("disabled",false);
return ad
})
}m.disabled=U.map(function(ad){return !!ad.disabled
});
L.stateChange(m);
w.update()
});
h.dispatch.on("legendDblclick",function(aa){U.forEach(function(ab){ab.disabled=true
});
aa.disabled=false;
m.disabled=U.map(function(ab){return !!ab.disabled
});
L.stateChange(m);
w.update()
});
t.dispatch.on("elementMouseover.tooltip",function(aa){d3.select(".nv-chart-"+t.id()+" .nv-series-"+aa.seriesIndex+" .nv-distx-"+aa.pointIndex).attr("y1",aa.pos[1]-R);
d3.select(".nv-chart-"+t.id()+" .nv-series-"+aa.seriesIndex+" .nv-disty-"+aa.pointIndex).attr("x2",aa.pos[0]+z.size());
aa.pos=[aa.pos[0]+A.left,aa.pos[1]+A.top];
L.tooltipShow(aa)
});
L.on("tooltipShow",function(aa){if(g){j(aa,W.parentNode)
}});
L.on("changeState",function(aa){if(typeof aa.disabled!=="undefined"){U.forEach(function(ac,ab){ac.disabled=aa.disabled[ab]
});
m.disabled=aa.disabled
}w.update()
});
I=s.copy();
i=r.copy()
});
return w
}t.dispatch.on("elementMouseout.tooltip",function(x){L.tooltipHide(x);
d3.select(".nv-chart-"+t.id()+" .nv-series-"+x.seriesIndex+" .nv-distx-"+x.pointIndex).attr("y1",0);
d3.select(".nv-chart-"+t.id()+" .nv-series-"+x.seriesIndex+" .nv-disty-"+x.pointIndex).attr("x2",v.size())
});
L.on("tooltipHide",function(){if(g){c.tooltip.cleanup()
}});
w.dispatch=L;
w.scatter=t;
w.legend=h;
w.controls=u;
w.xAxis=q;
w.yAxis=f;
w.distX=z;
w.distY=v;
d3.rebind(w,t,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");
w.margin=function(x){if(!arguments.length){return A
}A.top=typeof x.top!="undefined"?x.top:A.top;
A.right=typeof x.right!="undefined"?x.right:A.right;
A.bottom=typeof x.bottom!="undefined"?x.bottom:A.bottom;
A.left=typeof x.left!="undefined"?x.left:A.left;
return w
};
w.width=function(x){if(!arguments.length){return F
}F=x;
return w
};
w.height=function(x){if(!arguments.length){return B
}B=x;
return w
};
w.color=function(x){if(!arguments.length){return G
}G=c.utils.getColor(x);
h.color(G);
z.color(G);
v.color(G);
return w
};
w.showDistX=function(x){if(!arguments.length){return e
}e=x;
return w
};
w.showDistY=function(x){if(!arguments.length){return M
}M=x;
return w
};
w.showControls=function(x){if(!arguments.length){return K
}K=x;
return w
};
w.showLegend=function(x){if(!arguments.length){return J
}J=x;
return w
};
w.fisheye=function(x){if(!arguments.length){return E
}E=x;
return w
};
w.tooltips=function(x){if(!arguments.length){return g
}g=x;
return w
};
w.tooltipContent=function(x){if(!arguments.length){return n
}n=x;
return w
};
w.tooltipXContent=function(x){if(!arguments.length){return D
}D=x;
return w
};
w.tooltipYContent=function(x){if(!arguments.length){return C
}C=x;
return w
};
w.state=function(x){if(!arguments.length){return m
}m=x;
return w
};
w.defaultState=function(x){if(!arguments.length){return o
}o=x;
return w
};
w.noData=function(x){if(!arguments.length){return l
}l=x;
return w
};
return w
};
c.models.sparkline=function(){var i={top:2,right:0,bottom:2,left:0},f=400,q=32,g=true,n=d3.scale.linear(),m=d3.scale.linear(),p=function(r){return r.x
},o=function(r){return r.y
},h=c.utils.getColor(["#000"]),j,e;
function l(r){r.each(function(x){var A=f-i.left-i.right,v=q-i.top-i.bottom,t=d3.select(this);
n.domain(j||d3.extent(x,p)).range([0,A]);
m.domain(e||d3.extent(x,o)).range([v,0]);
var u=t.selectAll("g.nv-wrap.nv-sparkline").data([x]);
var w=u.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");
var s=w.append("g");
var y=u.select("g");
u.attr("transform","translate("+i.left+","+i.top+")");
var B=u.selectAll("path").data(function(C){return[C]
});
B.enter().append("path");
B.exit().remove();
B.style("stroke",function(D,C){return D.color||h(D,C)
}).attr("d",d3.svg.line().x(function(D,C){return n(p(D,C))
}).y(function(D,C){return m(o(D,C))
}));
var z=u.selectAll("circle.nv-point").data(function(G){var E=G.map(function(J,I){return o(J,I)
});
function F(J){if(J!=-1){var I=G[J];
I.pointIndex=J;
return I
}else{return null
}}var D=F(E.lastIndexOf(m.domain()[1])),C=F(E.indexOf(m.domain()[0])),H=F(E.length-1);
return[C,D,H].filter(function(I){return I!=null
})
});
z.enter().append("circle");
z.exit().remove();
z.attr("cx",function(D,C){return n(p(D,D.pointIndex))
}).attr("cy",function(D,C){return m(o(D,D.pointIndex))
}).attr("r",2).attr("class",function(D,C){return p(D,D.pointIndex)==n.domain()[1]?"nv-point nv-currentValue":o(D,D.pointIndex)==m.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"
})
});
return l
}l.margin=function(r){if(!arguments.length){return i
}i.top=typeof r.top!="undefined"?r.top:i.top;
i.right=typeof r.right!="undefined"?r.right:i.right;
i.bottom=typeof r.bottom!="undefined"?r.bottom:i.bottom;
i.left=typeof r.left!="undefined"?r.left:i.left;
return l
};
l.width=function(r){if(!arguments.length){return f
}f=r;
return l
};
l.height=function(r){if(!arguments.length){return q
}q=r;
return l
};
l.x=function(r){if(!arguments.length){return p
}p=d3.functor(r);
return l
};
l.y=function(r){if(!arguments.length){return o
}o=d3.functor(r);
return l
};
l.xScale=function(r){if(!arguments.length){return n
}n=r;
return l
};
l.yScale=function(r){if(!arguments.length){return m
}m=r;
return l
};
l.xDomain=function(r){if(!arguments.length){return j
}j=r;
return l
};
l.yDomain=function(r){if(!arguments.length){return e
}e=r;
return l
};
l.animate=function(r){if(!arguments.length){return g
}g=r;
return l
};
l.color=function(r){if(!arguments.length){return h
}h=c.utils.getColor(r);
return l
};
return l
};
c.models.sparklinePlus=function(){var q=c.models.sparkline();
var f={top:15,right:100,bottom:10,left:50},e=null,s=null,n,m,j=[],r=false,p=d3.format(",r"),i=d3.format(",.2f"),h=true,t=true,g=false,o="No Data Available.";
function l(u){u.each(function(C){var w=d3.select(this);
var J=(e||parseInt(w.style("width"))||960)-f.left-f.right,z=(s||parseInt(w.style("height"))||400)-f.top-f.bottom;
l.update=function(){l(u)
};
l.container=this;
if(!C||!C.length){var x=w.selectAll(".nv-noData").data([o]);
x.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
x.attr("x",f.left+J/2).attr("y",f.top+z/2).text(function(K){return K
});
return l
}else{w.selectAll(".nv-noData").remove()
}var I=q.y()(C[C.length-1],C.length-1);
n=q.xScale();
m=q.yScale();
var y=w.selectAll("g.nv-wrap.nv-sparklineplus").data([C]);
var A=y.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus");
var v=A.append("g");
var D=y.select("g");
v.append("g").attr("class","nv-sparklineWrap");
v.append("g").attr("class","nv-valueWrap");
v.append("g").attr("class","nv-hoverArea");
y.attr("transform","translate("+f.left+","+f.top+")");
var E=D.select(".nv-sparklineWrap");
q.width(J).height(z);
E.call(q);
var G=D.select(".nv-valueWrap");
var H=G.selectAll(".nv-currentValue").data([I]);
H.enter().append("text").attr("class","nv-currentValue").attr("dx",g?-8:8).attr("dy",".9em").style("text-anchor",g?"end":"start");
H.attr("x",J+(g?f.right:0)).attr("y",t?function(K){return m(K)
}:0).style("fill",q.color()(C[C.length-1],C.length-1)).text(i(I));
v.select(".nv-hoverArea").append("rect").on("mousemove",B).on("click",function(){r=!r
}).on("mouseout",function(){j=[];
F()
});
D.select(".nv-hoverArea rect").attr("transform",function(K){return"translate("+-f.left+","+-f.top+")"
}).attr("width",J+f.left+f.right).attr("height",z+f.top);
function F(){if(r){return
}var L=D.selectAll(".nv-hoverValue").data(j);
var K=L.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);
L.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();
L.attr("transform",function(M){return"translate("+n(q.x()(C[M],M))+",0)"
}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);
if(!j.length){return
}K.append("line").attr("x1",0).attr("y1",-f.top).attr("x2",0).attr("y2",z);
K.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-f.top).attr("text-anchor","end").attr("dy",".9em");
D.select(".nv-hoverValue .nv-xValue").text(p(q.x()(C[j[0]],j[0])));
K.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-f.top).attr("text-anchor","start").attr("dy",".9em");
D.select(".nv-hoverValue .nv-yValue").text(i(q.y()(C[j[0]],j[0])))
}function B(){if(r){return
}var L=d3.mouse(this)[0]-f.left;
function K(P,M){var Q=Math.abs(q.x()(P[0],0)-M);
var O=0;
for(var N=0;
N<P.length;
N++){if(Math.abs(q.x()(P[N],N)-M)<Q){Q=Math.abs(q.x()(P[N],N)-M);
O=N
}}return O
}j=[K(C,Math.round(n.invert(L)))];
F()
}});
return l
}l.sparkline=q;
d3.rebind(l,q,"x","y","xScale","yScale","color");
l.margin=function(u){if(!arguments.length){return f
}f.top=typeof u.top!="undefined"?u.top:f.top;
f.right=typeof u.right!="undefined"?u.right:f.right;
f.bottom=typeof u.bottom!="undefined"?u.bottom:f.bottom;
f.left=typeof u.left!="undefined"?u.left:f.left;
return l
};
l.width=function(u){if(!arguments.length){return e
}e=u;
return l
};
l.height=function(u){if(!arguments.length){return s
}s=u;
return l
};
l.xTickFormat=function(u){if(!arguments.length){return p
}p=u;
return l
};
l.yTickFormat=function(u){if(!arguments.length){return i
}i=u;
return l
};
l.showValue=function(u){if(!arguments.length){return h
}h=u;
return l
};
l.alignValue=function(u){if(!arguments.length){return t
}t=u;
return l
};
l.rightAlignValue=function(u){if(!arguments.length){return g
}g=u;
return l
};
l.noData=function(u){if(!arguments.length){return o
}o=u;
return l
};
return l
};
c.models.stackedArea=function(){var j={top:0,right:0,bottom:0,left:0},h=960,v=500,l=c.utils.defaultColor(),g=Math.floor(Math.random()*100000),u=function(w){return w.x
},t=function(w){return w.y
},f="stack",m="zero",i="default",o="linear",s=false,r,q,e=c.models.scatter(),n=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");
e.size(2.2).sizeDomain([2.2,2.2]);
function p(w){w.each(function(F){var I=h-j.left-j.right,C=v-j.top-j.bottom,y=d3.select(this);
r=e.xScale();
q=e.yScale();
F=F.map(function(K,L){K.values=K.values.map(function(N,M){N.index=M;
N.stackedY=K.disabled?0:t(N,M);
return N
});
return K
});
F=d3.layout.stack().order(i).offset(m).values(function(K){return K.values
}).x(u).y(function(K){return K.stackedY
}).out(function(L,K,M){L.display={y:M,y0:K}
})(F);
var A=y.selectAll("g.nv-wrap.nv-stackedarea").data([F]);
var E=A.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea");
var D=E.append("defs");
var x=E.append("g");
var G=A.select("g");
x.append("g").attr("class","nv-areaWrap");
x.append("g").attr("class","nv-scatterWrap");
A.attr("transform","translate("+j.left+","+j.top+")");
e.width(I).height(C).x(u).y(function(K){return K.display.y+K.display.y0
}).forceY([0]).color(F.map(function(L,K){return L.color||l(L,K)
}).filter(function(L,K){return !F[K].disabled
}));
var B=G.select(".nv-scatterWrap").datum(F.filter(function(K){return !K.disabled
}));
B.call(e);
D.append("clipPath").attr("id","nv-edge-clip-"+g).append("rect");
A.select("#nv-edge-clip-"+g+" rect").attr("width",I).attr("height",C);
G.attr("clip-path",s?"url(#nv-edge-clip-"+g+")":"");
var z=d3.svg.area().x(function(L,K){return r(u(L,K))
}).y0(function(K){return q(K.display.y0)
}).y1(function(K){return q(K.display.y+K.display.y0)
}).interpolate(o);
var H=d3.svg.area().x(function(L,K){return r(u(L,K))
}).y0(function(K){return q(K.display.y0)
}).y1(function(K){return q(K.display.y0)
});
var J=G.select(".nv-areaWrap").selectAll("path.nv-area").data(function(K){return K
});
J.enter().append("path").attr("class",function(L,K){return"nv-area nv-area-"+K
}).on("mouseover",function(L,K){d3.select(this).classed("hover",true);
n.areaMouseover({point:L,series:L.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:K})
}).on("mouseout",function(L,K){d3.select(this).classed("hover",false);
n.areaMouseout({point:L,series:L.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:K})
}).on("click",function(L,K){d3.select(this).classed("hover",false);
n.areaClick({point:L,series:L.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:K})
});
J.exit().attr("d",function(L,K){return H(L.values,K)
}).remove();
J.style("fill",function(L,K){return L.color||l(L,K)
}).style("stroke",function(L,K){return L.color||l(L,K)
});
J.attr("d",function(L,K){return z(L.values,K)
});
e.dispatch.on("elementMouseover.area",function(K){G.select(".nv-chart-"+g+" .nv-area-"+K.seriesIndex).classed("hover",true)
});
e.dispatch.on("elementMouseout.area",function(K){G.select(".nv-chart-"+g+" .nv-area-"+K.seriesIndex).classed("hover",false)
})
});
return p
}e.dispatch.on("elementClick.area",function(w){n.areaClick(w)
});
e.dispatch.on("elementMouseover.tooltip",function(w){w.pos=[w.pos[0]+j.left,w.pos[1]+j.top],n.tooltipShow(w)
});
e.dispatch.on("elementMouseout.tooltip",function(w){n.tooltipHide(w)
});
p.dispatch=n;
p.scatter=e;
d3.rebind(p,e,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","sizeDomain","forceX","forceY","forceSize","clipVoronoi","clipRadius");
p.x=function(w){if(!arguments.length){return u
}u=d3.functor(w);
return p
};
p.y=function(w){if(!arguments.length){return t
}t=d3.functor(w);
return p
};
p.margin=function(w){if(!arguments.length){return j
}j.top=typeof w.top!="undefined"?w.top:j.top;
j.right=typeof w.right!="undefined"?w.right:j.right;
j.bottom=typeof w.bottom!="undefined"?w.bottom:j.bottom;
j.left=typeof w.left!="undefined"?w.left:j.left;
return p
};
p.width=function(w){if(!arguments.length){return h
}h=w;
return p
};
p.height=function(w){if(!arguments.length){return v
}v=w;
return p
};
p.clipEdge=function(w){if(!arguments.length){return s
}s=w;
return p
};
p.color=function(w){if(!arguments.length){return l
}l=c.utils.getColor(w);
return p
};
p.offset=function(w){if(!arguments.length){return m
}m=w;
return p
};
p.order=function(w){if(!arguments.length){return i
}i=w;
return p
};
p.style=function(w){if(!arguments.length){return f
}f=w;
switch(f){case"stack":p.offset("zero");
p.order("default");
break;
case"stream":p.offset("wiggle");
p.order("inside-out");
break;
case"stream-center":p.offset("silhouette");
p.order("inside-out");
break;
case"expand":p.offset("expand");
p.order("default");
break
}return p
};
p.interpolate=function(w){if(!arguments.length){return o
}o=w;
return o
};
return p
};
c.models.stackedAreaChart=function(){var B=c.models.stackedArea(),p=c.models.axis(),f=c.models.axis(),h=c.models.legend(),s=c.models.legend();
var u={top:30,right:25,bottom:50,left:60},w=null,v=null,z=c.utils.defaultColor(),C=true,A=true,g=true,m=function(F,E,I,H,G){return"<h3>"+F+"</h3><p>"+I+" on "+E+"</p>"
},r,q,l=d3.format(",.2f"),n={style:B.style()},o=null,j="No Data Available.",D=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),e=250;
p.orient("bottom").tickPadding(7);
f.orient("left");
B.scatter.pointActive(function(x){return !!Math.round(B.y()(x)*100)
});
var i=function(J,F){var I=J.pos[0]+(F.offsetLeft||0),H=J.pos[1]+(F.offsetTop||0),E=p.tickFormat()(B.x()(J.point,J.pointIndex)),K=f.tickFormat()(B.y()(J.point,J.pointIndex)),G=m(J.series.key,E,K,J,t);
c.tooltip.show([I,H],G,J.value<0?"n":"s",null,F)
};
function t(x){x.each(function(I){var E=d3.select(this),L=this;
var O=(w||parseInt(E.style("width"))||960)-u.left-u.right,H=(v||parseInt(E.style("height"))||400)-u.top-u.bottom;
t.update=function(){E.transition().call(t)
};
t.container=this;
n.disabled=I.map(function(P){return !!P.disabled
});
if(!o){var N;
o={};
for(N in n){if(n[N] instanceof Array){o[N]=n[N].slice(0)
}else{o[N]=n[N]
}}}if(!I||!I.length||!I.filter(function(P){return P.values.length
}).length){var F=E.selectAll(".nv-noData").data([j]);
F.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
F.attr("x",u.left+O/2).attr("y",u.top+H/2).text(function(P){return P
});
return t
}else{E.selectAll(".nv-noData").remove()
}r=B.xScale();
q=B.yScale();
var G=E.selectAll("g.nv-wrap.nv-stackedAreaChart").data([I]);
var y=G.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g");
var J=G.select("g");
y.append("g").attr("class","nv-x nv-axis");
y.append("g").attr("class","nv-y nv-axis");
y.append("g").attr("class","nv-stackedWrap");
y.append("g").attr("class","nv-legendWrap");
y.append("g").attr("class","nv-controlsWrap");
if(A){h.width(O-e);
J.select(".nv-legendWrap").datum(I).call(h);
if(u.top!=h.height()){u.top=h.height();
H=(v||parseInt(E.style("height"))||400)-u.top-u.bottom
}J.select(".nv-legendWrap").attr("transform","translate("+e+","+(-u.top)+")")
}if(C){var M=[{key:"Stacked",disabled:B.offset()!="zero"},{key:"Stream",disabled:B.offset()!="wiggle"},{key:"Expanded",disabled:B.offset()!="expand"}];
s.width(e).color(["#444","#444","#444"]);
J.select(".nv-controlsWrap").datum(M).call(s);
if(u.top!=Math.max(s.height(),h.height())){u.top=Math.max(s.height(),h.height());
H=(v||parseInt(E.style("height"))||400)-u.top-u.bottom
}J.select(".nv-controlsWrap").attr("transform","translate(0,"+(-u.top)+")")
}G.attr("transform","translate("+u.left+","+u.top+")");
B.width(O).height(H);
var K=J.select(".nv-stackedWrap").datum(I);
K.call(B);
p.scale(r).ticks(O/100).tickSize(-H,0);
J.select(".nv-x.nv-axis").attr("transform","translate(0,"+H+")");
J.select(".nv-x.nv-axis").transition().duration(0).call(p);
f.scale(q).ticks(B.offset()=="wiggle"?0:H/36).tickSize(-O,0).setTickFormat(B.offset()=="expand"?d3.format("%"):l);
J.select(".nv-y.nv-axis").transition().duration(0).call(f);
B.dispatch.on("areaClick.toggle",function(P){if(I.filter(function(Q){return !Q.disabled
}).length===1){I=I.map(function(Q){Q.disabled=false;
return Q
})
}else{I=I.map(function(R,Q){R.disabled=(Q!=P.seriesIndex);
return R
})
}n.disabled=I.map(function(Q){return !!Q.disabled
});
D.stateChange(n);
t.update()
});
h.dispatch.on("legendClick",function(Q,P){Q.disabled=!Q.disabled;
if(!I.filter(function(R){return !R.disabled
}).length){I.map(function(R){R.disabled=false;
return R
})
}n.disabled=I.map(function(R){return !!R.disabled
});
D.stateChange(n);
t.update()
});
h.dispatch.on("legendDblclick",function(P){I.forEach(function(Q){Q.disabled=true
});
P.disabled=false;
n.disabled=I.map(function(Q){return !!Q.disabled
});
D.stateChange(n);
t.update()
});
s.dispatch.on("legendClick",function(Q,P){if(!Q.disabled){return
}M=M.map(function(R){R.disabled=true;
return R
});
Q.disabled=false;
switch(Q.key){case"Stacked":B.style("stack");
break;
case"Stream":B.style("stream");
break;
case"Expanded":B.style("expand");
break
}n.style=B.style();
D.stateChange(n);
t.update()
});
D.on("tooltipShow",function(P){if(g){i(P,L.parentNode)
}});
D.on("changeState",function(P){if(typeof P.disabled!=="undefined"){I.forEach(function(R,Q){R.disabled=P.disabled[Q]
});
n.disabled=P.disabled
}if(typeof P.style!=="undefined"){B.style(P.style)
}t.update()
})
});
return t
}B.dispatch.on("tooltipShow",function(x){x.pos=[x.pos[0]+u.left,x.pos[1]+u.top],D.tooltipShow(x)
});
B.dispatch.on("tooltipHide",function(x){D.tooltipHide(x)
});
D.on("tooltipHide",function(){if(g){c.tooltip.cleanup()
}});
t.dispatch=D;
t.stacked=B;
t.legend=h;
t.controls=s;
t.xAxis=p;
t.yAxis=f;
d3.rebind(t,B,"x","y","size","xScale","yScale","xDomain","yDomain","sizeDomain","interactive","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate");
t.margin=function(x){if(!arguments.length){return u
}u.top=typeof x.top!="undefined"?x.top:u.top;
u.right=typeof x.right!="undefined"?x.right:u.right;
u.bottom=typeof x.bottom!="undefined"?x.bottom:u.bottom;
u.left=typeof x.left!="undefined"?x.left:u.left;
return t
};
t.width=function(x){if(!arguments.length){return getWidth
}w=x;
return t
};
t.height=function(x){if(!arguments.length){return getHeight
}v=x;
return t
};
t.color=function(x){if(!arguments.length){return z
}z=c.utils.getColor(x);
h.color(z);
B.color(z);
return t
};
t.showControls=function(x){if(!arguments.length){return C
}C=x;
return t
};
t.showLegend=function(x){if(!arguments.length){return A
}A=x;
return t
};
t.tooltip=function(x){if(!arguments.length){return m
}m=x;
return t
};
t.tooltips=function(x){if(!arguments.length){return g
}g=x;
return t
};
t.tooltipContent=function(x){if(!arguments.length){return m
}m=x;
return t
};
t.state=function(x){if(!arguments.length){return n
}n=x;
return t
};
t.defaultState=function(x){if(!arguments.length){return o
}o=x;
return t
};
t.noData=function(x){if(!arguments.length){return j
}j=x;
return t
};
f.setTickFormat=f.tickFormat;
f.tickFormat=function(x){if(!arguments.length){return l
}l=x;
return f
};
return t
}
})();var Handsontable={extension:{},helper:{}};
(function($,window,Handsontable){Handsontable.Core=function(rootElement,settings){this.rootElement=rootElement;
this.guid="ht_"+Handsontable.helper.randomString();
if(!this.rootElement[0].id){this.rootElement[0].id=this.guid
}var priv,datamap,grid,selection,editproxy,autofill,self=this;
priv={settings:{},settingsFromDOM:{},selStart:(new Handsontable.SelectionPoint()),selEnd:(new Handsontable.SelectionPoint()),editProxy:false,isPopulated:null,scrollable:null,undoRedo:null,extensions:{},colToProp:null,propToCol:null,dataSchema:null,dataType:"array",firstRun:true};
datamap={recursiveDuckSchema:function(obj){var schema;
if($.isPlainObject(obj)){schema={};
for(var i in obj){if(obj.hasOwnProperty(i)){if($.isPlainObject(obj[i])){schema[i]=datamap.recursiveDuckSchema(obj[i])
}else{schema[i]=null
}}}}else{schema=[]
}return schema
},recursiveDuckColumns:function(schema,lastCol,parent){var prop,i;
if(typeof lastCol==="undefined"){lastCol=0;
parent=""
}if($.isPlainObject(schema)){for(i in schema){if(schema.hasOwnProperty(i)){if(schema[i]===null){prop=parent+i;
priv.colToProp.push(prop);
priv.propToCol[prop]=lastCol;
lastCol++
}else{lastCol=datamap.recursiveDuckColumns(schema[i],lastCol,i+".")
}}}}return lastCol
},createMap:function(){if(typeof datamap.getSchema()==="undefined"){throw new Error("trying to create `columns` definition but you didnt' provide `schema` nor `data`")
}var i,ilen,schema=datamap.getSchema();
priv.colToProp=[];
priv.propToCol={};
if(priv.settings.columns){for(i=0,ilen=priv.settings.columns.length;
i<ilen;
i++){priv.colToProp[i]=priv.settings.columns[i].data;
priv.propToCol[priv.settings.columns[i].data]=i
}}else{datamap.recursiveDuckColumns(schema)
}},colToProp:function(col){col=Handsontable.PluginModifiers.run(self,"col",col);
if(priv.colToProp&&typeof priv.colToProp[col]!=="undefined"){return priv.colToProp[col]
}else{return col
}},propToCol:function(prop){var col;
if(typeof priv.propToCol[prop]!=="undefined"){col=priv.propToCol[prop]
}else{col=prop
}col=Handsontable.PluginModifiers.run(self,"col",col);
return col
},getSchema:function(){if(priv.settings.dataSchema){if(typeof priv.settings.dataSchema==="function"){return priv.settings.dataSchema()
}return priv.settings.dataSchema
}return priv.duckDataSchema
},createRow:function(index){var row,rowCount=self.countRows();
if(typeof index!=="number"||index>=rowCount){index=rowCount
}if(priv.dataType==="array"){row=[];
for(var c=0,clen=self.countCols();
c<clen;
c++){row.push(null)
}}else{if(priv.dataType==="function"){row=priv.settings.dataSchema(index)
}else{row=$.extend(true,{},datamap.getSchema())
}}if(priv.settings.onCreateRow){priv.settings.onCreateRow(index,row)
}if(index===rowCount){priv.settings.data.push(row)
}else{priv.settings.data.splice(index,0,row)
}self.forceFullRender=true
},createCol:function(index){if(priv.dataType==="object"||priv.settings.columns){throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting")
}var r=0,rlen=self.countRows();
if(typeof index!=="number"||index>=self.countCols()){for(;
r<rlen;
r++){if(typeof priv.settings.data[r]==="undefined"){priv.settings.data[r]=[]
}priv.settings.data[r].push("")
}}else{for(;
r<rlen;
r++){priv.settings.data[r].splice(index,0,"")
}}self.forceFullRender=true
},removeRow:function(index,amount){if(!amount){amount=1
}if(typeof index!=="number"){index=-amount
}priv.settings.data.splice(index,amount);
self.forceFullRender=true
},removeCol:function(index,amount){if(priv.dataType==="object"||priv.settings.columns){throw new Error("cannot remove column with object data source or columns option specified")
}if(!amount){amount=1
}if(typeof index!=="number"){index=-amount
}for(var r=0,rlen=self.countRows();
r<rlen;
r++){priv.settings.data[r].splice(index,amount)
}self.forceFullRender=true
},getVars:{},get:function(row,prop){datamap.getVars.row=row;
datamap.getVars.prop=prop;
Handsontable.PluginHooks.run(self,"beforeGet",datamap.getVars);
if(typeof datamap.getVars.prop==="string"&&datamap.getVars.prop.indexOf(".")>-1){var sliced=datamap.getVars.prop.split(".");
var out=priv.settings.data[datamap.getVars.row];
if(!out){return null
}for(var i=0,ilen=sliced.length;
i<ilen;
i++){out=out[sliced[i]];
if(typeof out==="undefined"){return null
}}return out
}else{if(typeof datamap.getVars.prop==="function"){return datamap.getVars.prop(priv.settings.data.slice(datamap.getVars.row,datamap.getVars.row+1)[0])
}else{return priv.settings.data[datamap.getVars.row]?priv.settings.data[datamap.getVars.row][datamap.getVars.prop]:null
}}},setVars:{},set:function(row,prop,value){datamap.setVars.row=row;
datamap.setVars.prop=prop;
datamap.setVars.value=value;
Handsontable.PluginHooks.run(self,"beforeSet",datamap.setVars);
if(typeof datamap.setVars.prop==="string"&&datamap.setVars.prop.indexOf(".")>-1){var sliced=datamap.setVars.prop.split(".");
var out=priv.settings.data[datamap.setVars.row];
for(var i=0,ilen=sliced.length-1;
i<ilen;
i++){out=out[sliced[i]]
}out[sliced[i]]=datamap.setVars.value
}else{if(typeof datamap.setVars.prop==="function"){datamap.setVars.prop(priv.settings.data.slice(datamap.setVars.row,datamap.setVars.row+1)[0],datamap.setVars.value)
}else{priv.settings.data[datamap.setVars.row][datamap.setVars.prop]=datamap.setVars.value
}}},clear:function(){for(var r=0;
r<self.countRows();
r++){for(var c=0;
c<self.countCols();
c++){datamap.set(r,datamap.colToProp(c),"")
}}},getAll:function(){return priv.settings.data
},getRange:function(start,end){var r,rlen,c,clen,output=[],row;
rlen=Math.max(start.row,end.row);
clen=Math.max(start.col,end.col);
for(r=Math.min(start.row,end.row);
r<=rlen;
r++){row=[];
for(c=Math.min(start.col,end.col);
c<=clen;
c++){row.push(datamap.get(r,datamap.colToProp(c)))
}output.push(row)
}return output
},getText:function(start,end){return SheetClip.stringify(datamap.getRange(start,end))
}};
grid={alter:function(action,index,amount){var oldData,newData,changes,r,rlen,c,clen,delta;
oldData=$.extend(true,[],datamap.getAll());
switch(action){case"insert_row":if(!amount){amount=1
}delta=0;
while(delta<amount&&self.countRows()<priv.settings.maxRows){datamap.createRow(index);
delta++
}if(delta){if(priv.selStart.exists()&&priv.selStart.row()>=index){priv.selStart.row(priv.selStart.row()+delta);
selection.transformEnd(delta,0)
}else{selection.refreshBorders()
}}break;
case"insert_col":if(!amount){amount=1
}delta=0;
while(delta<amount&&self.countCols()<priv.settings.maxCols){datamap.createCol(index);
delta++
}if(delta){if(priv.selStart.exists()&&priv.selStart.col()>=index){priv.selStart.col(priv.selStart.col()+delta);
selection.transformEnd(0,delta)
}else{selection.refreshBorders()
}}break;
case"remove_row":datamap.removeRow(index,amount);
grid.keepEmptyRows();
selection.refreshBorders();
break;
case"remove_col":datamap.removeCol(index,amount);
grid.keepEmptyRows();
selection.refreshBorders();
break;
default:throw Error('There is no such action "'+action+'"');
break
}changes=[];
newData=datamap.getAll();
for(r=0,rlen=newData.length;
r<rlen;
r++){for(c=0,clen=newData[r].length;
c<clen;
c++){changes.push([r,c,oldData[r]?oldData[r][c]:null,newData[r][c]])
}}fireEvent("datachange.handsontable",[changes,"alter"]);
grid.keepEmptyRows()
},keepEmptyRows:function(){var r,rlen,emptyRows=self.countEmptyRows(true),emptyCols;
rlen=self.countRows();
if(rlen<priv.settings.minRows){for(r=0;
r<priv.settings.minRows-rlen;
r++){datamap.createRow()
}}if(emptyRows<priv.settings.minSpareRows){for(;
emptyRows<priv.settings.minSpareRows&&self.countRows()<priv.settings.maxRows;
emptyRows++){datamap.createRow()
}}emptyCols=self.countEmptyCols(true);
if(!priv.settings.columns&&self.countCols()<priv.settings.minCols){for(;
self.countCols()<priv.settings.minCols;
emptyCols++){datamap.createCol()
}}if(!priv.settings.columns&&priv.dataType==="array"&&emptyCols<priv.settings.minSpareCols){for(;
emptyCols<priv.settings.minSpareCols&&self.countCols()<priv.settings.maxCols;
emptyCols++){datamap.createCol()
}}if(priv.settings.enterBeginsEditing){for(;
(((priv.settings.minRows||priv.settings.minSpareRows)&&self.countRows()>priv.settings.minRows)&&(priv.settings.minSpareRows&&emptyRows>priv.settings.minSpareRows));
emptyRows--){datamap.removeRow()
}}if(priv.settings.enterBeginsEditing&&!priv.settings.columns){for(;
(((priv.settings.minCols||priv.settings.minSpareCols)&&self.countCols()>priv.settings.minCols)&&(priv.settings.minSpareCols&&emptyCols>priv.settings.minSpareCols));
emptyCols--){datamap.removeCol()
}}var rowCount=self.countRows();
var colCount=self.countCols();
if(rowCount===0||colCount===0){selection.deselect()
}if(priv.selStart.exists()){var selectionChanged;
var fromRow=priv.selStart.row();
var fromCol=priv.selStart.col();
var toRow=priv.selEnd.row();
var toCol=priv.selEnd.col();
if(fromRow>rowCount-1){fromRow=rowCount-1;
selectionChanged=true;
if(toRow>fromRow){toRow=fromRow
}}else{if(toRow>rowCount-1){toRow=rowCount-1;
selectionChanged=true;
if(fromRow>toRow){fromRow=toRow
}}}if(fromCol>colCount-1){fromCol=colCount-1;
selectionChanged=true;
if(toCol>fromCol){toCol=fromCol
}}else{if(toCol>colCount-1){toCol=colCount-1;
selectionChanged=true;
if(fromCol>toCol){fromCol=toCol
}}}if(selectionChanged){self.selectCell(fromRow,fromCol,toRow,toCol)
}}},populateFromArray:function(start,input,end,source){var r,rlen,c,clen,setData=[],current={};
rlen=input.length;
if(rlen===0){return false
}current.row=start.row;
current.col=start.col;
for(r=0;
r<rlen;
r++){if((end&&current.row>end.row)||(!priv.settings.minSpareRows&&current.row>self.countRows()-1)||(current.row>=priv.settings.maxRows)){break
}current.col=start.col;
clen=input[r]?input[r].length:0;
for(c=0;
c<clen;
c++){if((end&&current.col>end.col)||(!priv.settings.minSpareCols&&current.col>self.countCols()-1)||(current.col>=priv.settings.maxCols)){break
}if(self.getCellMeta(current.row,current.col).isWritable){setData.push([current.row,current.col,input[r][c]])
}current.col++;
if(end&&c===clen-1){c=-1
}}current.row++;
if(end&&r===rlen-1){r=-1
}}self.setDataAtCell(setData,null,null,source||"populateFromArray")
},getCornerCoords:function(coordsArr){function mapProp(func,array,prop){function getProp(el){return el[prop]
}if(Array.prototype.map){return func.apply(Math,array.map(getProp))
}return func.apply(Math,$.map(array,getProp))
}return{TL:{row:mapProp(Math.min,coordsArr,"row"),col:mapProp(Math.min,coordsArr,"col")},BR:{row:mapProp(Math.max,coordsArr,"row"),col:mapProp(Math.max,coordsArr,"col")}}
},getCellsAtCoords:function(start,end){var corners=grid.getCornerCoords([start,end]);
var r,c,output=[];
for(r=corners.TL.row;
r<=corners.BR.row;
r++){for(c=corners.TL.col;
c<=corners.BR.col;
c++){output.push(self.view.getCellAtCoords({row:r,col:c}))
}}return output
}};
this.selection=selection={inProgress:false,begin:function(){self.selection.inProgress=true
},finish:function(){var sel=self.getSelected();
self.rootElement.triggerHandler("selectionend.handsontable",sel);
self.rootElement.triggerHandler("selectionendbyprop.handsontable",[sel[0],self.colToProp(sel[1]),sel[2],self.colToProp(sel[3])]);
self.selection.inProgress=false
},isInProgress:function(){return self.selection.inProgress
},setRangeStart:function(coords){priv.selStart.coords(coords);
selection.setRangeEnd(coords)
},setRangeEnd:function(coords,scrollToCell){self.selection.begin();
priv.selEnd.coords(coords);
if(!priv.settings.multiSelect){priv.selStart.coords(coords)
}self.view.wt.selections.current.clear();
self.view.wt.selections.current.add(priv.selStart.arr());
self.view.wt.selections.area.clear();
if(selection.isMultiple()){self.view.wt.selections.area.add(priv.selStart.arr());
self.view.wt.selections.area.add(priv.selEnd.arr())
}if(priv.settings.currentRowClassName||priv.settings.currentColClassName){self.view.wt.selections.highlight.clear();
self.view.wt.selections.highlight.add(priv.selStart.arr());
self.view.wt.selections.highlight.add(priv.selEnd.arr())
}self.rootElement.triggerHandler("selection.handsontable",[priv.selStart.row(),priv.selStart.col(),priv.selEnd.row(),priv.selEnd.col()]);
self.rootElement.triggerHandler("selectionbyprop.handsontable",[priv.selStart.row(),datamap.colToProp(priv.selStart.col()),priv.selEnd.row(),datamap.colToProp(priv.selEnd.col())]);
if(scrollToCell!==false){self.view.scrollViewport(coords);
self.view.wt.draw(true);
self.view.scrollViewport(coords)
}selection.refreshBorders()
},refreshBorders:function(revertOriginal,keepEditor){if(!keepEditor){editproxy.destroy(revertOriginal)
}self.view.render();
if(selection.isSelected()&&!keepEditor){editproxy.prepare()
}},isMultiple:function(){return !(priv.selEnd.col()===priv.selStart.col()&&priv.selEnd.row()===priv.selStart.row())
},transformStart:function(rowDelta,colDelta,force){if(priv.selStart.row()+rowDelta>self.countRows()-1){if(force&&priv.settings.minSpareRows>0){self.alter("insert_row",self.countRows())
}else{if(priv.settings.autoWrapCol&&priv.selStart.col()+colDelta<self.countCols()-1){rowDelta=1-self.countRows();
colDelta=1
}}}else{if(priv.settings.autoWrapCol&&priv.selStart.row()+rowDelta<0&&priv.selStart.col()+colDelta>=0){rowDelta=self.countRows()-1;
colDelta=-1
}}if(priv.selStart.col()+colDelta>self.countCols()-1){if(force&&priv.settings.minSpareCols>0){self.alter("insert_col",self.countCols())
}else{if(priv.settings.autoWrapRow&&priv.selStart.row()+rowDelta<self.countRows()-1){rowDelta=1;
colDelta=1-self.countCols()
}}}else{if(priv.settings.autoWrapRow&&priv.selStart.col()+colDelta<0&&priv.selStart.row()+rowDelta>=0){rowDelta=-1;
colDelta=self.countCols()-1
}}var totalRows=self.countRows();
var totalCols=self.countCols();
var coords={row:(priv.selStart.row()+rowDelta),col:priv.selStart.col()+colDelta};
if(coords.row<0){coords.row=0
}else{if(coords.row>0&&coords.row>=totalRows){coords.row=totalRows-1
}}if(coords.col<0){coords.col=0
}else{if(coords.col>0&&coords.col>=totalCols){coords.col=totalCols-1
}}selection.setRangeStart(coords)
},transformEnd:function(rowDelta,colDelta){if(priv.selEnd.exists()){var totalRows=self.countRows();
var totalCols=self.countCols();
var coords={row:priv.selEnd.row()+rowDelta,col:priv.selEnd.col()+colDelta};
if(coords.row<0){coords.row=0
}else{if(coords.row>0&&coords.row>=totalRows){coords.row=totalRows-1
}}if(coords.col<0){coords.col=0
}else{if(coords.col>0&&coords.col>=totalCols){coords.col=totalCols-1
}}selection.setRangeEnd(coords)
}},isSelected:function(){return priv.selEnd.exists()
},inInSelection:function(coords){if(!selection.isSelected()){return false
}var sel=grid.getCornerCoords([priv.selStart.coords(),priv.selEnd.coords()]);
return(sel.TL.row<=coords.row&&sel.BR.row>=coords.row&&sel.TL.col<=coords.col&&sel.BR.col>=coords.col)
},deselect:function(){if(!selection.isSelected()){return
}self.selection.inProgress=false;
priv.selEnd=new Handsontable.SelectionPoint();
self.view.wt.selections.current.clear();
self.view.wt.selections.area.clear();
editproxy.destroy();
selection.refreshBorders();
self.rootElement.triggerHandler("deselect.handsontable")
},selectAll:function(){if(!priv.settings.multiSelect){return
}selection.setRangeStart({row:0,col:0});
selection.setRangeEnd({row:self.countRows()-1,col:self.countCols()-1},false)
},empty:function(){if(!selection.isSelected()){return
}var corners=grid.getCornerCoords([priv.selStart.coords(),priv.selEnd.coords()]);
var r,c,changes=[];
for(r=corners.TL.row;
r<=corners.BR.row;
r++){for(c=corners.TL.col;
c<=corners.BR.col;
c++){if(self.getCellMeta(r,c).isWritable){changes.push([r,c,""])
}}}self.setDataAtCell(changes)
}};
this.autofill=autofill={handle:null,init:function(){if(!autofill.handle){autofill.handle={}
}else{autofill.handle.disabled=false
}},disable:function(){autofill.handle.disabled=true
},selectAdjacent:function(){var select,data,r,maxR,c;
if(selection.isMultiple()){select=self.view.wt.selections.area.getCorners()
}else{select=self.view.wt.selections.current.getCorners()
}data=datamap.getAll();
rows:for(r=select[2]+1;
r<self.countRows();
r++){for(c=select[1];
c<=select[3];
c++){if(data[r][c]){break rows
}}if(!!data[r][select[1]-1]||!!data[r][select[3]+1]){maxR=r
}}if(maxR){self.view.wt.selections.fill.clear();
self.view.wt.selections.fill.add([select[0],select[1]]);
self.view.wt.selections.fill.add([maxR,select[3]]);
autofill.apply()
}},apply:function(){var drag,select,start,end;
autofill.handle.isDragged=0;
drag=self.view.wt.selections.fill.getCorners();
if(!drag){return
}self.view.wt.selections.fill.clear();
if(selection.isMultiple()){select=self.view.wt.selections.area.getCorners()
}else{select=self.view.wt.selections.current.getCorners()
}if(drag[0]===select[0]&&drag[1]<select[1]){start={row:drag[0],col:drag[1]};
end={row:drag[2],col:select[1]-1}
}else{if(drag[0]===select[0]&&drag[3]>select[3]){start={row:drag[0],col:select[3]+1};
end={row:drag[2],col:drag[3]}
}else{if(drag[0]<select[0]&&drag[1]===select[1]){start={row:drag[0],col:drag[1]};
end={row:select[0]-1,col:drag[3]}
}else{if(drag[2]>select[2]&&drag[1]===select[1]){start={row:select[2]+1,col:drag[1]};
end={row:drag[2],col:drag[3]}
}}}}if(start){grid.populateFromArray(start,SheetClip.parse(datamap.getText(priv.selStart.coords(),priv.selEnd.coords())),end,"autofill");
selection.setRangeStart({row:drag[0],col:drag[1]});
selection.setRangeEnd({row:drag[2],col:drag[3]})
}},showBorder:function(coords){coords.row=coords[0];
coords.col=coords[1];
var corners=grid.getCornerCoords([priv.selStart.coords(),priv.selEnd.coords()]);
if(priv.settings.fillHandle!=="horizontal"&&(corners.BR.row<coords.row||corners.TL.row>coords.row)){coords=[coords.row,corners.BR.col]
}else{if(priv.settings.fillHandle!=="vertical"){coords=[corners.BR.row,coords.col]
}else{return
}}self.view.wt.selections.fill.clear();
self.view.wt.selections.fill.add([priv.selStart.coords().row,priv.selStart.coords().col]);
self.view.wt.selections.fill.add([priv.selEnd.coords().row,priv.selEnd.coords().col]);
self.view.wt.selections.fill.add(coords);
self.view.render()
}};
editproxy={init:function(){function onCut(){selection.empty()
}function onPaste(str){self.rootElement.one("datachange.handsontable",function(event,changes,source){if(changes.length){var last=changes[changes.length-1];
selection.setRangeEnd({row:last[0],col:self.propToCol(last[1])})
}});
var input=str.replace(/^[\r\n]*/g,"").replace(/[\r\n]*$/g,""),inputArray=SheetClip.parse(input),coords=grid.getCornerCoords([priv.selStart.coords(),priv.selEnd.coords()]);
grid.populateFromArray(coords.TL,inputArray,{row:Math.max(coords.BR.row,inputArray.length-1+coords.TL.row),col:Math.max(coords.BR.col,inputArray[0].length-1+coords.TL.col)},"paste")
}var $body=$(document.body);
function onKeyDown(event){if(priv.settings.beforeOnKeyDown){priv.settings.beforeOnKeyDown.call(self,event)
}if($body.children(".context-menu-list:visible").length){return
}if(event.keyCode===17||event.keyCode===224||event.keyCode===91||event.keyCode===93){editproxy.setCopyableText();
return
}priv.lastKeyCode=event.keyCode;
if(selection.isSelected()){var ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey;
if(Handsontable.helper.isPrintableChar(event.keyCode)&&ctrlDown){if(event.keyCode===65){selection.selectAll();
editproxy.setCopyableText();
event.preventDefault()
}else{if(event.keyCode===89||(event.shiftKey&&event.keyCode===90)){priv.undoRedo&&priv.undoRedo.redo()
}else{if(event.keyCode===90){priv.undoRedo&&priv.undoRedo.undo()
}}}return
}var rangeModifier=event.shiftKey?selection.setRangeEnd:selection.setRangeStart;
switch(event.keyCode){case 38:if(event.shiftKey){selection.transformEnd(-1,0)
}else{selection.transformStart(-1,0)
}event.preventDefault();
event.stopPropagation();
break;
case 9:var tabMoves=typeof priv.settings.tabMoves==="function"?priv.settings.tabMoves(event):priv.settings.tabMoves;
if(event.shiftKey){selection.transformStart(-tabMoves.row,-tabMoves.col)
}else{selection.transformStart(tabMoves.row,tabMoves.col,true)
}event.preventDefault();
event.stopPropagation();
break;
case 39:if(event.shiftKey){selection.transformEnd(0,1)
}else{selection.transformStart(0,1)
}event.preventDefault();
event.stopPropagation();
break;
case 37:if(event.shiftKey){selection.transformEnd(0,-1)
}else{selection.transformStart(0,-1)
}event.preventDefault();
event.stopPropagation();
break;
case 8:case 46:selection.empty(event);
event.preventDefault();
break;
case 40:if(event.shiftKey){selection.transformEnd(1,0)
}else{selection.transformStart(1,0)
}event.preventDefault();
event.stopPropagation();
break;
case 113:event.preventDefault();
break;
case 13:var enterMoves=typeof priv.settings.enterMoves==="function"?priv.settings.enterMoves(event):priv.settings.enterMoves;
if(event.shiftKey){selection.transformStart(-enterMoves.row,-enterMoves.col)
}else{selection.transformStart(enterMoves.row,enterMoves.col,true)
}event.preventDefault();
break;
case 36:if(event.ctrlKey||event.metaKey){rangeModifier({row:0,col:priv.selStart.col()})
}else{rangeModifier({row:priv.selStart.row(),col:0})
}event.preventDefault();
event.stopPropagation();
break;
case 35:if(event.ctrlKey||event.metaKey){rangeModifier({row:self.countRows()-1,col:priv.selStart.col()})
}else{rangeModifier({row:priv.selStart.row(),col:self.countCols()-1})
}event.preventDefault();
event.stopPropagation();
break;
case 33:selection.transformStart(-self.countVisibleRows(),0);
self.view.wt.scrollVertical(-self.countVisibleRows());
self.view.render();
event.preventDefault();
event.stopPropagation();
break;
case 34:selection.transformStart(self.countVisibleRows(),0);
self.view.wt.scrollVertical(self.countVisibleRows());
self.view.render();
event.preventDefault();
event.stopPropagation();
break;
default:break
}}}self.copyPaste=new CopyPaste(self.rootElement[0]);
self.copyPaste.onCut(onCut);
self.copyPaste.onPaste(onPaste);
self.rootElement.on("keydown.handsontable."+self.guid,onKeyDown)
},destroy:function(revertOriginal){if(typeof priv.editorDestroyer==="function"){var destroyer=priv.editorDestroyer;
priv.editorDestroyer=null;
destroyer(revertOriginal)
}},setCopyableText:function(){var startRow=Math.min(priv.selStart.row(),priv.selEnd.row());
var startCol=Math.min(priv.selStart.col(),priv.selEnd.col());
var endRow=Math.max(priv.selStart.row(),priv.selEnd.row());
var endCol=Math.max(priv.selStart.col(),priv.selEnd.col());
var finalEndRow=Math.min(endRow,startRow+priv.settings.copyRowsLimit-1);
var finalEndCol=Math.min(endCol,startCol+priv.settings.copyColsLimit-1);
self.copyPaste.copyable(datamap.getText({row:startRow,col:startCol},{row:finalEndRow,col:finalEndCol}));
if((endRow!==finalEndRow||endCol!==finalEndCol)&&priv.settings.onCopyLimit){priv.settings.onCopyLimit(endRow-startRow+1,endCol-startCol+1,priv.settings.copyRowsLimit,priv.settings.copyColsLimit)
}},prepare:function(){if(!self.getCellMeta(priv.selStart.row(),priv.selStart.col()).isWritable){return
}self.listen();
var TD=self.view.getCellAtCoords(priv.selStart.coords());
priv.editorDestroyer=self.view.applyCellTypeMethod("editor",TD,priv.selStart.row(),priv.selStart.col())
}};
this.init=function(){Handsontable.PluginHooks.run(self,"beforeInit");
editproxy.init();
bindEvents();
this.updateSettings(settings);
this.parseSettingsFromDOM();
this.focusCatcher=new Handsontable.FocusCatcher(this);
this.view=new Handsontable.TableView(this);
this.forceFullRender=true;
this.view.render();
if(typeof priv.firstRun==="object"){fireEvent("datachange.handsontable",priv.firstRun);
priv.firstRun=false
}Handsontable.PluginHooks.run(self,"afterInit")
};
function validateChanges(changes,source){var validated=$.Deferred();
var deferreds=[];
var process=function(i){var deferred=$.Deferred();
deferreds.push(deferred);
var originalVal=changes[i][3];
var lowercaseVal=typeof originalVal==="string"?originalVal.toLowerCase():null;
return function(source){var found=false;
for(var s=0,slen=source.length;
s<slen;
s++){if(originalVal===source[s]){found=true;
break
}else{if(lowercaseVal===source[s].toLowerCase()){changes[i][3]=source[s];
found=true;
break
}}}if(!found){changes[i]=null
}deferred.resolve()
}
};
for(var i=changes.length-1;
i>=0;
i--){var cellProperties=self.getCellMeta(changes[i][0],datamap.propToCol(changes[i][1]));
if(cellProperties.strict&&cellProperties.source){$.isFunction(cellProperties.source)?cellProperties.source(changes[i][3],process(i)):process(i)(cellProperties.source)
}}$.when.apply($,deferreds).then(function(){for(var i=changes.length-1;
i>=0;
i--){if(changes[i]===null){changes.splice(i,1)
}else{var cellProperties=self.getCellMeta(changes[i][0],datamap.propToCol(changes[i][1]));
if(cellProperties.dataType==="number"&&typeof changes[i][3]==="string"){if(changes[i][3].length>0&&/^[0-9\s]*[.]*[0-9]*$/.test(changes[i][3])){changes[i][3]=numeral().unformat(changes[i][3]||"0")
}}}}if(priv.settings.onBeforeChange&&changes.length){var result=priv.settings.onBeforeChange.apply(self.rootElement[0],[changes,source]);
if(typeof result==="function"){$.when(result).then(function(){validated.resolve()
})
}else{if(result===false){changes.splice(0,changes.length)
}validated.resolve()
}}else{validated.resolve()
}});
return $.when(validated)
}var fireEvent=function(name,params){self.rootElement.triggerHandler(name,params)
};
var bindEvents=function(){self.rootElement.on("datachange.handsontable",function(event,changes,source){if(priv.settings.onChange){priv.settings.onChange.apply(self.rootElement[0],[changes,source])
}});
self.rootElement.on("selection.handsontable",function(event,row,col,endRow,endCol){if(priv.settings.onSelection){priv.settings.onSelection.apply(self.rootElement[0],[row,col,endRow,endCol])
}});
self.rootElement.on("selectionbyprop.handsontable",function(event,row,prop,endRow,endProp){if(priv.settings.onSelectionByProp){priv.settings.onSelectionByProp.apply(self.rootElement[0],[row,prop,endRow,endProp])
}});
self.rootElement.on("selectionend.handsontable",function(event,row,col,endRow,endCol){if(priv.settings.onSelectionEnd){priv.settings.onSelectionEnd.apply(self.rootElement[0],[row,col,endRow,endCol])
}});
self.rootElement.on("selectionendbyprop.handsontable",function(event,row,prop,endRow,endProp){if(priv.settings.onSelectionEndByProp){priv.settings.onSelectionEndByProp.apply(self.rootElement[0],[row,prop,endRow,endProp])
}})
};
function applyChanges(changes,source){var i=0,ilen=changes.length;
if(!ilen){return
}while(i<ilen){if(priv.settings.minSpareRows){while(changes[i][0]>self.countRows()-1){datamap.createRow()
}}if(priv.dataType==="array"&&priv.settings.minSpareCols){while(datamap.propToCol(changes[i][1])>self.countCols()-1){datamap.createCol()
}}datamap.set(changes[i][0],changes[i][1],changes[i][3]);
i++
}self.forceFullRender=true;
grid.keepEmptyRows();
selection.refreshBorders();
fireEvent("datachange.handsontable",[changes,source||"edit"])
}function setDataInputToArray(arg0,arg1,arg2){if(typeof arg0==="object"){return arg0
}else{if($.isPlainObject(arg2)){return value
}else{return[[arg0,arg1,arg2]]
}}}this.setDataAtCell=function(row,col,value,source){var input=setDataInputToArray(row,col,value),i,ilen,changes=[],prop;
for(i=0,ilen=input.length;
i<ilen;
i++){if(typeof input[i][1]!=="number"){throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`")
}prop=datamap.colToProp(input[i][1]);
changes.push([input[i][0],prop,datamap.get(input[i][0],prop),input[i][2]])
}validateChanges(changes,source).then(function(){applyChanges(changes,source)
})
};
this.setDataAtRowProp=function(row,prop,value,source){var input=setDataInputToArray(row,prop,value),i,ilen,changes=[];
for(i=0,ilen=input.length;
i<ilen;
i++){changes.push([input[i][0],input[i][1],datamap.get(input[i][0],input[i][1]),input[i][2]])
}validateChanges(changes,source).then(function(){applyChanges(changes,source)
})
};
this.listen=function(){self.focusCatcher.listen()
};
this.destroyEditor=function(revertOriginal){selection.refreshBorders(revertOriginal)
};
this.populateFromArray=function(start,input,end,source){return grid.populateFromArray(start,input,end,source)
};
this.getCornerCoords=function(coordsArr){return grid.getCornerCoords(coordsArr)
};
this.getSelected=function(){if(selection.isSelected()){return[priv.selStart.row(),priv.selStart.col(),priv.selEnd.row(),priv.selEnd.col()]
}};
this.parseSettingsFromDOM=function(){var overflow=this.rootElement.css("overflow");
if(overflow==="scroll"||overflow==="auto"){this.rootElement[0].style.overflow="visible";
priv.settingsFromDOM.overflow=overflow
}else{if(priv.settings.width===void 0||priv.settings.height===void 0){priv.settingsFromDOM.overflow="auto"
}}if(priv.settings.width===void 0){priv.settingsFromDOM.width=this.rootElement.width()
}else{priv.settingsFromDOM.width=void 0
}priv.settingsFromDOM.height=void 0;
if(priv.settings.height===void 0){if(priv.settingsFromDOM.overflow==="scroll"||priv.settingsFromDOM.overflow==="auto"){var clone=this.rootElement[0].cloneNode(false);
var parent=this.rootElement[0].parentNode;
if(parent){clone.removeAttribute("id");
parent.appendChild(clone);
var computedHeight=parseInt(window.getComputedStyle(clone,null).getPropertyValue("height"),10);
if(computedHeight>0){priv.settingsFromDOM.height=computedHeight
}parent.removeChild(clone)
}}}};
this.render=function(){if(self.view){self.forceFullRender=true;
self.parseSettingsFromDOM();
selection.refreshBorders(null,true)
}};
this.loadData=function(data){if(!(data.push&&data.splice)){throw new Error("loadData only accepts array of objects or array of arrays ("+typeof data+" given)")
}priv.isPopulated=false;
priv.settings.data=data;
if(priv.settings.dataSchema instanceof Array||data[0] instanceof Array){priv.dataType="array"
}else{if($.isFunction(priv.settings.dataSchema)){priv.dataType="function"
}else{priv.dataType="object"
}}if(data[0]){priv.duckDataSchema=datamap.recursiveDuckSchema(data[0])
}else{priv.duckDataSchema={}
}datamap.createMap();
grid.keepEmptyRows();
Handsontable.PluginHooks.run(self,"afterLoadData");
if(priv.firstRun){priv.firstRun=[null,"loadData"]
}else{fireEvent("datachange.handsontable",[null,"loadData"]);
self.render()
}priv.isPopulated=true;
self.clearUndo()
};
this.getData=function(r,c,r2,c2){if(typeof r==="undefined"){return datamap.getAll()
}else{return datamap.getRange({row:r,col:c},{row:r2,col:c2})
}};
this.updateSettings=function(settings){var i;
if(typeof settings.rows!=="undefined"){throw new Error("'rows' setting is no longer supported. do you mean startRows, minRows or maxRows?")
}if(typeof settings.cols!=="undefined"){throw new Error("'cols' setting is no longer supported. do you mean startCols, minCols or maxCols?")
}if(typeof settings.undo!=="undefined"){if(priv.undoRedo&&settings.undo===false){priv.undoRedo=null
}else{if(!priv.undoRedo&&settings.undo===true){priv.undoRedo=new Handsontable.UndoRedo(self)
}}}for(i in settings){if(i==="data"){continue
}else{if(settings.hasOwnProperty(i)){priv.settings[i]=settings[i];
if(Handsontable.extension[i]){priv.extensions[i]=new Handsontable.extension[i](self,settings[i])
}}}}if(settings.data===void 0&&priv.settings.data===void 0){var data=[];
var row;
for(var r=0,rlen=priv.settings.startRows;
r<rlen;
r++){row=[];
for(var c=0,clen=priv.settings.startCols;
c<clen;
c++){row.push(null)
}data.push(row)
}self.loadData(data)
}else{if(settings.data!==void 0){self.loadData(settings.data)
}else{if(settings.columns!==void 0){datamap.createMap()
}}}if(typeof settings.fillHandle!=="undefined"){if(autofill.handle&&settings.fillHandle===false){autofill.disable()
}else{if(!autofill.handle&&settings.fillHandle!==false){autofill.init()
}}}grid.keepEmptyRows();
if(self.view){self.forceFullRender=true;
selection.refreshBorders(null,true)
}};
this.getSettings=function(){return priv.settings
};
this.getSettingsFromDOM=function(){return priv.settingsFromDOM
};
this.clear=function(){selection.selectAll();
selection.empty()
};
this.isUndoAvailable=function(){return priv.undoRedo&&priv.undoRedo.isUndoAvailable()
};
this.isRedoAvailable=function(){return priv.undoRedo&&priv.undoRedo.isRedoAvailable()
};
this.undo=function(){priv.undoRedo&&priv.undoRedo.undo()
};
this.redo=function(){priv.undoRedo&&priv.undoRedo.redo()
};
this.clearUndo=function(){priv.undoRedo&&priv.undoRedo.clear()
};
this.alter=function(action,index,amount){grid.alter(action,index,amount)
};
this.getCell=function(row,col){return self.view.getCellAtCoords({row:row,col:col})
};
this.colToProp=function(col){return datamap.colToProp(col)
};
this.propToCol=function(prop){return datamap.propToCol(prop)
};
this.getDataAtCell=function(row,col){return datamap.get(row,datamap.colToProp(col))
};
this.getDataAtRowProp=function(row,prop){return datamap.get(row,prop)
};
this.getCellMeta=function(row,col){var cellProperties=$.extend(true,cellProperties,Handsontable.TextCell),prop=datamap.colToProp(col),i,type;
if(priv.settings.columns){cellProperties=$.extend(true,cellProperties,priv.settings.columns[col]||{})
}if(priv.settings.cells){cellProperties=$.extend(true,cellProperties,priv.settings.cells(row,col,prop)||{})
}Handsontable.PluginHooks.run(self,"beforeGetCellMeta",row,col,cellProperties);
if(typeof cellProperties.type==="string"&&Handsontable.cellTypes[cellProperties.type]){type=Handsontable.cellTypes[cellProperties.type]
}else{if(typeof cellProperties.type==="object"){type=cellProperties.type
}}if(type){for(i in type){if(type.hasOwnProperty(i)){cellProperties[i]=type[i]
}}}cellProperties.isWritable=!cellProperties.readOnly;
Handsontable.PluginHooks.run(self,"afterGetCellMeta",row,col,cellProperties);
return cellProperties
};
this.getRowHeader=function(row){if(row===void 0){var out=[];
for(var i=0,ilen=self.countRows();
i<ilen;
i++){out.push(self.getRowHeader(i))
}return out
}else{if(Object.prototype.toString.call(priv.settings.rowHeaders)==="[object Array]"&&priv.settings.rowHeaders[row]!==void 0){return priv.settings.rowHeaders[row]
}else{if(typeof priv.settings.rowHeaders==="function"){return priv.settings.rowHeaders(row)
}else{if(priv.settings.rowHeaders&&typeof priv.settings.rowHeaders!=="string"&&typeof priv.settings.rowHeaders!=="number"){return row+1
}else{return priv.settings.rowHeaders
}}}}};
this.getColHeader=function(col){if(col===void 0){var out=[];
for(var i=0,ilen=self.countCols();
i<ilen;
i++){out.push(self.getColHeader(i))
}return out
}else{col=Handsontable.PluginModifiers.run(self,"col",col);
if(priv.settings.columns&&priv.settings.columns[col]&&priv.settings.columns[col].title){return priv.settings.columns[col].title
}else{if(Object.prototype.toString.call(priv.settings.colHeaders)==="[object Array]"&&priv.settings.colHeaders[col]!==void 0){return priv.settings.colHeaders[col]
}else{if(typeof priv.settings.colHeaders==="function"){return priv.settings.colHeaders(col)
}else{if(priv.settings.colHeaders&&typeof priv.settings.colHeaders!=="string"&&typeof priv.settings.colHeaders!=="number"){return Handsontable.helper.spreadsheetColumnLabel(col)
}else{return priv.settings.colHeaders
}}}}}};
this.getColWidth=function(col){col=Handsontable.PluginModifiers.run(self,"col",col);
var response={};
if(priv.settings.columns&&priv.settings.columns[col]&&priv.settings.columns[col].width){response.width=priv.settings.columns[col].width
}else{if(Object.prototype.toString.call(priv.settings.colWidths)==="[object Array]"&&priv.settings.colWidths[col]!==void 0){response.width=priv.settings.colWidths[col]
}else{response.width=50
}}Handsontable.PluginHooks.run(self,"afterGetColWidth",col,response);
return response.width
};
this.countRows=function(){return priv.settings.data.length
};
this.countCols=function(){if(priv.dataType==="object"||priv.dataType==="function"){if(priv.settings.columns&&priv.settings.columns.length){return priv.settings.columns.length
}else{return priv.colToProp.length
}}else{if(priv.dataType==="array"){if(priv.settings.columns&&priv.settings.columns.length){return priv.settings.columns.length
}else{if(priv.settings.data&&priv.settings.data[0]&&priv.settings.data[0].length){return priv.settings.data[0].length
}else{return 0
}}}}};
this.rowOffset=function(){return self.view.wt.getSetting("offsetRow")
};
this.colOffset=function(){return self.view.wt.getSetting("offsetColumn")
};
this.countVisibleRows=function(){return self.view.wt.wtTable.countVisibleRows()
};
this.countVisibleCols=function(){return self.view.wt.wtTable.countVisibleColumns()
};
this.countEmptyRows=function(ending){var i=self.countRows()-1,empty=0;
while(i>=0){if(self.isEmptyRow(i)){empty++
}else{if(ending){break
}}i--
}return empty
};
this.countEmptyCols=function(ending){if(self.countRows()<1){return 0
}var i=self.countCols()-1,empty=0;
while(i>=0){if(self.isEmptyCol(i)){empty++
}else{if(ending){break
}}i--
}return empty
};
this.isEmptyRow=function(r){if(priv.settings.isEmptyRow){return priv.settings.isEmptyRow.call(this,r)
}var val;
for(var c=0,clen=this.countCols();
c<clen;
c++){val=this.getDataAtCell(r,c);
if(val!==""&&val!==null&&typeof val!=="undefined"){return false
}}return true
};
this.isEmptyCol=function(c){if(priv.settings.isEmptyCol){return priv.settings.isEmptyCol.call(this,c)
}var val;
for(var r=0,rlen=this.countRows();
r<rlen;
r++){val=this.getDataAtCell(r,c);
if(val!==""&&val!==null&&typeof val!=="undefined"){return false
}}return true
};
this.selectCell=function(row,col,endRow,endCol,scrollToCell){if(typeof row!=="number"||row<0||row>=self.countRows()){return false
}if(typeof col!=="number"||col<0||col>=self.countCols()){return false
}if(typeof endRow!=="undefined"){if(typeof endRow!=="number"||endRow<0||endRow>=self.countRows()){return false
}if(typeof endCol!=="number"||endCol<0||endCol>=self.countCols()){return false
}}priv.selStart.coords({row:row,col:col});
self.listen();
if(typeof endRow==="undefined"){selection.setRangeEnd({row:row,col:col},scrollToCell)
}else{selection.setRangeEnd({row:endRow,col:endCol},scrollToCell)
}self.selection.finish();
return true
};
this.selectCellByProp=function(row,prop,endRow,endProp,scrollToCell){arguments[1]=datamap.propToCol(arguments[1]);
if(typeof arguments[3]!=="undefined"){arguments[3]=datamap.propToCol(arguments[3])
}return self.selectCell.apply(self,arguments)
};
this.deselectCell=function(){selection.deselect()
};
this.destroy=function(){self.clearTimeouts();
if(self.view){self.view.wt.destroy()
}self.rootElement.empty();
self.rootElement.removeData("handsontable");
self.rootElement.off(".handsontable");
$(window).off("."+self.guid);
$(document.documentElement).off("."+self.guid);
Handsontable.PluginHooks.run(self,"afterDestroy")
};
this.timeouts={};
this.registerTimeout=function(key,handle,ms){clearTimeout(this.timeouts[key]);
this.timeouts[key]=setTimeout(handle,ms||0)
};
this.clearTimeouts=function(){for(var key in this.timeouts){if(this.timeouts.hasOwnProperty(key)){clearTimeout(this.timeouts[key])
}}};
this.version="0.8.23"
};
var settings={data:void 0,width:void 0,height:void 0,startRows:5,startCols:5,minRows:0,minCols:0,maxRows:Infinity,maxCols:Infinity,minSpareRows:0,minSpareCols:0,multiSelect:true,fillHandle:true,undo:true,outsideClickDeselects:true,enterBeginsEditing:true,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:false,autoWrapCol:false,copyRowsLimit:1000,copyColsLimit:1000,currentRowClassName:void 0,currentColClassName:void 0,stretchH:"hybrid",isEmptyRow:void 0,isEmptyCol:void 0,observeDOMVisibility:true};
$.fn.handsontable=function(action){var i,ilen,args,output=[],userSettings;
if(typeof action!=="string"){userSettings=action||{};
return this.each(function(){var $this=$(this);
if($this.data("handsontable")){instance=$this.data("handsontable");
instance.updateSettings(userSettings)
}else{var currentSettings=$.extend(true,{},settings),instance;
for(i in userSettings){if(userSettings.hasOwnProperty(i)){currentSettings[i]=userSettings[i]
}}instance=new Handsontable.Core($this,currentSettings);
$this.data("handsontable",instance);
instance.init()
}})
}else{args=[];
if(arguments.length>1){for(i=1,ilen=arguments.length;
i<ilen;
i++){args.push(arguments[i])
}}this.each(function(){var instance=$(this).data("handsontable");
if(instance){output=instance[action].apply(this,args)
}});
return output
}};
Handsontable.FocusCatcher=function(instance){this.el=document.createElement("DIV");
this.el.style.position="fixed";
this.el.style.top="0";
this.el.style.left="0";
this.el.style.width="1px";
this.el.style.height="1px";
this.el.setAttribute("tabindex",10000);
instance.rootElement.append(this.el);
this.$el=$(this.el)
};
Handsontable.FocusCatcher.prototype.listen=function(){this.el.focus()
};
Handsontable.TableView=function(instance){var that=this,$window=$(window),$documentElement=$(document.documentElement);
this.instance=instance;
this.settings=instance.getSettings();
this.settingsFromDOM=instance.getSettingsFromDOM();
instance.rootElement.data("originalStyle",instance.rootElement.attr("style"));
instance.rootElement.addClass("handsontable");
var table=document.createElement("TABLE");
table.className="htCore";
table.appendChild(document.createElement("THEAD"));
table.appendChild(document.createElement("TBODY"));
instance.$table=$(table);
instance.rootElement.prepend(instance.$table);
$documentElement.on("keyup."+instance.guid,function(event){if(instance.selection.isInProgress()&&!event.shiftKey){instance.selection.finish()
}});
var isMouseDown,dragInterval;
$documentElement.on("mouseup."+instance.guid,function(event){if(instance.selection.isInProgress()&&event.which===1){instance.selection.finish()
}isMouseDown=false;
clearInterval(dragInterval);
dragInterval=null;
if(instance.autofill.handle&&instance.autofill.handle.isDragged){if(instance.autofill.handle.isDragged>1){instance.autofill.apply()
}instance.autofill.handle.isDragged=0
}});
$documentElement.on("mousedown."+instance.guid,function(event){var next=event.target;
if(next!==that.wt.wtTable.spreader){while(next!==null&&next!==document.documentElement){if(next===instance.rootElement[0]||next.nodeName==="X-HANDSONTABLE"||next.id==="context-menu-layer"||$(next).is(".context-menu-list")||$(next).is(".typeahead li")){return
}next=next.parentNode
}}if(that.settings.outsideClickDeselects){instance.deselectCell()
}else{instance.destroyEditor()
}});
instance.$table.on("selectstart",function(event){event.preventDefault()
});
instance.$table.on("mouseenter",function(){if(dragInterval){clearInterval(dragInterval);
dragInterval=null
}});
instance.$table.on("mouseleave",function(event){if(!(isMouseDown||(instance.autofill.handle&&instance.autofill.handle.isDragged))){return
}var tolerance=1,offset=that.wt.wtDom.offset(table),offsetTop=offset.top+tolerance,offsetLeft=offset.left+tolerance,width=that.containerWidth-that.wt.getSetting("scrollbarWidth")-2*tolerance,height=that.containerHeight-that.wt.getSetting("scrollbarHeight")-2*tolerance,method,row=0,col=0,dragFn;
if(event.pageY<offsetTop){row=-1;
method="scrollVertical"
}else{if(event.pageY>=offsetTop+height){row=1;
method="scrollVertical"
}else{if(event.pageX<offsetLeft){col=-1;
method="scrollHorizontal"
}else{if(event.pageX>=offsetLeft+width){col=1;
method="scrollHorizontal"
}}}}if(method){dragFn=function(){if(isMouseDown||(instance.autofill.handle&&instance.autofill.handle.isDragged)){that.wt[method](row+col).draw()
}};
dragFn();
dragInterval=setInterval(dragFn,100)
}});
var clearTextSelection=function(){if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty()
}else{if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges()
}}}else{if(document.selection){document.selection.empty()
}}};
var walkontableConfig={table:table,stretchH:this.settings.stretchH,data:instance.getDataAtCell,totalRows:instance.countRows,totalColumns:instance.countCols,offsetRow:0,offsetColumn:0,width:this.getWidth(),height:this.getHeight(),fixedColumnsLeft:this.settings.fixedColumnsLeft,fixedRowsTop:this.settings.fixedRowsTop,rowHeaders:this.settings.rowHeaders?function(index,TH){that.appendRowHeader(index,TH)
}:null,columnHeaders:this.settings.colHeaders?function(index,TH){that.appendColHeader(index,TH)
}:null,columnWidth:instance.getColWidth,cellRenderer:function(row,column,TD){that.applyCellTypeMethod("renderer",TD,row,column)
},selections:{current:{className:"current",border:{width:2,color:"#5292F7",style:"solid",cornerVisible:function(){return that.settings.fillHandle&&!that.isCellEdited()&&!instance.selection.isMultiple()
}}},area:{className:"area",border:{width:1,color:"#89AFF9",style:"solid",cornerVisible:function(){return that.settings.fillHandle&&!that.isCellEdited()&&instance.selection.isMultiple()
}}},highlight:{highlightRowClassName:that.settings.currentRowClassName,highlightColumnClassName:that.settings.currentColClassName},fill:{className:"fill",border:{width:1,color:"red",style:"solid"}}},onCellMouseDown:function(event,coords,TD){isMouseDown=true;
var coordsObj={row:coords[0],col:coords[1]};
if(event.button===2&&instance.selection.inInSelection(coordsObj)){}else{if(event.shiftKey){instance.selection.setRangeEnd(coordsObj)
}else{instance.selection.setRangeStart(coordsObj)
}}event.preventDefault();
clearTextSelection();
if(that.settings.afterOnCellMouseDown){that.settings.afterOnCellMouseDown.call(instance,event,coords,TD)
}setTimeout(function(){instance.listen()
})
},onCellMouseOver:function(event,coords,TD){var coordsObj={row:coords[0],col:coords[1]};
if(isMouseDown){instance.selection.setRangeEnd(coordsObj)
}else{if(instance.autofill.handle&&instance.autofill.handle.isDragged){instance.autofill.handle.isDragged++;
instance.autofill.showBorder(coords)
}}},onCellCornerMouseDown:function(event){instance.autofill.handle.isDragged=1;
event.preventDefault()
},onCellCornerDblClick:function(){instance.autofill.selectAdjacent()
},beforeDraw:function(force){that.beforeRender(force)
}};
Handsontable.PluginHooks.run(instance,"walkontableConfig",walkontableConfig);
this.wt=new Walkontable(walkontableConfig);
$window.on("resize."+instance.guid,function(){instance.registerTimeout("resizeTimeout",function(){instance.parseSettingsFromDOM();
var newWidth=that.getWidth();
var newHeight=that.getHeight();
if(walkontableConfig.width!==newWidth||walkontableConfig.height!==newHeight){instance.forceFullRender=true;
that.render();
walkontableConfig.width=newWidth;
walkontableConfig.height=newHeight
}},60)
});
$(that.wt.wtTable.spreader).on("mousedown.handsontable, contextmenu.handsontable",function(event){if(event.target===that.wt.wtTable.spreader&&event.which===3){event.stopPropagation()
}});
$documentElement.on("click."+instance.guid,function(){if(that.settings.observeDOMVisibility){if(that.wt.drawInterrupted){that.instance.forceFullRender=true;
that.render()
}}})
};
Handsontable.TableView.prototype.isCellEdited=function(){return(this.instance.textEditor&&this.instance.textEditor.isCellEdited)||(this.instance.autocompleteEditor&&this.instance.autocompleteEditor.isCellEdited)||(this.instance.handsontableEditor&&this.instance.handsontableEditor.isCellEdited)
};
Handsontable.TableView.prototype.getWidth=function(){var val=this.settings.width!==void 0?this.settings.width:this.settingsFromDOM.width;
return typeof val==="function"?val():val
};
Handsontable.TableView.prototype.getHeight=function(){var val=this.settings.height!==void 0?this.settings.height:this.settingsFromDOM.height;
return typeof val==="function"?val():val
};
Handsontable.TableView.prototype.beforeRender=function(force){if(force){Handsontable.PluginHooks.run(this.instance,"beforeRender");
this.wt.update("width",this.getWidth());
this.wt.update("height",this.getHeight())
}};
Handsontable.TableView.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender);
this.instance.rootElement.triggerHandler("render.handsontable");
if(this.instance.forceFullRender){Handsontable.PluginHooks.run(this.instance,"afterRender")
}this.instance.forceFullRender=false
};
Handsontable.TableView.prototype.applyCellTypeMethod=function(methodName,td,row,col){var prop=this.instance.colToProp(col),cellProperties=this.instance.getCellMeta(row,col);
if(cellProperties[methodName]){return cellProperties[methodName](this.instance,td,row,col,prop,this.instance.getDataAtRowProp(row,prop),cellProperties)
}};
Handsontable.TableView.prototype.getCellAtCoords=function(coords){var td=this.wt.wtTable.getCell([coords.row,coords.col]);
if(td<0){return null
}else{return td
}};
Handsontable.TableView.prototype.scrollViewport=function(coords){this.wt.scrollViewport([coords.row,coords.col])
};
Handsontable.TableView.prototype.appendRowHeader=function(row,TH){this.wt.wtDom.avoidInnerHTML(TH,this.instance.getRowHeader(row))
};
Handsontable.TableView.prototype.appendColHeader=function(col,TH){var DIV=document.createElement("DIV"),SPAN=document.createElement("SPAN");
DIV.className="relative";
SPAN.className="colHeader";
this.wt.wtDom.avoidInnerHTML(SPAN,this.instance.getColHeader(col));
DIV.appendChild(SPAN);
while(TH.firstChild){TH.removeChild(TH.firstChild)
}TH.appendChild(DIV);
Handsontable.PluginHooks.run(this.instance,"afterGetColHeader",col,TH)
};
Handsontable.helper.isPrintableChar=function(keyCode){return((keyCode==32)||(keyCode>=48&&keyCode<=57)||(keyCode>=96&&keyCode<=111)||(keyCode>=186&&keyCode<=192)||(keyCode>=219&&keyCode<=222)||keyCode>=226||(keyCode>=65&&keyCode<=90))
};
Handsontable.helper.stringify=function(value){switch(typeof value){case"string":case"number":return value+"";
break;
case"object":if(value===null){return""
}else{return value.toString()
}break;
case"undefined":return"";
break;
default:return value.toString()
}};
Handsontable.helper.spreadsheetColumnLabel=function(index){var dividend=index+1;
var columnLabel="";
var modulo;
while(dividend>0){modulo=(dividend-1)%26;
columnLabel=String.fromCharCode(65+modulo)+columnLabel;
dividend=parseInt((dividend-modulo)/26,10)
}return columnLabel
};
Handsontable.helper.isDescendant=function(parent,child){var node=child.parentNode;
while(node!=null){if(node==parent){return true
}node=node.parentNode
}return false
};
Handsontable.helper.randomString=function(){function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)
}return s4()+s4()+s4()+s4()
};
Handsontable.helper.inherit=function(Child,Parent){function Bridge(){}Bridge.prototype=Parent.prototype;
Child.prototype=new Bridge();
Child.prototype.constructor=Child;
return Child
};
Handsontable.UndoRedo=function(instance){var that=this;
this.instance=instance;
this.clear();
instance.rootElement.on("datachange.handsontable",function(event,changes,origin){if(origin!=="undo"&&origin!=="redo"){that.add(changes)
}})
};
Handsontable.UndoRedo.prototype.undo=function(){var i,ilen;
if(this.isUndoAvailable()){var setData=$.extend(true,[],this.data[this.rev]);
for(i=0,ilen=setData.length;
i<ilen;
i++){setData[i].splice(3,1)
}this.instance.setDataAtRowProp(setData,null,null,"undo");
this.rev--
}};
Handsontable.UndoRedo.prototype.redo=function(){var i,ilen;
if(this.isRedoAvailable()){this.rev++;
var setData=$.extend(true,[],this.data[this.rev]);
for(i=0,ilen=setData.length;
i<ilen;
i++){setData[i].splice(2,1)
}this.instance.setDataAtRowProp(setData,null,null,"redo")
}};
Handsontable.UndoRedo.prototype.isUndoAvailable=function(){return(this.rev>=0)
};
Handsontable.UndoRedo.prototype.isRedoAvailable=function(){return(this.rev<this.data.length-1)
};
Handsontable.UndoRedo.prototype.add=function(changes){this.rev++;
this.data.splice(this.rev);
this.data.push(changes)
};
Handsontable.UndoRedo.prototype.clear=function(){this.data=[];
this.rev=-1
};
Handsontable.SelectionPoint=function(){this._row=null;
this._col=null
};
Handsontable.SelectionPoint.prototype.exists=function(){return(this._row!==null)
};
Handsontable.SelectionPoint.prototype.row=function(val){if(val!==void 0){this._row=val
}return this._row
};
Handsontable.SelectionPoint.prototype.col=function(val){if(val!==void 0){this._col=val
}return this._col
};
Handsontable.SelectionPoint.prototype.coords=function(coords){if(coords!==void 0){this._row=coords.row;
this._col=coords.col
}return{row:this._row,col:this._col}
};
Handsontable.SelectionPoint.prototype.arr=function(arr){if(arr!==void 0){this._row=arr[0];
this._col=arr[1]
}return[this._row,this._col]
};
Handsontable.TextRenderer=function(instance,TD,row,col,prop,value,cellProperties){var escaped=Handsontable.helper.stringify(value);
if(escaped.match(/\n/)){escaped=escaped.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");
TD.innerHTML=escaped.replace(/\n/g,"<br/>")
}else{instance.view.wt.wtDom.empty(TD);
TD.appendChild(document.createTextNode(escaped))
}if(cellProperties.readOnly){TD.className="htDimmed"
}};
Handsontable.AutocompleteRenderer=function(instance,TD,row,col,prop,value,cellProperties){var TEXT=document.createElement("DIV");
TEXT.className="htAutocomplete";
var ARROW=document.createElement("DIV");
ARROW.className="htAutocompleteArrow";
ARROW.appendChild(document.createTextNode("\u25BC"));
if(!instance.acArrowListener){instance.acArrowListener=function(){instance.view.wt.getSetting("onCellDblClick")
};
instance.rootElement.on("mouseup",".htAutocompleteArrow",instance.acArrowListener)
}Handsontable.TextRenderer(instance,TEXT,row,col,prop,value,cellProperties);
if(!TEXT.firstChild){TEXT.appendChild(document.createTextNode("\u00A0"))
}TEXT.appendChild(ARROW);
instance.view.wt.wtDom.empty(TD);
TD.appendChild(TEXT)
};
Handsontable.CheckboxRenderer=function(instance,TD,row,col,prop,value,cellProperties){if(typeof cellProperties.checkedTemplate==="undefined"){cellProperties.checkedTemplate=true
}if(typeof cellProperties.uncheckedTemplate==="undefined"){cellProperties.uncheckedTemplate=false
}instance.view.wt.wtDom.empty(TD);
var INPUT=document.createElement("INPUT");
INPUT.className="htCheckboxRendererInput";
INPUT.type="checkbox";
INPUT.setAttribute("autocomplete","off");
if(value===cellProperties.checkedTemplate||value===Handsontable.helper.stringify(cellProperties.checkedTemplate)){INPUT.checked=true;
TD.appendChild(INPUT)
}else{if(value===cellProperties.uncheckedTemplate||value===Handsontable.helper.stringify(cellProperties.uncheckedTemplate)){TD.appendChild(INPUT)
}else{if(value===null){INPUT.className+=" noValue";
TD.appendChild(INPUT)
}else{TD.appendChild(document.createTextNode("#bad value#"))
}}}var $input=$(INPUT);
if(cellProperties.readOnly){$input.on("click",function(event){event.preventDefault()
})
}else{$input.on("mousedown",function(event){if(!this.checked){instance.setDataAtRowProp(row,prop,cellProperties.checkedTemplate)
}else{instance.setDataAtRowProp(row,prop,cellProperties.uncheckedTemplate)
}event.stopPropagation()
});
$input.on("mouseup",function(event){event.stopPropagation()
})
}return TD
};
Handsontable.NumericRenderer=function(instance,TD,row,col,prop,value,cellProperties){if(typeof value==="number"){if(typeof cellProperties.language!=="undefined"){numeral.language(cellProperties.language)
}instance.view.wt.wtDom.empty(TD);
TD.className="htNumeric";
TD.appendChild(document.createTextNode(numeral(value).format(cellProperties.format||"0")))
}else{Handsontable.TextRenderer(instance,TD,row,col,prop,value,cellProperties)
}};
function HandsontableTextEditorClass(instance){this.isCellEdited=false;
this.instance=instance;
this.createElements();
this.bindEvents()
}HandsontableTextEditorClass.prototype.createElements=function(){this.wtDom=new WalkontableDom();
this.TEXTAREA=document.createElement("TEXTAREA");
this.TEXTAREA.className="handsontableInput";
this.textareaStyle=this.TEXTAREA.style;
this.textareaStyle.width=0;
this.textareaStyle.height=0;
this.$textarea=$(this.TEXTAREA);
this.TEXTAREA_PARENT=document.createElement("DIV");
this.TEXTAREA_PARENT.className="handsontableInputHolder";
this.textareaParentStyle=this.TEXTAREA_PARENT.style;
this.textareaParentStyle.top=0;
this.textareaParentStyle.left=0;
this.textareaParentStyle.display="none";
this.$textareaParent=$(this.TEXTAREA_PARENT);
this.TEXTAREA_PARENT.appendChild(this.TEXTAREA);
this.instance.rootElement[0].appendChild(this.TEXTAREA_PARENT);
var that=this;
Handsontable.PluginHooks.push("afterRender",function(){that.instance.registerTimeout("refresh_editor_dimensions",function(){that.refreshDimensions()
},0)
})
};
HandsontableTextEditorClass.prototype.bindEvents=function(){var that=this;
this.$textareaParent.off(".editor").on("keydown.editor",function(event){var ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey;
if(event.keyCode===17||event.keyCode===224||event.keyCode===91||event.keyCode===93){event.stopImmediatePropagation();
return
}switch(event.keyCode){case 38:case 40:that.finishEditing(false);
break;
case 9:that.finishEditing(false);
event.preventDefault();
break;
case 39:if(that.getCaretPosition(that.TEXTAREA)===that.TEXTAREA.value.length){that.finishEditing(false)
}else{event.stopImmediatePropagation()
}break;
case 37:if(that.getCaretPosition(that.TEXTAREA)===0){that.finishEditing(false)
}else{event.stopImmediatePropagation()
}break;
case 27:that.instance.destroyEditor(true);
event.stopImmediatePropagation();
break;
case 13:var selected=that.instance.getSelected();
var isMultipleSelection=!(selected[0]===selected[2]&&selected[1]===selected[3]);
if((event.ctrlKey&&!isMultipleSelection)||event.altKey){that.TEXTAREA.value=that.TEXTAREA.value+"\n";
that.TEXTAREA.focus();
event.stopImmediatePropagation()
}else{that.finishEditing(false,ctrlDown)
}event.preventDefault();
break;
default:event.stopImmediatePropagation();
break
}})
};
HandsontableTextEditorClass.prototype.bindTemporaryEvents=function(td,row,col,prop,value,cellProperties){this.TD=td;
this.row=row;
this.col=col;
this.prop=prop;
this.originalValue=value;
this.cellProperties=cellProperties;
var that=this;
this.instance.focusCatcher.$el.on("keydown.editor",function(event){var ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey;
if(!that.isCellEdited){if(Handsontable.helper.isPrintableChar(event.keyCode)){if(!ctrlDown){that.beginEditing(row,col,prop)
}}else{if(event.keyCode===113){that.beginEditing(row,col,prop,true);
event.stopImmediatePropagation();
event.preventDefault()
}else{if(event.keyCode===13&&that.instance.getSettings().enterBeginsEditing){var selected=that.instance.getSelected();
var isMultipleSelection=!(selected[0]===selected[2]&&selected[1]===selected[3]);
if((ctrlDown&&!isMultipleSelection)||event.altKey){that.beginEditing(row,col,prop,true,"\n")
}else{that.beginEditing(row,col,prop,true)
}event.preventDefault();
event.stopImmediatePropagation()
}}}}});
function onDblClick(){that.beginEditing(row,col,prop,true)
}this.instance.view.wt.update("onCellDblClick",onDblClick)
};
HandsontableTextEditorClass.prototype.unbindTemporaryEvents=function(){this.instance.focusCatcher.$el.off(".editor");
this.instance.view.wt.update("onCellDblClick",null)
};
HandsontableTextEditorClass.prototype.getCaretPosition=function(el){if(el.selectionStart){return el.selectionStart
}else{if(document.selection){el.focus();
var r=document.selection.createRange();
if(r==null){return 0
}var re=el.createTextRange(),rc=re.duplicate();
re.moveToBookmark(r.getBookmark());
rc.setEndPoint("EndToStart",re);
return rc.text.length
}}return 0
};
HandsontableTextEditorClass.prototype.setCaretPosition=function(el,pos){if(el.setSelectionRange){el.focus();
el.setSelectionRange(pos,pos)
}else{if(el.createTextRange){var range=el.createTextRange();
range.collapse(true);
range.moveEnd("character",pos);
range.moveStart("character",pos);
range.select()
}}};
HandsontableTextEditorClass.prototype.beginEditing=function(row,col,prop,useOriginalValue,suffix){if(this.isCellEdited){return
}this.isCellEdited=true;
this.row=row;
this.col=col;
this.prop=prop;
var coords={row:row,col:col};
this.instance.view.scrollViewport(coords);
this.instance.view.render();
this.$textarea.on("cut.editor",function(event){event.stopPropagation()
});
this.$textarea.on("paste.editor",function(event){event.stopPropagation()
});
if(useOriginalValue){this.TEXTAREA.value=Handsontable.helper.stringify(this.originalValue)+(suffix||"")
}else{this.TEXTAREA.value=""
}this.refreshDimensions();
this.TEXTAREA.focus();
this.setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length)
};
HandsontableTextEditorClass.prototype.refreshDimensions=function(){if(!this.isCellEdited){return
}this.TD=this.instance.getCell(this.row,this.col);
var $td=$(this.TD);
var currentOffset=this.wtDom.offset(this.TD);
var containerOffset=this.wtDom.offset(this.instance.rootElement[0]);
var scrollTop=this.instance.rootElement.scrollTop();
var scrollLeft=this.instance.rootElement.scrollLeft();
var editTop=currentOffset.top-containerOffset.top+scrollTop-1;
var editLeft=currentOffset.left-containerOffset.left+scrollLeft-1;
var settings=this.instance.getSettings();
var rowHeadersCount=settings.rowHeaders===false?0:1;
var colHeadersCount=settings.colHeaders===false?0:1;
if(editTop<0){editTop=0
}if(editLeft<0){editLeft=0
}if(rowHeadersCount>0&&parseInt($td.css("border-top-width"),10)>0){editTop+=1
}if(colHeadersCount>0&&parseInt($td.css("border-left-width"),10)>0){editLeft+=1
}if($.browser.msie&&parseInt($.browser.version,10)<=7){editTop-=1
}this.textareaParentStyle.top=editTop+"px";
this.textareaParentStyle.left=editLeft+"px";
var width=$td.width(),height=$td.outerHeight()-4;
if(parseInt($td.css("border-top-width"),10)>0){height-=1
}if(parseInt($td.css("border-left-width"),10)>0){if(rowHeadersCount>0){width-=1
}}this.$textarea.autoResize({maxHeight:200,minHeight:height,minWidth:width,maxWidth:Math.max(168,width),animate:false,extraSpace:0});
this.textareaParentStyle.display="block"
};
HandsontableTextEditorClass.prototype.finishEditing=function(isCancelled,ctrlDown){if(this.isCellEdited){this.isCellEdited=false;
if(!isCancelled){var val=[[$.trim(this.TEXTAREA.value)]];
if(ctrlDown){var sel=this.instance.getSelected();
this.instance.populateFromArray({row:sel[0],col:sel[1]},val,{row:sel[2],col:sel[3]},"edit")
}else{this.instance.populateFromArray({row:this.row,col:this.col},val,null,"edit")
}}}this.unbindTemporaryEvents();
if(document.activeElement===this.TEXTAREA){this.instance.listen()
}this.textareaParentStyle.display="none"
};
Handsontable.TextEditor=function(instance,td,row,col,prop,value,cellProperties){if(!instance.textEditor){instance.textEditor=new HandsontableTextEditorClass(instance)
}instance.textEditor.bindTemporaryEvents(td,row,col,prop,value,cellProperties);
return function(isCancelled){instance.textEditor.finishEditing(isCancelled)
}
};
function HandsontableAutocompleteEditorClass(instance){this.isCellEdited=false;
this.instance=instance;
this.createElements();
this.bindEvents();
this.emptyStringLabel="\u00A0\u00A0\u00A0"
}Handsontable.helper.inherit(HandsontableAutocompleteEditorClass,HandsontableTextEditorClass);
HandsontableAutocompleteEditorClass.prototype.createElements=function(){HandsontableTextEditorClass.prototype.createElements.call(this);
this.$textarea.typeahead();
this.typeahead=this.$textarea.data("typeahead");
this.typeahead._render=this.typeahead.render;
this.typeahead.minLength=0;
this.typeahead.lookup=function(){var items;
this.query=this.$element.val();
items=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source;
return items?this.process(items):this
};
this.typeahead.matcher=function(){return true
};
var _process=this.typeahead.process;
var that=this;
this.typeahead.process=function(items){var cloned=false;
for(var i=0,ilen=items.length;
i<ilen;
i++){if(items[i]===""){if(!cloned){items=$.extend([],items);
cloned=true
}items[i]=that.emptyStringLabel
}}return _process.call(this,items)
}
};
HandsontableAutocompleteEditorClass.prototype.bindEvents=function(){var that=this;
this.$textarea.off("keydown").off("keyup").off("keypress");
this.$textareaParent.off(".acEditor").on("keydown.acEditor",function(event){switch(event.keyCode){case 38:that.typeahead.prev();
event.stopImmediatePropagation();
break;
case 40:that.typeahead.next();
event.stopImmediatePropagation();
break;
case 13:event.preventDefault();
break
}});
this.$textareaParent.on("keyup.acEditor",function(event){if(Handsontable.helper.isPrintableChar(event.keyCode)||event.keyCode===113||event.keyCode===13||event.keyCode===8||event.keyCode===46){that.typeahead.lookup()
}});
HandsontableTextEditorClass.prototype.bindEvents.call(this)
};
HandsontableAutocompleteEditorClass.prototype.bindTemporaryEvents=function(td,row,col,prop,value,cellProperties){var that=this,i,j;
this.typeahead.select=function(){var output=this.hide();
that.instance.destroyEditor(true);
var val=this.$menu.find(".active").attr("data-value");
if(val===that.emptyStringLabel){val=""
}if(typeof cellProperties.onSelect==="function"){cellProperties.onSelect(row,col,prop,val,this.$menu.find(".active").index())
}else{that.instance.setDataAtRowProp(row,prop,val)
}return output
};
this.typeahead.render=function(items){that.typeahead._render.call(this,items);
if(!cellProperties.strict){this.$menu.find("li:eq(0)").removeClass("active")
}return this
};
for(i in cellProperties){if(cellProperties.hasOwnProperty(i)){if(i==="options"){for(j in cellProperties.options){if(cellProperties.options.hasOwnProperty(j)){this.typeahead.options[j]=cellProperties.options[j]
}}}else{this.typeahead[i]=cellProperties[i]
}}}HandsontableTextEditorClass.prototype.bindTemporaryEvents.call(this,td,row,col,prop,value,cellProperties);
function onDblClick(){that.beginEditing(row,col,prop,true);
that.instance.registerTimeout("IE9_align_fix",function(){that.typeahead.lookup()
},1)
}this.instance.view.wt.update("onCellDblClick",onDblClick)
};
HandsontableAutocompleteEditorClass.prototype.finishEditing=function(isCancelled,ctrlDown){if(!isCancelled){if(this.isMenuExpanded()&&this.typeahead.$menu.find(".active").length){this.typeahead.select();
this.isCellEdited=false
}else{if(this.cellProperties.strict){this.isCellEdited=false
}}}HandsontableTextEditorClass.prototype.finishEditing.call(this,isCancelled,ctrlDown)
};
HandsontableAutocompleteEditorClass.prototype.isMenuExpanded=function(){if(this.typeahead.$menu.is(":visible")){return this.typeahead
}else{return false
}};
Handsontable.AutocompleteEditor=function(instance,td,row,col,prop,value,cellProperties){if(!instance.autocompleteEditor){instance.autocompleteEditor=new HandsontableAutocompleteEditorClass(instance)
}instance.autocompleteEditor.bindTemporaryEvents(td,row,col,prop,value,cellProperties);
return function(isCancelled){instance.autocompleteEditor.finishEditing(isCancelled)
}
};
function toggleCheckboxCell(instance,row,prop,cellProperties){if(Handsontable.helper.stringify(instance.getDataAtRowProp(row,prop))===Handsontable.helper.stringify(cellProperties.checkedTemplate)){instance.setDataAtRowProp(row,prop,cellProperties.uncheckedTemplate)
}else{instance.setDataAtRowProp(row,prop,cellProperties.checkedTemplate)
}}Handsontable.CheckboxEditor=function(instance,td,row,col,prop,value,cellProperties){if(typeof cellProperties==="undefined"){cellProperties={}
}if(typeof cellProperties.checkedTemplate==="undefined"){cellProperties.checkedTemplate=true
}if(typeof cellProperties.uncheckedTemplate==="undefined"){cellProperties.uncheckedTemplate=false
}instance.$table.on("keydown.editor",function(event){var ctrlDown=(event.ctrlKey||event.metaKey)&&!event.altKey;
if(!ctrlDown&&Handsontable.helper.isPrintableChar(event.keyCode)){toggleCheckboxCell(instance,row,prop,cellProperties);
event.stopImmediatePropagation();
event.preventDefault()
}});
instance.view.wt.update("onCellDblClick",function(){toggleCheckboxCell(instance,row,prop,cellProperties)
});
return function(){instance.$table.off(".editor");
instance.view.wt.update("onCellDblClick",null)
}
};
function HandsontableDateEditorClass(instance){if(!$.datepicker){throw new Error("jQuery UI Datepicker dependency not found. Did you forget to include jquery-ui.custom.js or its substitute?")
}this.isCellEdited=false;
this.instance=instance;
this.createElements();
this.bindEvents()
}Handsontable.helper.inherit(HandsontableDateEditorClass,HandsontableTextEditorClass);
HandsontableDateEditorClass.prototype.createElements=function(){HandsontableTextEditorClass.prototype.createElements.call(this);
this.datePicker=document.createElement("DIV");
this.datePickerStyle=this.datePicker.style;
this.datePickerStyle.position="absolute";
this.datePickerStyle.top=0;
this.datePickerStyle.left=0;
this.datePickerStyle.zIndex=99;
this.instance.rootElement[0].appendChild(this.datePicker);
this.$datePicker=$(this.datePicker);
var that=this;
var defaultOptions={dateFormat:"yy-mm-dd",showButtonPanel:true,changeMonth:true,changeYear:true,altField:this.$textarea,onSelect:function(){that.finishEditing(false)
}};
this.$datePicker.datepicker(defaultOptions);
this.hideDatepicker()
};
HandsontableDateEditorClass.prototype.beginEditing=function(row,col,prop,useOriginalValue,suffix){HandsontableTextEditorClass.prototype.beginEditing.call(this,row,col,prop,useOriginalValue,suffix);
this.showDatepicker()
};
HandsontableDateEditorClass.prototype.finishEditing=function(isCancelled,ctrlDown){this.hideDatepicker();
HandsontableTextEditorClass.prototype.finishEditing.call(this,isCancelled,ctrlDown)
};
HandsontableDateEditorClass.prototype.showDatepicker=function(){var $td=$(this.instance.dateEditor.TD);
var position=$td.position();
this.datePickerStyle.top=(position.top+$td.height())+"px";
this.datePickerStyle.left=position.left+"px";
var dateOptions={defaultDate:this.originalValue||void 0};
$.extend(dateOptions,this.cellProperties);
this.$datePicker.datepicker("option",dateOptions);
if(this.originalValue){this.$datePicker.datepicker("setDate",this.originalValue)
}this.datePickerStyle.display="block"
};
HandsontableDateEditorClass.prototype.hideDatepicker=function(){this.datePickerStyle.display="none"
};
Handsontable.DateEditor=function(instance,td,row,col,prop,value,cellProperties){if(!instance.dateEditor){instance.dateEditor=new HandsontableDateEditorClass(instance)
}instance.dateEditor.bindTemporaryEvents(td,row,col,prop,value,cellProperties);
return function(isCancelled){instance.dateEditor.finishEditing(isCancelled)
}
};
function HandsontableHandsontableEditorClass(instance){this.isCellEdited=false;
this.instance=instance;
this.createElements();
this.bindEvents()
}Handsontable.helper.inherit(HandsontableHandsontableEditorClass,HandsontableTextEditorClass);
HandsontableHandsontableEditorClass.prototype.createElements=function(){HandsontableTextEditorClass.prototype.createElements.call(this);
var DIV=document.createElement("DIV");
DIV.className="handsontableEditor";
this.TEXTAREA_PARENT.appendChild(DIV);
this.$htContainer=$(DIV)
};
HandsontableHandsontableEditorClass.prototype.bindTemporaryEvents=function(td,row,col,prop,value,cellProperties){var parent=this;
var options={colHeaders:true,cells:function(){return{readOnly:true}
},fillHandle:false,width:2000,afterOnCellMouseDown:function(){var sel=this.getSelected();
parent.TEXTAREA.value=this.getDataAtCell(sel[0],sel[1]);
parent.instance.destroyEditor()
},beforeOnKeyDown:function(event){switch(event.keyCode){case 27:parent.instance.destroyEditor(true);
break;
case 13:var sel=this.getSelected();
parent.TEXTAREA.value=this.getDataAtCell(sel[0],sel[1]);
parent.instance.destroyEditor();
break
}}};
if(cellProperties.handsontable){options=$.extend(options,cellProperties.handsontable)
}this.$htContainer.handsontable(options);
HandsontableTextEditorClass.prototype.bindTemporaryEvents.call(this,td,row,col,prop,value,cellProperties)
};
HandsontableHandsontableEditorClass.prototype.beginEditing=function(row,col,prop,useOriginalValue,suffix){var onBeginEditing=this.instance.getSettings().onBeginEditing;
if(onBeginEditing&&onBeginEditing()===false){return
}HandsontableTextEditorClass.prototype.beginEditing.call(this,row,col,prop,useOriginalValue,suffix);
this.$htContainer.handsontable("render");
this.$htContainer.handsontable("selectCell",0,0)
};
HandsontableHandsontableEditorClass.prototype.finishEditing=function(isCancelled,ctrlDown){if(Handsontable.helper.isDescendant(this.instance.rootElement[0],document.activeElement)){var that=this;
setTimeout(function(){that.instance.listen()
},0);
that.instance.listen()
}this.$htContainer.handsontable("destroy");
HandsontableTextEditorClass.prototype.finishEditing.call(this,isCancelled,ctrlDown)
};
HandsontableHandsontableEditorClass.prototype.isMenuExpanded=function(){if(this.typeahead.$menu.is(":visible")){return this.typeahead
}else{return false
}};
Handsontable.HandsontableEditor=function(instance,td,row,col,prop,value,cellProperties){if(!instance.handsontableEditor){instance.handsontableEditor=new HandsontableHandsontableEditorClass(instance)
}instance.handsontableEditor.bindTemporaryEvents(td,row,col,prop,value,cellProperties);
instance.registerEditor=instance.handsontableEditor;
return function(isCancelled){instance.handsontableEditor.finishEditing(isCancelled)
}
};
Handsontable.AutocompleteCell={renderer:Handsontable.AutocompleteRenderer,editor:Handsontable.AutocompleteEditor};
Handsontable.CheckboxCell={renderer:Handsontable.CheckboxRenderer,editor:Handsontable.CheckboxEditor};
Handsontable.TextCell={renderer:Handsontable.TextRenderer,editor:Handsontable.TextEditor};
Handsontable.NumericCell={renderer:Handsontable.NumericRenderer,editor:Handsontable.TextEditor,dataType:"number"};
Handsontable.DateCell={renderer:Handsontable.AutocompleteRenderer,editor:Handsontable.DateEditor};
Handsontable.HandsontableCell={renderer:Handsontable.AutocompleteRenderer,editor:Handsontable.HandsontableEditor};
Handsontable.cellTypes={autocomplete:Handsontable.AutocompleteCell,checkbox:Handsontable.CheckboxCell,text:Handsontable.TextCell,numeric:Handsontable.NumericCell,date:Handsontable.DateCell,handsontable:Handsontable.HandsontableCell};
Handsontable.PluginHooks={hooks:{beforeInit:[],afterInit:[],afterLoadData:[],beforeRender:[],afterRender:[],beforeGet:[],beforeSet:[],beforeGetCellMeta:[],afterGetCellMeta:[],afterGetColHeader:[],afterGetColWidth:[],walkontableConfig:[],afterDestroy:[]},push:function(key,fn){this.hooks[key].push(fn)
},unshift:function(key,fn){this.hooks[key].unshift(fn)
},run:function(instance,key,p1,p2,p3,p4,p5){for(var i=0,ilen=this.hooks[key].length;
i<ilen;
i++){this.hooks[key][i].call(instance,p1,p2,p3,p4,p5)
}}};
Handsontable.PluginModifiers={modifiers:{col:[]},push:function(key,fn){this.modifiers[key].push(fn)
},unshift:function(key,fn){this.modifiers[key].unshift(fn)
},run:function(instance,key,p1,p2,p3,p4,p5){for(var i=0,ilen=this.modifiers[key].length;
i<ilen;
i++){p1=this.modifiers[key][i].call(instance,p1,p2,p3,p4,p5)
}return p1
}};
function HandsontableAutoColumnSize(){var that=this,instance,sampleCount=5;
this.beforeInit=function(){this.autoColumnWidths=[];
this.autoColumnSizeTmp={thead:null,theadTh:null,theadStyle:null,tbody:null,tbodyTd:null,noRenderer:null,noRendererTd:null,renderer:null,rendererTd:null,container:null,containerStyle:null,$container:null,$noRenderer:null,$renderer:null}
};
this.determineColumnWidth=function(col){var tmp=instance.autoColumnSizeTmp,d;
if(!tmp.container){d=document;
tmp.thead=d.createElement("table");
tmp.thead.appendChild(d.createElement("thead")).appendChild(d.createElement("tr")).appendChild(d.createElement("th"));
tmp.theadTh=tmp.thead.getElementsByTagName("th")[0];
tmp.thead.className="htTable";
tmp.theadStyle=tmp.thead.style;
tmp.theadStyle.tableLayout="auto";
tmp.theadStyle.width="auto";
tmp.tbody=tmp.thead.cloneNode(false);
tmp.tbody.appendChild(d.createElement("tbody")).appendChild(d.createElement("tr")).appendChild(d.createElement("td"));
tmp.tbodyTd=tmp.tbody.getElementsByTagName("td")[0];
tmp.noRenderer=tmp.tbody.cloneNode(true);
tmp.noRendererTd=tmp.noRenderer.getElementsByTagName("td")[0];
tmp.renderer=tmp.tbody.cloneNode(true);
tmp.rendererTd=tmp.renderer.getElementsByTagName("td")[0];
tmp.container=d.createElement("div");
tmp.container.className=instance.rootElement[0].className+" hidden";
tmp.containerStyle=tmp.container.style;
tmp.container.appendChild(tmp.thead);
tmp.container.appendChild(tmp.tbody);
tmp.container.appendChild(tmp.noRenderer);
tmp.container.appendChild(tmp.renderer);
tmp.$container=$(tmp.container);
tmp.$noRenderer=$(tmp.noRenderer);
tmp.$renderer=$(tmp.renderer);
instance.rootElement[0].parentNode.appendChild(tmp.container)
}tmp.container.className=instance.rootElement[0].className+" hidden";
var rows=instance.countRows();
var samples={};
var maxLen=0;
for(var r=0;
r<rows;
r++){var value=Handsontable.helper.stringify(instance.getDataAtCell(r,col));
var len=value.length;
if(len>maxLen){maxLen=len
}if(!samples[len]){samples[len]={needed:sampleCount,strings:[]}
}if(samples[len].needed){samples[len].strings.push(value);
samples[len].needed--
}}var settings=instance.getSettings();
if(settings.colHeaders){instance.view.appendColHeader(col,tmp.theadTh)
}var txt="";
for(var i in samples){if(samples.hasOwnProperty(i)){for(var j=0,jlen=samples[i].strings.length;
j<jlen;
j++){txt+=samples[i].strings[j]+"<br>"
}}}tmp.tbodyTd.innerHTML=txt;
instance.view.wt.wtDom.empty(tmp.rendererTd);
instance.view.wt.wtDom.empty(tmp.noRendererTd);
tmp.containerStyle.display="block";
var width=tmp.$container.outerWidth();
var cellProperties=instance.getCellMeta(0,col);
if(cellProperties.renderer){var str=9999999999;
tmp.noRendererTd.appendChild(document.createTextNode(str));
cellProperties.renderer(instance,tmp.rendererTd,0,col,instance.colToProp(col),str,cellProperties);
width+=tmp.$renderer.width()-tmp.$noRenderer.width()
}tmp.containerStyle.display="none";
return width
};
this.determineColumnsWidth=function(){instance=this;
var settings=this.getSettings();
if(settings.autoColumnSize||!settings.colWidths){var cols=this.countCols();
for(var c=0;
c<cols;
c++){this.autoColumnWidths[c]=that.determineColumnWidth(c)
}}};
this.getColWidth=function(col,response){if(this.autoColumnWidths[col]&&this.autoColumnWidths[col]>response.width){response.width=this.autoColumnWidths[col]
}}
}var htAutoColumnSize=new HandsontableAutoColumnSize();
Handsontable.PluginHooks.push("beforeInit",htAutoColumnSize.beforeInit);
Handsontable.PluginHooks.push("beforeRender",htAutoColumnSize.determineColumnsWidth);
Handsontable.PluginHooks.push("afterGetColWidth",htAutoColumnSize.getColWidth);
function HandsontableColumnSorting(){var plugin=this;
var sortingEnabled;
this.afterInit=function(){var instance=this;
if(this.getSettings().columnSorting){this.sortIndex=[];
this.rootElement.on("click.handsontable",".columnSorting",function(e){var $target=$(e.target);
if($target.is(".columnSorting")){var col=$target.closest("th").index();
if(instance.getSettings().rowHeaders){col--
}if(instance.sortColumn===col){instance.sortOrder=!instance.sortOrder
}else{instance.sortColumn=col;
instance.sortOrder=true
}plugin.sort.call(instance);
instance.render()
}})
}};
this.sort=function(){sortingEnabled=false;
var instance=this;
this.sortIndex.length=0;
for(var i=0,ilen=this.countRows();
i<ilen;
i++){this.sortIndex.push([i,instance.getDataAtCell(i,this.sortColumn)])
}this.sortIndex.sort(function(a,b){if(a[1]===b[1]){return 0
}if(a[1]===null){return 1
}if(b[1]===null){return -1
}if(a[1]<b[1]){return instance.sortOrder?-1:1
}if(a[1]>b[1]){return instance.sortOrder?1:-1
}return 0
});
sortingEnabled=true
};
this.translateRow=function(getVars){if(sortingEnabled&&this.sortIndex&&this.sortIndex.length){getVars.row=this.sortIndex[getVars.row][0]
}};
this.getColHeader=function(col,TH){if(this.getSettings().columnSorting){$(TH).find("span.colHeader")[0].className+=" columnSorting"
}}
}var htSortColumn=new HandsontableColumnSorting();
Handsontable.PluginHooks.push("afterInit",htSortColumn.afterInit);
Handsontable.PluginHooks.push("beforeGet",htSortColumn.translateRow);
Handsontable.PluginHooks.push("beforeSet",htSortColumn.translateRow);
Handsontable.PluginHooks.push("afterGetColHeader",htSortColumn.getColHeader);
function createContextMenu(){var instance=this,selectorId=instance.rootElement[0].id,allItems={row_above:{name:"Insert row above",disabled:isDisabled},row_below:{name:"Insert row below",disabled:isDisabled},hsep1:"---------",col_left:{name:"Insert column on the left",disabled:isDisabled},col_right:{name:"Insert column on the right",disabled:isDisabled},hsep2:"---------",remove_row:{name:"Remove row",disabled:isDisabled},remove_col:{name:"Remove column",disabled:isDisabled},hsep3:"---------",undo:{name:"Undo",disabled:function(){return !instance.isUndoAvailable()
}},redo:{name:"Redo",disabled:function(){return !instance.isRedoAvailable()
}}},defaultOptions={selector:"#"+selectorId+" table, #"+selectorId+" div",trigger:"right",callback:onContextClick},options={},i,ilen,settings=instance.getSettings();
function onContextClick(key){var corners=instance.getSelected();
if(!corners){return
}switch(key){case"row_above":instance.alter("insert_row",corners[0]);
break;
case"row_below":instance.alter("insert_row",corners[2]+1);
break;
case"col_left":instance.alter("insert_col",corners[1]);
break;
case"col_right":instance.alter("insert_col",corners[3]+1);
break;
case"remove_row":instance.alter(key,corners[0],(corners[2]-corners[0])+1);
break;
case"remove_col":instance.alter(key,corners[1],(corners[3]-corners[1])+1);
break;
case"undo":instance.undo();
break;
case"redo":instance.redo();
break
}}function isDisabled(key){if(instance.countRows()>=instance.getSettings().maxRows&&(key==="row_above"||key==="row_below")){return true
}else{if(instance.countCols()>=instance.getSettings().maxCols&&(key==="col_left"||key==="col_right")){return true
}else{return false
}}}if(!settings.contextMenu){return
}else{if(settings.contextMenu===true){options.items=allItems
}else{if(Object.prototype.toString.apply(settings.contextMenu)==="[object Array]"){options.items={};
for(i=0,ilen=settings.contextMenu.length;
i<ilen;
i++){var key=settings.contextMenu[i];
if(typeof allItems[key]==="undefined"){throw new Error('Context menu key "'+key+'" is not recognised')
}options.items[key]=allItems[key]
}}else{if(Object.prototype.toString.apply(settings.contextMenu)==="[object Object]"){options=settings.contextMenu;
if(options.items){for(i in options.items){if(options.items.hasOwnProperty(i)&&allItems[i]){if(typeof options.items[i]==="string"){options.items[i]=allItems[i]
}else{options.items[i]=$.extend(true,allItems[i],options.items[i])
}}}}else{options.items=allItems
}if(options.callback){var handsontableCallback=defaultOptions.callback;
var customCallback=options.callback;
options.callback=function(key,options){handsontableCallback(key,options);
customCallback(key,options)
}
}}}}}if(!selectorId){throw new Error("Handsontable container must have an id")
}$.contextMenu($.extend(true,defaultOptions,options))
}function destroyContextMenu(){var id=this.rootElement[0].id;
$.contextMenu("destroy","#"+id+" table, #"+id+" div")
}Handsontable.PluginHooks.push("afterInit",createContextMenu);
Handsontable.PluginHooks.push("afterDestroy",destroyContextMenu);
Handsontable.PluginHooks.push("beforeGetCellMeta",function(row,col,cellProperties){var settings=this.getSettings(),data=this.getData(),i,ilen,a;
if(settings.autoComplete){for(i=0,ilen=settings.autoComplete.length;
i<ilen;
i++){if(settings.autoComplete[i].match(row,col,data)){if(typeof cellProperties.type==="undefined"){cellProperties.type=Handsontable.AutocompleteCell
}else{if(typeof cellProperties.type.renderer==="undefined"){cellProperties.type.renderer=Handsontable.AutocompleteCell.renderer
}if(typeof cellProperties.type.editor==="undefined"){cellProperties.type.editor=Handsontable.AutocompleteCell.editor
}}for(a in settings.autoComplete[i]){if(settings.autoComplete[i].hasOwnProperty(a)&&a!=="match"&&typeof cellProperties[i]==="undefined"){if(a==="source"){cellProperties[a]=settings.autoComplete[i][a](row,col)
}else{cellProperties[a]=settings.autoComplete[i][a]
}}}break
}}}});
function HandsontableManualColumnMove(){var instance,pressed,startCol,endCol,startX,startOffset;
var ghost=document.createElement("DIV"),ghostStyle=ghost.style;
ghost.className="ghost";
ghostStyle.position="absolute";
ghostStyle.top="25px";
ghostStyle.left=0;
ghostStyle.width="10px";
ghostStyle.height="10px";
ghostStyle.backgroundColor="#CCC";
ghostStyle.opacity=0.7;
$(document).mousemove(function(e){if(pressed){ghostStyle.left=startOffset+e.pageX-startX+6+"px";
if(ghostStyle.display==="none"){ghostStyle.display="block"
}}});
$(document).mouseup(function(){if(pressed){if(startCol<endCol){endCol--
}if(instance.getSettings().rowHeaders){startCol--;
endCol--
}instance.manualColumnPositions.splice(endCol,0,instance.manualColumnPositions.splice(startCol,1)[0]);
$(".manualColumnMover.active").removeClass("active");
pressed=false;
instance.forceFullRender=true;
instance.view.render();
ghostStyle.display="none"
}});
this.beforeInit=function(){this.manualColumnPositions=[]
};
this.afterInit=function(){if(this.getSettings().manualColumnMove){var that=this;
this.rootElement.on("mousedown.handsontable",".manualColumnMover",function(e){instance=that;
var $resizer=$(e.target);
var th=$resizer.closest("th");
startCol=th.index();
pressed=true;
startX=e.pageX;
var $table=that.rootElement.find(".htCore");
$table.parent()[0].appendChild(ghost);
ghostStyle.width=$resizer.parent().width()+"px";
ghostStyle.height=$table.height()+"px";
startOffset=parseInt(th.offset().left-$table.offset().left,10);
ghostStyle.left=startOffset+6+"px"
});
this.rootElement.on("mouseenter.handsontable","td, th",function(){if(pressed){$(".manualColumnMover.active").removeClass("active");
var $ths=that.rootElement.find("thead th");
endCol=$(this).index();
var $hover=$ths.eq(endCol).find(".manualColumnMover").addClass("active");
$ths.not($hover).removeClass("active")
}})
}};
this.modifyCol=function(col){if(this.getSettings().manualColumnMove){if(typeof this.manualColumnPositions[col]==="undefined"){this.manualColumnPositions[col]=col
}return this.manualColumnPositions[col]
}return col
};
this.getColHeader=function(col,TH){if(this.getSettings().manualColumnMove){var DIV=document.createElement("DIV");
DIV.className="manualColumnMover";
TH.firstChild.appendChild(DIV)
}}
}var htManualColumnMove=new HandsontableManualColumnMove();
Handsontable.PluginHooks.push("beforeInit",htManualColumnMove.beforeInit);
Handsontable.PluginHooks.push("afterInit",htManualColumnMove.afterInit);
Handsontable.PluginHooks.push("afterGetColHeader",htManualColumnMove.getColHeader);
Handsontable.PluginModifiers.push("col",htManualColumnMove.modifyCol);
function HandsontableManualColumnResize(){var pressed,currentCol,currentWidth,instance,start,startX,startWidth,startOffset,resizer=document.createElement("DIV"),line=document.createElement("DIV"),lineStyle=line.style;
resizer.className="manualColumnResizer";
line.className="manualColumnResizerLine";
lineStyle.position="absolute";
lineStyle.top=0;
lineStyle.left=0;
lineStyle.width=0;
lineStyle.borderRight="1px dashed #777";
line.appendChild(resizer);
$(document).mousemove(function(e){if(pressed){currentWidth=startWidth+(e.pageX-startX);
setManualSize(currentCol,currentWidth);
lineStyle.left=startOffset+currentWidth-1+"px";
if(lineStyle.display==="none"){lineStyle.display="block"
}}});
$(document).mouseup(function(){if(pressed){$(".manualColumnResizer.active").removeClass("active");
pressed=false;
instance.forceFullRender=true;
instance.view.render();
lineStyle.display="none"
}});
$(document).dblclick(function(e){if($(e.target).is(".manualColumnResizer")){setManualSize(currentCol,htAutoColumnSize.determineColumnWidth.call(instance,currentCol))
}});
this.beforeInit=function(){this.manualColumnWidths=[]
};
this.afterInit=function(){if(this.getSettings().manualColumnResize){var that=this;
this.rootElement.on("mousedown.handsontable",".manualColumnResizer",function(e){var _resizer=e.target,$table=that.rootElement.find(".htCore"),$grandpa=$(_resizer.parentNode.parentNode);
instance=that;
currentCol=_resizer.getAttribute("rel");
start=$(that.rootElement[0].getElementsByTagName("col")[$grandpa.index()]);
pressed=true;
startX=e.pageX;
startWidth=start.width();
currentWidth=startWidth;
_resizer.className+=" active";
lineStyle.height=$table.height()+"px";
$table.parent()[0].appendChild(line);
startOffset=parseInt($grandpa.offset().left-$table.offset().left,10);
lineStyle.left=startOffset+currentWidth-1+"px"
})
}};
var setManualSize=function(col,width){width=Math.max(width,20);
width=Math.min(width,500);
instance.manualColumnWidths[col]=width
};
this.getColHeader=function(col,TH){if(this.getSettings().manualColumnResize){var DIV=document.createElement("DIV");
DIV.className="manualColumnResizer";
DIV.setAttribute("rel",col);
TH.firstChild.appendChild(DIV)
}};
this.getColWidth=function(col,response){if(this.getSettings().manualColumnResize&&this.manualColumnWidths[col]){response.width=this.manualColumnWidths[col]
}}
}var htManualColumnResize=new HandsontableManualColumnResize();
Handsontable.PluginHooks.push("beforeInit",htManualColumnResize.beforeInit);
Handsontable.PluginHooks.push("afterInit",htManualColumnResize.afterInit);
Handsontable.PluginHooks.push("afterGetColHeader",htManualColumnResize.getColHeader);
Handsontable.PluginHooks.push("afterGetColWidth",htManualColumnResize.getColWidth);
(function($){autoResize.defaults={onResize:function(){},animate:{duration:200,complete:function(){}},extraSpace:50,minHeight:"original",maxHeight:500,minWidth:"original",maxWidth:500};
autoResize.cloneCSSProperties=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","padding"];
autoResize.cloneCSSValues={position:"absolute",top:-9999,left:-9999,opacity:0,overflow:"hidden",border:"1px solid black",padding:"0.49em"};
autoResize.resizableFilterSelector="textarea,input:not(input[type]),input[type=text],input[type=password]";
autoResize.AutoResizer=AutoResizer;
$.fn.autoResize=autoResize;
function autoResize(config){this.filter(autoResize.resizableFilterSelector).each(function(){new AutoResizer($(this),config)
});
return this
}function AutoResizer(el,config){if(this.clones){return
}this.config=$.extend({},autoResize.defaults,config);
this.el=el;
this.nodeName=el[0].nodeName.toLowerCase();
this.previousScrollTop=null;
if(config.maxWidth==="original"){config.maxWidth=el.width()
}if(config.minWidth==="original"){config.minWidth=el.width()
}if(config.maxHeight==="original"){config.maxHeight=el.height()
}if(config.minHeight==="original"){config.minHeight=el.height()
}if(this.nodeName==="textarea"){el.css({resize:"none",overflowY:"hidden"})
}el.data("AutoResizer",this);
this.createClone();
this.injectClone();
this.bind()
}AutoResizer.prototype={bind:function(){var check=$.proxy(function(){this.check();
return true
},this);
this.unbind();
this.el.bind("keyup.autoResize",check).bind("change.autoResize",check);
this.check(null,true)
},unbind:function(){this.el.unbind(".autoResize")
},createClone:function(){var el=this.el,self=this,config=this.config;
this.clones=$();
if(config.minHeight!=="original"||config.maxHeight!=="original"){this.hClone=el.clone().height("auto");
this.clones=this.clones.add(this.hClone)
}if(config.minWidth!=="original"||config.maxWidth!=="original"){this.wClone=$("<div/>").width("auto").css({whiteSpace:"nowrap","float":"left"});
this.clones=this.clones.add(this.wClone)
}$.each(autoResize.cloneCSSProperties,function(i,p){self.clones.css(p,el.css(p))
});
this.clones.removeAttr("name").removeAttr("id").attr("tabIndex",-1).css(autoResize.cloneCSSValues)
},check:function(e,immediate){var config=this.config,wClone=this.wClone,hClone=this.hClone,el=this.el,value=el.val();
if(wClone){wClone.text(value);
var cloneWidth=wClone.outerWidth(),newWidth=(cloneWidth+config.extraSpace)>=config.minWidth?cloneWidth+config.extraSpace:config.minWidth,currentWidth=el.width();
newWidth=Math.min(newWidth,config.maxWidth);
if((newWidth<currentWidth&&newWidth>=config.minWidth)||(newWidth>=config.minWidth&&newWidth<=config.maxWidth)){config.onResize.call(el);
el.scrollLeft(0);
config.animate&&!immediate?el.stop(1,1).animate({width:newWidth},config.animate):el.width(newWidth)
}}if(hClone){if(newWidth){hClone.width(newWidth)
}hClone.height(0).val(value).scrollTop(10000);
var scrollTop=hClone[0].scrollTop+config.extraSpace;
if(this.previousScrollTop===scrollTop){return
}this.previousScrollTop=scrollTop;
if(scrollTop>=config.maxHeight){el.css("overflowY","");
return
}el.css("overflowY","hidden");
if(scrollTop<config.minHeight){scrollTop=config.minHeight
}config.onResize.call(el);
config.animate&&!immediate?el.stop(1,1).animate({height:scrollTop},config.animate):el.height(scrollTop)
}},destroy:function(){this.unbind();
this.el.removeData("AutoResizer");
this.clones.remove();
delete this.el;
delete this.hClone;
delete this.wClone;
delete this.clones
},injectClone:function(){(autoResize.cloneContainer||(autoResize.cloneContainer=$("<arclones/>").appendTo("body"))).empty().append(this.clones)
}}
})(jQuery);
(function(global){function countQuotes(str){return str.split('"').length-1
}global.SheetClip={parse:function(str){var r,rlen,rows,arr=[],a=0,c,clen,multiline,last;
rows=str.split("\n");
if(rows.length>1&&rows[rows.length-1]===""){rows.pop()
}for(r=0,rlen=rows.length;
r<rlen;
r+=1){rows[r]=rows[r].split("\t");
for(c=0,clen=rows[r].length;
c<clen;
c+=1){if(!arr[a]){arr[a]=[]
}if(multiline&&c===0){last=arr[a].length-1;
arr[a][last]=arr[a][last]+"\n"+rows[r][0];
if(multiline&&(countQuotes(rows[r][0])&1)){multiline=false;
arr[a][last]=arr[a][last].substring(0,arr[a][last].length-1).replace(/""/g,'"')
}}else{if(c===clen-1&&rows[r][c].indexOf('"')===0){arr[a].push(rows[r][c].substring(1).replace(/""/g,'"'));
multiline=true
}else{arr[a].push(rows[r][c].replace(/""/g,'"'));
multiline=false
}}}if(!multiline){a+=1
}}return arr
},stringify:function(arr){var r,rlen,c,clen,str="",val;
for(r=0,rlen=arr.length;
r<rlen;
r+=1){for(c=0,clen=arr[r].length;
c<clen;
c+=1){if(c>0){str+="\t"
}val=arr[r][c];
if(typeof val==="string"){if(val.indexOf("\n")>-1){str+='"'+val.replace(/"/g,'""')+'"'
}else{str+=val
}}else{if(val===null||val===void 0){str+=""
}else{str+=val
}}}str+="\n"
}return str
}}
}(window));
function CopyPaste(listenerElement){var that=this,style;
listenerElement=listenerElement||document.body;
this.elDiv=document.createElement("DIV");
style=this.elDiv.style;
style.position="fixed";
style.top=0;
style.left=0;
listenerElement.appendChild(this.elDiv);
this.elTextarea=document.createElement("TEXTAREA");
this.elTextarea.className="copyPaste";
style=this.elTextarea.style;
style.width="1px";
style.height="1px";
this.elDiv.appendChild(this.elTextarea);
if(typeof style.opacity!=="undefined"){style.opacity=0
}else{
/*@cc_on @if (@_jscript)
     if(typeof style.filter === 'string') {
     style.filter = 'alpha(opacity=0)';
     }
     @end @*/
}this._bindEvent(listenerElement,"keydown",function(event){var isCtrlDown=false;
if(event.metaKey){isCtrlDown=true
}else{if(event.ctrlKey&&navigator.userAgent.indexOf("Mac")===-1){isCtrlDown=true
}}if(isCtrlDown){that.selectNodeText(that.elTextarea);
setTimeout(function(){that.selectNodeText(that.elTextarea)
},0)
}if(isCtrlDown&&(event.keyCode===67||event.keyCode===86||event.keyCode===88)){if(event.keyCode===88){setTimeout(function(){that.triggerCut(event)
},0)
}else{if(event.keyCode===86){setTimeout(function(){that.triggerPaste(event)
},0)
}}}})
}CopyPaste.prototype.selectNodeText=function(el){el.select()
};
CopyPaste.prototype.copyable=function(str){if(typeof str!=="string"&&str.toString===void 0){throw new Error("copyable requires string parameter")
}this.elTextarea.value=str
};
CopyPaste.prototype.onCopy=function(fn){this.copyCallback=fn
};
CopyPaste.prototype.onCut=function(fn){this.cutCallback=fn
};
CopyPaste.prototype.onPaste=function(fn){this.pasteCallback=fn
};
CopyPaste.prototype.triggerCut=function(event){var that=this;
if(that.cutCallback){setTimeout(function(){that.cutCallback(event)
},0)
}};
CopyPaste.prototype.triggerPaste=function(event,str){var that=this;
if(that.pasteCallback){setTimeout(function(){that.pasteCallback((str||that.elTextarea.value).replace(/\n$/,""),event)
},0)
}};
CopyPaste.prototype._bindEvent=(function(){if(document.addEventListener){return function(elem,type,cb){elem.addEventListener(type,cb,false)
}
}else{return function(elem,type,cb){elem.attachEvent("on"+type,function(){var e=window.event;
e.target=e.srcElement;
e.relatedTarget=e.relatedTarget||e.type=="mouseover"?e.fromElement:e.toElement;
if(e.target.nodeType===3){e.target=e.target.parentNode
}return cb.call(elem,e)
})
}
}})();
function WalkontableBorder(instance,settings){var style;
this.instance=instance;
this.settings=settings;
this.wtDom=this.instance.wtDom;
this.main=document.createElement("div");
style=this.main.style;
style.position="absolute";
style.top=0;
style.left=0;
for(var i=0;
i<5;
i++){var DIV=document.createElement("DIV");
DIV.className="wtBorder "+(settings.className||"");
style=DIV.style;
style.backgroundColor=settings.border.color;
style.height=settings.border.width+"px";
style.width=settings.border.width+"px";
this.main.appendChild(DIV)
}this.top=this.main.childNodes[0];
this.left=this.main.childNodes[1];
this.bottom=this.main.childNodes[2];
this.right=this.main.childNodes[3];
this.topStyle=this.top.style;
this.leftStyle=this.left.style;
this.bottomStyle=this.bottom.style;
this.rightStyle=this.right.style;
this.corner=this.main.childNodes[4];
this.corner.className+=" corner";
this.cornerStyle=this.corner.style;
this.cornerStyle.width="5px";
this.cornerStyle.height="5px";
this.cornerStyle.border="2px solid #FFF";
this.disappear();
instance.wtTable.hider.appendChild(this.main)
}WalkontableBorder.prototype.appear=function(corners){var isMultiple,$from,$to,fromOffset,toOffset,containerOffset,top,minTop,left,minLeft,height,width;
if(this.disabled){return
}var instance=this.instance,fromRow,fromColumn,toRow,toColumn,hideTop=false,hideLeft=false,hideBottom=false,hideRight=false,i,ilen,s;
if(!instance.wtTable.isRowInViewport(corners[0])){hideTop=true
}if(!instance.wtTable.isRowInViewport(corners[2])){hideBottom=true
}ilen=instance.wtTable.countVisibleRows();
for(i=0;
i<ilen;
i++){s=instance.wtTable.rowFilter.visibleToSource(i);
if(s>=corners[0]&&s<=corners[2]){fromRow=s;
break
}}for(i=ilen-1;
i>=0;
i--){s=instance.wtTable.rowFilter.visibleToSource(i);
if(s>=corners[0]&&s<=corners[2]){toRow=s;
break
}}if(hideTop&&hideBottom){hideLeft=true;
hideRight=true
}else{if(!instance.wtTable.isColumnInViewport(corners[1])){hideLeft=true
}if(!instance.wtTable.isColumnInViewport(corners[3])){hideRight=true
}ilen=instance.wtTable.countVisibleColumns();
for(i=0;
i<ilen;
i++){s=instance.wtTable.columnFilter.visibleToSource(i);
if(s>=corners[1]&&s<=corners[3]){fromColumn=s;
break
}}for(i=ilen-1;
i>=0;
i--){s=instance.wtTable.columnFilter.visibleToSource(i);
if(s>=corners[1]&&s<=corners[3]){toColumn=s;
break
}}}if(fromRow!==void 0&&fromColumn!==void 0){isMultiple=(fromRow!==toRow||fromColumn!==toColumn);
$from=$(instance.wtTable.getCell([fromRow,fromColumn]));
$to=isMultiple?$(instance.wtTable.getCell([toRow,toColumn])):$from;
fromOffset=this.wtDom.offset($from[0]);
toOffset=isMultiple?this.wtDom.offset($to[0]):fromOffset;
containerOffset=this.wtDom.offset(instance.wtTable.TABLE);
minTop=fromOffset.top;
height=toOffset.top+$to.outerHeight()-minTop;
minLeft=fromOffset.left;
width=toOffset.left+$to.outerWidth()-minLeft;
top=minTop-containerOffset.top-1;
left=minLeft-containerOffset.left-1;
if(parseInt($from.css("border-top-width"),10)>0){top+=1;
height-=1
}if(parseInt($from.css("border-left-width"),10)>0){left+=1;
width-=1
}}else{this.disappear();
return
}if(hideTop){this.topStyle.display="none"
}else{this.topStyle.top=top+"px";
this.topStyle.left=left+"px";
this.topStyle.width=width+"px";
this.topStyle.display="block"
}if(hideLeft){this.leftStyle.display="none"
}else{this.leftStyle.top=top+"px";
this.leftStyle.left=left+"px";
this.leftStyle.height=height+"px";
this.leftStyle.display="block"
}var delta=Math.floor(this.settings.border.width/2);
if(hideBottom){this.bottomStyle.display="none"
}else{this.bottomStyle.top=top+height-delta+"px";
this.bottomStyle.left=left+"px";
this.bottomStyle.width=width+"px";
this.bottomStyle.display="block"
}if(hideRight){this.rightStyle.display="none"
}else{this.rightStyle.top=top+"px";
this.rightStyle.left=left+width-delta+"px";
this.rightStyle.height=height+1+"px";
this.rightStyle.display="block"
}if(hideBottom||hideRight||!this.hasSetting(this.settings.border.cornerVisible)){this.cornerStyle.display="none"
}else{this.cornerStyle.top=top+height-4+"px";
this.cornerStyle.left=left+width-4+"px";
this.cornerStyle.display="block"
}};
WalkontableBorder.prototype.disappear=function(){this.topStyle.display="none";
this.leftStyle.display="none";
this.bottomStyle.display="none";
this.rightStyle.display="none";
this.cornerStyle.display="none"
};
WalkontableBorder.prototype.hasSetting=function(setting){if(typeof setting==="function"){return setting()
}return !!setting
};
function WalkontableCellFilter(){this.offset=0;
this.total=0;
this.fixedCount=0
}WalkontableCellFilter.prototype.source=function(n){return n
};
WalkontableCellFilter.prototype.offsetted=function(n){return n+this.offset
};
WalkontableCellFilter.prototype.unOffsetted=function(n){return n-this.offset
};
WalkontableCellFilter.prototype.fixed=function(n){if(n<this.fixedCount){return n-this.offset
}else{return n
}};
WalkontableCellFilter.prototype.unFixed=function(n){if(n<this.fixedCount){return n+this.offset
}else{return n
}};
WalkontableCellFilter.prototype.visibleToSource=function(n){return this.source(this.offsetted(this.fixed(n)))
};
WalkontableCellFilter.prototype.sourceToVisible=function(n){return this.source(this.unOffsetted(this.unFixed(n)))
};
function WalkontableClassNameCache(){this.cache=[]
}WalkontableClassNameCache.prototype.add=function(r,c,cls){if(!this.cache[r]){this.cache[r]=[]
}if(!this.cache[r][c]){this.cache[r][c]=[]
}this.cache[r][c][cls]=true
};
WalkontableClassNameCache.prototype.test=function(r,c,cls){return(this.cache[r]&&this.cache[r][c]&&this.cache[r][c][cls])
};
function WalkontableColumnFilter(){this.countTH=0
}WalkontableColumnFilter.prototype=new WalkontableCellFilter();
WalkontableColumnFilter.prototype.readSettings=function(instance){this.offset=instance.wtSettings.settings.offsetColumn;
this.total=instance.getSetting("totalColumns");
this.fixedCount=instance.getSetting("fixedColumnsLeft");
this.countTH=instance.hasSetting("rowHeaders")?1:0
};
WalkontableColumnFilter.prototype.offsettedTH=function(n){return n-this.countTH
};
WalkontableColumnFilter.prototype.unOffsettedTH=function(n){return n+this.countTH
};
WalkontableColumnFilter.prototype.visibleRowHeadedColumnToSourceColumn=function(n){return this.visibleToSource(this.offsettedTH(n))
};
WalkontableColumnFilter.prototype.sourceColumnToVisibleRowHeadedColumn=function(n){return this.unOffsettedTH(this.sourceToVisible(n))
};
function WalkontableColumnStrategy(containerSizeFn,sizeAtIndex,strategy){var size,i=0;
this.containerSizeFn=containerSizeFn;
this.cellSizesSum=0;
this.cellSizes=[];
this.cellCount=0;
this.remainingSize=0;
while(true){size=sizeAtIndex(i);
if(size===void 0){break
}if(this.cellSizesSum>=this.getContainerSize(this.cellSizesSum+size)){break
}this.cellSizes.push(size);
this.cellSizesSum+=size;
this.cellCount++;
i++
}var containerSize=this.getContainerSize(this.cellSizesSum);
this.remainingSize=this.cellSizesSum-containerSize;
if(strategy==="all"){if(this.remainingSize<0){var ratio=containerSize/this.cellSizesSum;
var newSize;
for(i=0;
i<this.cellCount-1;
i++){newSize=Math.floor(ratio*this.cellSizes[i]);
this.remainingSize+=newSize-this.cellSizes[i];
this.cellSizes[i]=newSize
}this.cellSizes[this.cellCount-1]-=this.remainingSize;
this.remainingSize=0
}}else{if(strategy==="last"){if(this.remainingSize<0){this.cellSizes[this.cellCount-1]-=this.remainingSize;
this.remainingSize=0
}}}}WalkontableColumnStrategy.prototype.getContainerSize=function(proposedWidth){var containerSize=typeof this.containerSizeFn==="function"?this.containerSizeFn(proposedWidth):this.containerSizeFn;
if(containerSize===void 0||containerSize===null||containerSize<1){containerSize=Infinity
}return containerSize
};
WalkontableColumnStrategy.prototype.getSize=function(index){return this.cellSizes[index]
};
function Walkontable(settings){var self=this,originalHeaders=[];
this.wtSettings=new WalkontableSettings(this,settings);
this.wtDom=new WalkontableDom();
this.wtTable=new WalkontableTable(this);
this.wtScroll=new WalkontableScroll(this);
this.wtWheel=new WalkontableWheel(this);
this.wtEvent=new WalkontableEvent(this);
if(this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(var c=0,clen=this.wtTable.THEAD.childNodes[0].childNodes.length;
c<clen;
c++){originalHeaders.push(this.wtTable.THEAD.childNodes[0].childNodes[c].innerHTML)
}if(!this.hasSetting("columnHeaders")){this.update("columnHeaders",function(column,TH){self.wtDom.avoidInnerHTML(TH,originalHeaders[column])
})
}}this.selections={};
var selectionsSettings=this.getSetting("selections");
if(selectionsSettings){for(var i in selectionsSettings){if(selectionsSettings.hasOwnProperty(i)){this.selections[i]=new WalkontableSelection(this,selectionsSettings[i])
}}}this.drawn=false;
this.drawInterrupted=false
}Walkontable.prototype.isVisible=function(){var next=this.wtTable.TABLE;
while(next!==document.documentElement){if(next===null){return false
}else{if(next.style.display==="none"){return false
}else{if(this.wtTable.TABLE.parentNode.clientWidth===0){return false
}}}next=next.parentNode
}return true
};
Walkontable.prototype.draw=function(selectionsOnly){this.drawInterrupted=false;
if(!selectionsOnly&&!this.isVisible()){this.drawInterrupted=true;
return
}this.getSetting("beforeDraw",!selectionsOnly);
selectionsOnly=selectionsOnly&&this.getSetting("offsetRow")===this.lastOffsetRow&&this.getSetting("offsetColumn")===this.lastOffsetColumn;
if(this.drawn){this.scrollVertical(0);
this.scrollHorizontal(0)
}this.lastOffsetRow=this.getSetting("offsetRow");
this.lastOffsetColumn=this.getSetting("offsetColumn");
this.wtTable.draw(selectionsOnly);
this.getSetting("onDraw");
return this
};
Walkontable.prototype.update=function(settings,value){return this.wtSettings.update(settings,value)
};
Walkontable.prototype.scrollVertical=function(delta){return this.wtScroll.scrollVertical(delta)
};
Walkontable.prototype.scrollHorizontal=function(delta){return this.wtScroll.scrollHorizontal(delta)
};
Walkontable.prototype.scrollViewport=function(coords){this.wtScroll.scrollViewport(coords);
return this
};
Walkontable.prototype.getViewport=function(){return[this.wtTable.rowFilter.visibleToSource(0),this.wtTable.columnFilter.visibleToSource(0),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]
};
Walkontable.prototype.getSetting=function(key,param1,param2,param3){return this.wtSettings.getSetting(key,param1,param2,param3)
};
Walkontable.prototype.hasSetting=function(key){return this.wtSettings.has(key)
};
Walkontable.prototype.destroy=function(){clearTimeout(this.wheelTimeout);
clearTimeout(this.dblClickTimeout)
};
function WalkontableDom(){}WalkontableDom.prototype.closest=function(elem,nodeNames){while(elem!=null){if(elem.nodeType===1&&nodeNames.indexOf(elem.nodeName)>-1){return elem
}elem=elem.parentNode
}return null
};
WalkontableDom.prototype.prevSiblings=function(elem){var out=[];
while((elem=elem.previousSibling)!=null){if(elem.nodeType===1){out.push(elem)
}}return out
};
if(document.documentElement.classList){WalkontableDom.prototype.hasClass=function(ele,cls){return ele.classList.contains(cls)
};
WalkontableDom.prototype.addClass=function(ele,cls){ele.classList.add(cls)
};
WalkontableDom.prototype.removeClass=function(ele,cls){ele.classList.remove(cls)
}
}else{WalkontableDom.prototype.hasClass=function(ele,cls){return ele.className.match(new RegExp("(\\s|^)"+cls+"(\\s|$)"))
};
WalkontableDom.prototype.addClass=function(ele,cls){if(!this.hasClass(ele,cls)){ele.className+=" "+cls
}};
WalkontableDom.prototype.removeClass=function(ele,cls){if(this.hasClass(ele,cls)){var reg=new RegExp("(\\s|^)"+cls+"(\\s|$)");
ele.className=ele.className.replace(reg," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")
}}
}WalkontableDom.prototype.removeTextNodes=function(elem,parent){if(elem.nodeType===3){parent.removeChild(elem)
}else{if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(elem.nodeName)>-1){var childs=elem.childNodes;
for(var i=childs.length-1;
i>=0;
i--){this.removeTextNodes(childs[i],elem)
}}}};
WalkontableDom.prototype.empty=function(element){var child;
while(child=element.lastChild){element.removeChild(child)
}};
WalkontableDom.prototype.avoidInnerHTML=function(element,content){if((/(<(.*)>|&(.*);)/g).test(content)){element.innerHTML=content
}else{var child;
while(child=element.lastChild){element.removeChild(child)
}element.appendChild(document.createTextNode(content))
}};
WalkontableDom.prototype.offset=function(elem){var offsetLeft=elem.offsetLeft,offsetTop=elem.offsetTop;
while(elem=elem.offsetParent){offsetLeft+=elem.offsetLeft;
offsetTop+=elem.offsetTop
}return{left:offsetLeft,top:offsetTop}
};
function WalkontableEvent(instance){var that=this;
this.instance=instance;
this.wtDom=this.instance.wtDom;
var dblClickOrigin=[null,null,null,null];
this.instance.dblClickTimeout=null;
var onMouseDown=function(event){var cell=that.parentCell(event.target);
if(cell.TD&&cell.TD.nodeName==="TD"){if(that.instance.hasSetting("onCellMouseDown")){that.instance.getSetting("onCellMouseDown",event,cell.coords,cell.TD)
}}else{if(that.wtDom.hasClass(event.target,"corner")){that.instance.getSetting("onCellCornerMouseDown",event,event.target)
}}if(event.button!==2){if(cell.TD&&cell.TD.nodeName==="TD"){dblClickOrigin.shift();
dblClickOrigin.push(cell.TD)
}else{if(that.wtDom.hasClass(event.target,"corner")){dblClickOrigin.shift();
dblClickOrigin.push(event.target)
}}}};
var lastMouseOver;
var onMouseOver=function(event){if(that.instance.hasSetting("onCellMouseOver")){var TD=that.wtDom.closest(event.target,["TD","TH"]);
if(TD&&TD!==lastMouseOver){lastMouseOver=TD;
if(TD.nodeName==="TD"){that.instance.getSetting("onCellMouseOver",event,that.instance.wtTable.getCoords(TD),TD)
}}}};
var onMouseUp=function(event){if(event.button!==2){var cell=that.parentCell(event.target);
if(cell.TD&&cell.TD.nodeName==="TD"){dblClickOrigin.shift();
dblClickOrigin.push(cell.TD)
}else{dblClickOrigin.shift();
dblClickOrigin.push(event.target)
}if(dblClickOrigin[3]!==null&&dblClickOrigin[3]===dblClickOrigin[2]){if(that.instance.dblClickTimeout&&dblClickOrigin[2]===dblClickOrigin[1]&&dblClickOrigin[1]===dblClickOrigin[0]){if(cell.TD){that.instance.getSetting("onCellDblClick",event,cell.coords,cell.TD)
}else{if(that.wtDom.hasClass(event.target,"corner")){that.instance.getSetting("onCellCornerDblClick",event,cell.coords,cell.TD)
}}clearTimeout(that.instance.dblClickTimeout);
that.instance.dblClickTimeout=null
}else{clearTimeout(that.instance.dblClickTimeout);
that.instance.dblClickTimeout=setTimeout(function(){that.instance.dblClickTimeout=null
},500)
}}}};
$(this.instance.wtTable.parent).on("mousedown",onMouseDown);
$(this.instance.wtTable.TABLE).on("mouseover",onMouseOver);
$(this.instance.wtTable.parent).on("mouseup",onMouseUp)
}WalkontableEvent.prototype.parentCell=function(elem){var cell={};
cell.TD=this.wtDom.closest(elem,["TD","TH"]);
if(cell.TD){cell.coords=this.instance.wtTable.getCoords(cell.TD)
}else{if(!cell.TD&&this.wtDom.hasClass(elem,"wtBorder")&&this.wtDom.hasClass(elem,"current")&&!this.wtDom.hasClass(elem,"corner")){cell.coords=this.instance.selections.current.selected[0];
cell.TD=this.instance.wtTable.getCell(cell.coords)
}}return cell
};
function walkontableRangesIntersect(){var from=arguments[0];
var to=arguments[1];
for(var i=1,ilen=arguments.length/2;
i<ilen;
i++){if(from<=arguments[2*i+1]&&to>=arguments[2*i]){return true
}}return false
}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(elt){var len=this.length>>>0;
var from=Number(arguments[1])||0;
from=(from<0)?Math.ceil(from):Math.floor(from);
if(from<0){from+=len
}for(;
from<len;
from++){if(from in this&&this[from]===elt){return from
}}return -1
}
}window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){return window.setTimeout(callback,1000/60)
}
})();
window.cancelRequestAnimFrame=(function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout
})();
if(!window.getComputedStyle){(function(){var elem;
var styleObj={getPropertyValue:function getPropertyValue(prop){if(prop=="float"){prop="styleFloat"
}return elem.currentStyle[prop.toUpperCase()]||null
}};
window.getComputedStyle=function(el){elem=el;
return styleObj
}
})()
}function WalkontableRowFilter(){}WalkontableRowFilter.prototype=new WalkontableCellFilter();
WalkontableRowFilter.prototype.readSettings=function(instance){this.offset=instance.wtSettings.settings.offsetRow;
this.total=instance.getSetting("totalRows");
this.fixedCount=instance.getSetting("fixedRowsTop")
};
function WalkontableScroll(instance){this.instance=instance;
this.wtScrollbarV=new WalkontableVerticalScrollbar(instance);
this.wtScrollbarH=new WalkontableHorizontalScrollbar(instance)
}WalkontableScroll.prototype.refreshScrollbars=function(){this.wtScrollbarH.readSettings();
this.wtScrollbarV.readSettings();
this.wtScrollbarH.prepare();
this.wtScrollbarV.prepare();
this.wtScrollbarH.refresh();
this.wtScrollbarV.refresh()
};
WalkontableScroll.prototype.scrollVertical=function(delta){if(!this.instance.drawn){throw new Error("scrollVertical can only be called after table was drawn to DOM")
}var instance=this.instance,offset=instance.getSetting("offsetRow"),fixedCount=instance.getSetting("fixedRowsTop"),total=instance.getSetting("totalRows"),maxSize=(instance.getSetting("height")||Infinity);
if(maxSize!==Infinity){var TD=instance.wtTable.TBODY.firstChild.firstChild;
if(TD.nodeName==="TH"){TD=TD.nextSibling
}var cellOffset=instance.wtDom.offset(TD);
var tableOffset=instance.wtTable.tableOffset;
maxSize-=cellOffset.top-tableOffset.top;
maxSize-=instance.getSetting("scrollbarHeight")
}var newOffset=this.scrollLogic(delta,offset,total,fixedCount,maxSize,function(row){if(row-offset<fixedCount){return instance.getSetting("rowHeight",row-offset)
}else{return instance.getSetting("rowHeight",row)
}});
if(newOffset!==offset){instance.update("offsetRow",newOffset)
}return instance
};
WalkontableScroll.prototype.scrollHorizontal=function(delta){if(!this.instance.drawn){throw new Error("scrollHorizontal can only be called after table was drawn to DOM")
}var instance=this.instance,offset=instance.getSetting("offsetColumn"),fixedCount=instance.getSetting("fixedColumnsLeft"),total=instance.getSetting("totalColumns"),maxSize=instance.getSetting("width")-instance.getSetting("rowHeaderWidth");
var newOffset=this.scrollLogic(delta,offset,total,fixedCount,maxSize,function(col){if(col-offset<fixedCount){return instance.getSetting("columnWidth",col-offset)
}else{return instance.getSetting("columnWidth",col)
}});
if(newOffset!==offset){instance.update("offsetColumn",newOffset)
}return instance
};
WalkontableScroll.prototype.scrollLogic=function(delta,offset,total,fixedCount,maxSize,cellSizeFn){var newOffset=offset+delta,sum=0,col;
if(newOffset>fixedCount){if(newOffset>=total-fixedCount){newOffset=total-fixedCount-1
}col=newOffset;
while(sum<maxSize&&col<total){sum+=cellSizeFn(col);
col++
}if(sum<maxSize){while(newOffset>0){sum+=cellSizeFn(newOffset-1);
if(sum<maxSize){newOffset--
}else{break
}}}}else{if(newOffset<0){newOffset=0
}}return newOffset
};
WalkontableScroll.prototype.scrollViewport=function(coords){var offsetRow=this.instance.getSetting("offsetRow"),offsetColumn=this.instance.getSetting("offsetColumn"),lastVisibleRow=this.instance.wtTable.getLastVisibleRow(),lastVisibleColumn=this.instance.wtTable.getLastVisibleColumn(),totalRows=this.instance.getSetting("totalRows"),totalColumns=this.instance.getSetting("totalColumns"),fixedRowsTop=this.instance.getSetting("fixedRowsTop"),fixedColumnsLeft=this.instance.getSetting("fixedColumnsLeft");
if(coords[0]<0||coords[0]>totalRows-1){throw new Error("row "+coords[0]+" does not exist")
}else{if(coords[1]<0||coords[1]>totalColumns-1){throw new Error("column "+coords[1]+" does not exist")
}}if(coords[0]>lastVisibleRow){this.scrollVertical(coords[0]-lastVisibleRow+1)
}else{if(coords[0]===lastVisibleRow&&this.instance.wtTable.isLastRowIncomplete()){this.scrollVertical(coords[0]-lastVisibleRow+1)
}else{if(coords[0]-fixedRowsTop<offsetRow){this.scrollVertical(coords[0]-fixedRowsTop-offsetRow)
}else{this.scrollVertical(0)
}}}if(coords[1]>lastVisibleColumn){this.scrollHorizontal(coords[1]-lastVisibleColumn+1)
}else{if(coords[1]===lastVisibleColumn&&this.instance.wtTable.isLastColumnIncomplete()){this.scrollHorizontal(coords[1]-lastVisibleColumn+1)
}else{if(coords[1]-fixedColumnsLeft<offsetColumn){this.scrollHorizontal(coords[1]-fixedColumnsLeft-offsetColumn)
}else{this.scrollHorizontal(0)
}}}return this.instance
};
function WalkontableScrollbar(){}WalkontableScrollbar.prototype.init=function(){var that=this;
this.$table=$(this.instance.wtTable.TABLE);
this.slider=document.createElement("DIV");
this.sliderStyle=this.slider.style;
this.sliderStyle.position="absolute";
this.sliderStyle.top="0";
this.sliderStyle.left="0";
this.sliderStyle.display="none";
this.slider.className="dragdealer "+this.type;
this.handle=document.createElement("DIV");
this.handleStyle=this.handle.style;
this.handle.className="handle";
this.slider.appendChild(this.handle);
this.instance.wtTable.parent.appendChild(this.slider);
var firstRun=true;
this.dragTimeout=null;
var dragDelta;
var dragRender=function(){that.onScroll(dragDelta)
};
this.dragdealer=new Dragdealer(this.slider,{vertical:(this.type==="vertical"),horizontal:(this.type==="horizontal"),slide:false,speed:100,animationCallback:function(x,y){if(firstRun){firstRun=false;
return
}that.skipRefresh=true;
dragDelta=that.type==="vertical"?y:x;
if(that.dragTimeout===null){that.dragTimeout=setInterval(dragRender,100);
dragRender()
}},callback:function(x,y){that.skipRefresh=false;
clearInterval(that.dragTimeout);
that.dragTimeout=null;
dragDelta=that.type==="vertical"?y:x;
that.onScroll(dragDelta)
}});
this.skipRefresh=false
};
WalkontableScrollbar.prototype.onScroll=function(delta){if(this.instance.drawn){this.readSettings();
if(this.total>this.visibleCount){var newOffset=Math.round(this.handlePosition*this.total/this.sliderSize);
if(delta===1){if(this.type==="vertical"){this.instance.scrollVertical(Infinity).draw()
}else{this.instance.scrollHorizontal(Infinity).draw()
}}else{if(newOffset!==this.offset){if(this.type==="vertical"){this.instance.scrollVertical(newOffset-this.offset).draw()
}else{this.instance.scrollHorizontal(newOffset-this.offset).draw()
}}else{this.refresh()
}}}}};
WalkontableScrollbar.prototype.getHandleSizeRatio=function(viewportCount,totalCount){if(!totalCount||viewportCount>totalCount){return 1
}return viewportCount/totalCount
};
WalkontableScrollbar.prototype.prepare=function(){if(this.skipRefresh){return
}var ratio=this.getHandleSizeRatio(this.visibleCount,this.total);
if(((ratio===1||isNaN(ratio))&&this.scrollMode==="auto")||this.scrollMode==="none"){this.visible=false
}else{this.visible=true
}};
WalkontableScrollbar.prototype.refresh=function(){if(this.skipRefresh){return
}else{if(!this.visible){this.sliderStyle.display="none";
return
}}var ratio,sliderSize,handleSize,handlePosition,visibleCount=this.visibleCount,tableOuterWidth=this.$table.outerWidth(),tableOuterHeight=this.$table.outerHeight(),tableWidth=this.instance.hasSetting("width")?this.instance.getSetting("width"):tableOuterWidth,tableHeight=this.instance.hasSetting("height")?this.instance.getSetting("height"):tableOuterHeight;
if(!tableWidth){return
}if(!tableHeight){return
}if(this.instance.hasSetting("width")&&this.instance.wtScroll.wtScrollbarV.visible){tableWidth-=this.instance.getSetting("scrollbarWidth")
}if(tableWidth>tableOuterWidth+this.instance.getSetting("scrollbarWidth")){tableWidth=tableOuterWidth
}if(this.instance.hasSetting("height")&&this.instance.wtScroll.wtScrollbarH.visible){tableHeight-=this.instance.getSetting("scrollbarHeight")
}if(tableHeight>tableOuterHeight+this.instance.getSetting("scrollbarHeight")){tableHeight=tableOuterHeight
}if(this.type==="vertical"){if(this.instance.wtTable.isLastRowIncomplete()){visibleCount--
}sliderSize=tableHeight-2;
this.sliderStyle.top=this.$table.position().top+"px";
this.sliderStyle.left=tableWidth-1+"px";
this.sliderStyle.height=sliderSize+"px"
}else{if(this.instance.wtTable.isLastColumnIncomplete()){visibleCount--
}sliderSize=tableWidth-2;
this.sliderStyle.left=this.$table.position().left+"px";
this.sliderStyle.top=tableHeight-1+"px";
this.sliderStyle.width=sliderSize+"px"
}ratio=this.getHandleSizeRatio(visibleCount,this.total);
handleSize=Math.round(sliderSize*ratio);
if(handleSize<10){handleSize=15
}handlePosition=Math.floor(sliderSize*(this.offset/this.total));
if(handleSize+handlePosition>sliderSize){handlePosition=sliderSize-handleSize
}if(this.type==="vertical"){this.handleStyle.height=handleSize+"px";
this.handleStyle.top=handlePosition+"px"
}else{this.handleStyle.width=handleSize+"px";
this.handleStyle.left=handlePosition+"px"
}this.sliderStyle.display="block"
};
var WalkontableVerticalScrollbar=function(instance){this.instance=instance;
this.type="vertical";
this.init()
};
WalkontableVerticalScrollbar.prototype=new WalkontableScrollbar();
WalkontableVerticalScrollbar.prototype.readSettings=function(){this.scrollMode=this.instance.getSetting("scrollV");
this.offset=this.instance.getSetting("offsetRow");
this.total=this.instance.getSetting("totalRows");
this.visibleCount=this.instance.wtTable.countVisibleRows();
this.handlePosition=parseInt(this.handleStyle.top,10);
this.sliderSize=parseInt(this.sliderStyle.height,10);
this.fixedCount=this.instance.getSetting("fixedRowsTop")
};
var WalkontableHorizontalScrollbar=function(instance){this.instance=instance;
this.type="horizontal";
this.init()
};
WalkontableHorizontalScrollbar.prototype=new WalkontableScrollbar();
WalkontableHorizontalScrollbar.prototype.readSettings=function(){this.scrollMode=this.instance.getSetting("scrollH");
this.offset=this.instance.getSetting("offsetColumn");
this.total=this.instance.getSetting("totalColumns");
this.visibleCount=this.instance.wtTable.countVisibleColumns();
this.handlePosition=parseInt(this.handleStyle.left,10);
this.sliderSize=parseInt(this.sliderStyle.width,10);
this.fixedCount=this.instance.getSetting("fixedColumnsLeft")
};
function WalkontableSelection(instance,settings){this.instance=instance;
this.settings=settings;
this.selected=[];
if(settings.border){this.border=new WalkontableBorder(instance,settings)
}}WalkontableSelection.prototype.add=function(coords){this.selected.push(coords)
};
WalkontableSelection.prototype.clear=function(){this.selected.length=0
};
WalkontableSelection.prototype.getCorners=function(){var minRow,minColumn,maxRow,maxColumn,i,ilen=this.selected.length;
if(ilen>0){minRow=maxRow=this.selected[0][0];
minColumn=maxColumn=this.selected[0][1];
if(ilen>1){for(i=1;
i<ilen;
i++){if(this.selected[i][0]<minRow){minRow=this.selected[i][0]
}else{if(this.selected[i][0]>maxRow){maxRow=this.selected[i][0]
}}if(this.selected[i][1]<minColumn){minColumn=this.selected[i][1]
}else{if(this.selected[i][1]>maxColumn){maxColumn=this.selected[i][1]
}}}}}return[minRow,minColumn,maxRow,maxColumn]
};
WalkontableSelection.prototype.draw=function(){var corners,r,c,source_r,source_c;
var visibleRows=this.instance.wtTable.countVisibleRows(),visibleColumns=this.instance.wtTable.countVisibleColumns();
if(this.selected.length){corners=this.getCorners();
for(r=0;
r<visibleRows;
r++){for(c=0;
c<visibleColumns;
c++){source_r=this.instance.wtTable.rowFilter.visibleToSource(r);
source_c=this.instance.wtTable.columnFilter.visibleToSource(c);
if(source_r>=corners[0]&&source_r<=corners[2]&&source_c>=corners[1]&&source_c<=corners[3]){this.instance.wtTable.currentCellCache.add(r,c,this.settings.className)
}else{if(source_r>=corners[0]&&source_r<=corners[2]){this.instance.wtTable.currentCellCache.add(r,c,this.settings.highlightRowClassName)
}else{if(source_c>=corners[1]&&source_c<=corners[3]){this.instance.wtTable.currentCellCache.add(r,c,this.settings.highlightColumnClassName)
}}}}}this.border&&this.border.appear(corners)
}else{this.border&&this.border.disappear()
}};
function WalkontableSettings(instance,settings){var that=this;
this.instance=instance;
this.defaults={table:void 0,scrollH:"auto",scrollV:"auto",stretchH:"hybrid",currentRowClassName:null,currentColumnClassName:null,data:void 0,offsetRow:0,offsetColumn:0,fixedColumnsLeft:0,fixedRowsTop:0,rowHeaders:null,columnHeaders:null,totalRows:void 0,totalColumns:void 0,width:null,height:null,cellRenderer:function(row,column,TD){var cellData=that.getSetting("data",row,column);
that.instance.wtDom.avoidInnerHTML(TD,cellData===void 0||cellData===null?"":cellData)
},columnWidth:50,selections:null,onCellMouseDown:null,onCellMouseOver:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,scrollbarWidth:10,scrollbarHeight:10,rowHeaderWidth:50};
this.settings={};
for(var i in this.defaults){if(this.defaults.hasOwnProperty(i)){if(settings[i]!==void 0){this.settings[i]=settings[i]
}else{if(this.defaults[i]===void 0){throw new Error('A required setting "'+i+'" was not provided')
}else{this.settings[i]=this.defaults[i]
}}}}this.rowHeightCache=[]
}WalkontableSettings.prototype.update=function(settings,value){if(value===void 0){for(var i in settings){if(settings.hasOwnProperty(i)){this.settings[i]=settings[i]
}}}else{this.settings[settings]=value
}return this.instance
};
WalkontableSettings.prototype.getSetting=function(key,param1,param2,param3){if(this[key]){return this[key](param1,param2,param3)
}else{return this._getSetting(key,param1,param2,param3)
}};
WalkontableSettings.prototype._getSetting=function(key,param1,param2,param3){if(typeof this.settings[key]==="function"){return this.settings[key](param1,param2,param3)
}else{if(param1!==void 0&&Object.prototype.toString.call(this.settings[key])==="[object Array]"&&param1!==void 0){return this.settings[key][param1]
}else{return this.settings[key]
}}};
WalkontableSettings.prototype.has=function(key){return !!this.settings[key]
};
WalkontableSettings.prototype.rowHeight=function(row){if(typeof this.rowHeightCache[row]!=="undefined"){return this.rowHeightCache[row]
}return 20
};
WalkontableSettings.prototype.columnWidth=function(column){return Math.min(200,this._getSetting("columnWidth",column))
};
var FLAG_VISIBLE_HORIZONTAL=1;
var FLAG_VISIBLE_VERTICAL=2;
var FLAG_PARTIALLY_VISIBLE_HORIZONTAL=4;
var FLAG_PARTIALLY_VISIBLE_VERTICAL=8;
var FLAG_NOT_VISIBLE_HORIZONTAL=16;
var FLAG_NOT_VISIBLE_VERTICAL=32;
function WalkontableTable(instance){this.instance=instance;
this.TABLE=this.instance.getSetting("table");
this.wtDom=this.instance.wtDom;
this.wtDom.removeTextNodes(this.TABLE);
this.hasEmptyCellProblem=($.browser.msie&&(parseInt($.browser.version,10)<=7));
this.hasCellSpacingProblem=($.browser.msie&&(parseInt($.browser.version,10)<=7));
if(this.hasCellSpacingProblem){this.TABLE.cellSpacing=0
}var parent=this.TABLE.parentNode;
if(!parent||parent.nodeType!==1||!this.wtDom.hasClass(parent,"wtHolder")){var spreader=document.createElement("DIV");
if(this.instance.hasSetting("width")&&this.instance.hasSetting("height")){var spreaderStyle=spreader.style;
spreaderStyle.position="absolute";
spreaderStyle.top="0";
spreaderStyle.left="0";
spreaderStyle.width="4000px";
spreaderStyle.height="4000px"
}spreader.className="wtSpreader";
if(parent){parent.insertBefore(spreader,this.TABLE)
}spreader.appendChild(this.TABLE)
}this.spreader=this.TABLE.parentNode;
parent=this.spreader.parentNode;
if(!parent||parent.nodeType!==1||!this.wtDom.hasClass(parent,"wtHolder")){var hider=document.createElement("DIV");
hider.className="wtHider";
if(parent){parent.insertBefore(hider,this.spreader)
}hider.appendChild(this.spreader)
}this.hider=this.spreader.parentNode;
this.hiderStyle=this.hider.style;
this.hiderStyle.position="relative";
parent=this.hider.parentNode;
if(!parent||parent.nodeType!==1||!this.wtDom.hasClass(parent,"wtHolder")){var holder=document.createElement("DIV");
holder.style.position="relative";
holder.className="wtHolder";
if(parent){parent.insertBefore(holder,this.hider)
}holder.appendChild(this.hider)
}this.parent=this.hider.parentNode;
this.TBODY=this.TABLE.getElementsByTagName("TBODY")[0];
if(!this.TBODY){this.TBODY=document.createElement("TBODY");
this.TABLE.appendChild(this.TBODY)
}this.THEAD=this.TABLE.getElementsByTagName("THEAD")[0];
if(!this.THEAD){this.THEAD=document.createElement("THEAD");
this.TABLE.insertBefore(this.THEAD,this.TBODY)
}this.COLGROUP=this.TABLE.getElementsByTagName("COLGROUP")[0];
if(!this.COLGROUP){this.COLGROUP=document.createElement("COLGROUP");
this.TABLE.insertBefore(this.COLGROUP,this.THEAD)
}if(this.instance.hasSetting("columnHeaders")){if(!this.THEAD.childNodes.length){var TR=document.createElement("TR");
this.THEAD.appendChild(TR)
}}this.colgroupChildrenLength=this.COLGROUP.childNodes.length;
this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0;
this.tbodyChildrenLength=this.TBODY.childNodes.length;
this.oldCellCache=new WalkontableClassNameCache();
this.currentCellCache=new WalkontableClassNameCache();
this.rowFilter=new WalkontableRowFilter();
this.columnFilter=new WalkontableColumnFilter()
}WalkontableTable.prototype.refreshHiderDimensions=function(){var height=this.instance.getSetting("height");
var width=this.instance.getSetting("width");
if(height||width){this.hiderStyle.overflow="hidden"
}if(height){if(this.instance.wtScroll.wtScrollbarH.visible){this.hiderStyle.height=height-this.instance.getSetting("scrollbarHeight")+"px"
}else{this.hiderStyle.height=height+"px"
}}if(width){if(this.instance.wtScroll.wtScrollbarV.visible){this.hiderStyle.width=width-this.instance.getSetting("scrollbarWidth")+"px"
}else{this.hiderStyle.width=width+"px"
}}};
WalkontableTable.prototype.refreshStretching=function(){var instance=this.instance,stretchH=instance.getSetting("stretchH"),scrollH=instance.getSetting("scrollH"),scrollbarWidth=instance.getSetting("scrollbarWidth"),totalColumns=instance.getSetting("totalColumns"),offsetColumn=instance.getSetting("offsetColumn"),rowHeaderWidth=instance.hasSetting("rowHeaders")?instance.getSetting("rowHeaderWidth"):0,containerWidth=instance.getSetting("width")-rowHeaderWidth;
var containerWidthFn=function(cacheWidth){if(scrollH==="scroll"||(scrollH==="auto"&&cacheWidth>containerWidth)){return containerWidth-scrollbarWidth
}return containerWidth
};
var that=this;
var columnWidthFn=function(i){var source_c=that.columnFilter.visibleToSource(i);
if(source_c<totalColumns){return instance.getSetting("columnWidth",source_c)
}};
if(stretchH==="hybrid"){if(offsetColumn>0){stretchH="last"
}else{stretchH="none"
}}this.columnStrategy=new WalkontableColumnStrategy(containerWidthFn,columnWidthFn,stretchH);
this.rowStrategy={cells:[],cellCount:0,remainingSize:0}
};
WalkontableTable.prototype.adjustAvailableNodes=function(){var displayTds,displayThs=this.instance.hasSetting("rowHeaders")?1:0,TR;
this.refreshStretching();
displayTds=this.columnStrategy.cellCount;
while(this.colgroupChildrenLength<displayTds+displayThs){this.COLGROUP.appendChild(document.createElement("COL"));
this.colgroupChildrenLength++
}while(this.colgroupChildrenLength>displayTds+displayThs){this.COLGROUP.removeChild(this.COLGROUP.lastChild);
this.colgroupChildrenLength--
}if(this.instance.hasSetting("columnHeaders")){TR=this.THEAD.firstChild;
while(this.theadChildrenLength<displayTds+displayThs){TR.appendChild(document.createElement("TH"));
this.theadChildrenLength++
}while(this.theadChildrenLength>displayTds+displayThs){TR.removeChild(TR.lastChild);
this.theadChildrenLength--
}}};
WalkontableTable.prototype.adjustColumns=function(TR,desiredCount){var count=TR.childNodes.length;
while(count<desiredCount){var TD=document.createElement("TD");
TR.appendChild(TD);
count++
}while(count>desiredCount){TR.removeChild(TR.lastChild);
count--
}};
WalkontableTable.prototype.draw=function(selectionsOnly){this.rowFilter.readSettings(this.instance);
this.columnFilter.readSettings(this.instance);
if(!selectionsOnly){this.tableOffset=this.wtDom.offset(this.TABLE);
this.adjustAvailableNodes();
this._doDraw()
}this.refreshPositions(selectionsOnly);
this.instance.drawn=true;
return this
};
WalkontableTable.prototype._doDraw=function(){var r=0,source_r,c,source_c,totalRows=this.instance.getSetting("totalRows"),displayTds=this.columnStrategy.cellCount,rowHeaders=this.instance.hasSetting("rowHeaders"),displayThs=rowHeaders?1:0,TR,TD;
for(c=0;
c<this.colgroupChildrenLength;
c++){if(c<displayThs){this.wtDom.addClass(this.COLGROUP.childNodes[c],"rowHeader")
}else{this.wtDom.removeClass(this.COLGROUP.childNodes[c],"rowHeader")
}}var columnHeaders=this.instance.hasSetting("columnHeaders");
if(columnHeaders){TR=this.THEAD.firstChild;
if(displayThs){TD=TR.firstChild;
this.wtDom.empty(TD);
if(this.hasEmptyCellProblem){TD.innerHTML="&nbsp;"
}}}for(c=0;
c<displayTds;
c++){if(columnHeaders){this.instance.getSetting("columnHeaders",this.columnFilter.visibleToSource(c),TR.childNodes[displayThs+c])
}this.COLGROUP.childNodes[c+displayThs].style.width=this.columnStrategy.getSize(c)+"px"
}source_r=this.rowFilter.visibleToSource(r);
while(source_r<totalRows){if(r>=this.tbodyChildrenLength){TR=document.createElement("TR");
if(displayThs){TR.appendChild(document.createElement("TH"))
}this.TBODY.appendChild(TR);
this.tbodyChildrenLength++
}else{if(r===0){TR=this.TBODY.firstChild
}else{TR=TR.nextSibling
}}this.rowStrategy.cellCount++;
if(displayThs){this.instance.getSetting("rowHeaders",source_r,TR.firstChild)
}this.adjustColumns(TR,displayTds+displayThs);
for(c=0;
c<displayTds;
c++){source_c=this.columnFilter.visibleToSource(c);
if(c===0){TD=TR.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(source_c)]
}else{TD=TD.nextSibling
}TD.className="";
TD.removeAttribute("style");
this.instance.getSetting("cellRenderer",source_r,source_c,TD);
if(this.hasEmptyCellProblem&&TD.innerHTML===""){TD.innerHTML="&nbsp;"
}}var isCellVisible=this.isCellVisible(source_r,source_c,TD);
if(isCellVisible&(FLAG_NOT_VISIBLE_VERTICAL|FLAG_PARTIALLY_VISIBLE_VERTICAL)){break
}r++;
source_r=this.rowFilter.visibleToSource(r)
}r=this.countVisibleRows();
while(this.tbodyChildrenLength>r){this.TBODY.removeChild(this.TBODY.lastChild);
this.tbodyChildrenLength--
}};
WalkontableTable.prototype.refreshPositions=function(selectionsOnly){this.instance.wtScroll.refreshScrollbars();
this.refreshHiderDimensions();
this.refreshSelections(selectionsOnly)
};
WalkontableTable.prototype.refreshSelections=function(selectionsOnly){var vr,r,vc,c,s,slen,classNames=[],visibleRows=this.countVisibleRows(),visibleColumns=this.countVisibleColumns();
this.oldCellCache=this.currentCellCache;
this.currentCellCache=new WalkontableClassNameCache();
if(this.instance.selections){for(r in this.instance.selections){if(this.instance.selections.hasOwnProperty(r)){this.instance.selections[r].draw();
if(this.instance.selections[r].settings.className){classNames.push(this.instance.selections[r].settings.className)
}if(this.instance.selections[r].settings.highlightRowClassName){classNames.push(this.instance.selections[r].settings.highlightRowClassName)
}if(this.instance.selections[r].settings.highlightColumnClassName){classNames.push(this.instance.selections[r].settings.highlightColumnClassName)
}}}}slen=classNames.length;
for(vr=0;
vr<visibleRows;
vr++){for(vc=0;
vc<visibleColumns;
vc++){r=this.rowFilter.visibleToSource(vr);
c=this.columnFilter.visibleToSource(vc);
for(s=0;
s<slen;
s++){if(this.currentCellCache.test(vr,vc,classNames[s])){this.wtDom.addClass(this.getCell([r,c]),classNames[s])
}else{if(selectionsOnly&&this.oldCellCache.test(vr,vc,classNames[s])){this.wtDom.removeClass(this.getCell([r,c]),classNames[s])
}}}}}};
WalkontableTable.prototype.isCellVisible=function(r,c,TD){var out=0,cellOffset=this.wtDom.offset(TD),tableOffset=this.tableOffset,innerOffsetTop=cellOffset.top-tableOffset.top,$td=$(TD),height=$td.outerHeight(),tableHeight=this.instance.hasSetting("height")?this.instance.getSetting("height"):Infinity;
this.instance.wtSettings.rowHeightCache[r]=height;
if(innerOffsetTop>tableHeight){out|=FLAG_NOT_VISIBLE_VERTICAL
}else{if(innerOffsetTop+height>tableHeight){this.rowStrategy.remainingSize=tableHeight-innerOffsetTop;
out|=FLAG_PARTIALLY_VISIBLE_VERTICAL
}else{out|=FLAG_VISIBLE_VERTICAL
}}if(this.isColumnInViewport(c)){if(this.getLastVisibleColumn()===c&&this.columnStrategy.remainingSize>0){out|=FLAG_PARTIALLY_VISIBLE_HORIZONTAL
}else{out|=FLAG_VISIBLE_HORIZONTAL
}}else{out|=FLAG_NOT_VISIBLE_HORIZONTAL
}return out
};
WalkontableTable.prototype.getCell=function(coords){if(this.isRowBeforeViewport(coords[0])){return -1
}else{if(this.isRowAfterViewport(coords[0])){return -2
}else{if(this.isColumnBeforeViewport(coords[1])){return -3
}else{if(this.isColumnAfterViewport(coords[1])){return -4
}else{return this.TBODY.childNodes[this.rowFilter.sourceToVisible(coords[0])].childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(coords[1])]
}}}}};
WalkontableTable.prototype.getCoords=function(TD){return[this.rowFilter.visibleToSource(this.wtDom.prevSiblings(TD.parentNode).length),this.columnFilter.visibleRowHeadedColumnToSourceColumn(TD.cellIndex)]
};
WalkontableTable.prototype.countVisibleRows=function(){return(this.rowStrategy&&this.rowStrategy.cellCount)||0
};
WalkontableTable.prototype.countVisibleColumns=function(){return(this.columnStrategy&&this.columnStrategy.cellCount)||0
};
WalkontableTable.prototype.getLastVisibleRow=function(){return this.rowFilter.visibleToSource(this.rowStrategy.cellCount-1)
};
WalkontableTable.prototype.getLastVisibleColumn=function(){return this.columnFilter.visibleToSource(this.columnStrategy.cellCount-1)
};
WalkontableTable.prototype.isLastRowIncomplete=function(){return(this.rowStrategy.remainingSize>0)
};
WalkontableTable.prototype.isLastColumnIncomplete=function(){return(this.columnStrategy.remainingSize>0)
};
WalkontableTable.prototype.isRowBeforeViewport=function(r){return(this.rowFilter.sourceToVisible(r)<this.rowFilter.fixedCount&&r>=this.rowFilter.fixedCount)
};
WalkontableTable.prototype.isRowAfterViewport=function(r){return(r>this.getLastVisibleRow())
};
WalkontableTable.prototype.isColumnBeforeViewport=function(c){return(this.columnFilter.sourceToVisible(c)<this.columnFilter.fixedCount&&c>=this.columnFilter.fixedCount)
};
WalkontableTable.prototype.isColumnAfterViewport=function(c){return(c>this.getLastVisibleColumn())
};
WalkontableTable.prototype.isRowInViewport=function(r){return(!this.isRowBeforeViewport(r)&&!this.isRowAfterViewport(r))
};
WalkontableTable.prototype.isColumnInViewport=function(c){return(!this.isColumnBeforeViewport(c)&&!this.isColumnAfterViewport(c))
};
function WalkontableWheel(instance){var that=this;
this.instance=instance;
$(this.instance.wtTable.TABLE).on("mousewheel",function(event,delta,deltaX,deltaY){clearTimeout(that.instance.wheelTimeout);
that.instance.wheelTimeout=setTimeout(function(){if(deltaY){if(that.instance.wtScroll.wtScrollbarV.visible){that.instance.scrollVertical(-Math.ceil(deltaY)).draw()
}}else{if(deltaX){if(that.instance.wtScroll.wtScrollbarH.visible){that.instance.scrollHorizontal(Math.ceil(deltaX)).draw()
}}}},0);
event.preventDefault()
})
}var Cursor={x:0,y:0,init:function(){this.setEvent("mouse");
this.setEvent("touch")
},setEvent:function(type){var moveHandler=document["on"+type+"move"]||function(){};
document["on"+type+"move"]=function(e){moveHandler(e);
Cursor.refresh(e)
}
},refresh:function(e){if(!e){e=window.event
}if(e.type=="mousemove"){this.set(e)
}else{if(e.touches){this.set(e.touches[0])
}}},set:function(e){if(e.pageX||e.pageY){this.x=e.pageX;
this.y=e.pageY
}else{if(e.clientX||e.clientY){this.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;
this.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop
}}}};
Cursor.init();
var Position={get:function(obj){var curtop=0,curleft=0;
if(obj.offsetParent){do{curleft+=obj.offsetLeft;
curtop+=obj.offsetTop
}while((obj=obj.offsetParent))
}return[curleft,curtop]
}};
var Dragdealer=function(wrapper,options){if(typeof(wrapper)=="string"){wrapper=document.getElementById(wrapper)
}if(!wrapper){return
}var handle=wrapper.getElementsByTagName("div")[0];
if(!handle||handle.className.search(/(^|\s)handle(\s|$)/)==-1){return
}this.init(wrapper,handle,options||{});
this.setup()
};
Dragdealer.prototype={init:function(wrapper,handle,options){this.wrapper=wrapper;
this.handle=handle;
this.options=options;
this.disabled=this.getOption("disabled",false);
this.horizontal=this.getOption("horizontal",true);
this.vertical=this.getOption("vertical",false);
this.slide=this.getOption("slide",true);
this.steps=this.getOption("steps",0);
this.snap=this.getOption("snap",false);
this.loose=this.getOption("loose",false);
this.speed=this.getOption("speed",10)/100;
this.xPrecision=this.getOption("xPrecision",0);
this.yPrecision=this.getOption("yPrecision",0);
this.callback=options.callback||null;
this.animationCallback=options.animationCallback||null;
this.bounds={left:options.left||0,right:-(options.right||0),top:options.top||0,bottom:-(options.bottom||0),x0:0,x1:0,xRange:0,y0:0,y1:0,yRange:0};
this.value={prev:[-1,-1],current:[options.x||0,options.y||0],target:[options.x||0,options.y||0]};
this.offset={wrapper:[0,0],mouse:[0,0],prev:[-999999,-999999],current:[0,0],target:[0,0]};
this.change=[0,0];
this.activity=false;
this.dragging=false;
this.tapping=false
},getOption:function(name,defaultValue){return this.options[name]!==undefined?this.options[name]:defaultValue
},setup:function(){this.setWrapperOffset();
this.setBoundsPadding();
this.setBounds();
this.setSteps();
this.addListeners()
},setWrapperOffset:function(){this.offset.wrapper=Position.get(this.wrapper)
},setBoundsPadding:function(){if(!this.bounds.left&&!this.bounds.right){this.bounds.left=Position.get(this.handle)[0]-this.offset.wrapper[0];
this.bounds.right=-this.bounds.left
}if(!this.bounds.top&&!this.bounds.bottom){this.bounds.top=Position.get(this.handle)[1]-this.offset.wrapper[1];
this.bounds.bottom=-this.bounds.top
}},setBounds:function(){this.bounds.x0=this.bounds.left;
this.bounds.x1=this.wrapper.offsetWidth+this.bounds.right;
this.bounds.xRange=(this.bounds.x1-this.bounds.x0)-this.handle.offsetWidth;
this.bounds.y0=this.bounds.top;
this.bounds.y1=this.wrapper.offsetHeight+this.bounds.bottom;
this.bounds.yRange=(this.bounds.y1-this.bounds.y0)-this.handle.offsetHeight;
this.bounds.xStep=1/(this.xPrecision||Math.max(this.wrapper.offsetWidth,this.handle.offsetWidth));
this.bounds.yStep=1/(this.yPrecision||Math.max(this.wrapper.offsetHeight,this.handle.offsetHeight))
},setSteps:function(){if(this.steps>1){this.stepRatios=[];
for(var i=0;
i<=this.steps-1;
i++){this.stepRatios[i]=i/(this.steps-1)
}}},addListeners:function(){var self=this;
this.wrapper.onselectstart=function(){return false
};
this.handle.onmousedown=this.handle.ontouchstart=function(e){self.handleDownHandler(e)
};
this.wrapper.onmousedown=this.wrapper.ontouchstart=function(e){self.wrapperDownHandler(e)
};
var mouseUpHandler=document.onmouseup||function(){};
document.onmouseup=function(e){mouseUpHandler(e);
self.documentUpHandler(e)
};
var touchEndHandler=document.ontouchend||function(){};
document.ontouchend=function(e){touchEndHandler(e);
self.documentUpHandler(e)
};
var resizeHandler=window.onresize||function(){};
window.onresize=function(e){resizeHandler(e);
self.documentResizeHandler(e)
};
this.wrapper.onmousemove=function(e){self.activity=true
};
this.wrapper.onclick=function(e){return !self.activity
};
this.interval=setInterval(function(){self.animate()
},25);
self.animate(false,true)
},handleDownHandler:function(e){this.activity=false;
Cursor.refresh(e);
this.preventDefaults(e,true);
this.startDrag();
this.cancelEvent(e)
},wrapperDownHandler:function(e){Cursor.refresh(e);
this.preventDefaults(e,true);
this.startTap()
},documentUpHandler:function(e){this.stopDrag();
this.stopTap()
},documentResizeHandler:function(e){this.setWrapperOffset();
this.setBounds();
this.update()
},enable:function(){this.disabled=false;
this.handle.className=this.handle.className.replace(/\s?disabled/g,"")
},disable:function(){this.disabled=true;
this.handle.className+=" disabled"
},setStep:function(x,y,snap){this.setValue(this.steps&&x>1?(x-1)/(this.steps-1):0,this.steps&&y>1?(y-1)/(this.steps-1):0,snap)
},setValue:function(x,y,snap){this.setTargetValue([x,y||0]);
if(snap){this.groupCopy(this.value.current,this.value.target)
}},startTap:function(target){if(this.disabled){return
}this.tapping=true;
this.setWrapperOffset();
this.setBounds();
if(target===undefined){target=[Cursor.x-this.offset.wrapper[0]-(this.handle.offsetWidth/2),Cursor.y-this.offset.wrapper[1]-(this.handle.offsetHeight/2)]
}this.setTargetOffset(target)
},stopTap:function(){if(this.disabled||!this.tapping){return
}this.tapping=false;
this.setTargetValue(this.value.current);
this.result()
},startDrag:function(){if(this.disabled){return
}this.setWrapperOffset();
this.setBounds();
this.offset.mouse=[Cursor.x-Position.get(this.handle)[0],Cursor.y-Position.get(this.handle)[1]];
this.dragging=true
},stopDrag:function(){if(this.disabled||!this.dragging){return
}this.dragging=false;
var target=this.groupClone(this.value.current);
if(this.slide){var ratioChange=this.change;
target[0]+=ratioChange[0]*4;
target[1]+=ratioChange[1]*4
}this.setTargetValue(target);
this.result()
},feedback:function(){var value=this.value.current;
if(this.snap&&this.steps>1){value=this.getClosestSteps(value)
}if(!this.groupCompare(value,this.value.prev)){if(typeof(this.animationCallback)=="function"){this.animationCallback(value[0],value[1])
}this.groupCopy(this.value.prev,value)
}},result:function(){if(typeof(this.callback)=="function"){this.callback(this.value.target[0],this.value.target[1])
}},animate:function(direct,first){if(direct&&!this.dragging){return
}if(this.dragging){var prevTarget=this.groupClone(this.value.target);
var offset=[Cursor.x-this.offset.wrapper[0]-this.offset.mouse[0],Cursor.y-this.offset.wrapper[1]-this.offset.mouse[1]];
this.setTargetOffset(offset,this.loose);
this.change=[this.value.target[0]-prevTarget[0],this.value.target[1]-prevTarget[1]]
}if(this.dragging||first){this.groupCopy(this.value.current,this.value.target)
}if(this.dragging||this.glide()||first){this.update();
this.feedback()
}},glide:function(){var diff=[this.value.target[0]-this.value.current[0],this.value.target[1]-this.value.current[1]];
if(!diff[0]&&!diff[1]){return false
}if(Math.abs(diff[0])>this.bounds.xStep||Math.abs(diff[1])>this.bounds.yStep){this.value.current[0]+=diff[0]*this.speed;
this.value.current[1]+=diff[1]*this.speed
}else{this.groupCopy(this.value.current,this.value.target)
}return true
},update:function(){if(!this.snap){this.offset.current=this.getOffsetsByRatios(this.value.current)
}else{this.offset.current=this.getOffsetsByRatios(this.getClosestSteps(this.value.current))
}this.show()
},show:function(){if(!this.groupCompare(this.offset.current,this.offset.prev)){if(this.horizontal){this.handle.style.left=String(this.offset.current[0])+"px"
}if(this.vertical){this.handle.style.top=String(this.offset.current[1])+"px"
}this.groupCopy(this.offset.prev,this.offset.current)
}},setTargetValue:function(value,loose){var target=loose?this.getLooseValue(value):this.getProperValue(value);
this.groupCopy(this.value.target,target);
this.offset.target=this.getOffsetsByRatios(target)
},setTargetOffset:function(offset,loose){var value=this.getRatiosByOffsets(offset);
var target=loose?this.getLooseValue(value):this.getProperValue(value);
this.groupCopy(this.value.target,target);
this.offset.target=this.getOffsetsByRatios(target)
},getLooseValue:function(value){var proper=this.getProperValue(value);
return[proper[0]+((value[0]-proper[0])/4),proper[1]+((value[1]-proper[1])/4)]
},getProperValue:function(value){var proper=this.groupClone(value);
proper[0]=Math.max(proper[0],0);
proper[1]=Math.max(proper[1],0);
proper[0]=Math.min(proper[0],1);
proper[1]=Math.min(proper[1],1);
if((!this.dragging&&!this.tapping)||this.snap){if(this.steps>1){proper=this.getClosestSteps(proper)
}}return proper
},getRatiosByOffsets:function(group){return[this.getRatioByOffset(group[0],this.bounds.xRange,this.bounds.x0),this.getRatioByOffset(group[1],this.bounds.yRange,this.bounds.y0)]
},getRatioByOffset:function(offset,range,padding){return range?(offset-padding)/range:0
},getOffsetsByRatios:function(group){return[this.getOffsetByRatio(group[0],this.bounds.xRange,this.bounds.x0),this.getOffsetByRatio(group[1],this.bounds.yRange,this.bounds.y0)]
},getOffsetByRatio:function(ratio,range,padding){return Math.round(ratio*range)+padding
},getClosestSteps:function(group){return[this.getClosestStep(group[0]),this.getClosestStep(group[1])]
},getClosestStep:function(value){var k=0;
var min=1;
for(var i=0;
i<=this.steps-1;
i++){if(Math.abs(this.stepRatios[i]-value)<min){min=Math.abs(this.stepRatios[i]-value);
k=i
}}return this.stepRatios[k]
},groupCompare:function(a,b){return a[0]==b[0]&&a[1]==b[1]
},groupCopy:function(a,b){a[0]=b[0];
a[1]=b[1]
},groupClone:function(a){return[a[0],a[1]]
},preventDefaults:function(e,selection){if(!e){e=window.event
}if(e.preventDefault){e.preventDefault()
}e.returnValue=false;
if(selection&&document.selection){document.selection.empty()
}},cancelEvent:function(e){if(!e){e=window.event
}if(e.stopPropagation){e.stopPropagation()
}e.cancelBubble=true
}};
if(!jQuery.browser){(function(){var matched,browser;
jQuery.uaMatch=function(ua){ua=ua.toLowerCase();
var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];
return{browser:match[1]||"",version:match[2]||"0"}
};
matched=jQuery.uaMatch(navigator.userAgent);
browser={};
if(matched.browser){browser[matched.browser]=true;
browser.version=matched.version
}if(browser.chrome){browser.webkit=true
}else{if(browser.webkit){browser.safari=true
}}jQuery.browser=browser
})();
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
}(function($){var types=["DOMMouseScroll","mousewheel"];
if($.event.fixHooks){for(var i=types.length;
i;
){$.event.fixHooks[types[--i]]=$.event.mouseHooks
}}$.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var i=types.length;
i;
){this.addEventListener(types[--i],handler,false)
}}else{this.onmousewheel=handler
}},teardown:function(){if(this.removeEventListener){for(var i=types.length;
i;
){this.removeEventListener(types[--i],handler,false)
}}else{this.onmousewheel=null
}}};
$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")
},unmousewheel:function(fn){return this.unbind("mousewheel",fn)
}});
function handler(event){var orgEvent=event||window.event,args=[].slice.call(arguments,1),delta=0,returnValue=true,deltaX=0,deltaY=0;
event=$.event.fix(orgEvent);
event.type="mousewheel";
if(orgEvent.wheelDelta){delta=orgEvent.wheelDelta/120
}if(orgEvent.detail){delta=-orgEvent.detail/3
}deltaY=delta;
if(orgEvent.axis!==undefined&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaY=0;
deltaX=-1*delta
}if(orgEvent.wheelDeltaY!==undefined){deltaY=orgEvent.wheelDeltaY/120
}if(orgEvent.wheelDeltaX!==undefined){deltaX=-1*orgEvent.wheelDeltaX/120
}args.unshift(event,delta,deltaX,deltaY);
return($.event.dispatch||$.event.handle).apply(this,args)
}})(jQuery)
})(jQuery,window,Handsontable);
!function(b){var c=function(e,d){this.$element=b(e);
this.options=b.extend({},b.fn.typeahead.defaults,d);
this.matcher=this.options.matcher||this.matcher;
this.sorter=this.options.sorter||this.sorter;
this.highlighter=this.options.highlighter||this.highlighter;
this.updater=this.options.updater||this.updater;
this.source=this.options.source;
this.$menu=b(this.options.menu);
this.shown=false;
this.listen()
};
c.prototype={constructor:c,select:function(){var d=this.$menu.find(".active").attr("data-value");
this.$element.val(this.updater(d)).change();
return this.hide()
},updater:function(d){return d
},show:function(){var d=b.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});
this.$menu.insertAfter(this.$element).css({top:d.top+d.height,left:d.left}).show();
this.shown=true;
return this
},hide:function(){this.$menu.hide();
this.shown=false;
return this
},lookup:function(e){var d;
this.query=this.$element.val();
if(!this.query||this.query.length<this.options.minLength){return this.shown?this.hide():this
}d=b.isFunction(this.source)?this.source(this.query,b.proxy(this.process,this)):this.source;
return d?this.process(d):this
},process:function(d){var e=this;
d=b.grep(d,function(f){return e.matcher(f)
});
d=this.sorter(d);
if(!d.length){return this.shown?this.hide():this
}return this.render(d.slice(0,this.options.items)).show()
},matcher:function(d){return ~d.toLowerCase().indexOf(this.query.toLowerCase())
},sorter:function(f){var g=[],e=[],d=[],h;
while(h=f.shift()){if(!h.toLowerCase().indexOf(this.query.toLowerCase())){g.push(h)
}else{if(~h.indexOf(this.query)){e.push(h)
}else{d.push(h)
}}}return g.concat(e,d)
},highlighter:function(d){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");
return d.replace(new RegExp("("+e+")","ig"),function(f,g){return"<strong>"+g+"</strong>"
})
},render:function(d){var e=this;
d=b(d).map(function(f,g){f=b(e.options.item).attr("data-value",g);
f.find("a").html(e.highlighter(g));
return f[0]
});
d.first().addClass("active");
this.$menu.html(d);
return this
},next:function(e){var f=this.$menu.find(".active").removeClass("active"),d=f.next();
if(!d.length){d=b(this.$menu.find("li")[0])
}d.addClass("active")
},prev:function(e){var f=this.$menu.find(".active").removeClass("active"),d=f.prev();
if(!d.length){d=this.$menu.find("li").last()
}d.addClass("active")
},listen:function(){this.$element.on("focus",b.proxy(this.focus,this)).on("blur",b.proxy(this.blur,this)).on("keypress",b.proxy(this.keypress,this)).on("keyup",b.proxy(this.keyup,this));
if(this.eventSupported("keydown")){this.$element.on("keydown",b.proxy(this.keydown,this))
}this.$menu.on("click",b.proxy(this.click,this)).on("mouseenter","li",b.proxy(this.mouseenter,this)).on("mouseleave","li",b.proxy(this.mouseleave,this))
},eventSupported:function(d){var e=d in this.$element;
if(!e){this.$element.setAttribute(d,"return;");
e=typeof this.$element[d]==="function"
}return e
},move:function(d){if(!this.shown){return
}switch(d.keyCode){case 9:case 13:case 27:d.preventDefault();
break;
case 38:d.preventDefault();
this.prev();
break;
case 40:d.preventDefault();
this.next();
break
}d.stopPropagation()
},keydown:function(d){this.suppressKeyPressRepeat=~b.inArray(d.keyCode,[40,38,9,13,27]);
this.move(d)
},keypress:function(d){if(this.suppressKeyPressRepeat){return
}this.move(d)
},keyup:function(d){switch(d.keyCode){case 40:case 38:case 16:case 17:case 18:break;
case 9:case 13:if(!this.shown){return
}this.select();
break;
case 27:if(!this.shown){return
}this.hide();
break;
default:this.lookup()
}d.stopPropagation();
d.preventDefault()
},focus:function(d){this.focused=true
},blur:function(d){this.focused=false;
if(!this.mousedover&&this.shown){this.hide()
}},click:function(d){d.stopPropagation();
d.preventDefault();
this.select();
this.$element.focus()
},mouseenter:function(d){this.mousedover=true;
this.$menu.find(".active").removeClass("active");
b(d.currentTarget).addClass("active")
},mouseleave:function(d){this.mousedover=false;
if(!this.focused&&this.shown){this.hide()
}}};
var a=b.fn.typeahead;
b.fn.typeahead=function(d){return this.each(function(){var g=b(this),f=g.data("typeahead"),e=typeof d=="object"&&d;
if(!f){g.data("typeahead",(f=new c(this,e)))
}if(typeof d=="string"){f[d]()
}})
};
b.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};
b.fn.typeahead.Constructor=c;
b.fn.typeahead.noConflict=function(){b.fn.typeahead=a;
return this
};
b(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(f){var d=b(this);
if(d.data("typeahead")){return
}d.typeahead(d.data())
})
}(window.jQuery);
(function(){var g,p="1.4.7",h={},f="en",k=null,e=(typeof module!=="undefined"&&module.exports);
function l(q){this._n=q
}function a(u,r,q){var t=Math.pow(10,r),s;
s=(Math.round(u*t)/t).toFixed(r);
if(q){var v=new RegExp("0{1,"+q+"}$");
s=s.replace(v,"")
}return s
}function c(s,r){var q;
if(r.indexOf("$")>-1){q=j(s,r)
}else{if(r.indexOf("%")>-1){q=i(s,r)
}else{if(r.indexOf(":")>-1){q=o(s,r)
}else{q=b(s,r)
}}}return q
}function d(r,x){if(x.indexOf(":")>-1){r._n=n(x)
}else{if(x===k){r._n=0
}else{var v=x;
if(h[f].delimiters.decimal!=="."){x=x.replace(/\./g,"").replace(h[f].delimiters.decimal,".")
}var z=new RegExp(h[f].abbreviations.thousand+"(?:\\)|(\\"+h[f].currency.symbol+")?(?:\\))?)?$"),u=new RegExp(h[f].abbreviations.million+"(?:\\)|(\\"+h[f].currency.symbol+")?(?:\\))?)?$"),t=new RegExp(h[f].abbreviations.billion+"(?:\\)|(\\"+h[f].currency.symbol+")?(?:\\))?)?$"),s=new RegExp(h[f].abbreviations.trillion+"(?:\\)|(\\"+h[f].currency.symbol+")?(?:\\))?)?$");
var w=["KB","MB","GB","TB","PB","EB","ZB","YB"],y=false;
for(var q=0;
q<=w.length;
q++){y=(x.indexOf(w[q])>-1)?Math.pow(1024,q+1):false;
if(y){break
}}r._n=((y)?y:1)*((v.match(z))?Math.pow(10,3):1)*((v.match(u))?Math.pow(10,6):1)*((v.match(t))?Math.pow(10,9):1)*((v.match(s))?Math.pow(10,12):1)*((x.indexOf("%")>-1)?0.01:1)*Number(((x.indexOf("(")>-1)?"-":"")+x.replace(/[^0-9\.-]+/g,""));
r._n=(y)?Math.ceil(r._n):r._n
}}return r._n
}function j(u,t){var r=(t.indexOf("$")<=1)?true:false;
var s="";
if(t.indexOf(" $")>-1){s=" ";
t=t.replace(" $","")
}else{if(t.indexOf("$ ")>-1){s=" ";
t=t.replace("$ ","")
}else{t=t.replace("$","")
}}var q=c(u,t);
if(r){if(q.indexOf("(")>-1||q.indexOf("-")>-1){q=q.split("");
q.splice(1,0,h[f].currency.symbol+s);
q=q.join("")
}else{q=h[f].currency.symbol+s+q
}}else{if(q.indexOf(")")>-1){q=q.split("");
q.splice(-1,0,s+h[f].currency.symbol);
q=q.join("")
}else{q=q+s+h[f].currency.symbol
}}return q
}function i(t,s){var r="";
if(s.indexOf(" %")>-1){r=" ";
s=s.replace(" %","")
}else{s=s.replace("%","")
}t._n=t._n*100;
var q=c(t,s);
if(q.indexOf(")")>-1){q=q.split("");
q.splice(-1,0,r+"%");
q=q.join("")
}else{q=q+r+"%"
}return q
}function o(u,s){var q=Math.floor(u._n/60/60),r=Math.floor((u._n-(q*60*60))/60),t=Math.round(u._n-(q*60*60)-(r*60));
return q+":"+((r<10)?"0"+r:r)+":"+((t<10)?"0"+t:t)
}function n(q){var r=q.split(":"),s=0;
if(r.length===3){s=s+(Number(r[0])*60*60);
s=s+(Number(r[1])*60);
s=s+Number(r[2])
}else{if(r.lenght===2){s=s+(Number(r[0])*60);
s=s+Number(r[1])
}}return Number(s)
}function b(s,D){var E=false,v=false,F="",G="",r="",H=Math.abs(s._n);
if(s._n===0&&k!==null){return k
}else{if(D.indexOf("(")>-1){E=true;
D=D.slice(1,-1)
}if(D.indexOf("a")>-1){if(D.indexOf(" a")>-1){F=" ";
D=D.replace(" a","")
}else{D=D.replace("a","")
}if(H>=Math.pow(10,12)){F=F+h[f].abbreviations.trillion;
s._n=s._n/Math.pow(10,12)
}else{if(H<Math.pow(10,12)&&H>=Math.pow(10,9)){F=F+h[f].abbreviations.billion;
s._n=s._n/Math.pow(10,9)
}else{if(H<Math.pow(10,9)&&H>=Math.pow(10,6)){F=F+h[f].abbreviations.million;
s._n=s._n/Math.pow(10,6)
}else{if(H<Math.pow(10,6)&&H>=Math.pow(10,3)){F=F+h[f].abbreviations.thousand;
s._n=s._n/Math.pow(10,3)
}}}}}if(D.indexOf("b")>-1){if(D.indexOf(" b")>-1){G=" ";
D=D.replace(" b","")
}else{D=D.replace("b","")
}var x=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],u,B;
for(var q=0;
q<=x.length;
q++){u=Math.pow(1024,q);
B=Math.pow(1024,q+1);
if(s._n>=u&&s._n<B){G=G+x[q];
if(u>0){s._n=s._n/u
}break
}}}if(D.indexOf("o")>-1){if(D.indexOf(" o")>-1){r=" ";
D=D.replace(" o","")
}else{D=D.replace("o","")
}r=r+h[f].ordinal(s._n)
}if(D.indexOf("[.]")>-1){v=true;
D=D.replace("[.]",".")
}var C=s._n.toString().split(".")[0],y=D.split(".")[1],z=D.indexOf(","),A="",t=false;
if(y){if(y.indexOf("[")>-1){y=y.replace("]","");
y=y.split("[");
A=a(s._n,(y[0].length+y[1].length),y[1].length)
}else{A=a(s._n,y.length)
}C=A.split(".")[0];
if(A.split(".")[1].length){A=h[f].delimiters.decimal+A.split(".")[1]
}else{A=""
}if(v&&Number(A)===0){A=""
}}else{C=a(s._n,null)
}if(C.indexOf("-")>-1){C=C.slice(1);
t=true
}if(z>-1){C=C.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+h[f].delimiters.thousands)
}if(D.indexOf(".")===0){C=""
}return((E&&t)?"(":"")+((!E&&t)?"-":"")+C+A+((r)?r:"")+((F)?F:"")+((G)?G:"")+((E&&t)?")":"")
}}g=function(q){if(g.isNumeral(q)){q=q.value()
}else{if(!Number(q)){q=0
}}return new l(Number(q))
};
g.version=p;
g.isNumeral=function(q){return q instanceof l
};
g.language=function(r,q){if(!r){return f
}if(r&&!q){f=r
}if(q||!h[r]){m(r,q)
}return g
};
g.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(r){var q=r%10;
return(~~(r%100/10)===1)?"th":(q===1)?"st":(q===2)?"nd":(q===3)?"rd":"th"
},currency:{symbol:"$"}});
g.zeroFormat=function(q){if(typeof(q)==="string"){k=q
}else{k=null
}};
function m(r,q){h[r]=q
}g.fn=l.prototype={clone:function(){return g(this)
},format:function(q){return c(this,q?q:g.defaultFormat)
},unformat:function(q){return d(this,q?q:g.defaultFormat)
},value:function(){return this._n
},valueOf:function(){return this._n
},set:function(q){this._n=Number(q);
return this
},add:function(q){this._n=this._n+Number(q);
return this
},subtract:function(q){this._n=this._n-Number(q);
return this
},multiply:function(q){this._n=this._n*Number(q);
return this
},divide:function(q){this._n=this._n/Number(q);
return this
},difference:function(q){var r=this._n-Number(q);
if(r<0){r=-r
}return r
}};
if(e){module.exports=g
}if(typeof ender==="undefined"){this["numeral"]=g
}if(typeof define==="function"&&define.amd){define([],function(){return g
})
}}).call(this);
/*!
 * jQuery contextMenu - Plugin for simple contextMenu handling
 *
 * Version: 1.5.25
 *
 * Authors: Rodney Rehm, Addy Osmani (patches for FF)
 * Web: http://medialize.github.com/jQuery-contextMenu/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 */
(function(k,f){k.support.htmlMenuitem=("HTMLMenuItemElement" in window);
k.support.htmlCommand=("HTMLCommandElement" in window);
k.support.eventSelectstart=("onselectstart" in document.documentElement);
var i=null,g=false,d=k(window),a=0,b={},j={},n={},h={selector:null,appendTo:null,trigger:"right",autoHide:false,delay:200,determinePosition:function(r){if(k.ui&&k.ui.position){r.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none")
}else{var s=this.offset();
s.top+=this.outerHeight();
s.left+=this.outerWidth()/2-r.outerWidth()/2;
r.css(s)
}},position:function(t,A,w){var v=this,u;
if(!A&&!w){t.determinePosition.call(this,t.$menu);
return
}else{if(A==="maintain"&&w==="maintain"){u=t.$menu.position()
}else{var z=t.$trigger.parents().andSelf().filter(function(){return k(this).css("position")=="fixed"
}).length;
if(z){w-=d.scrollTop();
A-=d.scrollLeft()
}u={top:w,left:A}
}}var r=d.scrollTop()+d.height(),B=d.scrollLeft()+d.width(),C=t.$menu.height(),s=t.$menu.width();
if(u.top+C>r){u.top-=C
}if(u.left+s>B){u.left-=s
}t.$menu.css(u)
},positionSubmenu:function(r){if(k.ui&&k.ui.position){r.css("display","block").position({my:"left top",at:"right top",of:this,collision:"fit"}).css("display","")
}else{var s={top:0,left:this.outerWidth()};
r.css(s)
}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:k.noop,hide:k.noop},callback:null,items:{}},o={timer:null,pageX:null,pageY:null},q=function(t){var s=0,r=t;
while(true){s=Math.max(s,parseInt(r.css("z-index"),10)||0);
r=r.parent();
if(!r||!r.length||"html body".indexOf(r.prop("nodeName").toLowerCase())>-1){break
}}return s
},m={abortevent:function(r){r.preventDefault();
r.stopImmediatePropagation()
},contextmenu:function(t){var s=k(this);
t.preventDefault();
t.stopImmediatePropagation();
if(t.data.trigger!="right"&&t.originalEvent){return
}if(!s.hasClass("context-menu-disabled")){i=s;
if(t.data.build){var r=t.data.build(i,t);
if(r===false){return
}t.data=k.extend(true,{},h,t.data,r||{});
if(!t.data.items||k.isEmptyObject(t.data.items)){if(window.console){(console.error||console.log)("No items specified to show in contextMenu")
}throw new Error("No Items sepcified")
}t.data.$trigger=i;
l.create(t.data)
}l.show.call(s,t.data,t.pageX,t.pageY)
}},click:function(r){r.preventDefault();
r.stopImmediatePropagation();
k(this).trigger(k.Event("contextmenu",{data:r.data,pageX:r.pageX,pageY:r.pageY}))
},mousedown:function(s){var r=k(this);
if(i&&i.length&&!i.is(r)){i.data("contextMenu").$menu.trigger("contextmenu:hide")
}if(s.button==2){i=r.data("contextMenuActive",true)
}},mouseup:function(s){var r=k(this);
if(r.data("contextMenuActive")&&i&&i.length&&i.is(r)&&!r.hasClass("context-menu-disabled")){s.preventDefault();
s.stopImmediatePropagation();
i=r;
r.trigger(k.Event("contextmenu",{data:s.data,pageX:s.pageX,pageY:s.pageY}))
}r.removeData("contextMenuActive")
},mouseenter:function(t){var s=k(this),r=k(t.relatedTarget),u=k(document);
if(r.is(".context-menu-list")||r.closest(".context-menu-list").length){return
}if(i&&i.length){return
}o.pageX=t.pageX;
o.pageY=t.pageY;
o.data=t.data;
u.on("mousemove.contextMenuShow",m.mousemove);
o.timer=setTimeout(function(){o.timer=null;
u.off("mousemove.contextMenuShow");
i=s;
s.trigger(k.Event("contextmenu",{data:o.data,pageX:o.pageX,pageY:o.pageY}))
},t.data.delay)
},mousemove:function(r){o.pageX=r.pageX;
o.pageY=r.pageY
},mouseleave:function(s){var r=k(s.relatedTarget);
if(r.is(".context-menu-list")||r.closest(".context-menu-list").length){return
}try{clearTimeout(o.timer)
}catch(s){}o.timer=null
},layerClick:function(u){var w=k(this),A=w.data("contextMenuRoot"),s=false,t=u.button,B=u.pageX,z=u.pageY,v,r,C;
u.preventDefault();
u.stopImmediatePropagation();
w.on("mouseup",function(){s=true
});
setTimeout(function(){var D,y;
if((A.trigger=="left"&&t==0)||(A.trigger=="right"&&t==2)){if(document.elementFromPoint){A.$layer.hide();
v=document.elementFromPoint(B-d.scrollLeft(),z-d.scrollTop());
A.$layer.show();
C=[];
for(var x in b){C.push(x)
}v=k(v).closest(C.join(", "));
if(v.length){if(v.is(A.$trigger[0])){A.position.call(A.$trigger,A,B,z);
return
}}}else{r=A.$trigger.offset();
D=k(window);
r.top+=D.scrollTop();
if(r.top<=u.pageY){r.left+=D.scrollLeft();
if(r.left<=u.pageX){r.bottom=r.top+A.$trigger.outerHeight();
if(r.bottom>=u.pageY){r.right=r.left+A.$trigger.outerWidth();
if(r.right>=u.pageX){A.position.call(A.$trigger,A,B,z);
return
}}}}}}y=function(E){if(E){E.preventDefault();
E.stopImmediatePropagation()
}A.$menu.trigger("contextmenu:hide");
if(v&&v.length){setTimeout(function(){v.contextMenu({x:B,y:z})
},50)
}};
if(s){y()
}else{w.on("mouseup",y)
}},50)
},keyStop:function(s,r){if(!r.isInput){s.preventDefault()
}s.stopPropagation()
},key:function(w){var u=i.data("contextMenu")||{},s=u.$menu.children(),x;
switch(w.keyCode){case 9:case 38:m.keyStop(w,u);
if(u.isInput){if(w.keyCode==9&&w.shiftKey){w.preventDefault();
u.$selected&&u.$selected.find("input, textarea, select").blur();
u.$menu.trigger("prevcommand");
return
}else{if(w.keyCode==38&&u.$selected.find("input, textarea, select").prop("type")=="checkbox"){w.preventDefault();
return
}}}else{if(w.keyCode!=9||w.shiftKey){u.$menu.trigger("prevcommand");
return
}}case 40:m.keyStop(w,u);
if(u.isInput){if(w.keyCode==9){w.preventDefault();
u.$selected&&u.$selected.find("input, textarea, select").blur();
u.$menu.trigger("nextcommand");
return
}else{if(w.keyCode==40&&u.$selected.find("input, textarea, select").prop("type")=="checkbox"){w.preventDefault();
return
}}}else{u.$menu.trigger("nextcommand");
return
}break;
case 37:m.keyStop(w,u);
if(u.isInput||!u.$selected||!u.$selected.length){break
}if(!u.$selected.parent().hasClass("context-menu-root")){var v=u.$selected.parent().parent();
u.$selected.trigger("contextmenu:blur");
u.$selected=v;
return
}break;
case 39:m.keyStop(w,u);
if(u.isInput||!u.$selected||!u.$selected.length){break
}var t=u.$selected.data("contextMenu")||{};
if(t.$menu&&u.$selected.hasClass("context-menu-submenu")){u.$selected=null;
t.$selected=null;
t.$menu.trigger("nextcommand");
return
}break;
case 35:case 36:if(u.$selected&&u.$selected.find("input, textarea, select").length){return
}else{(u.$selected&&u.$selected.parent()||u.$menu).children(":not(.disabled, .not-selectable)")[w.keyCode==36?"first":"last"]().trigger("contextmenu:focus");
w.preventDefault();
return
}break;
case 13:m.keyStop(w,u);
if(u.isInput){if(u.$selected&&!u.$selected.is("textarea, select")){w.preventDefault();
return
}break
}u.$selected&&u.$selected.trigger("mouseup");
return;
case 32:case 33:case 34:m.keyStop(w,u);
return;
case 27:m.keyStop(w,u);
u.$menu.trigger("contextmenu:hide");
return;
default:var r=(String.fromCharCode(w.keyCode)).toUpperCase();
if(u.accesskeys[r]){u.accesskeys[r].$node.trigger(u.accesskeys[r].$menu?"contextmenu:focus":"mouseup");
return
}break
}w.stopPropagation();
u.$selected&&u.$selected.trigger(w)
},prevItem:function(v){v.stopPropagation();
var u=k(this).data("contextMenu")||{};
if(u.$selected){var r=u.$selected;
u=u.$selected.parent().data("contextMenu")||{};
u.$selected=r
}var t=u.$menu.children(),s=!u.$selected||!u.$selected.prev().length?t.last():u.$selected.prev(),x=s;
while(s.hasClass("disabled")||s.hasClass("not-selectable")){if(s.prev().length){s=s.prev()
}else{s=t.last()
}if(s.is(x)){return
}}if(u.$selected){m.itemMouseleave.call(u.$selected.get(0),v)
}m.itemMouseenter.call(s.get(0),v);
var w=s.find("input, textarea, select");
if(w.length){w.focus()
}},nextItem:function(v){v.stopPropagation();
var u=k(this).data("contextMenu")||{};
if(u.$selected){var r=u.$selected;
u=u.$selected.parent().data("contextMenu")||{};
u.$selected=r
}var t=u.$menu.children(),s=!u.$selected||!u.$selected.next().length?t.first():u.$selected.next(),x=s;
while(s.hasClass("disabled")||s.hasClass("not-selectable")){if(s.next().length){s=s.next()
}else{s=t.first()
}if(s.is(x)){return
}}if(u.$selected){m.itemMouseleave.call(u.$selected.get(0),v)
}m.itemMouseenter.call(s.get(0),v);
var w=s.find("input, textarea, select");
if(w.length){w.focus()
}},focusInput:function(v){var u=k(this).closest(".context-menu-item"),t=u.data(),s=t.contextMenu,r=t.contextMenuRoot;
r.$selected=s.$selected=u;
r.isInput=s.isInput=true
},blurInput:function(v){var u=k(this).closest(".context-menu-item"),t=u.data(),s=t.contextMenu,r=t.contextMenuRoot;
r.isInput=s.isInput=false
},menuMouseenter:function(s){var r=k(this).data().contextMenuRoot;
r.hovering=true
},menuMouseleave:function(s){var r=k(this).data().contextMenuRoot;
if(r.$layer&&r.$layer.is(s.relatedTarget)){r.hovering=false
}},itemMouseenter:function(v){var u=k(this),t=u.data(),s=t.contextMenu,r=t.contextMenuRoot;
r.hovering=true;
if(v&&r.$layer&&r.$layer.is(v.relatedTarget)){v.preventDefault();
v.stopImmediatePropagation()
}(s.$menu?s:r).$menu.children(".hover").trigger("contextmenu:blur");
if(u.hasClass("disabled")||u.hasClass("not-selectable")){s.$selected=null;
return
}u.trigger("contextmenu:focus")
},itemMouseleave:function(v){var u=k(this),t=u.data(),s=t.contextMenu,r=t.contextMenuRoot;
if(r!==s&&r.$layer&&r.$layer.is(v.relatedTarget)){r.$selected&&r.$selected.trigger("contextmenu:blur");
v.preventDefault();
v.stopImmediatePropagation();
r.$selected=s.$selected=s.$node;
return
}u.trigger("contextmenu:blur")
},itemClick:function(w){var v=k(this),u=v.data(),t=u.contextMenu,r=u.contextMenuRoot,s=u.contextMenuKey,x;
if(!t.items[s]||v.hasClass("disabled")||v.hasClass("context-menu-submenu")){return
}w.preventDefault();
w.stopImmediatePropagation();
if(k.isFunction(r.callbacks[s])){x=r.callbacks[s]
}else{if(k.isFunction(r.callback)){x=r.callback
}else{return
}}if(x.call(r.$trigger,s,r)!==false){r.$menu.trigger("contextmenu:hide")
}else{if(r.$menu.parent().length){l.update.call(r.$trigger,r)
}}},inputClick:function(r){r.stopImmediatePropagation()
},hideMenu:function(t,s){var r=k(this).data("contextMenuRoot");
l.hide.call(r.$trigger,r,s&&s.force)
},focusItem:function(v){v.stopPropagation();
var u=k(this),t=u.data(),s=t.contextMenu,r=t.contextMenuRoot;
u.addClass("hover").siblings(".hover").trigger("contextmenu:blur");
s.$selected=r.$selected=u;
if(s.$node){r.positionSubmenu.call(s.$node,s.$menu)
}},blurItem:function(v){v.stopPropagation();
var u=k(this),t=u.data(),s=t.contextMenu,r=t.contextMenuRoot;
u.removeClass("hover");
s.$selected=null
}},l={show:function(t,r,z){var u=k(this),v,s={};
k("#context-menu-layer").trigger("mousedown");
t.$trigger=u;
if(t.events.show.call(u,t)===false){i=null;
return
}l.update.call(u,t);
t.position.call(u,t,r,z);
if(t.zIndex){s.zIndex=q(u)+t.zIndex
}l.layer.call(t.$menu,t,s.zIndex);
t.$menu.find("ul").css("zIndex",s.zIndex+1);
t.$menu.css(s)[t.animation.show](t.animation.duration);
u.data("contextMenu",t);
k(document).off("keydown.contextMenu").on("keydown.contextMenu",m.key);
if(t.autoHide){var w=u.position();
w.right=w.left+u.outerWidth();
w.bottom=w.top+this.outerHeight();
k(document).on("mousemove.contextMenuAutoHide",function(x){if(t.$layer&&!t.hovering&&(!(x.pageX>=w.left&&x.pageX<=w.right)||!(x.pageY>=w.top&&x.pageY<=w.bottom))){t.$menu.trigger("contextmenu:hide")
}})
}},hide:function(r,s){var u=k(this);
if(!r){r=u.data("contextMenu")||{}
}if(!s&&r.events&&r.events.hide.call(u,r)===false){return
}if(r.$layer){setTimeout((function(v){return function(){v.remove()
}
})(r.$layer),10);
try{delete r.$layer
}catch(t){r.$layer=null
}}i=null;
r.$menu.find(".hover").trigger("contextmenu:blur");
r.$selected=null;
k(document).off(".contextMenuAutoHide").off("keydown.contextMenu");
r.$menu&&r.$menu[r.animation.hide](r.animation.duration,function(){if(r.build){r.$menu.remove();
k.each(r,function(v,w){switch(v){case"ns":case"selector":case"build":case"trigger":return true;
default:r[v]=f;
try{delete r[v]
}catch(x){}return true
}})
}})
},create:function(s,r){if(r===f){r=s
}s.$menu=k('<ul class="context-menu-list '+(s.className||"")+'"></ul>').data({contextMenu:s,contextMenuRoot:r});
k.each(["callbacks","commands","inputs"],function(u,t){s[t]={};
if(!r[t]){r[t]={}
}});
r.accesskeys||(r.accesskeys={});
k.each(s.items,function(v,w){var A=k('<li class="context-menu-item '+(w.className||"")+'"></li>'),t=null,z=null;
w.$node=A.data({contextMenu:s,contextMenuRoot:r,contextMenuKey:v});
if(w.accesskey){var x=c(w.accesskey);
for(var u=0,y;
y=x[u];
u++){if(!r.accesskeys[y]){r.accesskeys[y]=w;
w._name=w.name.replace(new RegExp("("+y+")","i"),'<span class="context-menu-accesskey">$1</span>');
break
}}}if(typeof w=="string"){A.addClass("context-menu-separator not-selectable")
}else{if(w.type&&n[w.type]){n[w.type].call(A,w,s,r);
k.each([s,r],function(C,B){B.commands[v]=w;
if(k.isFunction(w.callback)){B.callbacks[v]=w.callback
}})
}else{if(w.type=="html"){A.addClass("context-menu-html not-selectable")
}else{if(w.type){t=k("<label></label>").appendTo(A);
k("<span></span>").html(w._name||w.name).appendTo(t);
A.addClass("context-menu-input");
s.hasTypes=true;
k.each([s,r],function(C,B){B.commands[v]=w;
B.inputs[v]=w
})
}else{if(w.items){w.type="sub"
}}}switch(w.type){case"text":z=k('<input type="text" value="1" name="context-menu-input-'+v+'" value="">').val(w.value||"").appendTo(t);
break;
case"textarea":z=k('<textarea name="context-menu-input-'+v+'"></textarea>').val(w.value||"").appendTo(t);
if(w.height){z.height(w.height)
}break;
case"checkbox":z=k('<input type="checkbox" value="1" name="context-menu-input-'+v+'" value="">').val(w.value||"").prop("checked",!!w.selected).prependTo(t);
break;
case"radio":z=k('<input type="radio" value="1" name="context-menu-input-'+w.radio+'" value="">').val(w.value||"").prop("checked",!!w.selected).prependTo(t);
break;
case"select":z=k('<select name="context-menu-input-'+v+'">').appendTo(t);
if(w.options){k.each(w.options,function(B,C){k("<option></option>").val(B).text(C).appendTo(z)
});
z.val(w.selected)
}break;
case"sub":k("<span></span>").html(w._name||w.name).appendTo(A);
w.appendTo=w.$node;
l.create(w,r);
A.data("contextMenu",w).addClass("context-menu-submenu");
w.callback=null;
break;
case"html":k(w.html).appendTo(A);
break;
default:k.each([s,r],function(C,B){B.commands[v]=w;
if(k.isFunction(w.callback)){B.callbacks[v]=w.callback
}});
k("<span></span>").html(w._name||w.name||"").appendTo(A);
break
}if(w.type&&w.type!="sub"&&w.type!="html"){z.on("focus",m.focusInput).on("blur",m.blurInput);
if(w.events){z.on(w.events,s)
}}if(w.icon){A.addClass("icon icon-"+w.icon)
}}}w.$input=z;
w.$label=t;
A.appendTo(s.$menu);
if(!s.hasTypes&&k.support.eventSelectstart){A.on("selectstart.disableTextSelect",m.abortevent)
}});
if(!s.$node){s.$menu.css("display","none").addClass("context-menu-root")
}s.$menu.appendTo(s.appendTo||document.body)
},update:function(s,r){var t=this;
if(r===f){r=s;
s.$menu.find("ul").andSelf().css({position:"static",display:"block"}).each(function(){var u=k(this);
u.width(u.css("position","absolute").width()).css("position","static")
}).css({position:"",display:""})
}s.$menu.children().each(function(){var u=k(this),v=u.data("contextMenuKey"),x=s.items[v],w=(k.isFunction(x.disabled)&&x.disabled.call(t,v,r))||x.disabled===true;
u[w?"addClass":"removeClass"]("disabled");
if(x.type){u.find("input, select, textarea").prop("disabled",w);
switch(x.type){case"text":case"textarea":x.$input.val(x.value||"");
break;
case"checkbox":case"radio":x.$input.val(x.value||"").prop("checked",!!x.selected);
break;
case"select":x.$input.val(x.selected||"");
break
}}if(x.$menu){l.update.call(t,x,r)
}})
},layer:function(s,t){var r=s.$layer=k('<div id="context-menu-layer" style="position:fixed; z-index:'+t+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:d.height(),width:d.width(),display:"block"}).data("contextMenuRoot",s).insertBefore(this).on("contextmenu",m.abortevent).on("mousedown",m.layerClick);
if(!k.support.fixedPosition){r.css({position:"absolute",height:k(document).height()})
}return r
}};
function c(w){var u=w.split(/\s+/),v=[];
for(var s=0,r;
r=u[s];
s++){r=r[0].toUpperCase();
v.push(r)
}return v
}k.fn.contextMenu=function(r){if(r===f){this.first().trigger("contextmenu")
}else{if(r.x&&r.y){this.first().trigger(k.Event("contextmenu",{pageX:r.x,pageY:r.y}))
}else{if(r==="hide"){var s=this.data("contextMenu").$menu;
s&&s.trigger("contextmenu:hide")
}else{if(r){this.removeClass("context-menu-disabled")
}else{if(!r){this.addClass("context-menu-disabled")
}}}}}return this
};
k.contextMenu=function(r,s){if(typeof r!="string"){s=r;
r="create"
}if(typeof s=="string"){s={selector:s}
}else{if(s===f){s={}
}}var w=k.extend(true,{},h,s||{}),v=k(document);
switch(r){case"create":if(!w.selector){throw new Error("No selector specified")
}if(w.selector.match(/.context-menu-(list|item|input)($|\s)/)){throw new Error('Cannot bind to selector "'+w.selector+'" as it contains a reserved className')
}if(!w.build&&(!w.items||k.isEmptyObject(w.items))){throw new Error("No Items sepcified")
}a++;
w.ns=".contextMenu"+a;
b[w.selector]=w.ns;
j[w.ns]=w;
if(!w.trigger){w.trigger="right"
}if(!g){v.on({"contextmenu:hide.contextMenu":m.hideMenu,"prevcommand.contextMenu":m.prevItem,"nextcommand.contextMenu":m.nextItem,"contextmenu.contextMenu":m.abortevent,"mouseenter.contextMenu":m.menuMouseenter,"mouseleave.contextMenu":m.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",m.inputClick).on({"mouseup.contextMenu":m.itemClick,"contextmenu:focus.contextMenu":m.focusItem,"contextmenu:blur.contextMenu":m.blurItem,"contextmenu.contextMenu":m.abortevent,"mouseenter.contextMenu":m.itemMouseenter,"mouseleave.contextMenu":m.itemMouseleave},".context-menu-item");
g=true
}v.on("contextmenu"+w.ns,w.selector,w,m.contextmenu);
switch(w.trigger){case"hover":v.on("mouseenter"+w.ns,w.selector,w,m.mouseenter).on("mouseleave"+w.ns,w.selector,w,m.mouseleave);
break;
case"left":v.on("click"+w.ns,w.selector,w,m.click);
break
}if(!w.build){l.create(w)
}break;
case"destroy":if(!w.selector){v.off(".contextMenu .contextMenuAutoHide");
k.each(b,function(x,y){v.off(y)
});
b={};
j={};
a=0;
g=false;
k("#context-menu-layer, .context-menu-list").remove()
}else{if(b[w.selector]){var t=k(".context-menu-list").filter(":visible");
if(t.length&&t.data().contextMenuRoot.$trigger.is(w.selector)){t.trigger("contextmenu:hide",{force:true})
}try{if(j[b[w.selector]].$menu){j[b[w.selector]].$menu.remove()
}delete j[b[w.selector]]
}catch(u){j[b[w.selector]]=null
}v.off(b[w.selector])
}}break;
case"html5":if((!k.support.htmlCommand&&!k.support.htmlMenuitem)||(typeof s=="boolean"&&s)){k('menu[type="context"]').each(function(){if(this.id){k.contextMenu({selector:"[contextmenu="+this.id+"]",items:k.contextMenu.fromMenu(this)})
}}).css("display","none")
}break;
default:throw new Error('Unknown operation "'+r+'"')
}return this
};
k.contextMenu.setInputValues=function(r,s){if(s===f){s={}
}k.each(r.inputs,function(t,u){switch(u.type){case"text":case"textarea":u.value=s[t]||"";
break;
case"checkbox":u.selected=s[t]?true:false;
break;
case"radio":u.selected=(s[u.radio]||"")==u.value?true:false;
break;
case"select":u.selected=s[t]||"";
break
}})
};
k.contextMenu.getInputValues=function(r,s){if(s===f){s={}
}k.each(r.inputs,function(t,u){switch(u.type){case"text":case"textarea":case"select":s[t]=u.$input.val();
break;
case"checkbox":s[t]=u.$input.prop("checked");
break;
case"radio":if(u.$input.prop("checked")){s[u.radio]=u.value
}break
}});
return s
};
function e(r){return(r.id&&k('label[for="'+r.id+'"]').val())||r.name
}function p(t,s,r){if(!r){r=0
}s.each(function(){var u=k(this),x=this,y=this.nodeName.toLowerCase(),v,w;
if(y=="label"&&u.find("input, textarea, select").length){v=u.text();
u=u.children().first();
x=u.get(0);
y=x.nodeName.toLowerCase()
}switch(y){case"menu":w={name:u.attr("label"),items:{}};
r=p(w.items,u.children(),r);
break;
case"a":case"button":w={name:u.text(),disabled:!!u.attr("disabled"),callback:(function(){return function(){u.click()
}
})()};
break;
case"menuitem":case"command":switch(u.attr("type")){case f:case"command":case"menuitem":w={name:u.attr("label"),disabled:!!u.attr("disabled"),callback:(function(){return function(){u.click()
}
})()};
break;
case"checkbox":w={type:"checkbox",disabled:!!u.attr("disabled"),name:u.attr("label"),selected:!!u.attr("checked")};
break;
case"radio":w={type:"radio",disabled:!!u.attr("disabled"),name:u.attr("label"),radio:u.attr("radiogroup"),value:u.attr("id"),selected:!!u.attr("checked")};
break;
default:w=f
}break;
case"hr":w="-------";
break;
case"input":switch(u.attr("type")){case"text":w={type:"text",name:v||e(x),disabled:!!u.attr("disabled"),value:u.val()};
break;
case"checkbox":w={type:"checkbox",name:v||e(x),disabled:!!u.attr("disabled"),selected:!!u.attr("checked")};
break;
case"radio":w={type:"radio",name:v||e(x),disabled:!!u.attr("disabled"),radio:!!u.attr("name"),value:u.val(),selected:!!u.attr("checked")};
break;
default:w=f;
break
}break;
case"select":w={type:"select",name:v||e(x),disabled:!!u.attr("disabled"),selected:u.val(),options:{}};
u.children().each(function(){w.options[this.value]=k(this).text()
});
break;
case"textarea":w={type:"textarea",name:v||e(x),disabled:!!u.attr("disabled"),value:u.val()};
break;
case"label":break;
default:w={type:"html",html:u.clone(true)};
break
}if(w){r++;
t["key"+r]=w
}});
return r
}k.contextMenu.fromMenu=function(s){var t=k(s),r={};
p(r,t.children());
return r
};
k.contextMenu.defaults=h;
k.contextMenu.types=n
})(jQuery);(function(b,c,a){b.plugin2("spreadsheet",{_create:function(g){var e=b(g),d=e.attr("data-input-name"),i=[],f,h;
e.find("tr").each(function(){var j=[];
i.push(j);
b(this).find("td").each(function(){j.push(b(this).text())
})
});
if(i.length===0){i.push([""])
}f=b("<div/>",{});
h=b("<input/>",{type:"hidden",name:d+".json"});
e.after(f);
e.after(h);
e.remove();
f.handsontable({data:i,rowHeaders:true,colHeaders:true,minSpareRows:1,minSpareCols:1,fillHandle:false,contextMenu:true,onChange:function(){h.val(JSON.stringify(i))
}})
}})
})(jQuery,window);(function(d,b,g){var e=d.L,a={};
a.version="0.6.4";
if(typeof module==="object"&&typeof module.exports==="object"){module.exports=a
}else{if(typeof define==="function"&&define.amd){define(a)
}}a.noConflict=function(){d.L=e;
return this
};
d.L=a;
a.Util={extend:function(m){var l=Array.prototype.slice.call(arguments,1),n,k,h,o;
for(k=0,h=l.length;
k<h;
k++){o=l[k]||{};
for(n in o){if(o.hasOwnProperty(n)){m[n]=o[n]
}}}return m
},bind:function(i,j){var h=arguments.length>2?Array.prototype.slice.call(arguments,2):null;
return function(){return i.apply(j,h||arguments)
}
},stamp:(function(){var i=0,h="_leaflet_id";
return function(j){j[h]=j[h]||++i;
return j[h]
}
}()),invokeEach:function(l,m,k){var j,h;
if(typeof l==="object"){h=Array.prototype.slice.call(arguments,3);
for(j in l){m.apply(k,[j,l[j]].concat(h))
}return true
}return false
},limitExecByInterval:function(k,m,j){var i,l;
return function h(){var n=arguments;
if(i){l=true;
return
}i=true;
setTimeout(function(){i=false;
if(l){h.apply(j,n);
l=false
}},m);
k.apply(j,n)
}
},falseFn:function(){return false
},formatNum:function(h,j){var i=Math.pow(10,j||5);
return Math.round(h*i)/i
},trim:function(h){return h.trim?h.trim():h.replace(/^\s+|\s+$/g,"")
},splitWords:function(h){return a.Util.trim(h).split(/\s+/)
},setOptions:function(i,h){i.options=a.extend({},i.options,h);
return i.options
},getParamString:function(l,h,j){var m=[];
for(var k in l){m.push(encodeURIComponent(j?k.toUpperCase():k)+"="+encodeURIComponent(l[k]))
}return((!h||h.indexOf("?")===-1)?"?":"&")+m.join("&")
},template:function(i,h){return i.replace(/\{ *([\w_]+) *\}/g,function(l,j){var k=h[j];
if(k===g){throw new Error("No value provided for variable "+l)
}else{if(typeof k==="function"){k=k(h)
}}return k
})
},isArray:function(h){return(Object.prototype.toString.call(h)==="[object Array]")
},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};
(function(){function k(m){var n,o,p=["webkit","moz","o","ms"];
for(n=0;
n<p.length&&!o;
n++){o=d[p[n]+m]
}return o
}var l=0;
function i(m){var o=+new Date(),n=Math.max(0,16-(o-l));
l=o+n;
return d.setTimeout(m,n)
}var h=d.requestAnimationFrame||k("RequestAnimationFrame")||i;
var j=d.cancelAnimationFrame||k("CancelAnimationFrame")||k("CancelRequestAnimationFrame")||function(m){d.clearTimeout(m)
};
a.Util.requestAnimFrame=function(p,o,m,n){p=a.bind(p,o);
if(m&&h===i){p()
}else{return h.call(d,p,n)
}};
a.Util.cancelAnimFrame=function(m){if(m){j.call(d,m)
}}
}());
a.extend=a.Util.extend;
a.bind=a.Util.bind;
a.stamp=a.Util.stamp;
a.setOptions=a.Util.setOptions;
a.Class=function(){};
a.Class.extend=function(k){var n=function(){if(this.initialize){this.initialize.apply(this,arguments)
}if(this._initHooks){this.callInitHooks()
}};
var m=function(){};
m.prototype=this.prototype;
var l=new m();
l.constructor=n;
n.prototype=l;
for(var h in this){if(this.hasOwnProperty(h)&&h!=="prototype"){n[h]=this[h]
}}if(k.statics){a.extend(n,k.statics);
delete k.statics
}if(k.includes){a.Util.extend.apply(null,[l].concat(k.includes));
delete k.includes
}if(k.options&&l.options){k.options=a.extend({},l.options,k.options)
}a.extend(l,k);
l._initHooks=[];
var j=this;
n.__super__=j.prototype;
l.callInitHooks=function(){if(this._initHooksCalled){return
}if(j.prototype.callInitHooks){j.prototype.callInitHooks.call(this)
}this._initHooksCalled=true;
for(var p=0,o=l._initHooks.length;
p<o;
p++){l._initHooks[p].call(this)
}};
return n
};
a.Class.include=function(h){a.extend(this.prototype,h)
};
a.Class.mergeOptions=function(h){a.extend(this.prototype.options,h)
};
a.Class.addInitHook=function(i){var h=Array.prototype.slice.call(arguments,1);
var j=typeof i==="function"?i:function(){this[i].apply(this,h)
};
this.prototype._initHooks=this.prototype._initHooks||[];
this.prototype._initHooks.push(j)
};
var f="_leaflet_events";
a.Mixin={};
a.Mixin.Events={addEventListener:function(n,s,j){if(a.Util.invokeEach(n,this.addEventListener,this,s,j)){return this
}var t=this[f]=this[f]||{},m=j&&a.stamp(j),l,o,h,r,k,q,p;
n=a.Util.splitWords(n);
for(l=0,o=n.length;
l<o;
l++){h={action:s,context:j||this};
r=n[l];
if(j){k=r+"_idx";
q=k+"_len";
p=t[k]=t[k]||{};
if(!p[m]){p[m]=[];
t[q]=(t[q]||0)+1
}p[m].push(h)
}else{t[r]=t[r]||[];
t[r].push(h)
}}return this
},hasEventListeners:function(i){var h=this[f];
return !!h&&((i in h&&h[i].length>0)||(i+"_idx" in h&&h[i+"_idx_len"]>0))
},removeEventListener:function(p,v,h){if(!this[f]){return this
}if(!p){return this.clearAllEventListeners()
}if(a.Util.invokeEach(p,this.removeEventListener,this,v,h)){return this
}var w=this[f],n=h&&a.stamp(h),m,q,u,t,k,l,s,r,o;
p=a.Util.splitWords(p);
for(m=0,q=p.length;
m<q;
m++){u=p[m];
l=u+"_idx";
s=l+"_len";
r=w[l];
if(!v){delete w[u];
delete w[l]
}else{t=h&&r?r[n]:w[u];
if(t){for(k=t.length-1;
k>=0;
k--){if((t[k].action===v)&&(!h||(t[k].context===h))){o=t.splice(k,1);
o[0].action=a.Util.falseFn
}}if(h&&r&&(t.length===0)){delete r[n];
w[s]--
}}}}return this
},clearAllEventListeners:function(){delete this[f];
return this
},fireEvent:function(o,j){if(!this.hasEventListeners(o)){return this
}var h=a.Util.extend({},j,{type:o,target:this});
var q=this[f],p,k,m,n,l;
if(q[o]){p=q[o].slice();
for(k=0,m=p.length;
k<m;
k++){p[k].action.call(p[k].context||this,h)
}}n=q[o+"_idx"];
for(l in n){p=n[l].slice();
if(p){for(k=0,m=p.length;
k<m;
k++){p[k].action.call(p[k].context||this,h)
}}}return this
},addOneTimeEventListener:function(i,k,h){if(a.Util.invokeEach(i,this.addOneTimeEventListener,this,k,h)){return this
}var j=a.bind(function(){this.removeEventListener(i,k,h).removeEventListener(i,j,h)
},this);
return this.addEventListener(i,k,h).addEventListener(i,j,h)
}};
a.Mixin.Events.on=a.Mixin.Events.addEventListener;
a.Mixin.Events.off=a.Mixin.Events.removeEventListener;
a.Mixin.Events.once=a.Mixin.Events.addOneTimeEventListener;
a.Mixin.Events.fire=a.Mixin.Events.fireEvent;
(function(){var u=!!d.ActiveXObject,o=u&&!d.XMLHttpRequest,m=u&&!b.querySelector,y=u&&!b.addEventListener,x=navigator.userAgent.toLowerCase(),h=x.indexOf("webkit")!==-1,t=x.indexOf("chrome")!==-1,j=x.indexOf("phantom")!==-1,z=x.indexOf("android")!==-1,s=x.search("android [23]")!==-1,k=typeof orientation!==g+"",l=d.navigator&&d.navigator.msPointerEnabled&&d.navigator.msMaxTouchPoints,i=("devicePixelRatio" in d&&d.devicePixelRatio>1)||("matchMedia" in d&&d.matchMedia("(min-resolution:144dpi)")&&d.matchMedia("(min-resolution:144dpi)").matches),A=b.documentElement,v=u&&("transition" in A.style),r=("WebKitCSSMatrix" in d)&&("m11" in new d.WebKitCSSMatrix()),p="MozPerspective" in A.style,w="OTransition" in A.style,q=!d.L_DISABLE_3D&&(v||r||p||w)&&!j;
var n=!d.L_NO_TOUCH&&!j&&(function(){var C="ontouchstart";
if(l||(C in A)){return true
}var D=b.createElement("div"),B=false;
if(!D.setAttribute){return false
}D.setAttribute(C,"return;");
if(typeof D[C]==="function"){B=true
}D.removeAttribute(C);
D=null;
return B
}());
a.Browser={ie:u,ie6:o,ie7:m,ielt9:y,webkit:h,android:z,android23:s,chrome:t,ie3d:v,webkit3d:r,gecko3d:p,opera3d:w,any3d:q,mobile:k,mobileWebkit:k&&h,mobileWebkit3d:k&&r,mobileOpera:k&&d.opera,touch:n,msTouch:l,retina:i}
}());
a.Point=function(h,j,i){this.x=(i?Math.round(h):h);
this.y=(i?Math.round(j):j)
};
a.Point.prototype={clone:function(){return new a.Point(this.x,this.y)
},add:function(h){return this.clone()._add(a.point(h))
},_add:function(h){this.x+=h.x;
this.y+=h.y;
return this
},subtract:function(h){return this.clone()._subtract(a.point(h))
},_subtract:function(h){this.x-=h.x;
this.y-=h.y;
return this
},divideBy:function(h){return this.clone()._divideBy(h)
},_divideBy:function(h){this.x/=h;
this.y/=h;
return this
},multiplyBy:function(h){return this.clone()._multiplyBy(h)
},_multiplyBy:function(h){this.x*=h;
this.y*=h;
return this
},round:function(){return this.clone()._round()
},_round:function(){this.x=Math.round(this.x);
this.y=Math.round(this.y);
return this
},floor:function(){return this.clone()._floor()
},_floor:function(){this.x=Math.floor(this.x);
this.y=Math.floor(this.y);
return this
},distanceTo:function(i){i=a.point(i);
var h=i.x-this.x,j=i.y-this.y;
return Math.sqrt(h*h+j*j)
},equals:function(h){h=a.point(h);
return h.x===this.x&&h.y===this.y
},contains:function(h){h=a.point(h);
return Math.abs(h.x)<=Math.abs(this.x)&&Math.abs(h.y)<=Math.abs(this.y)
},toString:function(){return"Point("+a.Util.formatNum(this.x)+", "+a.Util.formatNum(this.y)+")"
}};
a.point=function(h,j,i){if(h instanceof a.Point){return h
}if(a.Util.isArray(h)){return new a.Point(h[0],h[1])
}if(h===g||h===null){return h
}return new a.Point(h,j,i)
};
a.Bounds=function(k,j){if(!k){return
}var m=j?[k,j]:k;
for(var l=0,h=m.length;
l<h;
l++){this.extend(m[l])
}};
a.Bounds.prototype={extend:function(h){h=a.point(h);
if(!this.min&&!this.max){this.min=h.clone();
this.max=h.clone()
}else{this.min.x=Math.min(h.x,this.min.x);
this.max.x=Math.max(h.x,this.max.x);
this.min.y=Math.min(h.y,this.min.y);
this.max.y=Math.max(h.y,this.max.y)
}return this
},getCenter:function(h){return new a.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,h)
},getBottomLeft:function(){return new a.Point(this.min.x,this.max.y)
},getTopRight:function(){return new a.Point(this.max.x,this.min.y)
},getSize:function(){return this.max.subtract(this.min)
},contains:function(j){var i,h;
if(typeof j[0]==="number"||j instanceof a.Point){j=a.point(j)
}else{j=a.bounds(j)
}if(j instanceof a.Bounds){i=j.min;
h=j.max
}else{i=h=j
}return(i.x>=this.min.x)&&(h.x<=this.max.x)&&(i.y>=this.min.y)&&(h.y<=this.max.y)
},intersects:function(m){m=a.bounds(m);
var k=this.min,h=this.max,l=m.min,i=m.max,j=(i.x>=k.x)&&(l.x<=h.x),n=(i.y>=k.y)&&(l.y<=h.y);
return j&&n
},isValid:function(){return !!(this.min&&this.max)
}};
a.bounds=function(i,h){if(!i||i instanceof a.Bounds){return i
}return new a.Bounds(i,h)
};
a.Transformation=function(i,h,k,j){this._a=i;
this._b=h;
this._c=k;
this._d=j
};
a.Transformation.prototype={transform:function(h,i){return this._transform(h.clone(),i)
},_transform:function(h,i){i=i||1;
h.x=i*(this._a*h.x+this._b);
h.y=i*(this._c*h.y+this._d);
return h
},untransform:function(h,i){i=i||1;
return new a.Point((h.x/i-this._b)/this._a,(h.y/i-this._d)/this._c)
}};
a.DomUtil={get:function(h){return(typeof h==="string"?b.getElementById(h):h)
},getStyle:function(j,i){var k=j.style[i];
if(!k&&j.currentStyle){k=j.currentStyle[i]
}if((!k||k==="auto")&&b.defaultView){var h=b.defaultView.getComputedStyle(j,null);
k=h?h[i]:null
}return k==="auto"?null:k
},getViewportOffset:function(n){var q=0,l=0,k=n,o=b.body,j=b.documentElement,p,m=a.Browser.ie7;
do{q+=k.offsetTop||0;
l+=k.offsetLeft||0;
q+=parseInt(a.DomUtil.getStyle(k,"borderTopWidth"),10)||0;
l+=parseInt(a.DomUtil.getStyle(k,"borderLeftWidth"),10)||0;
p=a.DomUtil.getStyle(k,"position");
if(k.offsetParent===o&&p==="absolute"){break
}if(p==="fixed"){q+=o.scrollTop||j.scrollTop||0;
l+=o.scrollLeft||j.scrollLeft||0;
break
}if(p==="relative"&&!k.offsetLeft){var i=a.DomUtil.getStyle(k,"width"),s=a.DomUtil.getStyle(k,"max-width"),h=k.getBoundingClientRect();
if(i!=="none"||s!=="none"){l+=h.left+k.clientLeft
}q+=h.top+(o.scrollTop||j.scrollTop||0);
break
}k=k.offsetParent
}while(k);
k=n;
do{if(k===o){break
}q-=k.scrollTop||0;
l-=k.scrollLeft||0;
if(!a.DomUtil.documentIsLtr()&&(a.Browser.webkit||m)){l+=k.scrollWidth-k.clientWidth;
if(m&&a.DomUtil.getStyle(k,"overflow-y")!=="hidden"&&a.DomUtil.getStyle(k,"overflow")!=="hidden"){l+=17
}}k=k.parentNode
}while(k);
return new a.Point(l,q)
},documentIsLtr:function(){if(!a.DomUtil._docIsLtrCached){a.DomUtil._docIsLtrCached=true;
a.DomUtil._docIsLtr=a.DomUtil.getStyle(b.body,"direction")==="ltr"
}return a.DomUtil._docIsLtr
},create:function(i,k,h){var j=b.createElement(i);
j.className=k;
if(h){h.appendChild(j)
}return j
},hasClass:function(i,h){return(i.className.length>0)&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(i.className)
},addClass:function(i,h){if(!a.DomUtil.hasClass(i,h)){i.className+=(i.className?" ":"")+h
}},removeClass:function(i,h){i.className=a.Util.trim((" "+i.className+" ").replace(" "+h+" "," "))
},setOpacity:function(j,k){if("opacity" in j.style){j.style.opacity=k
}else{if("filter" in j.style){var i=false,h="DXImageTransform.Microsoft.Alpha";
try{i=j.filters.item(h)
}catch(l){if(k===1){return
}}k=Math.round(k*100);
if(i){i.Enabled=(k!==100);
i.Opacity=k
}else{j.style.filter+=" progid:"+h+"(opacity="+k+")"
}}}},testProp:function(k){var j=b.documentElement.style;
for(var h=0;
h<k.length;
h++){if(k[h] in j){return k[h]
}}return false
},getTranslateString:function(h){var j=a.Browser.webkit3d,i="translate"+(j?"3d":"")+"(",k=(j?",0":"")+")";
return i+h.x+"px,"+h.y+"px"+k
},getScaleString:function(j,h){var k=a.DomUtil.getTranslateString(h.add(h.multiplyBy(-1*j))),i=" scale("+j+") ";
return k+i
},setPosition:function(j,h,i){j._leaflet_pos=h;
if(!i&&a.Browser.any3d){j.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(h);
if(a.Browser.mobileWebkit3d){j.style.WebkitBackfaceVisibility="hidden"
}}else{j.style.left=h.x+"px";
j.style.top=h.y+"px"
}},getPosition:function(h){return h._leaflet_pos
}};
a.DomUtil.TRANSFORM=a.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);
a.DomUtil.TRANSITION=a.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);
a.DomUtil.TRANSITION_END=a.DomUtil.TRANSITION==="webkitTransition"||a.DomUtil.TRANSITION==="OTransition"?a.DomUtil.TRANSITION+"End":"transitionend";
(function(){var h=a.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);
a.extend(a.DomUtil,{disableTextSelection:function(){a.DomEvent.on(d,"selectstart",a.DomEvent.preventDefault);
if(h){var i=b.documentElement.style;
this._userSelect=i[h];
i[h]="none"
}},enableTextSelection:function(){a.DomEvent.off(d,"selectstart",a.DomEvent.preventDefault);
if(h){b.documentElement.style[h]=this._userSelect;
delete this._userSelect
}},disableImageDrag:function(){a.DomEvent.on(d,"dragstart",a.DomEvent.preventDefault)
},enableImageDrag:function(){a.DomEvent.off(d,"dragstart",a.DomEvent.preventDefault)
}})
})();
a.LatLng=function(j,h){var k=parseFloat(j),i=parseFloat(h);
if(isNaN(k)||isNaN(i)){throw new Error("Invalid LatLng object: ("+j+", "+h+")")
}this.lat=k;
this.lng=i
};
a.extend(a.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9});
a.LatLng.prototype={equals:function(i){if(!i){return false
}i=a.latLng(i);
var h=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));
return h<=a.LatLng.MAX_MARGIN
},toString:function(h){return"LatLng("+a.Util.formatNum(this.lat,h)+", "+a.Util.formatNum(this.lng,h)+")"
},distanceTo:function(o){o=a.latLng(o);
var n=6378137,k=a.LatLng.DEG_TO_RAD,p=(o.lat-this.lat)*k,h=(o.lng-this.lng)*k,m=this.lat*k,j=o.lat*k,l=Math.sin(p/2),i=Math.sin(h/2);
var q=l*l+i*i*Math.cos(m)*Math.cos(j);
return n*2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q))
},wrap:function(i,h){var j=this.lng;
i=i||-180;
h=h||180;
j=(j+h)%(h-i)+(j<i||j===h?h:i);
return new a.LatLng(this.lat,j)
}};
a.latLng=function(i,h){if(i instanceof a.LatLng){return i
}if(a.Util.isArray(i)){return new a.LatLng(i[0],i[1])
}if(i===g||i===null){return i
}if(typeof i==="object"&&"lat" in i){return new a.LatLng(i.lat,"lng" in i?i.lng:i.lon)
}return new a.LatLng(i,h)
};
a.LatLngBounds=function(m,k){if(!m){return
}var j=k?[m,k]:m;
for(var l=0,h=j.length;
l<h;
l++){this.extend(j[l])
}};
a.LatLngBounds.prototype={extend:function(h){if(!h){return this
}if(typeof h[0]==="number"||typeof h[0]==="string"||h instanceof a.LatLng){h=a.latLng(h)
}else{h=a.latLngBounds(h)
}if(h instanceof a.LatLng){if(!this._southWest&&!this._northEast){this._southWest=new a.LatLng(h.lat,h.lng);
this._northEast=new a.LatLng(h.lat,h.lng)
}else{this._southWest.lat=Math.min(h.lat,this._southWest.lat);
this._southWest.lng=Math.min(h.lng,this._southWest.lng);
this._northEast.lat=Math.max(h.lat,this._northEast.lat);
this._northEast.lng=Math.max(h.lng,this._northEast.lng)
}}else{if(h instanceof a.LatLngBounds){this.extend(h._southWest);
this.extend(h._northEast)
}}return this
},pad:function(k){var i=this._southWest,l=this._northEast,h=Math.abs(i.lat-l.lat)*k,j=Math.abs(i.lng-l.lng)*k;
return new a.LatLngBounds(new a.LatLng(i.lat-h,i.lng-j),new a.LatLng(l.lat+h,l.lng+j))
},getCenter:function(){return new a.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)
},getSouthWest:function(){return this._southWest
},getNorthEast:function(){return this._northEast
},getNorthWest:function(){return new a.LatLng(this.getNorth(),this.getWest())
},getSouthEast:function(){return new a.LatLng(this.getSouth(),this.getEast())
},getWest:function(){return this._southWest.lng
},getSouth:function(){return this._southWest.lat
},getEast:function(){return this._northEast.lng
},getNorth:function(){return this._northEast.lat
},contains:function(l){if(typeof l[0]==="number"||l instanceof a.LatLng){l=a.latLng(l)
}else{l=a.latLngBounds(l)
}var h=this._southWest,k=this._northEast,i,j;
if(l instanceof a.LatLngBounds){i=l.getSouthWest();
j=l.getNorthEast()
}else{i=j=l
}return(i.lat>=h.lat)&&(j.lat<=k.lat)&&(i.lng>=h.lng)&&(j.lng<=k.lng)
},intersects:function(k){k=a.latLngBounds(k);
var h=this._southWest,n=this._northEast,i=k.getSouthWest(),m=k.getNorthEast(),l=(m.lat>=h.lat)&&(i.lat<=n.lat),j=(m.lng>=h.lng)&&(i.lng<=n.lng);
return l&&j
},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")
},equals:function(h){if(!h){return false
}h=a.latLngBounds(h);
return this._southWest.equals(h.getSouthWest())&&this._northEast.equals(h.getNorthEast())
},isValid:function(){return !!(this._southWest&&this._northEast)
}};
a.latLngBounds=function(i,h){if(!i||i instanceof a.LatLngBounds){return i
}return new a.LatLngBounds(i,h)
};
a.Projection={};
a.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(m){var k=a.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,j=Math.max(Math.min(i,m.lat),-i),h=m.lng*k,l=j*k;
l=Math.log(Math.tan((Math.PI/4)+(l/2)));
return new a.Point(h,l)
},unproject:function(h){var k=a.LatLng.RAD_TO_DEG,i=h.x*k,j=(2*Math.atan(Math.exp(h.y))-(Math.PI/2))*k;
return new a.LatLng(j,i)
}};
a.Projection.LonLat={project:function(h){return new a.Point(h.lng,h.lat)
},unproject:function(h){return new a.LatLng(h.y,h.x)
}};
a.CRS={latLngToPoint:function(k,i){var h=this.projection.project(k),j=this.scale(i);
return this.transformation._transform(h,j)
},pointToLatLng:function(h,j){var k=this.scale(j),i=this.transformation.untransform(h,k);
return this.projection.unproject(i)
},project:function(h){return this.projection.project(h)
},scale:function(h){return 256*Math.pow(2,h)
}};
a.CRS.Simple=a.extend({},a.CRS,{projection:a.Projection.LonLat,transformation:new a.Transformation(1,0,-1,0),scale:function(h){return Math.pow(2,h)
}});
a.CRS.EPSG3857=a.extend({},a.CRS,{code:"EPSG:3857",projection:a.Projection.SphericalMercator,transformation:new a.Transformation(0.5/Math.PI,0.5,-0.5/Math.PI,0.5),project:function(j){var i=this.projection.project(j),h=6378137;
return i.multiplyBy(h)
}});
a.CRS.EPSG900913=a.extend({},a.CRS.EPSG3857,{code:"EPSG:900913"});
a.CRS.EPSG4326=a.extend({},a.CRS,{code:"EPSG:4326",projection:a.Projection.LonLat,transformation:new a.Transformation(1/360,0.5,-1/360,0.5)});
a.Map=a.Class.extend({includes:a.Mixin.Events,options:{crs:a.CRS.EPSG3857,fadeAnimation:a.DomUtil.TRANSITION&&!a.Browser.android23,trackResize:true,markerZoomAnimation:a.DomUtil.TRANSITION&&a.Browser.any3d},initialize:function(i,h){h=a.setOptions(this,h);
this._initContainer(i);
this._initLayout();
this._initEvents();
if(h.maxBounds){this.setMaxBounds(h.maxBounds)
}if(h.center&&h.zoom!==g){this.setView(a.latLng(h.center),h.zoom,{reset:true})
}this._handlers=[];
this._layers={};
this._zoomBoundLayers={};
this._tileLayersNum=0;
this.callInitHooks();
this._addLayers(h.layers)
},setView:function(h,i){this._resetView(a.latLng(h),this._limitZoom(i));
return this
},setZoom:function(i,h){return this.setView(this.getCenter(),i,{zoom:h})
},zoomIn:function(i,h){return this.setZoom(this._zoom+(i||1),h)
},zoomOut:function(i,h){return this.setZoom(this._zoom-(i||1),h)
},setZoomAround:function(o,m,l){var n=this.getZoomScale(m),k=this.getSize().divideBy(2),j=o instanceof a.Point?o:this.latLngToContainerPoint(o),h=j.subtract(k).multiplyBy(1-1/n),i=this.containerPointToLatLng(k.add(h));
return this.setView(i,m,{zoom:l})
},fitBounds:function(i,p){p=p||{};
i=i.getBounds?i.getBounds():a.latLngBounds(i);
var k=a.point(p.paddingTopLeft||p.padding||[0,0]),j=a.point(p.paddingBottomRight||p.padding||[0,0]),o=this.getBoundsZoom(i,false,k.add(j)),m=j.subtract(k).divideBy(2),n=this.project(i.getSouthWest(),o),l=this.project(i.getNorthEast(),o),h=this.unproject(n.add(l).divideBy(2).add(m),o);
return this.setView(h,o,p)
},fitWorld:function(h){return this.fitBounds([[-90,-180],[90,180]],h)
},panTo:function(h,i){return this.setView(h,this._zoom,{pan:i})
},panBy:function(h){this.fire("movestart");
this._rawPanBy(a.point(h));
this.fire("move");
return this.fire("moveend")
},setMaxBounds:function(i,h){i=a.latLngBounds(i);
this.options.maxBounds=i;
if(!i){this._boundsMinZoom=null;
this.off("moveend",this._panInsideMaxBounds,this);
return this
}var j=this.getBoundsZoom(i,true);
this._boundsMinZoom=j;
if(this._loaded){if(this._zoom<j){this.setView(i.getCenter(),j,h)
}else{this.panInsideBounds(i)
}}this.on("moveend",this._panInsideMaxBounds,this);
return this
},panInsideBounds:function(l){l=a.latLngBounds(l);
var m=this.getPixelBounds(),j=m.getBottomLeft(),o=m.getTopRight(),h=this.project(l.getSouthWest()),n=this.project(l.getNorthEast()),k=0,i=0;
if(o.y<n.y){i=Math.ceil(n.y-o.y)
}if(o.x>n.x){k=Math.floor(n.x-o.x)
}if(j.y>h.y){i=Math.floor(h.y-j.y)
}if(j.x<h.x){k=Math.ceil(h.x-j.x)
}if(k||i){return this.panBy([k,i])
}return this
},addLayer:function(h){var i=a.stamp(h);
if(this._layers[i]){return this
}this._layers[i]=h;
if(h.options&&(!isNaN(h.options.maxZoom)||!isNaN(h.options.minZoom))){this._zoomBoundLayers[i]=h;
this._updateZoomLevels()
}if(this.options.zoomAnimation&&a.TileLayer&&(h instanceof a.TileLayer)){this._tileLayersNum++;
this._tileLayersToLoad++;
h.on("load",this._onTileLayerLoad,this)
}if(this._loaded){this._layerAdd(h)
}return this
},removeLayer:function(h){var i=a.stamp(h);
if(!this._layers[i]){return
}if(this._loaded){h.onRemove(this)
}delete this._layers[i];
if(this._loaded){this.fire("layerremove",{layer:h})
}if(this._zoomBoundLayers[i]){delete this._zoomBoundLayers[i];
this._updateZoomLevels()
}if(this.options.zoomAnimation&&a.TileLayer&&(h instanceof a.TileLayer)){this._tileLayersNum--;
this._tileLayersToLoad--;
h.off("load",this._onTileLayerLoad,this)
}return this
},hasLayer:function(h){if(!h){return false
}return(a.stamp(h) in this._layers)
},eachLayer:function(k,j){for(var h in this._layers){k.call(j,this._layers[h])
}return this
},invalidateSize:function(i){i=a.extend({animate:false,pan:true},i===true?{animate:true}:i);
var j=this.getSize();
this._sizeChanged=true;
if(this.options.maxBounds){this.setMaxBounds(this.options.maxBounds)
}if(!this._loaded){return this
}var h=this.getSize(),k=j.subtract(h).divideBy(2).round();
if(!k.x&&!k.y){return this
}if(i.animate&&i.pan){this.panBy(k)
}else{if(i.pan){this._rawPanBy(k)
}this.fire("move");
clearTimeout(this._sizeTimer);
this._sizeTimer=setTimeout(a.bind(this.fire,this,"moveend"),200)
}return this.fire("resize",{oldSize:j,newSize:h})
},addHandler:function(h,j){if(!j){return
}var i=this[h]=new j(this);
this._handlers.push(i);
if(this.options[h]){i.enable()
}return this
},remove:function(){if(this._loaded){this.fire("unload")
}this._initEvents("off");
delete this._container._leaflet;
this._clearPanes();
if(this._clearControlPos){this._clearControlPos()
}this._clearHandlers();
return this
},getCenter:function(){this._checkIfLoaded();
if(!this._moved()){return this._initialCenter
}return this.layerPointToLatLng(this._getCenterLayerPoint())
},getZoom:function(){return this._zoom
},getBounds:function(){var i=this.getPixelBounds(),h=this.unproject(i.getBottomLeft()),j=this.unproject(i.getTopRight());
return new a.LatLngBounds(h,j)
},getMinZoom:function(){var i=this._layersMinZoom===g?0:this._layersMinZoom,h=this._boundsMinZoom===g?0:this._boundsMinZoom;
return this.options.minZoom===g?Math.max(i,h):this.options.minZoom
},getMaxZoom:function(){return this.options.maxZoom===g?(this._layersMaxZoom===g?Infinity:this._layersMaxZoom):this.options.maxZoom
},getBoundsZoom:function(h,i,m){h=a.latLngBounds(h);
var o=this.getMinZoom()-(i?1:0),n=this.getMaxZoom(),q=this.getSize(),k=h.getNorthWest(),l=h.getSouthEast(),j=true,p;
m=a.point(m||[0,0]);
do{o++;
p=this.project(l,o).subtract(this.project(k,o)).add(m);
j=!i?q.contains(p):p.x<q.x||p.y<q.y
}while(j&&o<=n);
if(j&&i){return null
}return i?o:o-1
},getSize:function(){if(!this._size||this._sizeChanged){this._size=new a.Point(this._container.clientWidth,this._container.clientHeight);
this._sizeChanged=false
}return this._size.clone()
},getPixelBounds:function(){var h=this._getTopLeftPoint();
return new a.Bounds(h,h.add(this.getSize()))
},getPixelOrigin:function(){this._checkIfLoaded();
return this._initialTopLeftPoint
},getPanes:function(){return this._panes
},getContainer:function(){return this._container
},getZoomScale:function(i){var h=this.options.crs;
return h.scale(i)/h.scale(this._zoom)
},getScaleZoom:function(h){return this._zoom+(Math.log(h)/Math.LN2)
},project:function(i,h){h=h===g?this._zoom:h;
return this.options.crs.latLngToPoint(a.latLng(i),h)
},unproject:function(h,i){i=i===g?this._zoom:i;
return this.options.crs.pointToLatLng(a.point(h),i)
},layerPointToLatLng:function(h){var i=a.point(h).add(this.getPixelOrigin());
return this.unproject(i)
},latLngToLayerPoint:function(i){var h=this.project(a.latLng(i))._round();
return h._subtract(this.getPixelOrigin())
},containerPointToLayerPoint:function(h){return a.point(h).subtract(this._getMapPanePos())
},layerPointToContainerPoint:function(h){return a.point(h).add(this._getMapPanePos())
},containerPointToLatLng:function(h){var i=this.containerPointToLayerPoint(a.point(h));
return this.layerPointToLatLng(i)
},latLngToContainerPoint:function(h){return this.layerPointToContainerPoint(this.latLngToLayerPoint(a.latLng(h)))
},mouseEventToContainerPoint:function(h){return a.DomEvent.getMousePosition(h,this._container)
},mouseEventToLayerPoint:function(h){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(h))
},mouseEventToLatLng:function(h){return this.layerPointToLatLng(this.mouseEventToLayerPoint(h))
},_initContainer:function(i){var h=this._container=a.DomUtil.get(i);
if(!h){throw new Error("Map container not found.")
}else{if(h._leaflet){throw new Error("Map container is already initialized.")
}}h._leaflet=true
},_initLayout:function(){var i=this._container;
a.DomUtil.addClass(i,"leaflet-container"+(a.Browser.touch?" leaflet-touch":"")+(a.Browser.retina?" leaflet-retina":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));
var h=a.DomUtil.getStyle(i,"position");
if(h!=="absolute"&&h!=="relative"&&h!=="fixed"){i.style.position="relative"
}this._initPanes();
if(this._initControlPos){this._initControlPos()
}},_initPanes:function(){var i=this._panes={};
this._mapPane=i.mapPane=this._createPane("leaflet-map-pane",this._container);
this._tilePane=i.tilePane=this._createPane("leaflet-tile-pane",this._mapPane);
i.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane);
i.shadowPane=this._createPane("leaflet-shadow-pane");
i.overlayPane=this._createPane("leaflet-overlay-pane");
i.markerPane=this._createPane("leaflet-marker-pane");
i.popupPane=this._createPane("leaflet-popup-pane");
var h=" leaflet-zoom-hide";
if(!this.options.markerZoomAnimation){a.DomUtil.addClass(i.markerPane,h);
a.DomUtil.addClass(i.shadowPane,h);
a.DomUtil.addClass(i.popupPane,h)
}},_createPane:function(i,h){return a.DomUtil.create("div",i,h||this._panes.objectsPane)
},_clearPanes:function(){this._container.removeChild(this._mapPane)
},_addLayers:function(k){k=k?(a.Util.isArray(k)?k:[k]):[];
for(var j=0,h=k.length;
j<h;
j++){this.addLayer(k[j])
}},_resetView:function(j,l,i,k){var h=(this._zoom!==l);
if(!k){this.fire("movestart");
if(h){this.fire("zoomstart")
}}this._zoom=l;
this._initialCenter=j;
this._initialTopLeftPoint=this._getNewTopLeftPoint(j);
if(!i){a.DomUtil.setPosition(this._mapPane,new a.Point(0,0))
}else{this._initialTopLeftPoint._add(this._getMapPanePos())
}this._tileLayersToLoad=this._tileLayersNum;
var m=!this._loaded;
this._loaded=true;
if(m){this.fire("load");
this.eachLayer(this._layerAdd,this)
}this.fire("viewreset",{hard:!i});
this.fire("move");
if(h||k){this.fire("zoomend")
}this.fire("moveend",{hard:!i})
},_rawPanBy:function(h){a.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(h))
},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()
},_updateZoomLevels:function(){var k,m=Infinity,h=-Infinity,l=this._getZoomSpan();
for(k in this._zoomBoundLayers){var j=this._zoomBoundLayers[k];
if(!isNaN(j.options.minZoom)){m=Math.min(m,j.options.minZoom)
}if(!isNaN(j.options.maxZoom)){h=Math.max(h,j.options.maxZoom)
}}if(k===g){this._layersMaxZoom=this._layersMinZoom=g
}else{this._layersMaxZoom=h;
this._layersMinZoom=m
}if(l!==this._getZoomSpan()){this.fire("zoomlevelschange")
}},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)
},_checkIfLoaded:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")
}},_initEvents:function(j){if(!a.DomEvent){return
}j=j||"on";
a.DomEvent[j](this._container,"click",this._onMouseClick,this);
var l=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"],k,h;
for(k=0,h=l.length;
k<h;
k++){a.DomEvent[j](this._container,l[k],this._fireMouseEvent,this)
}if(this.options.trackResize){a.DomEvent[j](d,"resize",this._onResize,this)
}},_onResize:function(){a.Util.cancelAnimFrame(this._resizeRequest);
this._resizeRequest=a.Util.requestAnimFrame(this.invalidateSize,this,false,this._container)
},_onMouseClick:function(h){if(!this._loaded||(!h._simulated&&this.dragging&&this.dragging.moved())||a.DomEvent._skipped(h)){return
}this.fire("preclick");
this._fireMouseEvent(h)
},_fireMouseEvent:function(k){if(!this._loaded||a.DomEvent._skipped(k)){return
}var j=k.type;
j=(j==="mouseenter"?"mouseover":(j==="mouseleave"?"mouseout":j));
if(!this.hasEventListeners(j)){return
}if(j==="contextmenu"){a.DomEvent.preventDefault(k)
}var i=this.mouseEventToContainerPoint(k),h=this.containerPointToLayerPoint(i),l=this.layerPointToLatLng(h);
this.fire(j,{latlng:l,layerPoint:h,containerPoint:i,originalEvent:k})
},_onTileLayerLoad:function(){this._tileLayersToLoad--;
if(this._tileLayersNum&&!this._tileLayersToLoad){this.fire("tilelayersload")
}},_clearHandlers:function(){for(var j=0,h=this._handlers.length;
j<h;
j++){this._handlers[j].disable()
}},whenReady:function(i,h){if(this._loaded){i.call(h||this,this)
}else{this.on("load",i,h)
}return this
},_layerAdd:function(h){h.onAdd(this);
this.fire("layeradd",{layer:h})
},_getMapPanePos:function(){return a.DomUtil.getPosition(this._mapPane)
},_moved:function(){var h=this._getMapPanePos();
return h&&!h.equals([0,0])
},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())
},_getNewTopLeftPoint:function(h,j){var i=this.getSize()._divideBy(2);
return this.project(h,j)._subtract(i)._round()
},_latLngToNewLayerPoint:function(k,i,h){var j=this._getNewTopLeftPoint(h,i).add(this._getMapPanePos());
return this.project(k,i)._subtract(j)
},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))
},_getCenterOffset:function(h){return this.latLngToLayerPoint(h).subtract(this._getCenterLayerPoint())
},_limitZoom:function(j){var i=this.getMinZoom(),h=this.getMaxZoom();
return Math.max(i,Math.min(h,j))
}});
a.map=function(i,h){return new a.Map(i,h)
};
a.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(j){var o=a.LatLng.DEG_TO_RAD,s=this.MAX_LATITUDE,p=Math.max(Math.min(s,j.lat),-s),h=this.R_MAJOR,k=this.R_MINOR,t=j.lng*o*h,q=p*o,m=k/h,l=Math.sqrt(1-m*m),i=l*Math.sin(q);
i=Math.pow((1-i)/(1+i),l*0.5);
var n=Math.tan(0.5*((Math.PI*0.5)-q))/i;
q=-h*Math.log(n);
return new a.Point(t,q)
},unproject:function(v){var s=a.LatLng.RAD_TO_DEG,h=this.R_MAJOR,k=this.R_MINOR,u=v.x*s/h,o=k/h,l=Math.sqrt(1-(o*o)),t=Math.exp(-v.y/h),q=(Math.PI/2)-2*Math.atan(t),m=15,w=1e-7,n=m,p=0.1,j;
while((Math.abs(p)>w)&&(--n>0)){j=l*Math.sin(q);
p=(Math.PI/2)-2*Math.atan(t*Math.pow((1-j)/(1+j),0.5*l))-q;
q+=p
}return new a.LatLng(q*s,u)
}};
a.CRS.EPSG3395=a.extend({},a.CRS,{code:"EPSG:3395",projection:a.Projection.Mercator,transformation:(function(){var h=a.Projection.Mercator,j=h.R_MAJOR,i=h.R_MINOR;
return new a.Transformation(0.5/(Math.PI*j),0.5,-0.5/(Math.PI*i),0.5)
}())});
a.TileLayer=a.Class.extend({includes:a.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:a.Browser.mobile,updateWhenIdle:a.Browser.mobile},initialize:function(j,i){i=a.setOptions(this,i);
if(i.detectRetina&&a.Browser.retina&&i.maxZoom>0){i.tileSize=Math.floor(i.tileSize/2);
i.zoomOffset++;
if(i.minZoom>0){i.minZoom--
}this.options.maxZoom--
}if(i.bounds){i.bounds=a.latLngBounds(i.bounds)
}this._url=j;
var h=this.options.subdomains;
if(typeof h==="string"){this.options.subdomains=h.split("")
}},onAdd:function(h){this._map=h;
this._animated=h._zoomAnimated;
this._initContainer();
this._createTileProto();
h.on({viewreset:this._reset,moveend:this._update},this);
if(this._animated){h.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this)
}if(!this.options.updateWhenIdle){this._limitedUpdate=a.Util.limitExecByInterval(this._update,150,this);
h.on("move",this._limitedUpdate,this)
}this._reset();
this._update()
},addTo:function(h){h.addLayer(this);
return this
},onRemove:function(h){this._container.parentNode.removeChild(this._container);
h.off({viewreset:this._reset,moveend:this._update},this);
if(this._animated){h.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this)
}if(!this.options.updateWhenIdle){h.off("move",this._limitedUpdate,this)
}this._container=null;
this._map=null
},bringToFront:function(){var h=this._map._panes.tilePane;
if(this._container){h.appendChild(this._container);
this._setAutoZIndex(h,Math.max)
}return this
},bringToBack:function(){var h=this._map._panes.tilePane;
if(this._container){h.insertBefore(this._container,h.firstChild);
this._setAutoZIndex(h,Math.min)
}return this
},getAttribution:function(){return this.options.attribution
},getContainer:function(){return this._container
},setOpacity:function(h){this.options.opacity=h;
if(this._map){this._updateOpacity()
}return this
},setZIndex:function(h){this.options.zIndex=h;
this._updateZIndex();
return this
},setUrl:function(h,i){this._url=h;
if(!i){this.redraw()
}return this
},redraw:function(){if(this._map){this._reset({hard:true});
this._update()
}return this
},_updateZIndex:function(){if(this._container&&this.options.zIndex!==g){this._container.style.zIndex=this.options.zIndex
}},_setAutoZIndex:function(o,l){var m=o.children,k=-l(Infinity,-Infinity),n,j,h;
for(j=0,h=m.length;
j<h;
j++){if(m[j]!==this._container){n=parseInt(m[j].style.zIndex,10);
if(!isNaN(n)){k=l(k,n)
}}}this.options.zIndex=this._container.style.zIndex=(isFinite(k)?k:0)+l(1,-1)
},_updateOpacity:function(){var j,h=this._tiles;
if(a.Browser.ielt9){for(j in h){a.DomUtil.setOpacity(h[j],this.options.opacity)
}}else{a.DomUtil.setOpacity(this._container,this.options.opacity)
}},_initContainer:function(){var h=this._map._panes.tilePane;
if(!this._container){this._container=a.DomUtil.create("div","leaflet-layer");
this._updateZIndex();
if(this._animated){var i="leaflet-tile-container leaflet-zoom-animated";
this._bgBuffer=a.DomUtil.create("div",i,this._container);
this._tileContainer=a.DomUtil.create("div",i,this._container)
}else{this._tileContainer=this._container
}h.appendChild(this._container);
if(this.options.opacity<1){this._updateOpacity()
}}},_reset:function(i){for(var h in this._tiles){this.fire("tileunload",{tile:this._tiles[h]})
}this._tiles={};
this._tilesToLoad=0;
if(this.options.reuseTiles){this._unusedTiles=[]
}this._tileContainer.innerHTML="";
if(this._animated&&i&&i.hard){this._clearBgBuffer()
}this._initContainer()
},_update:function(){if(!this._map){return
}var i=this._map.getPixelBounds(),h=this._map.getZoom(),j=this.options.tileSize;
if(h>this.options.maxZoom||h<this.options.minZoom){return
}var k=a.bounds(i.min.divideBy(j)._floor(),i.max.divideBy(j)._floor());
this._addTilesFromCenterOut(k);
if(this.options.unloadInvisibleTiles||this.options.reuseTiles){this._removeOtherTiles(k)
}},_addTilesFromCenterOut:function(p){var l=[],k=p.getCenter();
var n,o,h;
for(n=p.min.y;
n<=p.max.y;
n++){for(o=p.min.x;
o<=p.max.x;
o++){h=new a.Point(o,n);
if(this._tileShouldBeLoaded(h)){l.push(h)
}}}var q=l.length;
if(q===0){return
}l.sort(function(j,i){return j.distanceTo(k)-i.distanceTo(k)
});
var m=b.createDocumentFragment();
if(!this._tilesToLoad){this.fire("loading")
}this._tilesToLoad+=q;
for(o=0;
o<q;
o++){this._addTile(l[o],m)
}this._tileContainer.appendChild(m)
},_tileShouldBeLoaded:function(m){if((m.x+":"+m.y) in this._tiles){return false
}var l=this.options;
if(!l.continuousWorld){var j=this._getWrapTileNum();
if((l.noWrap&&(m.x<0||m.x>=j))||m.y<0||m.y>=j){return false
}}if(l.bounds){var o=l.tileSize,k=m.multiplyBy(o),h=k.add([o,o]),i=this._map.unproject(k),n=this._map.unproject(h);
if(!l.continuousWorld&&!l.noWrap){i=i.wrap();
n=n.wrap()
}if(!l.bounds.intersects([i,n])){return false
}}return true
},_removeOtherTiles:function(k){var j,h,l,i;
for(i in this._tiles){j=i.split(":");
h=parseInt(j[0],10);
l=parseInt(j[1],10);
if(h<k.min.x||h>k.max.x||l<k.min.y||l>k.max.y){this._removeTile(i)
}}},_removeTile:function(h){var i=this._tiles[h];
this.fire("tileunload",{tile:i,url:i.src});
if(this.options.reuseTiles){a.DomUtil.removeClass(i,"leaflet-tile-loaded");
this._unusedTiles.push(i)
}else{if(i.parentNode===this._tileContainer){this._tileContainer.removeChild(i)
}}if(!a.Browser.android){i.onload=null;
i.src=a.Util.emptyImageUrl
}delete this._tiles[h]
},_addTile:function(j,h){var i=this._getTilePos(j);
var k=this._getTile();
a.DomUtil.setPosition(k,i,a.Browser.chrome||a.Browser.android23);
this._tiles[j.x+":"+j.y]=k;
this._loadTile(k,j);
if(k.parentNode!==this._tileContainer){h.appendChild(k)
}},_getZoomForUrl:function(){var h=this.options,i=this._map.getZoom();
if(h.zoomReverse){i=h.maxZoom-i
}return i+h.zoomOffset
},_getTilePos:function(i){var h=this._map.getPixelOrigin(),j=this.options.tileSize;
return i.multiplyBy(j).subtract(h)
},getTileUrl:function(h){return a.Util.template(this._url,a.extend({s:this._getSubdomain(h),z:h.z,x:h.x,y:h.y},this.options))
},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())
},_adjustTilePoint:function(i){var h=this._getWrapTileNum();
if(!this.options.continuousWorld&&!this.options.noWrap){i.x=((i.x%h)+h)%h
}if(this.options.tms){i.y=h-i.y-1
}i.z=this._getZoomForUrl()
},_getSubdomain:function(i){var h=Math.abs(i.x+i.y)%this.options.subdomains.length;
return this.options.subdomains[h]
},_createTileProto:function(){var h=this._tileImg=a.DomUtil.create("img","leaflet-tile");
h.style.width=h.style.height=this.options.tileSize+"px";
h.galleryimg="no"
},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var h=this._unusedTiles.pop();
this._resetTile(h);
return h
}return this._createTile()
},_resetTile:function(){},_createTile:function(){var h=this._tileImg.cloneNode(false);
h.onselectstart=h.onmousemove=a.Util.falseFn;
if(a.Browser.ielt9&&this.options.opacity!==g){a.DomUtil.setOpacity(h,this.options.opacity)
}return h
},_loadTile:function(i,h){i._layer=this;
i.onload=this._tileOnLoad;
i.onerror=this._tileOnError;
this._adjustTilePoint(h);
i.src=this.getTileUrl(h)
},_tileLoaded:function(){this._tilesToLoad--;
if(!this._tilesToLoad){this.fire("load");
if(this._animated){clearTimeout(this._clearBgBufferTimer);
this._clearBgBufferTimer=setTimeout(a.bind(this._clearBgBuffer,this),500)
}}},_tileOnLoad:function(){var h=this._layer;
if(this.src!==a.Util.emptyImageUrl){a.DomUtil.addClass(this,"leaflet-tile-loaded");
h.fire("tileload",{tile:this,url:this.src})
}h._tileLoaded()
},_tileOnError:function(){var h=this._layer;
h.fire("tileerror",{tile:this,url:this.src});
var i=h.options.errorTileUrl;
if(i){this.src=i
}h._tileLoaded()
}});
a.tileLayer=function(i,h){return new a.TileLayer(i,h)
};
a.TileLayer.WMS=a.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:false},initialize:function(k,j){this._url=k;
var h=a.extend({},this.defaultWmsParams),m=j.tileSize||this.options.tileSize;
if(j.detectRetina&&a.Browser.retina){h.width=h.height=m*2
}else{h.width=h.height=m
}for(var l in j){if(!this.options.hasOwnProperty(l)&&l!=="crs"){h[l]=j[l]
}}this.wmsParams=h;
a.setOptions(this,j)
},onAdd:function(h){this._crs=this.options.crs||h.options.crs;
var i=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";
this.wmsParams[i]=this._crs.code;
a.TileLayer.prototype.onAdd.call(this,h)
},getTileUrl:function(j,q){var i=this._map,p=this.options.tileSize,o=j.multiplyBy(p),m=o.add([p,p]),k=this._crs.project(i.unproject(o,q)),l=this._crs.project(i.unproject(m,q)),n=[k.x,l.y,l.x,k.y].join(","),h=a.Util.template(this._url,{s:this._getSubdomain(j)});
return h+a.Util.getParamString(this.wmsParams,h,true)+"&BBOX="+n
},setParams:function(i,h){a.extend(this.wmsParams,i);
if(!h){this.redraw()
}return this
}});
a.tileLayer.wms=function(i,h){return new a.TileLayer.WMS(i,h)
};
a.TileLayer.Canvas=a.TileLayer.extend({options:{async:false},initialize:function(h){a.setOptions(this,h)
},redraw:function(){if(this._map){this._reset({hard:true});
this._update()
}for(var h in this._tiles){this._redrawTile(this._tiles[h])
}return this
},_redrawTile:function(h){this.drawTile(h,h._tilePoint,this._map._zoom)
},_createTileProto:function(){var h=this._canvasProto=a.DomUtil.create("canvas","leaflet-tile");
h.width=h.height=this.options.tileSize
},_createTile:function(){var h=this._canvasProto.cloneNode(false);
h.onselectstart=h.onmousemove=a.Util.falseFn;
return h
},_loadTile:function(i,h){i._layer=this;
i._tilePoint=h;
this._redrawTile(i);
if(!this.options.async){this.tileDrawn(i)
}},drawTile:function(){},tileDrawn:function(h){this._tileOnLoad.call(h)
}});
a.tileLayer.canvas=function(h){return new a.TileLayer.Canvas(h)
};
a.ImageOverlay=a.Class.extend({includes:a.Mixin.Events,options:{opacity:1},initialize:function(i,j,h){this._url=i;
this._bounds=a.latLngBounds(j);
a.setOptions(this,h)
},onAdd:function(h){this._map=h;
if(!this._image){this._initImage()
}h._panes.overlayPane.appendChild(this._image);
h.on("viewreset",this._reset,this);
if(h.options.zoomAnimation&&a.Browser.any3d){h.on("zoomanim",this._animateZoom,this)
}this._reset()
},onRemove:function(h){h.getPanes().overlayPane.removeChild(this._image);
h.off("viewreset",this._reset,this);
if(h.options.zoomAnimation){h.off("zoomanim",this._animateZoom,this)
}},addTo:function(h){h.addLayer(this);
return this
},setOpacity:function(h){this.options.opacity=h;
this._updateOpacity();
return this
},bringToFront:function(){if(this._image){this._map._panes.overlayPane.appendChild(this._image)
}return this
},bringToBack:function(){var h=this._map._panes.overlayPane;
if(this._image){h.insertBefore(this._image,h.firstChild)
}return this
},_initImage:function(){this._image=a.DomUtil.create("img","leaflet-image-layer");
if(this._map.options.zoomAnimation&&a.Browser.any3d){a.DomUtil.addClass(this._image,"leaflet-zoom-animated")
}else{a.DomUtil.addClass(this._image,"leaflet-zoom-hide")
}this._updateOpacity();
a.extend(this._image,{galleryimg:"no",onselectstart:a.Util.falseFn,onmousemove:a.Util.falseFn,onload:a.bind(this._onImageLoad,this),src:this._url})
},_animateZoom:function(l){var h=this._map,j=this._image,i=h.getZoomScale(l.zoom),k=this._bounds.getNorthWest(),m=this._bounds.getSouthEast(),o=h._latLngToNewLayerPoint(k,l.zoom,l.center),p=h._latLngToNewLayerPoint(m,l.zoom,l.center)._subtract(o),n=o._add(p._multiplyBy((1/2)*(1-1/i)));
j.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(n)+" scale("+i+") "
},_reset:function(){var j=this._image,i=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),h=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(i);
a.DomUtil.setPosition(j,i);
j.style.width=h.x+"px";
j.style.height=h.y+"px"
},_onImageLoad:function(){this.fire("load")
},_updateOpacity:function(){a.DomUtil.setOpacity(this._image,this.options.opacity)
}});
a.imageOverlay=function(i,j,h){return new a.ImageOverlay(i,j,h)
};
a.Icon=a.Class.extend({options:{className:""},initialize:function(h){a.setOptions(this,h)
},createIcon:function(h){return this._createIcon("icon",h)
},createShadow:function(h){return this._createIcon("shadow",h)
},_createIcon:function(i,j){var k=this._getIconUrl(i);
if(!k){if(i==="icon"){throw new Error("iconUrl not set in Icon options (see the docs).")
}return null
}var h;
if(!j||j.tagName!=="IMG"){h=this._createImg(k)
}else{h=this._createImg(k,j)
}this._setIconStyles(h,i);
return h
},_setIconStyles:function(h,k){var j=this.options,l=a.point(j[k+"Size"]),i;
if(k==="shadow"){i=a.point(j.shadowAnchor||j.iconAnchor)
}else{i=a.point(j.iconAnchor)
}if(!i&&l){i=l.divideBy(2,true)
}h.className="leaflet-marker-"+k+" "+j.className;
if(i){h.style.marginLeft=(-i.x)+"px";
h.style.marginTop=(-i.y)+"px"
}if(l){h.style.width=l.x+"px";
h.style.height=l.y+"px"
}},_createImg:function(i,h){if(!a.Browser.ie6){if(!h){h=b.createElement("img")
}h.src=i
}else{if(!h){h=b.createElement("div")
}h.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+i+'")'
}return h
},_getIconUrl:function(h){if(a.Browser.retina&&this.options[h+"RetinaUrl"]){return this.options[h+"RetinaUrl"]
}return this.options[h+"Url"]
}});
a.icon=function(h){return new a.Icon(h)
};
a.Icon.Default=a.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(h){var i=h+"Url";
if(this.options[i]){return this.options[i]
}if(a.Browser.retina&&h==="icon"){h+="-2x"
}var j=a.Icon.Default.imagePath;
if(!j){throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.")
}return j+"/marker-"+h+".png"
}});
a.Icon.Default.imagePath=(function(){var j=b.getElementsByTagName("script"),l=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;
var k,h,o,m,n;
for(k=0,h=j.length;
k<h;
k++){o=j[k].src;
m=o.match(l);
if(m){n=o.split(l)[0];
return(n?n+"/":"")+"images"
}}}());
a.Marker=a.Class.extend({includes:a.Mixin.Events,options:{icon:new a.Icon.Default(),title:"",clickable:true,draggable:false,keyboard:true,zIndexOffset:0,opacity:1,riseOnHover:false,riseOffset:250},initialize:function(i,h){a.setOptions(this,h);
this._latlng=a.latLng(i)
},onAdd:function(h){this._map=h;
h.on("viewreset",this.update,this);
this._initIcon();
this.update();
if(h.options.zoomAnimation&&h.options.markerZoomAnimation){h.on("zoomanim",this._animateZoom,this)
}},addTo:function(h){h.addLayer(this);
return this
},onRemove:function(h){if(this.dragging){this.dragging.disable()
}this._removeIcon();
this._removeShadow();
this.fire("remove");
h.off({viewreset:this.update,zoomanim:this._animateZoom},this);
this._map=null
},getLatLng:function(){return this._latlng
},setLatLng:function(h){this._latlng=a.latLng(h);
this.update();
return this.fire("move",{latlng:this._latlng})
},setZIndexOffset:function(h){this.options.zIndexOffset=h;
this.update();
return this
},setIcon:function(h){this.options.icon=h;
if(this._map){this._initIcon();
this.update()
}return this
},update:function(){if(this._icon){var h=this._map.latLngToLayerPoint(this._latlng).round();
this._setPos(h)
}return this
},_initIcon:function(){var o=this.options,h=this._map,k=(h.options.zoomAnimation&&h.options.markerZoomAnimation),j=k?"leaflet-zoom-animated":"leaflet-zoom-hide";
var n=o.icon.createIcon(this._icon),l=false;
if(n!==this._icon){if(this._icon){this._removeIcon()
}l=true;
if(o.title){n.title=o.title
}}a.DomUtil.addClass(n,j);
if(o.keyboard){n.tabIndex="0"
}this._icon=n;
this._initInteraction();
if(o.riseOnHover){a.DomEvent.on(n,"mouseover",this._bringToFront,this).on(n,"mouseout",this._resetZIndex,this)
}var p=o.icon.createShadow(this._shadow),i=false;
if(p!==this._shadow){this._removeShadow();
i=true
}if(p){a.DomUtil.addClass(p,j)
}this._shadow=p;
if(o.opacity<1){this._updateOpacity()
}var m=this._map._panes;
if(l){m.markerPane.appendChild(this._icon)
}if(p&&i){m.shadowPane.appendChild(this._shadow)
}},_removeIcon:function(){if(this.options.riseOnHover){a.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex)
}this._map._panes.markerPane.removeChild(this._icon);
this._icon=null
},_removeShadow:function(){if(this._shadow){this._map._panes.shadowPane.removeChild(this._shadow)
}this._shadow=null
},_setPos:function(h){a.DomUtil.setPosition(this._icon,h);
if(this._shadow){a.DomUtil.setPosition(this._shadow,h)
}this._zIndex=h.y+this.options.zIndexOffset;
this._resetZIndex()
},_updateZIndex:function(h){this._icon.style.zIndex=this._zIndex+h
},_animateZoom:function(h){var i=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center);
this._setPos(i)
},_initInteraction:function(){if(!this.options.clickable){return
}var k=this._icon,j=["dblclick","mousedown","mouseover","mouseout","contextmenu"];
a.DomUtil.addClass(k,"leaflet-clickable");
a.DomEvent.on(k,"click",this._onMouseClick,this);
a.DomEvent.on(k,"keypress",this._onKeyPress,this);
for(var h=0;
h<j.length;
h++){a.DomEvent.on(k,j[h],this._fireMouseEvent,this)
}if(a.Handler.MarkerDrag){this.dragging=new a.Handler.MarkerDrag(this);
if(this.options.draggable){this.dragging.enable()
}}},_onMouseClick:function(i){var h=this.dragging&&this.dragging.moved();
if(this.hasEventListeners(i.type)||h){a.DomEvent.stopPropagation(i)
}if(h){return
}if((!this.dragging||!this.dragging._enabled)&&this._map.dragging&&this._map.dragging.moved()){return
}this.fire(i.type,{originalEvent:i,latlng:this._latlng})
},_onKeyPress:function(h){if(h.keyCode===13){this.fire("click",{originalEvent:h,latlng:this._latlng})
}},_fireMouseEvent:function(h){this.fire(h.type,{originalEvent:h,latlng:this._latlng});
if(h.type==="contextmenu"&&this.hasEventListeners(h.type)){a.DomEvent.preventDefault(h)
}if(h.type!=="mousedown"){a.DomEvent.stopPropagation(h)
}else{a.DomEvent.preventDefault(h)
}},setOpacity:function(h){this.options.opacity=h;
if(this._map){this._updateOpacity()
}return this
},_updateOpacity:function(){a.DomUtil.setOpacity(this._icon,this.options.opacity);
if(this._shadow){a.DomUtil.setOpacity(this._shadow,this.options.opacity)
}},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)
},_resetZIndex:function(){this._updateZIndex(0)
}});
a.marker=function(i,h){return new a.Marker(i,h)
};
a.DivIcon=a.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:false},createIcon:function(i){var j=(i&&i.tagName==="DIV")?i:b.createElement("div"),h=this.options;
if(h.html!==false){j.innerHTML=h.html
}else{j.innerHTML=""
}if(h.bgPos){j.style.backgroundPosition=(-h.bgPos.x)+"px "+(-h.bgPos.y)+"px"
}this._setIconStyles(j,"icon");
return j
},createShadow:function(){return null
}});
a.divIcon=function(h){return new a.DivIcon(h)
};
a.Map.mergeOptions({closePopupOnClick:true});
a.Popup=a.Class.extend({includes:a.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:true,closeButton:true,offset:[0,7],autoPanPadding:[5,5],keepInView:false,className:"",zoomAnimation:true},initialize:function(h,i){a.setOptions(this,h);
this._source=i;
this._animated=a.Browser.any3d&&this.options.zoomAnimation;
this._isOpen=false
},onAdd:function(i){this._map=i;
if(!this._container){this._initLayout()
}this._updateContent();
var h=i.options.fadeAnimation;
if(h){a.DomUtil.setOpacity(this._container,0)
}i._panes.popupPane.appendChild(this._container);
i.on(this._getEvents(),this);
this._update();
if(h){a.DomUtil.setOpacity(this._container,1)
}this.fire("open");
i.fire("popupopen",{popup:this});
if(this._source){this._source.fire("popupopen",{popup:this})
}},addTo:function(h){h.addLayer(this);
return this
},openOn:function(h){h.openPopup(this);
return this
},onRemove:function(h){h._panes.popupPane.removeChild(this._container);
a.Util.falseFn(this._container.offsetWidth);
h.off(this._getEvents(),this);
if(h.options.fadeAnimation){a.DomUtil.setOpacity(this._container,0)
}this._map=null;
this.fire("close");
h.fire("popupclose",{popup:this});
if(this._source){this._source.fire("popupclose",{popup:this})
}},setLatLng:function(h){this._latlng=a.latLng(h);
this._update();
return this
},setContent:function(h){this._content=h;
this._update();
return this
},_getEvents:function(){var h={viewreset:this._updatePosition};
if(this._animated){h.zoomanim=this._zoomAnimation
}if("closeOnClick" in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick){h.preclick=this._close
}if(this.options.keepInView){h.moveend=this._adjustPan
}return h
},_close:function(){if(this._map){this._map.closePopup(this)
}},_initLayout:function(){var j="leaflet-popup",k=j+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),h=this._container=a.DomUtil.create("div",k),i;
if(this.options.closeButton){i=this._closeButton=a.DomUtil.create("a",j+"-close-button",h);
i.href="#close";
i.innerHTML="&#215;";
a.DomEvent.disableClickPropagation(i);
a.DomEvent.on(i,"click",this._onCloseButtonClick,this)
}var l=this._wrapper=a.DomUtil.create("div",j+"-content-wrapper",h);
a.DomEvent.disableClickPropagation(l);
this._contentNode=a.DomUtil.create("div",j+"-content",l);
a.DomEvent.on(this._contentNode,"mousewheel",a.DomEvent.stopPropagation);
a.DomEvent.on(this._contentNode,"MozMousePixelScroll",a.DomEvent.stopPropagation);
a.DomEvent.on(l,"contextmenu",a.DomEvent.stopPropagation);
this._tipContainer=a.DomUtil.create("div",j+"-tip-container",h);
this._tip=a.DomUtil.create("div",j+"-tip",this._tipContainer)
},_update:function(){if(!this._map){return
}this._container.style.visibility="hidden";
this._updateContent();
this._updateLayout();
this._updatePosition();
this._container.style.visibility="";
this._adjustPan()
},_updateContent:function(){if(!this._content){return
}if(typeof this._content==="string"){this._contentNode.innerHTML=this._content
}else{while(this._contentNode.hasChildNodes()){this._contentNode.removeChild(this._contentNode.firstChild)
}this._contentNode.appendChild(this._content)
}this.fire("contentupdate")
},_updateLayout:function(){var i=this._contentNode,k=i.style;
k.width="";
k.whiteSpace="nowrap";
var j=i.offsetWidth;
j=Math.min(j,this.options.maxWidth);
j=Math.max(j,this.options.minWidth);
k.width=(j+1)+"px";
k.whiteSpace="";
k.height="";
var h=i.offsetHeight,l=this.options.maxHeight,m="leaflet-popup-scrolled";
if(l&&h>l){k.height=l+"px";
a.DomUtil.addClass(i,m)
}else{a.DomUtil.removeClass(i,m)
}this._containerWidth=this._container.offsetWidth
},_updatePosition:function(){if(!this._map){return
}var j=this._map.latLngToLayerPoint(this._latlng),h=this._animated,i=a.point(this.options.offset);
if(h){a.DomUtil.setPosition(this._container,j)
}this._containerBottom=-i.y-(h?0:j.y);
this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(h?0:j.x);
this._container.style.bottom=this._containerBottom+"px";
this._container.style.left=this._containerLeft+"px"
},_zoomAnimation:function(h){var i=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center);
a.DomUtil.setPosition(this._container,i)
},_adjustPan:function(){if(!this.options.autoPan){return
}var h=this._map,n=this._container.offsetHeight,l=this._containerWidth,j=new a.Point(this._containerLeft,-n-this._containerBottom);
if(this._animated){j._add(a.DomUtil.getPosition(this._container))
}var i=h.layerPointToContainerPoint(j),k=a.point(this.options.autoPanPadding),o=h.getSize(),p=0,m=0;
if(i.x+l>o.x){p=i.x+l-o.x+k.x
}if(i.x-p<0){p=i.x-k.x
}if(i.y+n>o.y){m=i.y+n-o.y+k.y
}if(i.y-m<0){m=i.y-k.y
}if(p||m){h.fire("autopanstart").panBy([p,m])
}},_onCloseButtonClick:function(h){this._close();
a.DomEvent.stop(h)
}});
a.popup=function(h,i){return new a.Popup(h,i)
};
a.Map.include({openPopup:function(h,k,i){this.closePopup();
if(!(h instanceof a.Popup)){var j=h;
h=new a.Popup(i).setLatLng(k).setContent(j)
}h._isOpen=true;
this._popup=h;
return this.addLayer(h)
},closePopup:function(h){if(!h||h===this._popup){h=this._popup;
this._popup=null
}if(h){this.removeLayer(h);
h._isOpen=false
}return this
}});
a.Marker.include({openPopup:function(){if(this._popup&&this._map&&!this._map.hasLayer(this._popup)){this._popup.setLatLng(this._latlng);
this._map.openPopup(this._popup)
}return this
},closePopup:function(){if(this._popup){this._popup._close()
}return this
},togglePopup:function(){if(this._popup){if(this._popup._isOpen){this.closePopup()
}else{this.openPopup()
}}return this
},bindPopup:function(j,i){var h=a.point(this.options.icon.options.popupAnchor||[0,0]);
h=h.add(a.Popup.prototype.options.offset);
if(i&&i.offset){h=h.add(i.offset)
}i=a.extend({offset:h},i);
if(!this._popup){this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this)
}if(j instanceof a.Popup){a.setOptions(j,i);
this._popup=j
}else{this._popup=new a.Popup(i,this).setContent(j)
}return this
},setPopupContent:function(h){if(this._popup){this._popup.setContent(h)
}return this
},unbindPopup:function(){if(this._popup){this._popup=null;
this.off("click",this.togglePopup).off("remove",this.closePopup).off("move",this._movePopup)
}return this
},_movePopup:function(h){this._popup.setLatLng(h.latlng)
}});
a.LayerGroup=a.Class.extend({initialize:function(k){this._layers={};
var j,h;
if(k){for(j=0,h=k.length;
j<h;
j++){this.addLayer(k[j])
}}},addLayer:function(h){var i=this.getLayerId(h);
this._layers[i]=h;
if(this._map){this._map.addLayer(h)
}return this
},removeLayer:function(h){var i=h in this._layers?h:this.getLayerId(h);
if(this._map&&this._layers[i]){this._map.removeLayer(this._layers[i])
}delete this._layers[i];
return this
},hasLayer:function(h){if(!h){return false
}return(h in this._layers||this.getLayerId(h) in this._layers)
},clearLayers:function(){this.eachLayer(this.removeLayer,this);
return this
},invoke:function(h){var j=Array.prototype.slice.call(arguments,1),l,k;
for(l in this._layers){k=this._layers[l];
if(k[h]){k[h].apply(k,j)
}}return this
},onAdd:function(h){this._map=h;
this.eachLayer(h.addLayer,h)
},onRemove:function(h){this.eachLayer(h.removeLayer,h);
this._map=null
},addTo:function(h){h.addLayer(this);
return this
},eachLayer:function(k,j){for(var h in this._layers){k.call(j,this._layers[h])
}return this
},getLayer:function(h){return this._layers[h]
},getLayers:function(){var j=[];
for(var h in this._layers){j.push(this._layers[h])
}return j
},setZIndex:function(h){return this.invoke("setZIndex",h)
},getLayerId:function(h){return a.stamp(h)
}});
a.layerGroup=function(h){return new a.LayerGroup(h)
};
a.FeatureGroup=a.LayerGroup.extend({includes:a.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(h){if(this.hasLayer(h)){return this
}h.on(a.FeatureGroup.EVENTS,this._propagateEvent,this);
a.LayerGroup.prototype.addLayer.call(this,h);
if(this._popupContent&&h.bindPopup){h.bindPopup(this._popupContent,this._popupOptions)
}return this.fire("layeradd",{layer:h})
},removeLayer:function(h){if(!this.hasLayer(h)){return this
}if(h in this._layers){h=this._layers[h]
}h.off(a.FeatureGroup.EVENTS,this._propagateEvent,this);
a.LayerGroup.prototype.removeLayer.call(this,h);
if(this._popupContent){this.invoke("unbindPopup")
}return this.fire("layerremove",{layer:h})
},bindPopup:function(i,h){this._popupContent=i;
this._popupOptions=h;
return this.invoke("bindPopup",i,h)
},setStyle:function(h){return this.invoke("setStyle",h)
},bringToFront:function(){return this.invoke("bringToFront")
},bringToBack:function(){return this.invoke("bringToBack")
},getBounds:function(){var h=new a.LatLngBounds();
this.eachLayer(function(i){h.extend(i instanceof a.Marker?i.getLatLng():i.getBounds())
});
return h
},_propagateEvent:function(h){if(!h.layer){h.layer=h.target
}h.target=this;
this.fire(h.type,h)
}});
a.featureGroup=function(h){return new a.FeatureGroup(h)
};
a.Path=a.Class.extend({includes:[a.Mixin.Events],statics:{CLIP_PADDING:(function(){var h=a.Browser.mobile?1280:2000,i=(h/Math.max(d.outerWidth,d.outerHeight)-1)/2;
return Math.max(0,Math.min(0.5,i))
})()},options:{stroke:true,color:"#0033ff",dashArray:null,weight:5,opacity:0.5,fill:false,fillColor:null,fillOpacity:0.2,clickable:true},initialize:function(h){a.setOptions(this,h)
},onAdd:function(h){this._map=h;
if(!this._container){this._initElements();
this._initEvents()
}this.projectLatlngs();
this._updatePath();
if(this._container){this._map._pathRoot.appendChild(this._container)
}this.fire("add");
h.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)
},addTo:function(h){h.addLayer(this);
return this
},onRemove:function(h){h._pathRoot.removeChild(this._container);
this.fire("remove");
this._map=null;
if(a.Browser.vml){this._container=null;
this._stroke=null;
this._fill=null
}h.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)
},projectLatlngs:function(){},setStyle:function(h){a.setOptions(this,h);
if(this._container){this._updateStyle()
}return this
},redraw:function(){if(this._map){this.projectLatlngs();
this._updatePath()
}return this
}});
a.Map.include({_updatePathViewport:function(){var l=a.Path.CLIP_PADDING,k=this.getSize(),i=a.DomUtil.getPosition(this._mapPane),j=i.multiplyBy(-1)._subtract(k.multiplyBy(l)._round()),h=j.add(k.multiplyBy(1+l*2)._round());
this._pathViewport=new a.Bounds(j,h)
}});
a.Path.SVG_NS="http://www.w3.org/2000/svg";
a.Browser.svg=!!(b.createElementNS&&b.createElementNS(a.Path.SVG_NS,"svg").createSVGRect);
a.Path=a.Path.extend({statics:{SVG:a.Browser.svg},bringToFront:function(){var h=this._map._pathRoot,i=this._container;
if(i&&h.lastChild!==i){h.appendChild(i)
}return this
},bringToBack:function(){var h=this._map._pathRoot,i=this._container,j=h.firstChild;
if(i&&j!==i){h.insertBefore(i,j)
}return this
},getPathString:function(){},_createElement:function(h){return b.createElementNS(a.Path.SVG_NS,h)
},_initElements:function(){this._map._initPathRoot();
this._initPath();
this._initStyle()
},_initPath:function(){this._container=this._createElement("g");
this._path=this._createElement("path");
this._container.appendChild(this._path)
},_initStyle:function(){if(this.options.stroke){this._path.setAttribute("stroke-linejoin","round");
this._path.setAttribute("stroke-linecap","round")
}if(this.options.fill){this._path.setAttribute("fill-rule","evenodd")
}if(this.options.pointerEvents){this._path.setAttribute("pointer-events",this.options.pointerEvents)
}if(!this.options.clickable&&!this.options.pointerEvents){this._path.setAttribute("pointer-events","none")
}this._updateStyle()
},_updateStyle:function(){if(this.options.stroke){this._path.setAttribute("stroke",this.options.color);
this._path.setAttribute("stroke-opacity",this.options.opacity);
this._path.setAttribute("stroke-width",this.options.weight);
if(this.options.dashArray){this._path.setAttribute("stroke-dasharray",this.options.dashArray)
}else{this._path.removeAttribute("stroke-dasharray")
}}else{this._path.setAttribute("stroke","none")
}if(this.options.fill){this._path.setAttribute("fill",this.options.fillColor||this.options.color);
this._path.setAttribute("fill-opacity",this.options.fillOpacity)
}else{this._path.setAttribute("fill","none")
}},_updatePath:function(){var h=this.getPathString();
if(!h){h="M0 0"
}this._path.setAttribute("d",h)
},_initEvents:function(){if(this.options.clickable){if(a.Browser.svg||!a.Browser.vml){this._path.setAttribute("class","leaflet-clickable")
}a.DomEvent.on(this._container,"click",this._onMouseClick,this);
var j=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"];
for(var h=0;
h<j.length;
h++){a.DomEvent.on(this._container,j[h],this._fireMouseEvent,this)
}}},_onMouseClick:function(h){if(this._map.dragging&&this._map.dragging.moved()){return
}this._fireMouseEvent(h)
},_fireMouseEvent:function(k){if(!this.hasEventListeners(k.type)){return
}var j=this._map,i=j.mouseEventToContainerPoint(k),h=j.containerPointToLayerPoint(i),l=j.layerPointToLatLng(h);
this.fire(k.type,{latlng:l,layerPoint:h,containerPoint:i,originalEvent:k});
if(k.type==="contextmenu"){a.DomEvent.preventDefault(k)
}if(k.type!=="mousemove"){a.DomEvent.stopPropagation(k)
}}});
a.Map.include({_initPathRoot:function(){if(!this._pathRoot){this._pathRoot=a.Path.prototype._createElement("svg");
this._panes.overlayPane.appendChild(this._pathRoot);
if(this.options.zoomAnimation&&a.Browser.any3d){this._pathRoot.setAttribute("class"," leaflet-zoom-animated");
this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})
}else{this._pathRoot.setAttribute("class"," leaflet-zoom-hide")
}this.on("moveend",this._updateSvgViewport);
this._updateSvgViewport()
}},_animatePathZoom:function(h){var j=this.getZoomScale(h.zoom),i=this._getCenterOffset(h.center)._multiplyBy(-j)._add(this._pathViewport.min);
this._pathRoot.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(i)+" scale("+j+") ";
this._pathZooming=true
},_endPathZoom:function(){this._pathZooming=false
},_updateSvgViewport:function(){if(this._pathZooming){return
}this._updatePathViewport();
var k=this._pathViewport,l=k.min,i=k.max,m=i.x-l.x,h=i.y-l.y,j=this._pathRoot,n=this._panes.overlayPane;
if(a.Browser.mobileWebkit){n.removeChild(j)
}a.DomUtil.setPosition(j,l);
j.setAttribute("width",m);
j.setAttribute("height",h);
j.setAttribute("viewBox",[l.x,l.y,m,h].join(" "));
if(a.Browser.mobileWebkit){n.appendChild(j)
}}});
a.Path.include({bindPopup:function(i,h){if(i instanceof a.Popup){this._popup=i
}else{if(!this._popup||h){this._popup=new a.Popup(h,this)
}this._popup.setContent(i)
}if(!this._popupHandlersAdded){this.on("click",this._openPopup,this).on("remove",this.closePopup,this);
this._popupHandlersAdded=true
}return this
},unbindPopup:function(){if(this._popup){this._popup=null;
this.off("click",this._openPopup).off("remove",this.closePopup);
this._popupHandlersAdded=false
}return this
},openPopup:function(h){if(this._popup){h=h||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)];
this._openPopup({latlng:h})
}return this
},closePopup:function(){if(this._popup){this._popup._close()
}return this
},_openPopup:function(h){this._popup.setLatLng(h.latlng);
this._map.openPopup(this._popup)
}});
a.Browser.vml=!a.Browser.svg&&(function(){try{var j=b.createElement("div");
j.innerHTML='<v:shape adj="1"/>';
var h=j.firstChild;
h.style.behavior="url(#default#VML)";
return h&&(typeof h.adj==="object")
}catch(i){return false
}}());
a.Path=a.Browser.svg||!a.Browser.vml?a.Path:a.Path.extend({statics:{VML:true,CLIP_PADDING:0.02},_createElement:(function(){try{b.namespaces.add("lvml","urn:schemas-microsoft-com:vml");
return function(i){return b.createElement("<lvml:"+i+' class="lvml">')
}
}catch(h){return function(i){return b.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')
}
}}()),_initPath:function(){var h=this._container=this._createElement("shape");
a.DomUtil.addClass(h,"leaflet-vml-shape");
if(this.options.clickable){a.DomUtil.addClass(h,"leaflet-clickable")
}h.coordsize="1 1";
this._path=this._createElement("path");
h.appendChild(this._path);
this._map._pathRoot.appendChild(h)
},_initStyle:function(){this._updateStyle()
},_updateStyle:function(){var k=this._stroke,j=this._fill,i=this.options,h=this._container;
h.stroked=i.stroke;
h.filled=i.fill;
if(i.stroke){if(!k){k=this._stroke=this._createElement("stroke");
k.endcap="round";
h.appendChild(k)
}k.weight=i.weight+"px";
k.color=i.color;
k.opacity=i.opacity;
if(i.dashArray){k.dashStyle=i.dashArray instanceof Array?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," ")
}else{k.dashStyle=""
}}else{if(k){h.removeChild(k);
this._stroke=null
}}if(i.fill){if(!j){j=this._fill=this._createElement("fill");
h.appendChild(j)
}j.color=i.fillColor||i.color;
j.opacity=i.fillOpacity
}else{if(j){h.removeChild(j);
this._fill=null
}}},_updatePath:function(){var h=this._container.style;
h.display="none";
this._path.v=this.getPathString()+" ";
h.display=""
}});
a.Map.include(a.Browser.svg||!a.Browser.vml?{}:{_initPathRoot:function(){if(this._pathRoot){return
}var h=this._pathRoot=b.createElement("div");
h.className="leaflet-vml-container";
this._panes.overlayPane.appendChild(h);
this.on("moveend",this._updatePathViewport);
this._updatePathViewport()
}});
a.Browser.canvas=(function(){return !!b.createElement("canvas").getContext
}());
a.Path=(a.Path.SVG&&!d.L_PREFER_CANVAS)||!a.Browser.canvas?a.Path:a.Path.extend({statics:{CANVAS:true,SVG:false},redraw:function(){if(this._map){this.projectLatlngs();
this._requestUpdate()
}return this
},setStyle:function(h){a.setOptions(this,h);
if(this._map){this._updateStyle();
this._requestUpdate()
}return this
},onRemove:function(h){h.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this);
if(this.options.clickable){this._map.off("click",this._onClick,this);
this._map.off("mousemove",this._onMouseMove,this)
}this._requestUpdate();
this._map=null
},_requestUpdate:function(){if(this._map&&!a.Path._updateRequest){a.Path._updateRequest=a.Util.requestAnimFrame(this._fireMapMoveEnd,this._map)
}},_fireMapMoveEnd:function(){a.Path._updateRequest=null;
this.fire("moveend")
},_initElements:function(){this._map._initPathRoot();
this._ctx=this._map._canvasCtx
},_updateStyle:function(){var h=this.options;
if(h.stroke){this._ctx.lineWidth=h.weight;
this._ctx.strokeStyle=h.color
}if(h.fill){this._ctx.fillStyle=h.fillColor||h.color
}},_drawPath:function(){var o,n,k,l,h,m;
this._ctx.beginPath();
for(o=0,k=this._parts.length;
o<k;
o++){for(n=0,l=this._parts[o].length;
n<l;
n++){h=this._parts[o][n];
m=(n===0?"move":"line")+"To";
this._ctx[m](h.x,h.y)
}if(this instanceof a.Polygon){this._ctx.closePath()
}}},_checkIfEmpty:function(){return !this._parts.length
},_updatePath:function(){if(this._checkIfEmpty()){return
}var h=this._ctx,i=this.options;
this._drawPath();
h.save();
this._updateStyle();
if(i.fill){h.globalAlpha=i.fillOpacity;
h.fill()
}if(i.stroke){h.globalAlpha=i.opacity;
h.stroke()
}h.restore()
},_initEvents:function(){if(this.options.clickable){this._map.on("mousemove",this._onMouseMove,this);
this._map.on("click",this._onClick,this)
}},_onClick:function(h){if(this._containsPoint(h.layerPoint)){this.fire("click",h)
}},_onMouseMove:function(h){if(!this._map||this._map._animatingZoom){return
}if(this._containsPoint(h.layerPoint)){this._ctx.canvas.style.cursor="pointer";
this._mouseInside=true;
this.fire("mouseover",h)
}else{if(this._mouseInside){this._ctx.canvas.style.cursor="";
this._mouseInside=false;
this.fire("mouseout",h)
}}}});
a.Map.include((a.Path.SVG&&!d.L_PREFER_CANVAS)||!a.Browser.canvas?{}:{_initPathRoot:function(){var i=this._pathRoot,h;
if(!i){i=this._pathRoot=b.createElement("canvas");
i.style.position="absolute";
h=this._canvasCtx=i.getContext("2d");
h.lineCap="round";
h.lineJoin="round";
this._panes.overlayPane.appendChild(i);
if(this.options.zoomAnimation){this._pathRoot.className="leaflet-zoom-animated";
this.on("zoomanim",this._animatePathZoom);
this.on("zoomend",this._endPathZoom)
}this.on("moveend",this._updateCanvasViewport);
this._updateCanvasViewport()
}},_updateCanvasViewport:function(){if(this._pathZooming){return
}this._updatePathViewport();
var i=this._pathViewport,k=i.min,j=i.max.subtract(k),h=this._pathRoot;
a.DomUtil.setPosition(h,k);
h.width=j.x;
h.height=j.y;
h.getContext("2d").translate(-k.x,-k.y)
}});
a.LineUtil={simplify:function(j,h){if(!h||!j.length){return j.slice()
}var i=h*h;
j=this._reducePoints(j,i);
j=this._simplifyDP(j,i);
return j
},pointToSegmentDistance:function(i,j,h){return Math.sqrt(this._sqClosestPointOnSegment(i,j,h,true))
},closestPointOnSegment:function(i,j,h){return this._sqClosestPointOnSegment(i,j,h)
},_simplifyDP:function(m,j){var h=m.length,l=typeof Uint8Array!==g+""?Uint8Array:Array,o=new l(h);
o[0]=o[h-1]=1;
this._simplifyDPStep(m,o,j,0,h-1);
var k,n=[];
for(k=0;
k<h;
k++){if(o[k]){n.push(m[k])
}}return n
},_simplifyDPStep:function(q,j,h,n,p){var k=0,o,l,m;
for(l=n+1;
l<=p-1;
l++){m=this._sqClosestPointOnSegment(q[l],q[n],q[p],true);
if(m>k){o=l;
k=m
}}if(k>h){j[o]=1;
this._simplifyDPStep(q,j,h,n,o);
this._simplifyDPStep(q,j,h,o,p)
}},_reducePoints:function(l,j){var n=[l[0]];
for(var k=1,m=0,h=l.length;
k<h;
k++){if(this._sqDist(l[k],l[m])>j){n.push(l[k]);
m=k
}}if(m<h-1){n.push(l[h-1])
}return n
},clipSegment:function(o,n,h,q){var l=q?this._lastCode:this._getBitCode(o,h),j=this._getBitCode(n,h),k,i,m;
this._lastCode=j;
while(true){if(!(l|j)){return[o,n]
}else{if(l&j){return false
}else{k=l||j;
i=this._getEdgeIntersection(o,n,k,h);
m=this._getBitCode(i,h);
if(k===l){o=i;
l=m
}else{n=i;
j=m
}}}}},_getEdgeIntersection:function(k,i,o,n){var l=i.x-k.x,j=i.y-k.y,m=n.min,h=n.max;
if(o&8){return new a.Point(k.x+l*(h.y-k.y)/j,h.y)
}else{if(o&4){return new a.Point(k.x+l*(m.y-k.y)/j,m.y)
}else{if(o&2){return new a.Point(h.x,k.y+j*(h.x-k.x)/l)
}else{if(o&1){return new a.Point(m.x,k.y+j*(m.x-k.x)/l)
}}}}},_getBitCode:function(j,i){var h=0;
if(j.x<i.min.x){h|=1
}else{if(j.x>i.max.x){h|=2
}}if(j.y<i.min.y){h|=4
}else{if(j.y>i.max.y){h|=8
}}return h
},_sqDist:function(k,j){var i=j.x-k.x,h=j.y-k.y;
return i*i+h*h
},_sqClosestPointOnSegment:function(i,n,m,j){var l=n.x,k=n.y,r=m.x-l,q=m.y-k,h=r*r+q*q,o;
if(h>0){o=((i.x-l)*r+(i.y-k)*q)/h;
if(o>1){l=m.x;
k=m.y
}else{if(o>0){l+=r*o;
k+=q*o
}}}r=i.x-l;
q=i.y-k;
return j?r*r+q*q:new a.Point(l,k)
}};
a.Polyline=a.Path.extend({initialize:function(h,i){a.Path.prototype.initialize.call(this,i);
this._latlngs=this._convertLatLngs(h)
},options:{smoothFactor:1,noClip:false},projectLatlngs:function(){this._originalPoints=[];
for(var j=0,h=this._latlngs.length;
j<h;
j++){this._originalPoints[j]=this._map.latLngToLayerPoint(this._latlngs[j])
}},getPathString:function(){for(var j=0,h=this._parts.length,k="";
j<h;
j++){k+=this._getPathPartStr(this._parts[j])
}return k
},getLatLngs:function(){return this._latlngs
},setLatLngs:function(h){this._latlngs=this._convertLatLngs(h);
return this.redraw()
},addLatLng:function(h){this._latlngs.push(a.latLng(h));
return this.redraw()
},spliceLatLngs:function(){var h=[].splice.apply(this._latlngs,arguments);
this._convertLatLngs(this._latlngs,true);
this.redraw();
return h
},closestLayerPoint:function(h){var s=Infinity,k=this._parts,u,t,q=null;
for(var l=0,v=k.length;
l<v;
l++){var r=k[l];
for(var m=1,o=r.length;
m<o;
m++){u=r[m-1];
t=r[m];
var n=a.LineUtil._sqClosestPointOnSegment(h,u,t,true);
if(n<s){s=n;
q=a.LineUtil._sqClosestPointOnSegment(h,u,t)
}}}if(q){q.distance=Math.sqrt(s)
}return q
},getBounds:function(){return new a.LatLngBounds(this.getLatLngs())
},_convertLatLngs:function(j,k){var l,h,m=k?j:[];
for(l=0,h=j.length;
l<h;
l++){if(a.Util.isArray(j[l])&&typeof j[l][0]!=="number"){return
}m[l]=a.latLng(j[l])
}return m
},_initEvents:function(){a.Path.prototype._initEvents.call(this)
},_getPathPartStr:function(l){var i=a.Path.VML;
for(var k=0,h=l.length,n="",m;
k<h;
k++){m=l[k];
if(i){m._round()
}n+=(k?"L":"M")+m.x+" "+m.y
}return n
},_clipPoints:function(){var n=this._originalPoints,h=n.length,m,l,o;
if(this.options.noClip){this._parts=[n];
return
}this._parts=[];
var p=this._parts,j=this._map._pathViewport,q=a.LineUtil;
for(m=0,l=0;
m<h-1;
m++){o=q.clipSegment(n[m],n[m+1],j,m);
if(!o){continue
}p[l]=p[l]||[];
p[l].push(o[0]);
if((o[1]!==n[m+1])||(m===h-2)){p[l].push(o[1]);
l++
}}},_simplifyPoints:function(){var k=this._parts,l=a.LineUtil;
for(var j=0,h=k.length;
j<h;
j++){k[j]=l.simplify(k[j],this.options.smoothFactor)
}},_updatePath:function(){if(!this._map){return
}this._clipPoints();
this._simplifyPoints();
a.Path.prototype._updatePath.call(this)
}});
a.polyline=function(h,i){return new a.Polyline(h,i)
};
a.PolyUtil={};
a.PolyUtil.clipPolygon=function(x,h){var u,r=[1,4,2,8],s,q,o,w,v,t,m,l,n=a.LineUtil;
for(s=0,t=x.length;
s<t;
s++){x[s]._code=n._getBitCode(x[s],h)
}for(o=0;
o<4;
o++){m=r[o];
u=[];
for(s=0,t=x.length,q=t-1;
s<t;
q=s++){w=x[s];
v=x[q];
if(!(w._code&m)){if(v._code&m){l=n._getEdgeIntersection(v,w,m,h);
l._code=n._getBitCode(l,h);
u.push(l)
}u.push(w)
}else{if(!(v._code&m)){l=n._getEdgeIntersection(v,w,m,h);
l._code=n._getBitCode(l,h);
u.push(l)
}}}x=u
}return x
};
a.Polygon=a.Polyline.extend({options:{fill:true},initialize:function(j,k){var l,h,m;
a.Polyline.prototype.initialize.call(this,j,k);
if(j&&a.Util.isArray(j[0])&&(typeof j[0][0]!=="number")){this._latlngs=this._convertLatLngs(j[0]);
this._holes=j.slice(1);
for(l=0,h=this._holes.length;
l<h;
l++){m=this._holes[l]=this._convertLatLngs(this._holes[l]);
if(m[0].equals(m[m.length-1])){m.pop()
}}}j=this._latlngs;
if(j.length>=2&&j[0].equals(j[j.length-1])){j.pop()
}},projectLatlngs:function(){a.Polyline.prototype.projectLatlngs.call(this);
this._holePoints=[];
if(!this._holes){return
}var m,l,h,k;
for(m=0,h=this._holes.length;
m<h;
m++){this._holePoints[m]=[];
for(l=0,k=this._holes[m].length;
l<k;
l++){this._holePoints[m][l]=this._map.latLngToLayerPoint(this._holes[m][l])
}}},_clipPoints:function(){var l=this._originalPoints,m=[];
this._parts=[l].concat(this._holePoints);
if(this.options.noClip){return
}for(var k=0,j=this._parts.length;
k<j;
k++){var h=a.PolyUtil.clipPolygon(this._parts[k],this._map._pathViewport);
if(h.length){m.push(h)
}}this._parts=m
},_getPathPartStr:function(h){var i=a.Polyline.prototype._getPathPartStr.call(this,h);
return i+(a.Browser.svg?"z":"x")
}});
a.polygon=function(h,i){return new a.Polygon(h,i)
};
(function(){function h(i){return a.FeatureGroup.extend({initialize:function(j,k){this._layers={};
this._options=k;
this.setLatLngs(j)
},setLatLngs:function(k){var l=0,j=k.length;
this.eachLayer(function(m){if(l<j){m.setLatLngs(k[l++])
}else{this.removeLayer(m)
}},this);
while(l<j){this.addLayer(new i(k[l++],this._options))
}return this
},getLatLngs:function(){var j=[];
this.eachLayer(function(k){j.push(k.getLatLngs())
});
return j
}})
}a.MultiPolyline=h(a.Polyline);
a.MultiPolygon=h(a.Polygon);
a.multiPolyline=function(i,j){return new a.MultiPolyline(i,j)
};
a.multiPolygon=function(i,j){return new a.MultiPolygon(i,j)
}
}());
a.Rectangle=a.Polygon.extend({initialize:function(i,h){a.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(i),h)
},setBounds:function(h){this.setLatLngs(this._boundsToLatLngs(h))
},_boundsToLatLngs:function(h){h=a.latLngBounds(h);
return[h.getSouthWest(),h.getNorthWest(),h.getNorthEast(),h.getSouthEast()]
}});
a.rectangle=function(i,h){return new a.Rectangle(i,h)
};
a.Circle=a.Path.extend({initialize:function(j,h,i){a.Path.prototype.initialize.call(this,i);
this._latlng=a.latLng(j);
this._mRadius=h
},options:{fill:true},setLatLng:function(h){this._latlng=a.latLng(h);
return this.redraw()
},setRadius:function(h){this._mRadius=h;
return this.redraw()
},projectLatlngs:function(){var j=this._getLngRadius(),i=this._latlng,h=this._map.latLngToLayerPoint([i.lat,i.lng-j]);
this._point=this._map.latLngToLayerPoint(i);
this._radius=Math.max(this._point.x-h.x,1)
},getBounds:function(){var j=this._getLngRadius(),h=(this._mRadius/40075017)*360,i=this._latlng;
return new a.LatLngBounds([i.lat-h,i.lng-j],[i.lat+h,i.lng+j])
},getLatLng:function(){return this._latlng
},getPathString:function(){var i=this._point,h=this._radius;
if(this._checkIfEmpty()){return""
}if(a.Browser.svg){return"M"+i.x+","+(i.y-h)+"A"+h+","+h+",0,1,1,"+(i.x-0.1)+","+(i.y-h)+" z"
}else{i._round();
h=Math.round(h);
return"AL "+i.x+","+i.y+" "+h+","+h+" 0,"+(65535*360)
}},getRadius:function(){return this._mRadius
},_getLatRadius:function(){return(this._mRadius/40075017)*360
},_getLngRadius:function(){return this._getLatRadius()/Math.cos(a.LatLng.DEG_TO_RAD*this._latlng.lat)
},_checkIfEmpty:function(){if(!this._map){return false
}var h=this._map._pathViewport,i=this._radius,j=this._point;
return j.x-i>h.max.x||j.y-i>h.max.y||j.x+i<h.min.x||j.y+i<h.min.y
}});
a.circle=function(j,h,i){return new a.Circle(j,h,i)
};
a.CircleMarker=a.Circle.extend({options:{radius:10,weight:2},initialize:function(i,h){a.Circle.prototype.initialize.call(this,i,null,h);
this._radius=this.options.radius
},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)
},_updateStyle:function(){a.Circle.prototype._updateStyle.call(this);
this.setRadius(this.options.radius)
},setRadius:function(h){this.options.radius=this._radius=h;
return this.redraw()
}});
a.circleMarker=function(i,h){return new a.CircleMarker(i,h)
};
a.Polyline.include(!a.Path.CANVAS?{}:{_containsPoint:function(h,r){var q,o,m,s,n,t,l,u=this.options.weight/2;
if(a.Browser.touch){u+=10
}for(q=0,s=this._parts.length;
q<s;
q++){l=this._parts[q];
for(o=0,n=l.length,m=n-1;
o<n;
m=o++){if(!r&&(o===0)){continue
}t=a.LineUtil.pointToSegmentDistance(h,l[m],l[o]);
if(t<=u){return true
}}}return false
}});
a.Polygon.include(!a.Path.CANVAS?{}:{_containsPoint:function(h){var m=false,l,u,t,r,q,o,s,n;
if(a.Polyline.prototype._containsPoint.call(this,h,true)){return true
}for(r=0,s=this._parts.length;
r<s;
r++){l=this._parts[r];
for(q=0,n=l.length,o=n-1;
q<n;
o=q++){u=l[q];
t=l[o];
if(((u.y>h.y)!==(t.y>h.y))&&(h.x<(t.x-u.x)*(h.y-u.y)/(t.y-u.y)+u.x)){m=!m
}}}return m
}});
a.Circle.include(!a.Path.CANVAS?{}:{_drawPath:function(){var h=this._point;
this._ctx.beginPath();
this._ctx.arc(h.x,h.y,this._radius,0,Math.PI*2,false)
},_containsPoint:function(j){var i=this._point,h=this.options.stroke?this.options.weight/2:0;
return(j.distanceTo(i)<=this._radius+h)
}});
a.CircleMarker.include(!a.Path.CANVAS?{}:{_updateStyle:function(){a.Path.prototype._updateStyle.call(this)
}});
a.GeoJSON=a.FeatureGroup.extend({initialize:function(i,h){a.setOptions(this,h);
this._layers={};
if(i){this.addData(i)
}},addData:function(k){var o=a.Util.isArray(k)?k:k.features,n,h,m;
if(o){for(n=0,h=o.length;
n<h;
n++){m=o[n];
if(m.geometries||m.geometry||m.features||m.coordinates){this.addData(o[n])
}}return this
}var j=this.options;
if(j.filter&&!j.filter(k)){return
}var l=a.GeoJSON.geometryToLayer(k,j.pointToLayer,j.coordsToLatLng);
l.feature=a.GeoJSON.asFeature(k);
l.defaultOptions=l.options;
this.resetStyle(l);
if(j.onEachFeature){j.onEachFeature(k,l)
}return this.addLayer(l)
},resetStyle:function(h){var i=this.options.style;
if(i){a.Util.extend(h.options,h.defaultOptions);
this._setLayerStyle(h,i)
}},setStyle:function(h){this.eachLayer(function(i){this._setLayerStyle(i,h)
},this)
},_setLayerStyle:function(h,i){if(typeof i==="function"){i=i(h.feature)
}if(h.setStyle){h.setStyle(i)
}}});
a.extend(a.GeoJSON,{geometryToLayer:function(h,j,l){var r=h.type==="Feature"?h.geometry:h,s=r.coordinates,o=[],m,k,n,q,p;
l=l||this.coordsToLatLng;
switch(r.type){case"Point":m=l(s);
return j?j(h,m):new a.Marker(m);
case"MultiPoint":for(n=0,q=s.length;
n<q;
n++){m=l(s[n]);
p=j?j(h,m):new a.Marker(m);
o.push(p)
}return new a.FeatureGroup(o);
case"LineString":k=this.coordsToLatLngs(s,0,l);
return new a.Polyline(k);
case"Polygon":k=this.coordsToLatLngs(s,1,l);
return new a.Polygon(k);
case"MultiLineString":k=this.coordsToLatLngs(s,1,l);
return new a.MultiPolyline(k);
case"MultiPolygon":k=this.coordsToLatLngs(s,2,l);
return new a.MultiPolygon(k);
case"Circle":k=this.coordsToLatLngs(s,0,l);
return new a.Circle([k[0].lat,k[0].lng],r.radius);
case"GeometryCollection":for(n=0,q=r.geometries.length;
n<q;
n++){p=this.geometryToLayer({geometry:r.geometries[n],type:"Feature",properties:h.properties},j,l);
o.push(p)
}return new a.FeatureGroup(o);
default:throw new Error("Invalid GeoJSON object.")
}},coordsToLatLng:function(h){return new a.LatLng(h[1],h[0])
},coordsToLatLngs:function(m,l,o){var n,k,j,h=[];
for(k=0,j=m.length;
k<j;
k++){n=l?this.coordsToLatLngs(m[k],l-1,o):(o||this.coordsToLatLng)(m[k]);
h.push(n)
}return h
},latLngToCoords:function(h){return[h.lng,h.lat]
},latLngsToCoords:function(l){var k=[];
for(var j=0,h=l.length;
j<h;
j++){k.push(a.GeoJSON.latLngToCoords(l[j]))
}return k
},getFeature:function(i,h){return i.feature?a.extend({},i.feature,{geometry:h}):a.GeoJSON.asFeature(h)
},asFeature:function(h){if(h.type==="Feature"){return h
}return{type:"Feature",properties:{},geometry:h}
}});
var c={toGeoJSON:function(){return a.GeoJSON.getFeature(this,{type:"Point",coordinates:a.GeoJSON.latLngToCoords(this.getLatLng())})
}};
a.Marker.include(c);
a.Circle.include({toGeoJSON:function(){return{type:"Circle",coordinates:[[this.getLatLng().lng,this.getLatLng().lat]],radius:this.getRadius()}
}});
a.CircleMarker.include(c);
a.Polyline.include({toGeoJSON:function(){return a.GeoJSON.getFeature(this,{type:"LineString",coordinates:a.GeoJSON.latLngsToCoords(this.getLatLngs())})
}});
a.Polygon.include({toGeoJSON:function(){var l=[a.GeoJSON.latLngsToCoords(this.getLatLngs())],j,h,k;
l[0].push(l[0][0]);
if(this._holes){for(j=0,h=this._holes.length;
j<h;
j++){k=a.GeoJSON.latLngsToCoords(this._holes[j]);
k.push(k[0]);
l.push(k)
}}return a.GeoJSON.getFeature(this,{type:"Polygon",coordinates:l})
}});
(function(){function h(j,i){j.include({toGeoJSON:function(){var k=[];
this.eachLayer(function(l){k.push(l.toGeoJSON().geometry.coordinates)
});
return a.GeoJSON.getFeature(this,{type:i,coordinates:k})
}})
}h(a.MultiPolyline,"MultiLineString");
h(a.MultiPolygon,"MultiPolygon")
}());
a.LayerGroup.include({toGeoJSON:function(){var h=[];
this.eachLayer(function(i){if(i.toGeoJSON){h.push(a.GeoJSON.asFeature(i.toGeoJSON()))
}});
return{type:"FeatureCollection",features:h}
}});
a.geoJson=function(i,h){return new a.GeoJSON(i,h)
};
a.DomEvent={addListener:function(k,m,n,i){var h=a.stamp(n),o="_leaflet_"+m+h,p,l,j;
if(k[o]){return this
}p=function(q){return n.call(i||k,q||a.DomEvent._getEvent())
};
if(a.Browser.msTouch&&m.indexOf("touch")===0){return this.addMsTouchListener(k,m,p,h)
}if(a.Browser.touch&&(m==="dblclick")&&this.addDoubleTapListener){this.addDoubleTapListener(k,p,h)
}if("addEventListener" in k){if(m==="mousewheel"){k.addEventListener("DOMMouseScroll",p,false);
k.addEventListener(m,p,false)
}else{if((m==="mouseenter")||(m==="mouseleave")){l=p;
j=(m==="mouseenter"?"mouseover":"mouseout");
p=function(q){if(!a.DomEvent._checkMouse(k,q)){return
}return l(q)
};
k.addEventListener(j,p,false)
}else{if(m==="click"&&a.Browser.android){l=p;
p=function(q){return a.DomEvent._filterClick(q,l)
};
k.addEventListener(m,p,false)
}else{k.addEventListener(m,p,false)
}}}}else{if("attachEvent" in k){k.attachEvent("on"+m,p)
}}k[o]=p;
return this
},removeListener:function(l,k,j){var m=a.stamp(j),h="_leaflet_"+k+m,i=l[h];
if(!i){return this
}if(a.Browser.msTouch&&k.indexOf("touch")===0){this.removeMsTouchListener(l,k,m)
}else{if(a.Browser.touch&&(k==="dblclick")&&this.removeDoubleTapListener){this.removeDoubleTapListener(l,m)
}else{if("removeEventListener" in l){if(k==="mousewheel"){l.removeEventListener("DOMMouseScroll",i,false);
l.removeEventListener(k,i,false)
}else{if((k==="mouseenter")||(k==="mouseleave")){l.removeEventListener((k==="mouseenter"?"mouseover":"mouseout"),i,false)
}else{l.removeEventListener(k,i,false)
}}}else{if("detachEvent" in l){l.detachEvent("on"+k,i)
}}}}l[h]=null;
return this
},stopPropagation:function(h){if(h.stopPropagation){h.stopPropagation()
}else{h.cancelBubble=true
}return this
},disableClickPropagation:function(k){var j=a.DomEvent.stopPropagation;
for(var h=a.Draggable.START.length-1;
h>=0;
h--){a.DomEvent.addListener(k,a.Draggable.START[h],j)
}return a.DomEvent.addListener(k,"click",a.DomEvent._fakeStop).addListener(k,"dblclick",j)
},preventDefault:function(h){if(h.preventDefault){h.preventDefault()
}else{h.returnValue=false
}return this
},stop:function(h){return a.DomEvent.preventDefault(h).stopPropagation(h)
},getMousePosition:function(m,h){var k=a.Browser.ie7,l=b.body,i=b.documentElement,r=m.pageX?m.pageX-l.scrollLeft-i.scrollLeft:m.clientX,p=m.pageY?m.pageY-l.scrollTop-i.scrollTop:m.clientY,q=new a.Point(r,p),o=h.getBoundingClientRect(),j=o.left-h.clientLeft,n=o.top-h.clientTop;
if(!a.DomUtil.documentIsLtr()&&(a.Browser.webkit||k)){j+=h.scrollWidth-h.clientWidth;
if(k&&a.DomUtil.getStyle(h,"overflow-y")!=="hidden"&&a.DomUtil.getStyle(h,"overflow")!=="hidden"){j+=17
}}return q._subtract(new a.Point(j,n))
},getWheelDelta:function(h){var i=0;
if(h.wheelDelta){i=h.wheelDelta/120
}if(h.detail){i=-h.detail/3
}return i
},_skipEvents:{},_fakeStop:function(h){a.DomEvent._skipEvents[h.type]=true
},_skipped:function(i){var h=this._skipEvents[i.type];
this._skipEvents[i.type]=false;
return h
},_checkMouse:function(h,k){var j=k.relatedTarget;
if(!j){return true
}try{while(j&&(j!==h)){j=j.parentNode
}}catch(i){return false
}return(j!==h)
},_getEvent:function(){var i=d.event;
if(!i){var h=arguments.callee.caller;
while(h){i=h["arguments"][0];
if(i&&d.Event===i.constructor){break
}h=h.caller
}}return i
},_filterClick:function(k,j){var i=(k.timeStamp||k.originalEvent.timeStamp),h=a.DomEvent._lastClick&&(i-a.DomEvent._lastClick);
if((h&&h>100&&h<1000)||(k.target._simulatedClick&&!k._simulated)){a.DomEvent.stop(k);
return
}a.DomEvent._lastClick=i;
return j(k)
}};
a.DomEvent.on=a.DomEvent.addListener;
a.DomEvent.off=a.DomEvent.removeListener;
a.Draggable=a.Class.extend({includes:a.Mixin.Events,statics:{START:a.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",MSPointerDown:"touchmove"}},initialize:function(h,i){this._element=h;
this._dragStartTarget=i||h
},enable:function(){if(this._enabled){return
}for(var h=a.Draggable.START.length-1;
h>=0;
h--){a.DomEvent.on(this._dragStartTarget,a.Draggable.START[h],this._onDown,this)
}this._enabled=true
},disable:function(){if(!this._enabled){return
}for(var h=a.Draggable.START.length-1;
h>=0;
h--){a.DomEvent.off(this._dragStartTarget,a.Draggable.START[h],this._onDown,this)
}this._enabled=false;
this._moved=false
},_onDown:function(i){if(i.shiftKey||((i.which!==1)&&(i.button!==1)&&!i.touches)){return
}a.DomEvent.stopPropagation(i);
if(a.Draggable._disabled){return
}a.DomUtil.disableImageDrag();
a.DomUtil.disableTextSelection();
var j=i.touches?i.touches[0]:i,h=j.target;
if(a.Browser.touch&&h.tagName.toLowerCase()==="a"){a.DomUtil.addClass(h,"leaflet-active")
}this._moved=false;
if(this._moving){return
}this._startPoint=new a.Point(j.clientX,j.clientY);
this._startPos=this._newPos=a.DomUtil.getPosition(this._element);
a.DomEvent.on(b,a.Draggable.MOVE[i.type],this._onMove,this).on(b,a.Draggable.END[i.type],this._onUp,this)
},_onMove:function(i){if(i.touches&&i.touches.length>1){return
}var k=(i.touches&&i.touches.length===1?i.touches[0]:i),h=new a.Point(k.clientX,k.clientY),j=h.subtract(this._startPoint);
if(!j.x&&!j.y){return
}a.DomEvent.preventDefault(i);
if(!this._moved){this.fire("dragstart");
this._moved=true;
this._startPos=a.DomUtil.getPosition(this._element).subtract(j);
if(!a.Browser.touch){a.DomUtil.addClass(b.body,"leaflet-dragging")
}}this._newPos=this._startPos.add(j);
this._moving=true;
a.Util.cancelAnimFrame(this._animRequest);
this._animRequest=a.Util.requestAnimFrame(this._updatePosition,this,true,this._dragStartTarget)
},_updatePosition:function(){this.fire("predrag");
a.DomUtil.setPosition(this._element,this._newPos);
this.fire("drag")
},_onUp:function(){if(!a.Browser.touch){a.DomUtil.removeClass(b.body,"leaflet-dragging")
}for(var h in a.Draggable.MOVE){a.DomEvent.off(b,a.Draggable.MOVE[h],this._onMove).off(b,a.Draggable.END[h],this._onUp)
}a.DomUtil.enableImageDrag();
a.DomUtil.enableTextSelection();
if(this._moved){a.Util.cancelAnimFrame(this._animRequest);
this.fire("dragend")
}this._moving=false
}});
a.Handler=a.Class.extend({initialize:function(h){this._map=h
},enable:function(){if(this._enabled){return
}this._enabled=true;
this.addHooks()
},disable:function(){if(!this._enabled){return
}this._enabled=false;
this.removeHooks()
},enabled:function(){return !!this._enabled
}});
a.Map.mergeOptions({dragging:true,inertia:!a.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,inertiaThreshold:a.Browser.touch?32:18,easeLinearity:0.25,worldCopyJump:false});
a.Map.Drag=a.Handler.extend({addHooks:function(){if(!this._draggable){var h=this._map;
this._draggable=new a.Draggable(h._mapPane,h._container);
this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);
if(h.options.worldCopyJump){this._draggable.on("predrag",this._onPreDrag,this);
h.on("viewreset",this._onViewReset,this);
this._onViewReset()
}}this._draggable.enable()
},removeHooks:function(){this._draggable.disable()
},moved:function(){return this._draggable&&this._draggable._moved
},_onDragStart:function(){var h=this._map;
if(h._panAnim){h._panAnim.stop()
}h.fire("movestart").fire("dragstart");
if(h.options.inertia){this._positions=[];
this._times=[]
}},_onDrag:function(){if(this._map.options.inertia){var h=this._lastTime=+new Date(),i=this._lastPos=this._draggable._newPos;
this._positions.push(i);
this._times.push(h);
if(h-this._times[0]>200){this._positions.shift();
this._times.shift()
}}this._map.fire("move").fire("drag")
},_onViewReset:function(){var i=this._map.getSize()._divideBy(2),h=this._map.latLngToLayerPoint([0,0]);
this._initialWorldOffset=h.subtract(i).x;
this._worldWidth=this._map.project([0,180]).x
},_onPreDrag:function(){var n=this._worldWidth,m=Math.round(n/2),i=this._initialWorldOffset,h=this._draggable._newPos.x,k=(h-m+i)%n+m-i,j=(h+m+i)%n-m-i,l=Math.abs(k+i)<Math.abs(j+i)?k:j;
this._draggable._newPos.x=l
},_onDragEnd:function(){var i=this._map,t=i.options,p=+new Date()-this._lastTime,h=!t.inertia||p>t.inertiaThreshold||!this._positions[0];
i.fire("dragend");
if(h){i.fire("moveend")
}else{var q=this._lastPos.subtract(this._positions[0]),n=(this._lastTime+p-this._times[0])/1000,m=t.easeLinearity,l=q.multiplyBy(m/n),k=l.distanceTo([0,0]),s=Math.min(t.inertiaMaxSpeed,k),r=l.multiplyBy(s/k),j=s/(t.inertiaDeceleration*m),o=r.multiplyBy(-j/2).round();
if(!o.x||!o.y){i.fire("moveend")
}else{a.Util.requestAnimFrame(function(){i.panBy(o,{duration:j,easeLinearity:m,noMoveStart:true})
})
}}}});
a.Map.addInitHook("addHandler","dragging",a.Map.Drag);
a.Map.mergeOptions({doubleClickZoom:true});
a.Map.DoubleClickZoom=a.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)
},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)
},_onDoubleClick:function(h){this.setZoomAround(h.containerPoint,this._zoom+1)
}});
a.Map.addInitHook("addHandler","doubleClickZoom",a.Map.DoubleClickZoom);
a.Map.mergeOptions({scrollWheelZoom:true});
a.Map.ScrollWheelZoom=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);
a.DomEvent.on(this._map._container,"MozMousePixelScroll",a.DomEvent.preventDefault);
this._delta=0
},removeHooks:function(){a.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll);
a.DomEvent.off(this._map._container,"MozMousePixelScroll",a.DomEvent.preventDefault)
},_onWheelScroll:function(i){var j=a.DomEvent.getWheelDelta(i);
this._delta+=j;
this._lastMousePos=this._map.mouseEventToContainerPoint(i);
if(!this._startTime){this._startTime=+new Date()
}var h=Math.max(40-(+new Date()-this._startTime),0);
clearTimeout(this._timer);
this._timer=setTimeout(a.bind(this._performZoom,this),h);
a.DomEvent.preventDefault(i);
a.DomEvent.stopPropagation(i)
},_performZoom:function(){var i=this._map,j=this._delta,h=i.getZoom();
j=j>0?Math.ceil(j):Math.floor(j);
j=Math.max(Math.min(j,4),-4);
j=i._limitZoom(h+j)-h;
this._delta=0;
this._startTime=null;
if(!j){return
}i.setZoomAround(this._lastMousePos,h+j)
}});
a.Map.addInitHook("addHandler","scrollWheelZoom",a.Map.ScrollWheelZoom);
a.extend(a.DomEvent,{_touchstart:a.Browser.msTouch?"MSPointerDown":"touchstart",_touchend:a.Browser.msTouch?"MSPointerUp":"touchend",addDoubleTapListener:function(m,u,h){var t,p=false,n=250,l,j="_leaflet_",o=this._touchstart,s=this._touchend,r=[];
function k(x){var w;
if(a.Browser.msTouch){r.push(x.pointerId);
w=r.length
}else{w=x.touches.length
}if(w>1){return
}var v=Date.now(),y=v-(t||v);
l=x.touches?x.touches[0]:x;
p=(y>0&&y<=n);
t=v
}function q(y){if(a.Browser.msTouch){var w=r.indexOf(y.pointerId);
if(w===-1){return
}r.splice(w,1)
}if(p){if(a.Browser.msTouch){var v={},z;
for(var x in l){z=l[x];
if(typeof z==="function"){v[x]=z.bind(l)
}else{v[x]=z
}}l=v
}l.type="dblclick";
u(l);
t=null
}}m[j+o+h]=k;
m[j+s+h]=q;
var i=a.Browser.msTouch?b.documentElement:m;
m.addEventListener(o,k,false);
i.addEventListener(s,q,false);
if(a.Browser.msTouch){i.addEventListener("MSPointerCancel",q,false)
}return this
},removeDoubleTapListener:function(i,j){var h="_leaflet_";
i.removeEventListener(this._touchstart,i[h+this._touchstart+j],false);
(a.Browser.msTouch?b.documentElement:i).removeEventListener(this._touchend,i[h+this._touchend+j],false);
if(a.Browser.msTouch){b.documentElement.removeEventListener("MSPointerCancel",i[h+this._touchend+j],false)
}return this
}});
a.extend(a.DomEvent,{_msTouches:[],_msDocumentListener:false,addMsTouchListener:function(j,i,h,k){switch(i){case"touchstart":return this.addMsTouchListenerStart(j,i,h,k);
case"touchend":return this.addMsTouchListenerEnd(j,i,h,k);
case"touchmove":return this.addMsTouchListenerMove(j,i,h,k);
default:throw"Unknown touch event type"
}},addMsTouchListenerStart:function(n,k,j,o){var m="_leaflet_",l=this._msTouches;
var h=function(r){var q=false;
for(var p=0;
p<l.length;
p++){if(l[p].pointerId===r.pointerId){q=true;
break
}}if(!q){l.push(r)
}r.touches=l.slice();
r.changedTouches=[r];
j(r)
};
n[m+"touchstart"+o]=h;
n.addEventListener("MSPointerDown",h,false);
if(!this._msDocumentListener){var i=function(q){for(var p=0;
p<l.length;
p++){if(l[p].pointerId===q.pointerId){l.splice(p,1);
break
}}};
b.documentElement.addEventListener("MSPointerUp",i,false);
b.documentElement.addEventListener("MSPointerCancel",i,false);
this._msDocumentListener=true
}return this
},addMsTouchListenerMove:function(m,j,i,n){var l="_leaflet_",k=this._msTouches;
function h(p){if(p.pointerType===p.MSPOINTER_TYPE_MOUSE&&p.buttons===0){return
}for(var o=0;
o<k.length;
o++){if(k[o].pointerId===p.pointerId){k[o]=p;
break
}}p.touches=k.slice();
p.changedTouches=[p];
i(p)
}m[l+"touchmove"+n]=h;
m.addEventListener("MSPointerMove",h,false);
return this
},addMsTouchListenerEnd:function(m,j,i,n){var l="_leaflet_",k=this._msTouches;
var h=function(p){for(var o=0;
o<k.length;
o++){if(k[o].pointerId===p.pointerId){k.splice(o,1);
break
}}p.touches=k.slice();
p.changedTouches=[p];
i(p)
};
m[l+"touchend"+n]=h;
m.addEventListener("MSPointerUp",h,false);
m.addEventListener("MSPointerCancel",h,false);
return this
},removeMsTouchListener:function(k,i,l){var j="_leaflet_",h=k[j+i+l];
switch(i){case"touchstart":k.removeEventListener("MSPointerDown",h,false);
break;
case"touchmove":k.removeEventListener("MSPointerMove",h,false);
break;
case"touchend":k.removeEventListener("MSPointerUp",h,false);
k.removeEventListener("MSPointerCancel",h,false);
break
}return this
}});
a.Map.mergeOptions({touchZoom:a.Browser.touch&&!a.Browser.android23});
a.Map.TouchZoom=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)
},removeHooks:function(){a.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)
},_onTouchStart:function(k){var j=this._map;
if(!k.touches||k.touches.length!==2||j._animatingZoom||this._zooming){return
}var l=j.mouseEventToLayerPoint(k.touches[0]),i=j.mouseEventToLayerPoint(k.touches[1]),h=j._getCenterLayerPoint();
this._startCenter=l.add(i)._divideBy(2);
this._startDist=l.distanceTo(i);
this._moved=false;
this._zooming=true;
this._centerOffset=h.subtract(this._startCenter);
if(j._panAnim){j._panAnim.stop()
}a.DomEvent.on(b,"touchmove",this._onTouchMove,this).on(b,"touchend",this._onTouchEnd,this);
a.DomEvent.preventDefault(k)
},_onTouchMove:function(j){var i=this._map;
if(!j.touches||j.touches.length!==2||!this._zooming){return
}var k=i.mouseEventToLayerPoint(j.touches[0]),h=i.mouseEventToLayerPoint(j.touches[1]);
this._scale=k.distanceTo(h)/this._startDist;
this._delta=k._add(h)._divideBy(2)._subtract(this._startCenter);
if(this._scale===1){return
}if(!this._moved){a.DomUtil.addClass(i._mapPane,"leaflet-touching");
i.fire("movestart").fire("zoomstart");
this._moved=true
}a.Util.cancelAnimFrame(this._animRequest);
this._animRequest=a.Util.requestAnimFrame(this._updateOnMove,this,true,this._map._container);
a.DomEvent.preventDefault(j)
},_updateOnMove:function(){var k=this._map,i=this._getScaleOrigin(),h=k.layerPointToLatLng(i),j=k.getScaleZoom(this._scale);
k._animateZoom(h,j,this._startCenter,this._scale,this._delta)
},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=false;
return
}var n=this._map;
this._zooming=false;
a.DomUtil.removeClass(n._mapPane,"leaflet-touching");
a.Util.cancelAnimFrame(this._animRequest);
a.DomEvent.off(b,"touchmove",this._onTouchMove).off(b,"touchend",this._onTouchEnd);
var j=this._getScaleOrigin(),i=n.layerPointToLatLng(j),m=n.getZoom(),h=n.getScaleZoom(this._scale)-m,k=(h>0?Math.ceil(h):Math.floor(h)),l=n._limitZoom(m+k),o=n.getZoomScale(l)/this._scale;
n._animateZoom(i,l,j,o)
},_getScaleOrigin:function(){var h=this._centerOffset.subtract(this._delta).divideBy(this._scale);
return this._startCenter.add(h)
}});
a.Map.addInitHook("addHandler","touchZoom",a.Map.TouchZoom);
a.Map.mergeOptions({tap:true,tapTolerance:15});
a.Map.Tap=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"touchstart",this._onDown,this)
},removeHooks:function(){a.DomEvent.off(this._map._container,"touchstart",this._onDown,this)
},_onDown:function(i){if(!i.touches){return
}a.DomEvent.preventDefault(i);
this._fireClick=true;
if(i.touches.length>1){this._fireClick=false;
clearTimeout(this._holdTimeout);
return
}var j=i.touches[0],h=j.target;
this._startPos=this._newPos=new a.Point(j.clientX,j.clientY);
if(h.tagName.toLowerCase()==="a"){a.DomUtil.addClass(h,"leaflet-active")
}this._holdTimeout=setTimeout(a.bind(function(){if(this._isTapValid()){this._fireClick=false;
this._onUp();
this._simulateEvent("contextmenu",j)
}},this),1000);
a.DomEvent.on(b,"touchmove",this._onMove,this).on(b,"touchend",this._onUp,this)
},_onUp:function(i){clearTimeout(this._holdTimeout);
a.DomEvent.off(b,"touchmove",this._onMove,this).off(b,"touchend",this._onUp,this);
if(this._fireClick&&i&&i.changedTouches){var j=i.changedTouches[0],h=j.target;
if(h.tagName.toLowerCase()==="a"){a.DomUtil.removeClass(h,"leaflet-active")
}if(this._isTapValid()){this._simulateEvent("click",j)
}}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance
},_onMove:function(h){var i=h.touches[0];
this._newPos=new a.Point(i.clientX,i.clientY)
},_simulateEvent:function(h,j){var i=b.createEvent("MouseEvents");
i._simulated=true;
j.target._simulatedClick=true;
i.initMouseEvent(h,true,true,d,1,j.screenX,j.screenY,j.clientX,j.clientY,false,false,false,false,0,null);
j.target.dispatchEvent(i)
}});
if(a.Browser.touch&&!a.Browser.msTouch){a.Map.addInitHook("addHandler","tap",a.Map.Tap)
}a.Map.mergeOptions({boxZoom:true});
a.Map.BoxZoom=a.Handler.extend({initialize:function(h){this._map=h;
this._container=h._container;
this._pane=h._panes.overlayPane
},addHooks:function(){a.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)
},removeHooks:function(){a.DomEvent.off(this._container,"mousedown",this._onMouseDown)
},_onMouseDown:function(h){if(!h.shiftKey||((h.which!==1)&&(h.button!==1))){return false
}a.DomUtil.disableTextSelection();
a.DomUtil.disableImageDrag();
this._startLayerPoint=this._map.mouseEventToLayerPoint(h);
this._box=a.DomUtil.create("div","leaflet-zoom-box",this._pane);
a.DomUtil.setPosition(this._box,this._startLayerPoint);
this._container.style.cursor="crosshair";
a.DomEvent.on(b,"mousemove",this._onMouseMove,this).on(b,"mouseup",this._onMouseUp,this).on(b,"keydown",this._onKeyDown,this);
this._map.fire("boxzoomstart")
},_onMouseMove:function(l){var k=this._startLayerPoint,j=this._box,h=this._map.mouseEventToLayerPoint(l),m=h.subtract(k),i=new a.Point(Math.min(h.x,k.x),Math.min(h.y,k.y));
a.DomUtil.setPosition(j,i);
j.style.width=(Math.max(0,Math.abs(m.x)-4))+"px";
j.style.height=(Math.max(0,Math.abs(m.y)-4))+"px"
},_finish:function(){this._pane.removeChild(this._box);
this._container.style.cursor="";
a.DomUtil.enableTextSelection();
a.DomUtil.enableImageDrag();
a.DomEvent.off(b,"mousemove",this._onMouseMove).off(b,"mouseup",this._onMouseUp).off(b,"keydown",this._onKeyDown)
},_onMouseUp:function(k){this._finish();
var j=this._map,h=j.mouseEventToLayerPoint(k);
if(this._startLayerPoint.equals(h)){return
}var i=new a.LatLngBounds(j.layerPointToLatLng(this._startLayerPoint),j.layerPointToLatLng(h));
j.fitBounds(i);
j.fire("boxzoomend",{boxZoomBounds:i})
},_onKeyDown:function(h){if(h.keyCode===27){this._finish()
}}});
a.Map.addInitHook("addHandler","boxZoom",a.Map.BoxZoom);
a.Map.mergeOptions({keyboard:true,keyboardPanOffset:80,keyboardZoomOffset:1});
a.Map.Keyboard=a.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109,173]},initialize:function(h){this._map=h;
this._setPanOffset(h.options.keyboardPanOffset);
this._setZoomOffset(h.options.keyboardZoomOffset)
},addHooks:function(){var h=this._map._container;
if(h.tabIndex===-1){h.tabIndex="0"
}a.DomEvent.on(h,"focus",this._onFocus,this).on(h,"blur",this._onBlur,this).on(h,"mousedown",this._onMouseDown,this);
this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)
},removeHooks:function(){this._removeHooks();
var h=this._map._container;
a.DomEvent.off(h,"focus",this._onFocus,this).off(h,"blur",this._onBlur,this).off(h,"mousedown",this._onMouseDown,this);
this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)
},_onMouseDown:function(){if(this._focused){return
}var h=b.body,k=b.documentElement,j=h.scrollTop||k.scrollTop,i=h.scrollLeft||k.scrollLeft;
this._map._container.focus();
d.scrollTo(i,j)
},_onFocus:function(){this._focused=true;
this._map.fire("focus")
},_onBlur:function(){this._focused=false;
this._map.fire("blur")
},_setPanOffset:function(m){var l=this._panKeys={},j=this.keyCodes,k,h;
for(k=0,h=j.left.length;
k<h;
k++){l[j.left[k]]=[-1*m,0]
}for(k=0,h=j.right.length;
k<h;
k++){l[j.right[k]]=[m,0]
}for(k=0,h=j.down.length;
k<h;
k++){l[j.down[k]]=[0,m]
}for(k=0,h=j.up.length;
k<h;
k++){l[j.up[k]]=[0,-1*m]
}},_setZoomOffset:function(m){var l=this._zoomKeys={},j=this.keyCodes,k,h;
for(k=0,h=j.zoomIn.length;
k<h;
k++){l[j.zoomIn[k]]=m
}for(k=0,h=j.zoomOut.length;
k<h;
k++){l[j.zoomOut[k]]=-m
}},_addHooks:function(){a.DomEvent.on(b,"keydown",this._onKeyDown,this)
},_removeHooks:function(){a.DomEvent.off(b,"keydown",this._onKeyDown,this)
},_onKeyDown:function(j){var h=j.keyCode,i=this._map;
if(h in this._panKeys){if(i._panAnim&&i._panAnim._inProgress){return
}i.panBy(this._panKeys[h]);
if(i.options.maxBounds){i.panInsideBounds(i.options.maxBounds)
}}else{if(h in this._zoomKeys){i.setZoom(i.getZoom()+this._zoomKeys[h])
}else{return
}}a.DomEvent.stop(j)
}});
a.Map.addInitHook("addHandler","keyboard",a.Map.Keyboard);
a.Handler.MarkerDrag=a.Handler.extend({initialize:function(h){this._marker=h
},addHooks:function(){var h=this._marker._icon;
if(!this._draggable){this._draggable=new a.Draggable(h,h)
}this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this);
this._draggable.enable()
},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this);
this._draggable.disable()
},moved:function(){return this._draggable&&this._draggable._moved
},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")
},_onDrag:function(){var h=this._marker,k=h._shadow,i=a.DomUtil.getPosition(h._icon),j=h._map.layerPointToLatLng(i);
if(k){a.DomUtil.setPosition(k,i)
}h._latlng=j;
h.fire("move",{latlng:j}).fire("drag")
},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")
}});
a.Control=a.Class.extend({options:{position:"topright"},initialize:function(h){a.setOptions(this,h)
},getPosition:function(){return this.options.position
},setPosition:function(h){var i=this._map;
if(i){i.removeControl(this)
}this.options.position=h;
if(i){i.addControl(this)
}return this
},getContainer:function(){return this._container
},addTo:function(j){this._map=j;
var h=this._container=this.onAdd(j),k=this.getPosition(),i=j._controlCorners[k];
a.DomUtil.addClass(h,"leaflet-control");
if(k.indexOf("bottom")!==-1){i.insertBefore(h,i.firstChild)
}else{i.appendChild(h)
}return this
},removeFrom:function(i){var j=this.getPosition(),h=i._controlCorners[j];
h.removeChild(this._container);
this._map=null;
if(this.onRemove){this.onRemove(i)
}return this
}});
a.control=function(h){return new a.Control(h)
};
a.Map.include({addControl:function(h){h.addTo(this);
return this
},removeControl:function(h){h.removeFrom(this);
return this
},_initControlPos:function(){var j=this._controlCorners={},i="leaflet-",h=this._controlContainer=a.DomUtil.create("div",i+"control-container",this._container);
function k(m,n){var l=i+m+" "+i+n;
j[m+n]=a.DomUtil.create("div",l,h)
}k("top","left");
k("top","right");
k("bottom","left");
k("bottom","right")
},_clearControlPos:function(){this._container.removeChild(this._controlContainer)
}});
a.Control.Zoom=a.Control.extend({options:{position:"topleft"},onAdd:function(i){var j="leaflet-control-zoom",h=a.DomUtil.create("div",j+" leaflet-bar");
this._map=i;
this._zoomInButton=this._createButton("+","Zoom in",j+"-in",h,this._zoomIn,this);
this._zoomOutButton=this._createButton("-","Zoom out",j+"-out",h,this._zoomOut,this);
i.on("zoomend zoomlevelschange",this._updateDisabled,this);
return h
},onRemove:function(h){h.off("zoomend zoomlevelschange",this._updateDisabled,this)
},_zoomIn:function(h){this._map.zoomIn(h.shiftKey?3:1)
},_zoomOut:function(h){this._map.zoomOut(h.shiftKey?3:1)
},_createButton:function(k,o,m,h,l,j){var n=a.DomUtil.create("a",m,h);
n.innerHTML=k;
n.href="#";
n.title=o;
var i=a.DomEvent.stopPropagation;
a.DomEvent.on(n,"click",i).on(n,"mousedown",i).on(n,"dblclick",i).on(n,"click",a.DomEvent.preventDefault).on(n,"click",l,j);
return n
},_updateDisabled:function(){var i=this._map,h="leaflet-disabled";
a.DomUtil.removeClass(this._zoomInButton,h);
a.DomUtil.removeClass(this._zoomOutButton,h);
if(i._zoom===i.getMinZoom()){a.DomUtil.addClass(this._zoomOutButton,h)
}if(i._zoom===i.getMaxZoom()){a.DomUtil.addClass(this._zoomInButton,h)
}}});
a.Map.mergeOptions({zoomControl:true});
a.Map.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new a.Control.Zoom();
this.addControl(this.zoomControl)
}});
a.control.zoom=function(h){return new a.Control.Zoom(h)
};
a.Control.Attribution=a.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(h){a.setOptions(this,h);
this._attributions={}
},onAdd:function(h){this._container=a.DomUtil.create("div","leaflet-control-attribution");
a.DomEvent.disableClickPropagation(this._container);
h.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this);
this._update();
return this._container
},onRemove:function(h){h.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)
},setPrefix:function(h){this.options.prefix=h;
this._update();
return this
},addAttribution:function(h){if(!h){return
}if(!this._attributions[h]){this._attributions[h]=0
}this._attributions[h]++;
this._update();
return this
},removeAttribution:function(h){if(!h){return
}if(this._attributions[h]){this._attributions[h]--;
this._update()
}return this
},_update:function(){if(!this._map){return
}var k=[];
for(var h in this._attributions){if(this._attributions[h]){k.push(h)
}}var j=[];
if(this.options.prefix){j.push(this.options.prefix)
}if(k.length){j.push(k.join(", "))
}this._container.innerHTML=j.join(" | ")
},_onLayerAdd:function(h){if(h.layer.getAttribution){this.addAttribution(h.layer.getAttribution())
}},_onLayerRemove:function(h){if(h.layer.getAttribution){this.removeAttribution(h.layer.getAttribution())
}}});
a.Map.mergeOptions({attributionControl:true});
a.Map.addInitHook(function(){if(this.options.attributionControl){this.attributionControl=(new a.Control.Attribution()).addTo(this)
}});
a.control.attribution=function(h){return new a.Control.Attribution(h)
};
a.Control.Scale=a.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:true,imperial:true,updateWhenIdle:false},onAdd:function(k){this._map=k;
var j="leaflet-control-scale",h=a.DomUtil.create("div",j),i=this.options;
this._addScales(i,j,h);
k.on(i.updateWhenIdle?"moveend":"move",this._update,this);
k.whenReady(this._update,this);
return h
},onRemove:function(h){h.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)
},_addScales:function(i,j,h){if(i.metric){this._mScale=a.DomUtil.create("div",j+"-line",h)
}if(i.imperial){this._iScale=a.DomUtil.create("div",j+"-line",h)
}},_update:function(){var k=this._map.getBounds(),l=k.getCenter().lat,j=6378137*Math.PI*Math.cos(l*Math.PI/180),n=j*(k.getNorthEast().lng-k.getSouthWest().lng)/180,i=this._map.getSize(),h=this.options,m=0;
if(i.x>0){m=n*(h.maxWidth/i.x)
}this._updateScales(h,m)
},_updateScales:function(h,i){if(h.metric&&i){this._updateMetric(i)
}if(h.imperial&&i){this._updateImperial(i)
}},_updateMetric:function(i){var h=this._getRoundNum(i);
this._mScale.style.width=this._getScaleWidth(h/i)+"px";
this._mScale.innerHTML=h<1000?h+" m":(h/1000)+" km"
},_updateImperial:function(l){var k=l*3.2808399,m=this._iScale,j,i,h;
if(k>5280){j=k/5280;
i=this._getRoundNum(j);
m.style.width=this._getScaleWidth(i/j)+"px";
m.innerHTML=i+" mi"
}else{h=this._getRoundNum(k);
m.style.width=this._getScaleWidth(h/k)+"px";
m.innerHTML=h+" ft"
}},_getScaleWidth:function(h){return Math.round(this.options.maxWidth*h)-10
},_getRoundNum:function(i){var h=Math.pow(10,(Math.floor(i)+"").length-1),j=i/h;
j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:1;
return h*j
}});
a.control.scale=function(h){return new a.Control.Scale(h)
};
a.Control.Layers=a.Control.extend({options:{collapsed:true,position:"topright",autoZIndex:true},initialize:function(l,k,h){a.setOptions(this,h);
this._layers={};
this._lastZIndex=0;
this._handlingClick=false;
for(var j in l){this._addLayer(l[j],j)
}for(j in k){this._addLayer(k[j],j,true)
}},onAdd:function(h){this._initLayout();
this._update();
h.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this);
return this._container
},onRemove:function(h){h.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)
},addBaseLayer:function(i,h){this._addLayer(i,h);
this._update();
return this
},addOverlay:function(i,h){this._addLayer(i,h,true);
this._update();
return this
},removeLayer:function(h){var i=a.stamp(h);
delete this._layers[i];
this._update();
return this
},_initLayout:function(){var i="leaflet-control-layers",h=this._container=a.DomUtil.create("div",i);
h.setAttribute("aria-haspopup",true);
if(!a.Browser.touch){a.DomEvent.disableClickPropagation(h);
a.DomEvent.on(h,"mousewheel",a.DomEvent.stopPropagation)
}else{a.DomEvent.on(h,"click",a.DomEvent.stopPropagation)
}var k=this._form=a.DomUtil.create("form",i+"-list");
if(this.options.collapsed){if(!a.Browser.android){a.DomEvent.on(h,"mouseover",this._expand,this).on(h,"mouseout",this._collapse,this)
}var j=this._layersLink=a.DomUtil.create("a",i+"-toggle",h);
j.href="#";
j.title="Layers";
if(a.Browser.touch){a.DomEvent.on(j,"click",a.DomEvent.stop).on(j,"click",this._expand,this)
}else{a.DomEvent.on(j,"focus",this._expand,this)
}this._map.on("click",this._collapse,this)
}else{this._expand()
}this._baseLayersList=a.DomUtil.create("div",i+"-base",k);
this._separator=a.DomUtil.create("div",i+"-separator",k);
this._overlaysList=a.DomUtil.create("div",i+"-overlays",k);
h.appendChild(k)
},_addLayer:function(j,i,h){var k=a.stamp(j);
this._layers[k]={layer:j,name:i,overlay:h};
if(this.options.autoZIndex&&j.setZIndex){this._lastZIndex++;
j.setZIndex(this._lastZIndex)
}},_update:function(){if(!this._container){return
}this._baseLayersList.innerHTML="";
this._overlaysList.innerHTML="";
var h=false,k=false,j,l;
for(j in this._layers){l=this._layers[j];
this._addItem(l);
k=k||l.overlay;
h=h||!l.overlay
}this._separator.style.display=k&&h?"":"none"
},_onLayerChange:function(j){var i=this._layers[a.stamp(j.layer)];
if(!i){return
}if(!this._handlingClick){this._update()
}var h=i.overlay?(j.type==="layeradd"?"overlayadd":"overlayremove"):(j.type==="layeradd"?"baselayerchange":null);
if(h){this._map.fire(h,i)
}},_createRadioElement:function(h,k){var j='<input type="radio" class="leaflet-control-layers-selector" name="'+h+'"';
if(k){j+=' checked="checked"'
}j+="/>";
var i=b.createElement("div");
i.innerHTML=j;
return i.firstChild
},_addItem:function(m){var k=b.createElement("label"),i,l=this._map.hasLayer(m.layer);
if(m.overlay){i=b.createElement("input");
i.type="checkbox";
i.className="leaflet-control-layers-selector";
i.defaultChecked=l
}else{i=this._createRadioElement("leaflet-base-layers",l)
}i.layerId=a.stamp(m.layer);
a.DomEvent.on(i,"click",this._onInputClick,this);
var j=b.createElement("span");
j.innerHTML=" "+m.name;
k.appendChild(i);
k.appendChild(j);
var h=m.overlay?this._overlaysList:this._baseLayersList;
h.appendChild(k);
return k
},_onInputClick:function(){var k,j,m,h=this._form.getElementsByTagName("input"),l=h.length;
this._handlingClick=true;
for(k=0;
k<l;
k++){j=h[k];
m=this._layers[j.layerId];
if(j.checked&&!this._map.hasLayer(m.layer)){this._map.addLayer(m.layer)
}else{if(!j.checked&&this._map.hasLayer(m.layer)){this._map.removeLayer(m.layer)
}}}this._handlingClick=false
},_expand:function(){a.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")
},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")
}});
a.control.layers=function(j,i,h){return new a.Control.Layers(j,i,h)
};
a.PosAnimation=a.Class.extend({includes:a.Mixin.Events,run:function(i,h,j,k){this.stop();
this._el=i;
this._inProgress=true;
this._newPos=h;
this.fire("start");
i.style[a.DomUtil.TRANSITION]="all "+(j||0.25)+"s cubic-bezier(0,0,"+(k||0.5)+",1)";
a.DomEvent.on(i,a.DomUtil.TRANSITION_END,this._onTransitionEnd,this);
a.DomUtil.setPosition(i,h);
a.Util.falseFn(i.offsetWidth);
this._stepTimer=setInterval(a.bind(this._onStep,this),50)
},stop:function(){if(!this._inProgress){return
}a.DomUtil.setPosition(this._el,this._getPos());
this._onTransitionEnd();
a.Util.falseFn(this._el.offsetWidth)
},_onStep:function(){var h=this._getPos();
if(!h){this._onTransitionEnd();
return
}this._el._leaflet_pos=h;
this.fire("step")
},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var l,k,j,i=this._el,h=d.getComputedStyle(i);
if(a.Browser.any3d){j=h[a.DomUtil.TRANSFORM].match(this._transformRe);
if(!j){return
}l=parseFloat(j[1]);
k=parseFloat(j[2])
}else{l=parseFloat(h.left);
k=parseFloat(h.top)
}return new a.Point(l,k,true)
},_onTransitionEnd:function(){a.DomEvent.off(this._el,a.DomUtil.TRANSITION_END,this._onTransitionEnd,this);
if(!this._inProgress){return
}this._inProgress=false;
this._el.style[a.DomUtil.TRANSITION]="";
this._el._leaflet_pos=this._newPos;
clearInterval(this._stepTimer);
this.fire("step").fire("end")
}});
a.Map.include({setView:function(h,k,i){k=this._limitZoom(k);
h=a.latLng(h);
i=i||{};
if(this._panAnim){this._panAnim.stop()
}if(this._loaded&&!i.reset&&i!==true){if(i.animate!==g){i.zoom=a.extend({animate:i.animate},i.zoom);
i.pan=a.extend({animate:i.animate},i.pan)
}var j=(this._zoom!==k)?this._tryAnimatedZoom&&this._tryAnimatedZoom(h,k,i.zoom):this._tryAnimatedPan(h,i.pan);
if(j){clearTimeout(this._sizeTimer);
return this
}}this._resetView(h,k);
return this
},panBy:function(j,h){j=a.point(j).round();
h=h||{};
if(!j.x&&!j.y){return this
}if(!this._panAnim){this._panAnim=new a.PosAnimation();
this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)
}if(!h.noMoveStart){this.fire("movestart")
}if(h.animate!==false){a.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");
var i=this._getMapPanePos().subtract(j);
this._panAnim.run(this._mapPane,i,h.duration||0.25,h.easeLinearity)
}else{this._rawPanBy(j);
this.fire("move").fire("moveend")
}return this
},_onPanTransitionStep:function(){this.fire("move")
},_onPanTransitionEnd:function(){a.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");
this.fire("moveend")
},_tryAnimatedPan:function(h,i){var j=this._getCenterOffset(h)._floor();
if((i&&i.animate)!==true&&!this.getSize().contains(j)){return false
}this.panBy(j,i);
return true
}});
a.PosAnimation=a.DomUtil.TRANSITION?a.PosAnimation:a.PosAnimation.extend({run:function(i,h,j,k){this.stop();
this._el=i;
this._inProgress=true;
this._duration=j||0.25;
this._easeOutPower=1/Math.max(k||0.5,0.2);
this._startPos=a.DomUtil.getPosition(i);
this._offset=h.subtract(this._startPos);
this._startTime=+new Date();
this.fire("start");
this._animate()
},stop:function(){if(!this._inProgress){return
}this._step();
this._complete()
},_animate:function(){this._animId=a.Util.requestAnimFrame(this._animate,this);
this._step()
},_step:function(){var h=(+new Date())-this._startTime,i=this._duration*1000;
if(h<i){this._runFrame(this._easeOut(h/i))
}else{this._runFrame(1);
this._complete()
}},_runFrame:function(h){var i=this._startPos.add(this._offset.multiplyBy(h));
a.DomUtil.setPosition(this._el,i);
this.fire("step")
},_complete:function(){a.Util.cancelAnimFrame(this._animId);
this._inProgress=false;
this.fire("end")
},_easeOut:function(h){return 1-Math.pow(1-h,this._easeOutPower)
}});
a.Map.mergeOptions({zoomAnimation:true,zoomAnimationThreshold:4});
if(a.DomUtil.TRANSITION){a.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&a.DomUtil.TRANSITION&&a.Browser.any3d&&!a.Browser.android23&&!a.Browser.mobileOpera;
if(this._zoomAnimated){a.DomEvent.on(this._mapPane,a.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)
}})
}a.Map.include(!a.DomUtil.TRANSITION?{}:{_catchTransitionEnd:function(){if(this._animatingZoom){this._onZoomTransitionEnd()
}},_nothingToAnimate:function(){return !this._container.getElementsByClassName("leaflet-zoom-animated").length
},_tryAnimatedZoom:function(h,k,j){if(this._animatingZoom){return true
}j=j||{};
if(!this._zoomAnimated||j.animate===false||this._nothingToAnimate()||Math.abs(k-this._zoom)>this.options.zoomAnimationThreshold){return false
}var m=this.getZoomScale(k),l=this._getCenterOffset(h)._divideBy(1-1/m),i=this._getCenterLayerPoint()._add(l);
if(j.animate!==true&&!this.getSize().contains(l)){return false
}this.fire("movestart").fire("zoomstart");
this._animateZoom(h,k,i,m,null,true);
return true
},_animateZoom:function(h,k,j,l,m,i){this._animatingZoom=true;
a.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim");
this._animateToCenter=h;
this._animateToZoom=k;
if(a.Draggable){a.Draggable._disabled=true
}this.fire("zoomanim",{center:h,zoom:k,origin:j,scale:l,delta:m,backwards:i})
},_onZoomTransitionEnd:function(){this._animatingZoom=false;
a.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim");
this._resetView(this._animateToCenter,this._animateToZoom,true,true);
if(a.Draggable){a.Draggable._disabled=false
}}});
a.TileLayer.include({_animateZoom:function(l){if(!this._animating){this._animating=true;
this._prepareBgBuffer()
}var j=this._bgBuffer,h=a.DomUtil.TRANSFORM,i=l.delta?a.DomUtil.getTranslateString(l.delta):j.style[h],k=a.DomUtil.getScaleString(l.scale,l.origin);
j.style[h]=l.backwards?k+" "+i:i+" "+k
},_endZoomAnim:function(){var i=this._tileContainer,h=this._bgBuffer;
i.style.visibility="";
i.parentNode.appendChild(i);
a.Util.falseFn(h.offsetWidth);
this._animating=false
},_clearBgBuffer:function(){var h=this._map;
if(h&&!h._animatingZoom&&!h.touchZoom._zooming){this._bgBuffer.innerHTML="";
this._bgBuffer.style[a.DomUtil.TRANSFORM]=""
}},_prepareBgBuffer:function(){var j=this._tileContainer,i=this._bgBuffer;
var h=this._getLoadedTilesPercentage(i),k=this._getLoadedTilesPercentage(j);
if(i&&h>0.5&&k<0.5){j.style.visibility="hidden";
this._stopLoadingImages(j);
return
}i.style.visibility="hidden";
i.style[a.DomUtil.TRANSFORM]="";
this._tileContainer=i;
i=this._bgBuffer=j;
this._stopLoadingImages(i);
clearTimeout(this._clearBgBufferTimer)
},_getLoadedTilesPercentage:function(j){var k=j.getElementsByTagName("img"),l,h,m=0;
for(l=0,h=k.length;
l<h;
l++){if(k[l].complete){m++
}}return m/h
},_stopLoadingImages:function(j){var k=Array.prototype.slice.call(j.getElementsByTagName("img")),l,h,m;
for(l=0,h=k.length;
l<h;
l++){m=k[l];
if(!m.complete){m.onload=a.Util.falseFn;
m.onerror=a.Util.falseFn;
m.src=a.Util.emptyImageUrl;
m.parentNode.removeChild(m)
}}}});
a.Map.include({_defaultLocateOptions:{watch:false,setView:false,maxZoom:Infinity,timeout:10000,maximumAge:0,enableHighAccuracy:false},locate:function(h){h=this._locateOptions=a.extend(this._defaultLocateOptions,h);
if(!navigator.geolocation){this._handleGeolocationError({code:0,message:"Geolocation not supported."});
return this
}var j=a.bind(this._handleGeolocationResponse,this),i=a.bind(this._handleGeolocationError,this);
if(h.watch){this._locationWatchId=navigator.geolocation.watchPosition(j,i,h)
}else{navigator.geolocation.getCurrentPosition(j,i,h)
}return this
},stopLocate:function(){if(navigator.geolocation){navigator.geolocation.clearWatch(this._locationWatchId)
}if(this._locateOptions){this._locateOptions.setView=false
}return this
},_handleGeolocationError:function(h){var j=h.code,i=h.message||(j===1?"permission denied":(j===2?"position unavailable":"timeout"));
if(this._locateOptions.setView&&!this._loaded){this.fitWorld()
}this.fire("locationerror",{code:j,message:"Geolocation error: "+i+"."})
},_handleGeolocationResponse:function(o){var n=o.coords.latitude,q=o.coords.longitude,j=new a.LatLng(n,q),p=180*o.coords.accuracy/40075017,k=p/Math.cos(a.LatLng.DEG_TO_RAD*n),h=a.latLngBounds([n-p,q-k],[n+p,q+k]),s=this._locateOptions;
if(s.setView){var r=Math.min(this.getBoundsZoom(h),s.maxZoom);
this.setView(j,r)
}var m={latlng:j,bounds:h};
for(var l in o.coords){if(typeof o.coords[l]==="number"){m[l]=o.coords[l]
}}this.fire("locationfound",m)
}})
}(window,document));(function(b,a,c){L.drawVersion="0.2.1-dev";
L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes.",text:"Save"},cancel:{title:"Cancel editing, discards all changes.",text:"Cancel"}},buttons:{edit:"Edit layers",remove:"Delete layers"}},handlers:{edit:{tooltip:{text:"Drag handles, or marker to edit feature.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove"}}}}};
L.Draw={};
L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(e,d){this._map=e;
this._container=e._container;
this._overlayPane=e._panes.overlayPane;
this._popupPane=e._panes.popupPane;
if(d&&d.shapeOptions){d.shapeOptions=L.Util.extend({},this.options.shapeOptions,d.shapeOptions)
}L.Util.extend(this.options,d)
},enable:function(){if(this._enabled){return
}L.Handler.prototype.enable.call(this);
this.fire("enabled",{handler:this.type});
this._map.fire("draw:drawstart",{layerType:this.type})
},disable:function(){if(!this._enabled){return
}L.Handler.prototype.disable.call(this);
this.fire("disabled",{handler:this.type});
this._map.fire("draw:drawstop",{layerType:this.type})
},addHooks:function(){if(this._map){L.DomUtil.disableTextSelection();
this._tooltip=new L.Tooltip(this._map);
L.DomEvent.addListener(this._container,"keyup",this._cancelDrawing,this)
}},removeHooks:function(){if(this._map){L.DomUtil.enableTextSelection();
this._tooltip.dispose();
this._tooltip=null;
L.DomEvent.removeListener(this._container,"keyup",this._cancelDrawing)
}},setOptions:function(d){L.setOptions(this,d)
},_fireCreatedEvent:function(d){this._map.fire("draw:created",{layer:d,layerType:this.type})
},_cancelDrawing:function(d){if(d.keyCode===27){this.disable()
}}});
L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:true,drawError:{color:"#b00b00",message:L.drawLocal.draw.handlers.polyline.error,timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),guidelineDistance:20,shapeOptions:{stroke:true,color:"#f06eaa",weight:4,opacity:0.5,fill:false,clickable:true},zIndexOffset:2000},initialize:function(e,d){if(d&&d.drawError){d.drawError=L.Util.extend({},this.options.drawError,d.drawError)
}this.type=L.Draw.Polyline.TYPE;
L.Draw.Feature.prototype.initialize.call(this,e,d)
},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);
if(this._map){this._markers=[];
this._markerGroup=new L.LayerGroup();
this._map.addLayer(this._markerGroup);
this._poly=new L.Polyline([],this.options.shapeOptions);
this._tooltip.updateContent(this._getTooltipText());
if(!this._mouseMarker){this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})
}this._mouseMarker.on("click",this._onClick,this).addTo(this._map);
this._map.on("mousemove",this._onMouseMove,this).on("zoomend",this._onZoomEnd,this)
}},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);
this._clearHideErrorTimeout();
this._cleanUpShape();
this._map.removeLayer(this._markerGroup);
delete this._markerGroup;
delete this._markers;
this._map.removeLayer(this._poly);
delete this._poly;
this._mouseMarker.off("click",this._onClick,this);
this._map.removeLayer(this._mouseMarker);
delete this._mouseMarker;
this._clearGuides();
this._map.off("mousemove",this._onMouseMove,this).off("zoomend",this._onZoomEnd,this)
},_finishShape:function(){var d=this._poly.newLatLngIntersects(this._poly.getLatLngs()[0],true);
if((!this.options.allowIntersection&&d)||!this._shapeIsValid()){this._showErrorTooltip();
return
}this._fireCreatedEvent();
this.disable()
},_shapeIsValid:function(){return true
},_onZoomEnd:function(){this._updateGuide()
},_onMouseMove:function(f){var d=f.layerPoint,g=f.latlng;
this._currentLatLng=g;
this._updateTooltip(g);
this._updateGuide(d);
this._mouseMarker.setLatLng(g);
L.DomEvent.preventDefault(f.originalEvent)
},_onClick:function(f){var g=f.target.getLatLng(),d=this._markers.length;
if(d>0&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(g)){this._showErrorTooltip();
return
}else{if(this._errorShown){this._hideErrorTooltip()
}}this._markers.push(this._createMarker(g));
this._poly.addLatLng(g);
if(this._poly.getLatLngs().length===2){this._map.addLayer(this._poly)
}this._updateFinishHandler();
this._vertexAdded(g);
this._clearGuides();
this._updateTooltip()
},_updateFinishHandler:function(){var d=this._markers.length;
if(d>1){this._markers[d-1].on("click",this._finishShape,this)
}if(d>2){this._markers[d-2].off("click",this._finishShape,this)
}},_createMarker:function(e){var d=new L.Marker(e,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset*2});
this._markerGroup.addLayer(d);
return d
},_updateGuide:function(e){e=e||this._map.latLngToLayerPoint(this._currentLatLng);
var d=this._markers.length;
if(d>0){this._clearGuides();
this._drawGuide(this._map.latLngToLayerPoint(this._markers[d-1].getLatLng()),e)
}},_updateTooltip:function(d){var e=this._getTooltipText();
if(d){this._tooltip.updatePosition(d)
}if(!this._errorShown){this._tooltip.updateContent(e)
}},_drawGuide:function(d,k){var h=Math.floor(Math.sqrt(Math.pow((k.x-d.x),2)+Math.pow((k.y-d.y),2))),f,g,e,j;
if(!this._guidesContainer){this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane)
}for(f=this.options.guidelineDistance;
f<h;
f+=this.options.guidelineDistance){g=f/h;
e={x:Math.floor((d.x*(1-g))+(g*k.x)),y:Math.floor((d.y*(1-g))+(g*k.y))};
j=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer);
j.style.backgroundColor=!this._errorShown?this.options.shapeOptions.color:this.options.drawError.color;
L.DomUtil.setPosition(j,e)
}},_updateGuideColor:function(e){if(this._guidesContainer){for(var f=0,d=this._guidesContainer.childNodes.length;
f<d;
f++){this._guidesContainer.childNodes[f].style.backgroundColor=e
}}},_clearGuides:function(){if(this._guidesContainer){while(this._guidesContainer.firstChild){this._guidesContainer.removeChild(this._guidesContainer.firstChild)
}}},_getTooltipText:function(){var d,f,e;
if(this._markers.length===0){d={text:L.drawLocal.draw.handlers.polyline.tooltip.start}
}else{f=this._measurementRunningTotal+this._currentLatLng.distanceTo(this._markers[this._markers.length-1].getLatLng());
e=f>1000?(f/1000).toFixed(2)+" km":Math.ceil(f)+" m";
if(this._markers.length===1){d={text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:e}
}else{d={text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:e}
}}return d
},_showErrorTooltip:function(){this._errorShown=true;
this._tooltip.showAsError().updateContent({text:this.options.drawError.message});
this._updateGuideColor(this.options.drawError.color);
this._poly.setStyle({color:this.options.drawError.color});
this._clearHideErrorTimeout();
this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)
},_hideErrorTooltip:function(){this._errorShown=false;
this._clearHideErrorTimeout();
this._tooltip.removeError().updateContent(this._getTooltipText());
this._updateGuideColor(this.options.shapeOptions.color);
this._poly.setStyle({color:this.options.shapeOptions.color})
},_clearHideErrorTimeout:function(){if(this._hideErrorTimeout){clearTimeout(this._hideErrorTimeout);
this._hideErrorTimeout=null
}},_vertexAdded:function(d){if(this._markers.length===1){this._measurementRunningTotal=0
}else{this._measurementRunningTotal+=d.distanceTo(this._markers[this._markers.length-2].getLatLng())
}},_cleanUpShape:function(){if(this._markers.length>1){this._markers[this._markers.length-1].off("click",this._finishShape,this)
}},_fireCreatedEvent:function(){var d=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);
L.Draw.Feature.prototype._fireCreatedEvent.call(this,d)
}});
L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:false,shapeOptions:{stroke:true,color:"#f06eaa",weight:4,opacity:0.5,fill:true,fillColor:null,fillOpacity:0.2,clickable:true}},initialize:function(e,d){L.Draw.Polyline.prototype.initialize.call(this,e,d);
this.type=L.Draw.Polygon.TYPE
},_updateFinishHandler:function(){var d=this._markers.length;
if(d===1){this._markers[0].on("click",this._finishShape,this)
}if(d>2){this._markers[d-1].on("dblclick",this._finishShape,this);
if(d>3){this._markers[d-2].off("dblclick",this._finishShape,this)
}}},_getTooltipText:function(){var e,d;
if(this._markers.length===0){e=L.drawLocal.draw.handlers.polygon.tooltip.start
}else{if(this._markers.length<3){e=L.drawLocal.draw.handlers.polygon.tooltip.cont
}else{e=L.drawLocal.draw.handlers.polygon.tooltip.end;
d=this._area
}}return{text:e,subtext:d}
},_shapeIsValid:function(){return this._markers.length>=3
},_vertexAdded:function(){if(this.options.allowIntersection||!this.options.showArea){return
}var e=this._poly.getLatLngs(),d=L.PolygonUtil.geodesicArea(e);
if(d>10000){d=(d*0.0001).toFixed(2)+" ha"
}else{d=d.toFixed(2)+" m&sup2;"
}this._area=d
},_cleanUpShape:function(){var d=this._markers.length;
if(d>0){this._markers[0].off("click",this._finishShape,this);
if(d>2){this._markers[d-1].off("dblclick",this._finishShape,this)
}}}});
L.SimpleShape={};
L.Draw.SimpleShape=L.Draw.Feature.extend({addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);
if(this._map){this._map.dragging.disable();
this._container.style.cursor="crosshair";
this._tooltip.updateContent({text:this._initialLabelText});
this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this)
}},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);
if(this._map){this._map.dragging.enable();
this._container.style.cursor="";
this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this);
L.DomEvent.off(a,"mouseup",this._onMouseUp);
if(this._shape){this._map.removeLayer(this._shape);
delete this._shape
}}this._isDrawing=false
},_onMouseDown:function(d){this._isDrawing=true;
this._startLatLng=d.latlng;
L.DomEvent.on(a,"mouseup",this._onMouseUp,this).preventDefault(d.originalEvent)
},_onMouseMove:function(d){var f=d.latlng;
this._tooltip.updatePosition(f);
if(this._isDrawing){this._tooltip.updateContent({text:L.drawLocal.draw.handlers.simpleshape.tooltip.end});
this._drawShape(f)
}},_onMouseUp:function(){if(this._shape){this._fireCreatedEvent()
}this.disable()
}});
L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:true,color:"#f06eaa",weight:4,opacity:0.5,fill:true,fillColor:null,fillOpacity:0.2,clickable:true}},initialize:function(e,d){this.type=L.Draw.Rectangle.TYPE;
L.Draw.SimpleShape.prototype.initialize.call(this,e,d)
},_initialLabelText:L.drawLocal.draw.handlers.rectangle.tooltip.start,_drawShape:function(d){if(!this._shape){this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,d),this.options.shapeOptions);
this._map.addLayer(this._shape)
}else{this._shape.setBounds(new L.LatLngBounds(this._startLatLng,d))
}},_fireCreatedEvent:function(){var d=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);
L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,d)
}});
L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:true,color:"#f06eaa",weight:4,opacity:0.5,fill:true,fillColor:null,fillOpacity:0.2,clickable:true}},initialize:function(e,d){this.type=L.Draw.Circle.TYPE;
L.Draw.SimpleShape.prototype.initialize.call(this,e,d)
},_initialLabelText:L.drawLocal.draw.handlers.circle.tooltip.start,_drawShape:function(d){if(!this._shape){this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(d),this.options.shapeOptions);
this._map.addLayer(this._shape)
}else{this._shape.setRadius(this._startLatLng.distanceTo(d))
}},_fireCreatedEvent:function(){var d=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);
L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,d)
},_onMouseMove:function(f){var g=f.latlng,d;
this._tooltip.updatePosition(g);
if(this._isDrawing){this._drawShape(g);
d=this._shape.getRadius().toFixed(1);
this._tooltip.updateContent({text:"Release mouse to finish drawing.",subtext:"Radius: "+(d/1609.34).toFixed(2)+" miles"})
}}});
L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default(),zIndexOffset:2000},initialize:function(e,d){this.type=L.Draw.Marker.TYPE;
L.Draw.Feature.prototype.initialize.call(this,e,d)
},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);
if(this._map){this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start});
if(!this._mouseMarker){this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})
}this._mouseMarker.on("click",this._onClick,this).addTo(this._map);
this._map.on("mousemove",this._onMouseMove,this)
}},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);
if(this._map){if(this._marker){this._marker.off("click",this._onClick,this);
this._map.off("click",this._onClick,this).removeLayer(this._marker);
delete this._marker
}this._mouseMarker.off("click",this._onClick,this);
this._map.removeLayer(this._mouseMarker);
delete this._mouseMarker;
this._map.off("mousemove",this._onMouseMove,this)
}},_onMouseMove:function(d){var f=d.latlng;
this._tooltip.updatePosition(f);
this._mouseMarker.setLatLng(f);
if(!this._marker){this._marker=new L.Marker(f,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset});
this._marker.on("click",this._onClick,this);
this._map.on("click",this._onClick,this).addLayer(this._marker)
}else{this._marker.setLatLng(f)
}},_onClick:function(){this._fireCreatedEvent();
this.disable()
},_fireCreatedEvent:function(){var d=new L.Marker(this._marker.getLatLng(),{icon:this.options.icon});
L.Draw.Feature.prototype._fireCreatedEvent.call(this,d)
}});
L.Edit=L.Edit||{};
L.Edit.Poly=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"})},initialize:function(e,d){this._poly=e;
L.setOptions(this,d)
},addHooks:function(){if(this._poly._map){if(!this._markerGroup){this._initMarkers()
}this._poly._map.addLayer(this._markerGroup)
}},removeHooks:function(){if(this._poly._map){this._poly._map.removeLayer(this._markerGroup);
delete this._markerGroup;
delete this._markers
}},updateMarkers:function(){this._markerGroup.clearLayers();
this._initMarkers()
},_initMarkers:function(){if(!this._markerGroup){this._markerGroup=new L.LayerGroup()
}this._markers=[];
var e=this._poly._latlngs,l,k,d,f;
for(l=0,d=e.length;
l<d;
l++){f=this._createMarker(e[l],l);
f.on("click",this._onMarkerClick,this);
this._markers.push(f)
}var h,g;
for(l=0,k=d-1;
l<d;
k=l++){if(l===0&&!(L.Polygon&&(this._poly instanceof L.Polygon))){continue
}h=this._markers[k];
g=this._markers[l];
this._createMiddleMarker(h,g);
this._updatePrevNext(h,g)
}},_createMarker:function(f,e){var d=new L.Marker(f,{draggable:true,icon:this.options.icon});
d._origLatLng=f;
d._index=e;
d.on("drag",this._onMarkerDrag,this);
d.on("dragend",this._fireEdit,this);
this._markerGroup.addLayer(d);
return d
},_removeMarker:function(d){var e=d._index;
this._markerGroup.removeLayer(d);
this._markers.splice(e,1);
this._poly.spliceLatLngs(e,1);
this._updateIndexes(e,-1);
d.off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("click",this._onMarkerClick,this)
},_fireEdit:function(){this._poly.edited=true;
this._poly.fire("edit")
},_onMarkerDrag:function(f){var d=f.target;
L.extend(d._origLatLng,d._latlng);
if(d._middleLeft){d._middleLeft.setLatLng(this._getMiddleLatLng(d._prev,d))
}if(d._middleRight){d._middleRight.setLatLng(this._getMiddleLatLng(d,d._next))
}this._poly.redraw()
},_onMarkerClick:function(f){if(this._poly._latlngs.length<3){return
}var d=f.target;
this._removeMarker(d);
this._updatePrevNext(d._prev,d._next);
if(d._middleLeft){this._markerGroup.removeLayer(d._middleLeft)
}if(d._middleRight){this._markerGroup.removeLayer(d._middleRight)
}if(d._prev&&d._next){this._createMiddleMarker(d._prev,d._next)
}else{if(!d._prev){d._next._middleLeft=null
}else{if(!d._next){d._prev._middleRight=null
}}}this._fireEdit()
},_updateIndexes:function(d,e){this._markerGroup.eachLayer(function(f){if(f._index>d){f._index+=e
}})
},_createMiddleMarker:function(i,g){var j=this._getMiddleLatLng(i,g),d=this._createMarker(j),h,f,e;
d.setOpacity(0.6);
i._middleRight=g._middleLeft=d;
f=function(){var k=g._index;
d._index=k;
d.off("click",h,this).on("click",this._onMarkerClick,this);
j.lat=d.getLatLng().lat;
j.lng=d.getLatLng().lng;
this._poly.spliceLatLngs(k,0,j);
this._markers.splice(k,0,d);
d.setOpacity(1);
this._updateIndexes(k,1);
g._index++;
this._updatePrevNext(i,d);
this._updatePrevNext(d,g)
};
e=function(){d.off("dragstart",f,this);
d.off("dragend",e,this);
this._createMiddleMarker(i,d);
this._createMiddleMarker(d,g)
};
h=function(){f.call(this);
e.call(this);
this._fireEdit()
};
d.on("click",h,this).on("dragstart",f,this).on("dragend",e,this);
this._markerGroup.addLayer(d)
},_updatePrevNext:function(e,d){if(e){e._next=d
}if(d){d._prev=e
}},_getMiddleLatLng:function(h,f){var e=this._poly._map,g=e.latLngToLayerPoint(h.getLatLng()),d=e.latLngToLayerPoint(f.getLatLng());
return e.layerPointToLatLng(g._add(d)._divideBy(2))
}});
L.Polyline.addInitHook(function(){if(this.editing){return
}if(L.Edit.Poly){this.editing=new L.Edit.Poly(this);
if(this.options.editable){this.editing.enable()
}}this.on("add",function(){if(this.editing&&this.editing.enabled()){this.editing.addHooks()
}});
this.on("remove",function(){if(this.editing&&this.editing.enabled()){this.editing.removeHooks()
}})
});
L.Edit=L.Edit||{};
L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"})},initialize:function(d,e){this._shape=d;
L.Util.setOptions(this,e)
},addHooks:function(){if(this._shape._map){this._map=this._shape._map;
if(!this._markerGroup){this._initMarkers()
}this._map.addLayer(this._markerGroup)
}},removeHooks:function(){if(this._shape._map){this._unbindMarker(this._moveMarker);
for(var e=0,d=this._resizeMarkers.length;
e<d;
e++){this._unbindMarker(this._resizeMarkers[e])
}this._resizeMarkers=null;
this._map.removeLayer(this._markerGroup);
delete this._markerGroup
}this._map=null
},updateMarkers:function(){this._markerGroup.clearLayers();
this._initMarkers()
},_initMarkers:function(){if(!this._markerGroup){this._markerGroup=new L.LayerGroup()
}this._createMoveMarker();
this._createResizeMarker()
},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(f,e){var d=new L.Marker(f,{draggable:true,icon:e,zIndexOffset:10});
this._bindMarker(d);
this._markerGroup.addLayer(d);
return d
},_bindMarker:function(d){d.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this)
},_unbindMarker:function(d){d.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this)
},_onMarkerDragStart:function(f){var d=f.target;
d.setOpacity(0)
},_fireEdit:function(){this._shape.edited=true;
this._shape.fire("edit")
},_onMarkerDrag:function(f){var d=f.target,g=d.getLatLng();
if(d===this._moveMarker){this._move(g)
}else{this._resize(g)
}this._shape.redraw()
},_onMarkerDragEnd:function(f){var d=f.target;
d.setOpacity(1);
this._shape.fire("edit");
this._fireEdit()
},_move:function(){},_resize:function(){}});
L.Edit=L.Edit||{};
L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var e=this._shape.getBounds(),d=e.getCenter();
this._moveMarker=this._createMarker(d,this.options.moveIcon)
},_createResizeMarker:function(){var e=this._getCorners();
this._resizeMarkers=[];
for(var f=0,d=e.length;
f<d;
f++){this._resizeMarkers.push(this._createMarker(e[f],this.options.resizeIcon));
this._resizeMarkers[f]._cornerIndex=f
}},_onMarkerDragStart:function(h){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,h);
var f=this._getCorners(),d=h.target,g=d._cornerIndex;
this._oppositeCorner=f[(g+2)%4];
this._toggleCornerMarkers(0,g)
},_onMarkerDragEnd:function(h){var f=h.target,g,d;
if(f===this._moveMarker){g=this._shape.getBounds();
d=g.getCenter();
f.setLatLng(d)
}this._toggleCornerMarkers(1);
this._repositionCornerMarkers();
L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,h)
},_move:function(g){var e=this._shape.getLatLngs(),k=this._shape.getBounds(),d=k.getCenter(),m,j=[];
for(var h=0,f=e.length;
h<f;
h++){m=[e[h].lat-d.lat,e[h].lng-d.lng];
j.push([g.lat+m[0],g.lng+m[1]])
}this._shape.setLatLngs(j);
this._repositionCornerMarkers()
},_resize:function(e){var d;
this._shape.setBounds(L.latLngBounds(e,this._oppositeCorner));
d=this._shape.getBounds();
this._moveMarker.setLatLng(d.getCenter())
},_getCorners:function(){var f=this._shape.getBounds(),e=f.getNorthWest(),h=f.getNorthEast(),g=f.getSouthEast(),d=f.getSouthWest();
return[e,h,g,d]
},_toggleCornerMarkers:function(e){for(var f=0,d=this._resizeMarkers.length;
f<d;
f++){this._resizeMarkers[f].setOpacity(e)
}},_repositionCornerMarkers:function(){var e=this._getCorners();
for(var f=0,d=this._resizeMarkers.length;
f<d;
f++){this._resizeMarkers[f].setLatLng(e[f])
}}});
L.Rectangle.addInitHook(function(){if(L.Edit.Rectangle){this.editing=new L.Edit.Rectangle(this);
if(this.options.editable){this.editing.enable()
}}});
L.Edit=L.Edit||{};
L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var d=this._shape.getLatLng();
this._moveMarker=this._createMarker(d,this.options.moveIcon)
},_createResizeMarker:function(){var d=this._shape.getLatLng(),e=this._getResizeMarkerPoint(d);
this._resizeMarkers=[];
this._resizeMarkers.push(this._createMarker(e,this.options.resizeIcon))
},_getResizeMarkerPoint:function(f){var e=this._shape._radius*Math.cos(Math.PI/4),d=this._map.project(f);
return this._map.unproject([d.x+e,d.y-e])
},_move:function(e){var d=this._getResizeMarkerPoint(e);
this._resizeMarkers[0].setLatLng(d);
this._shape.setLatLng(e)
},_resize:function(f){var e=this._moveMarker.getLatLng(),d=e.distanceTo(f);
this._shape.setRadius(d)
}});
L.Circle.addInitHook(function(){if(L.Edit.Circle){this.editing=new L.Edit.Circle(this);
if(this.options.editable){this.editing.enable()
}}this.on("add",function(){if(this.editing&&this.editing.enabled()){this.editing.addHooks()
}});
this.on("remove",function(){if(this.editing&&this.editing.enabled()){this.editing.removeHooks()
}})
});
L.LatLngUtil={cloneLatLngs:function(d){var g=[];
for(var f=0,e=d.length;
f<e;
f++){g.push(this.cloneLatLng(d[f]))
}return g
},cloneLatLng:function(d){return L.latLng(d.lat,d.lng)
}};
L.PolygonUtil={geodesicArea:function(j){var f=j.length,g=0,d=L.LatLng.DEG_TO_RAD,k,h;
if(f>2){for(var e=0;
e<f;
e++){k=j[e];
h=j[(e+1)%f];
g+=((h.lng-k.lng)*d)*(2+Math.sin(k.lat*d)+Math.sin(h.lat*d))
}g=g*6378137*6378137/2
}return Math.abs(g)
}};
L.Util.extend(L.LineUtil,{segmentsIntersect:function(f,g,e,d){return this._checkCounterclockwise(f,e,d)!==this._checkCounterclockwise(g,e,d)&&this._checkCounterclockwise(f,g,e)!==this._checkCounterclockwise(f,g,d)
},_checkCounterclockwise:function(e,f,d){return(d.y-e.y)*(f.x-e.x)>(f.y-e.y)*(d.x-e.x)
}});
L.Polyline.include({intersects:function(){var f=this._originalPoints,d=f?f.length:0,e,g,h;
if(this._tooFewPointsForIntersection()){return false
}for(e=d-1;
e>=3;
e--){g=f[e-1];
h=f[e];
if(this._lineSegmentsIntersectsRange(g,h,e-2)){return true
}}return false
},newLatLngIntersects:function(e,d){if(!this._map){return false
}return this.newPointIntersects(this._map.latLngToLayerPoint(e),d)
},newPointIntersects:function(e,h){var g=this._originalPoints,d=g?g.length:0,i=g?g[d-1]:null,f=d-2;
if(this._tooFewPointsForIntersection(1)){return false
}return this._lineSegmentsIntersectsRange(i,e,f,h?1:0)
},_tooFewPointsForIntersection:function(f){var e=this._originalPoints,d=e?e.length:0;
d+=f||0;
return !this._originalPoints||d<=3
},_lineSegmentsIntersectsRange:function(k,l,f,e){var g=this._originalPoints,i,h;
e=e||0;
for(var d=f;
d>e;
d--){i=g[d-1];
h=g[d];
if(L.LineUtil.segmentsIntersect(k,l,i,h)){return true
}}return false
}});
L.Polygon.include({intersects:function(){var h,f=this._originalPoints,d,i,g,e;
if(this._tooFewPointsForIntersection()){return false
}h=L.Polyline.prototype.intersects.call(this);
if(h){return true
}d=f.length;
i=f[0];
g=f[d-1];
e=d-2;
return this._lineSegmentsIntersectsRange(g,i,e,1)
}});
L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:false},initialize:function(d){if(L.version<="0.5.1"){throw new Error("Leaflet.draw 0.2.0+ requires Leaflet 0.6.0+. Download latest from https://github.com/Leaflet/Leaflet/")
}L.Control.prototype.initialize.call(this,d);
var f,e;
this._toolbars={};
if(L.DrawToolbar&&this.options.draw){e=new L.DrawToolbar(this.options.draw);
f=L.stamp(e);
this._toolbars[f]=e;
this._toolbars[f].on("enable",this._toolbarEnabled,this)
}if(L.EditToolbar&&this.options.edit){e=new L.EditToolbar(this.options.edit);
f=L.stamp(e);
this._toolbars[f]=e;
this._toolbars[f].on("enable",this._toolbarEnabled,this)
}},onAdd:function(h){var e=L.DomUtil.create("div","leaflet-draw"),f=false,i="leaflet-draw-toolbar-top",d;
for(var g in this._toolbars){if(this._toolbars.hasOwnProperty(g)){d=this._toolbars[g].addToolbar(h);
if(!f){if(!L.DomUtil.hasClass(d,i)){L.DomUtil.addClass(d.childNodes[0],i)
}f=true
}e.appendChild(d)
}}return e
},onRemove:function(){for(var d in this._toolbars){if(this._toolbars.hasOwnProperty(d)){this._toolbars[d].removeToolbar()
}}},setDrawingOptions:function(d){for(var e in this._toolbars){if(this._toolbars[e] instanceof L.DrawToolbar){this._toolbars[e].setOptions(d)
}}},_toolbarEnabled:function(f){var g=""+L.stamp(f.target);
for(var d in this._toolbars){if(this._toolbars.hasOwnProperty(d)&&d!==g){this._toolbars[d].disable()
}}}});
L.Map.mergeOptions({drawControl:false});
L.Map.addInitHook(function(){if(this.options.drawControl){this.drawControl=new L.Control.Draw();
this.addControl(this.drawControl)
}});
L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(d){L.setOptions(this,d);
this._modes={};
this._actionButtons=[];
this._activeMode=null
},enabled:function(){return this._activeMode!==null
},disable:function(){if(!this.enabled()){return
}this._activeMode.handler.disable()
},removeToolbar:function(){for(var f in this._modes){if(this._modes.hasOwnProperty(f)){this._disposeButton(this._modes[f].button,this._modes[f].handler.enable);
this._modes[f].handler.disable();
this._modes[f].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this)
}}this._modes={};
for(var e=0,d=this._actionButtons.length;
e<d;
e++){this._disposeButton(this._actionButtons[e].button,this._actionButtons[e].callback)
}this._actionButtons=[];
this._actionsContainer=null
},_initModeHandler:function(h,d,i,g,e){var f=h.type;
this._modes[f]={};
this._modes[f].handler=h;
this._modes[f].button=this._createButton({title:e,className:g+"-"+f,container:d,callback:this._modes[f].handler.enable,context:this._modes[f].handler});
this._modes[f].buttonIndex=i;
this._modes[f].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)
},_createButton:function(d){var e=L.DomUtil.create("a",d.className||"",d.container);
e.href="#";
if(d.text){e.innerHTML=d.text
}if(d.title){e.title=d.title
}L.DomEvent.on(e,"click",L.DomEvent.stopPropagation).on(e,"mousedown",L.DomEvent.stopPropagation).on(e,"dblclick",L.DomEvent.stopPropagation).on(e,"click",L.DomEvent.preventDefault).on(e,"click",d.callback,d.context);
return e
},_disposeButton:function(d,e){L.DomEvent.off(d,"click",L.DomEvent.stopPropagation).off(d,"mousedown",L.DomEvent.stopPropagation).off(d,"dblclick",L.DomEvent.stopPropagation).off(d,"click",L.DomEvent.preventDefault).off(d,"click",e)
},_handlerActivated:function(d){if(this._activeMode&&this._activeMode.handler.enabled()){this._activeMode.handler.disable()
}this._activeMode=this._modes[d.handler];
L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled");
this._showActionsToolbar();
this.fire("enable")
},_handlerDeactivated:function(){this._hideActionsToolbar();
L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled");
this._activeMode=null;
this.fire("disable")
},_createActions:function(j){var f=L.DomUtil.create("ul","leaflet-draw-actions"),m=50,e=j.length,k=(e*m)+(e-1),d,h;
for(var g=0;
g<e;
g++){d=L.DomUtil.create("li","",f);
h=this._createButton({title:j[g].title,text:j[g].text,container:d,callback:j[g].callback,context:j[g].context});
this._actionButtons.push({button:h,callback:j[g].callback})
}f.style.width=k+"px";
return f
},_showActionsToolbar:function(){var g=this._activeMode.buttonIndex,e=this._lastButtonIndex,h=26,d=1,f=(g*h)+(g*d)-1;
this._actionsContainer.style.top=f+"px";
if(g===0){L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop");
L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")
}if(g===e){L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom");
L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")
}this._actionsContainer.style.display="block"
},_hideActionsToolbar:function(){this._actionsContainer.style.display="none";
L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop");
L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom");
L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top");
L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")
}});
L.Tooltip=L.Class.extend({initialize:function(d){this._map=d;
this._popupPane=d._panes.popupPane;
this._container=L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane);
this._singleLineLabel=false
},dispose:function(){this._popupPane.removeChild(this._container);
this._container=null
},updateContent:function(d){d.subtext=d.subtext||"";
if(d.subtext.length===0&&!this._singleLineLabel){L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single");
this._singleLineLabel=true
}else{if(d.subtext.length>0&&this._singleLineLabel){L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single");
this._singleLineLabel=false
}}this._container.innerHTML=(d.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+d.subtext+"</span><br />":"")+"<span>"+d.text+"</span>";
return this
},updatePosition:function(e){var d=this._map.latLngToLayerPoint(e);
L.DomUtil.setPosition(this._container,d);
return this
},showAsError:function(){L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip");
return this
},removeError:function(){L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip");
return this
}});
L.DrawToolbar=L.Toolbar.extend({options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(d){for(var e in this.options){if(this.options.hasOwnProperty(e)){if(d[e]){d[e]=L.extend({},this.options[e],d[e])
}}}L.Toolbar.prototype.initialize.call(this,d)
},addToolbar:function(g){var d=L.DomUtil.create("div","leaflet-draw-section"),f=0,e="leaflet-draw-draw";
this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar");
if(this.options.polyline){this._initModeHandler(new L.Draw.Polyline(g,this.options.polyline),this._toolbarContainer,f++,e,L.drawLocal.draw.toolbar.buttons.polyline)
}if(this.options.polygon){this._initModeHandler(new L.Draw.Polygon(g,this.options.polygon),this._toolbarContainer,f++,e,L.drawLocal.draw.toolbar.buttons.polygon)
}if(this.options.rectangle){this._initModeHandler(new L.Draw.Rectangle(g,this.options.rectangle),this._toolbarContainer,f++,e,L.drawLocal.draw.toolbar.buttons.rectangle)
}if(this.options.circle){this._initModeHandler(new L.Draw.Circle(g,this.options.circle),this._toolbarContainer,f++,e,L.drawLocal.draw.toolbar.buttons.circle)
}if(this.options.marker){this._initModeHandler(new L.Draw.Marker(g,this.options.marker),this._toolbarContainer,f++,e,L.drawLocal.draw.toolbar.buttons.marker)
}this._lastButtonIndex=--f;
this._actionsContainer=this._createActions([{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]);
d.appendChild(this._toolbarContainer);
d.appendChild(this._actionsContainer);
return d
},setOptions:function(d){L.setOptions(this,d);
for(var e in this._modes){if(this._modes.hasOwnProperty(e)&&d.hasOwnProperty(e)){this._modes[e].handler.setOptions(d[e])
}}}});
L.EditToolbar=L.Toolbar.extend({options:{edit:{selectedPathOptions:{color:"#fe57a1",opacity:0.6,dashArray:"10, 10",fill:true,fillColor:"#fe57a1",fillOpacity:0.1}},remove:{},featureGroup:null},initialize:function(d){if(d.edit){if(typeof d.edit.selectedPathOptions==="undefined"){d.edit.selectedPathOptions=this.options.edit.selectedPathOptions
}d.edit=L.extend({},this.options.edit,d.edit)
}if(d.remove){d.remove=L.extend({},this.options.remove,d.remove)
}L.Toolbar.prototype.initialize.call(this,d);
this._selectedFeatureCount=0
},addToolbar:function(g){var d=L.DomUtil.create("div","leaflet-draw-section"),f=0,e="leaflet-draw-edit";
this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar");
this._map=g;
if(this.options.edit){this._initModeHandler(new L.EditToolbar.Edit(g,{featureGroup:this.options.featureGroup,selectedPathOptions:this.options.edit.selectedPathOptions}),this._toolbarContainer,f++,e,L.drawLocal.edit.toolbar.buttons.edit)
}if(this.options.remove){this._initModeHandler(new L.EditToolbar.Delete(g,{featureGroup:this.options.featureGroup}),this._toolbarContainer,f++,e,L.drawLocal.edit.toolbar.buttons.remove)
}this._lastButtonIndex=--f;
this._actionsContainer=this._createActions([{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}]);
d.appendChild(this._toolbarContainer);
d.appendChild(this._actionsContainer);
return d
},disable:function(){if(!this.enabled()){return
}this._activeMode.handler.revertLayers();
L.Toolbar.prototype.disable.call(this)
},_save:function(){this._activeMode.handler.save();
this._activeMode.handler.disable()
}});
L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(e,d){L.Handler.prototype.initialize.call(this,e);
this._selectedPathOptions=d.selectedPathOptions;
this._featureGroup=d.featureGroup;
if(!(this._featureGroup instanceof L.FeatureGroup)){throw new Error("options.featureGroup must be a L.FeatureGroup")
}this._uneditedLayerProps={};
this.type=L.EditToolbar.Edit.TYPE
},enable:function(){if(this._enabled){return
}L.Handler.prototype.enable.call(this);
this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this);
this.fire("enabled",{handler:this.type})
},disable:function(){if(!this._enabled){return
}this.fire("disabled",{handler:this.type});
this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this);
L.Handler.prototype.disable.call(this)
},addHooks:function(){if(this._map){this._featureGroup.eachLayer(this._enableLayerEdit,this);
this._tooltip=new L.Tooltip(this._map);
this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext});
this._map.on("mousemove",this._onMouseMove,this)
}},removeHooks:function(){if(this._map){this._featureGroup.eachLayer(this._disableLayerEdit,this);
this._uneditedLayerProps={};
this._tooltip.dispose();
this._tooltip=null;
this._map.off("mousemove",this._onMouseMove,this)
}},revertLayers:function(){this._featureGroup.eachLayer(function(d){this._revertLayer(d)
},this)
},save:function(){var d=new L.LayerGroup();
this._featureGroup.eachLayer(function(e){if(e.edited){d.addLayer(e);
e.edited=false
}});
this._map.fire("draw:edited",{layers:d})
},_backupLayer:function(d){var e=L.Util.stamp(d);
if(!this._uneditedLayerProps[e]){if(d instanceof L.Polyline||d instanceof L.Polygon||d instanceof L.Rectangle){this._uneditedLayerProps[e]={latlngs:L.LatLngUtil.cloneLatLngs(d.getLatLngs())}
}else{if(d instanceof L.Circle){this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(d.getLatLng()),radius:d.getRadius()}
}else{this._uneditedLayerProps[e]={latlng:L.LatLngUtil.cloneLatLng(d.getLatLng())}
}}}},_revertLayer:function(d){var e=L.Util.stamp(d);
d.edited=false;
if(this._uneditedLayerProps.hasOwnProperty(e)){if(d instanceof L.Polyline||d instanceof L.Polygon||d instanceof L.Rectangle){d.setLatLngs(this._uneditedLayerProps[e].latlngs)
}else{if(d instanceof L.Circle){d.setLatLng(this._uneditedLayerProps[e].latlng);
d.setRadius(this._uneditedLayerProps[e].radius)
}else{d.setLatLng(this._uneditedLayerProps[e].latlng)
}}}},_toggleMarkerHighlight:function(d){var e=d._icon;
e.style.display="none";
if(L.DomUtil.hasClass(e,"leaflet-edit-marker-selected")){L.DomUtil.removeClass(e,"leaflet-edit-marker-selected");
this._offsetMarker(e,-4)
}else{L.DomUtil.addClass(e,"leaflet-edit-marker-selected");
this._offsetMarker(e,4)
}e.style.display=""
},_offsetMarker:function(e,g){var f=parseInt(e.style.marginTop,10)-g,d=parseInt(e.style.marginLeft,10)-g;
e.style.marginTop=f+"px";
e.style.marginLeft=d+"px"
},_enableLayerEdit:function(g){var f=g.layer||g.target||g,d;
this._backupLayer(f);
if(this._selectedPathOptions){d=L.Util.extend({},this._selectedPathOptions);
if(f instanceof L.Marker){this._toggleMarkerHighlight(f)
}else{f.options.previousOptions=f.options;
if(!(f instanceof L.Circle)&&!(f instanceof L.Polygon)&&!(f instanceof L.Rectangle)){d.fill=false
}f.setStyle(d)
}}if(f instanceof L.Marker){f.dragging.enable();
f.on("dragend",this._onMarkerDragEnd)
}else{f.editing.enable()
}},_disableLayerEdit:function(f){var d=f.layer||f.target||f;
d.edited=false;
if(this._selectedPathOptions){if(d instanceof L.Marker){this._toggleMarkerHighlight(d)
}else{d.setStyle(d.options.previousOptions);
delete d.options.previousOptions
}}if(d instanceof L.Marker){d.dragging.disable();
d.off("dragend",this._onMarkerDragEnd,this)
}else{d.editing.disable()
}},_onMarkerDragEnd:function(f){var d=f.target;
d.edited=true
},_onMouseMove:function(d){this._tooltip.updatePosition(d.latlng)
}});
L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(e,d){L.Handler.prototype.initialize.call(this,e);
L.Util.setOptions(this,d);
this._deletableLayers=this.options.featureGroup;
if(!(this._deletableLayers instanceof L.FeatureGroup)){throw new Error("options.featureGroup must be a L.FeatureGroup")
}this.type=L.EditToolbar.Delete.TYPE
},enable:function(){if(this._enabled){return
}L.Handler.prototype.enable.call(this);
this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this);
this.fire("enabled",{handler:this.type})
},disable:function(){if(!this._enabled){return
}L.Handler.prototype.disable.call(this);
this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this);
this.fire("disabled",{handler:this.type})
},addHooks:function(){if(this._map){this._deletableLayers.eachLayer(this._enableLayerDelete,this);
this._deletedLayers=new L.layerGroup();
this._tooltip=new L.Tooltip(this._map);
this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text});
this._map.on("mousemove",this._onMouseMove,this)
}},removeHooks:function(){if(this._map){this._deletableLayers.eachLayer(this._disableLayerDelete,this);
this._deletedLayers=null;
this._tooltip.dispose();
this._tooltip=null;
this._map.off("mousemove",this._onMouseMove,this)
}},revertLayers:function(){this._deletedLayers.eachLayer(function(d){this._deletableLayers.addLayer(d)
},this)
},save:function(){this._map.fire("draw:deleted",{layers:this._deletedLayers})
},_enableLayerDelete:function(f){var d=f.layer||f.target||f;
d.on("click",this._removeLayer,this)
},_disableLayerDelete:function(f){var d=f.layer||f.target||f;
d.off("click",this._removeLayer,this);
this._deletedLayers.removeLayer(d)
},_removeLayer:function(f){var d=f.layer||f.target||f;
this._deletableLayers.removeLayer(d);
this._deletedLayers.addLayer(d)
},_onMouseMove:function(d){this._tooltip.updatePosition(d.latlng)
}})
}(this,document));L.TileLayer.Common=L.TileLayer.extend({initialize:function(a){L.TileLayer.prototype.initialize.call(this,this.url,a)
}});
(function(){var a='&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>';
L.TileLayer.CloudMade=L.TileLayer.Common.extend({url:"http://{s}.tile.cloudmade.com/{key}/{styleId}/256/{z}/{x}/{y}.png",options:{attribution:"Map data "+a+', Imagery &copy; <a href="http://cloudmade.com">CloudMade</a>',styleId:997}});
L.TileLayer.OpenStreetMap=L.TileLayer.Common.extend({url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{attribution:a}});
L.TileLayer.OpenCycleMap=L.TileLayer.Common.extend({url:"http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",options:{attribution:"&copy; OpenCycleMap, Map data "+a}});
var b='Tiles &copy; <a href="http://www.mapquest.com/" target="_blank">MapQuest</a> <img src="http://developer.mapquest.com/content/osm/mq_logo.png" />';
L.TileLayer.MapQuestOpenOSM=L.TileLayer.Common.extend({url:"http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.png",options:{subdomains:"1234",type:"osm",attribution:b}});
L.TileLayer.MapQuestOpenAerial=L.TileLayer.MapQuestOpenOSM.extend({options:{type:"sat",attribution:"Imagery &copy; NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency, "+b}});
L.TileLayer.MapBox=L.TileLayer.Common.extend({url:"http://{s}.tiles.mapbox.com/v3/{user}.{map}/{z}/{x}/{y}.png"})
}());L.GeoSearch={};
L.GeoSearch.Provider={};
jQuery.support.cors=true;
L.GeoSearch.Result=function(a,d,b,c){this.X=a;
this.Y=d;
this.Label=b;
this.Zoom=c
};
L.Control.GeoSearch=L.Control.extend({options:{position:"topcenter"},initialize:function(a){this._config={};
this.setConfig(a)
},setConfig:function(a){this._config={country:a.country||"",provider:a.provider,success:a.success,searchLabel:a.searchLabel||"Enter Address",notFoundMessage:a.notFoundMessage||"Sorry, that address could not be found.",messageHideDelay:a.messageHideDelay||3000,zoomLevel:a.zoomLevel||13,markerAdded:null}
},onAdd:function(e){var c=$(e._controlContainer);
if(c.children(".leaflet-top.leaflet-center").length==0){c.append('<div class="leaflet-top leaflet-center"></div>');
e._controlCorners.topcenter=c.children(".leaflet-top.leaflet-center").first()[0]
}this._map=e;
this._container=L.DomUtil.create("div","leaflet-control-geosearch");
var a=document.createElement("input");
a.className="leaflet-control-geosearch-searchbox";
a.type="text";
a.placeholder=this._config.searchLabel;
this._searchbox=a;
var b=document.createElement("div");
b.className="leaflet-control-geosearch-msg";
this._msgbox=b;
var d=document.createElement("ul");
d.style.display="none";
this._resultslist=d;
$(this._msgbox).append(this._resultslist);
$(this._container).append(this._searchbox,this._msgbox);
L.DomEvent.addListener(this._container,"click",L.DomEvent.stop).addListener(this._searchbox,"keypress",this._onKeyUp,this);
L.DomEvent.disableClickPropagation(this._container);
return this._container
},geosearch:function(d){try{var e=this._config.provider;
if(typeof e.GetLocations=="function"){var c=e.GetLocations(d,function(f){this._showLocation(f[0].X,f[0].Y,f[0].Zoom)
}.bind(this))
}else{var b=e.GetServiceUrl(d);
$.getJSON(b,function(h){try{var f=e.ParseJSON(h);
if(f===null){throw this._config.notFoundMessage
}this._showLocation(f.X,f.Y,f.Zoom)
}catch(g){this._printError(g)
}}.bind(this))
}}catch(a){this._printError(a)
}},_showLocation:function(a,d,b){if(typeof this._positionMarker==="undefined"){this._positionMarker=L.marker([d,a]).addTo(this._map)
}else{this._positionMarker.setLatLng([d,a])
}this._map.setView([d,a],b==="undefined"?this._config.zoomLevel:b,false);
var c=this._config.success;
if(c!==null){c(this._positionMarker)
}},_printError:function(a){$(this._resultslist).html("<li>"+a+"</li>").fadeIn("slow").delay(this._config.messageHideDelay).fadeOut("slow",function(){$(this).html("")
})
},_onKeyUp:function(c){var a=27;
var b=13;
if(c.keyCode===a){$(c.target).val("");
$(this._map._container).focus()
}else{if(c.keyCode===b){this.geosearch($(c.target).val());
c.preventDefault()
}}}});L.GeoSearch.Provider.OpenStreetMap=L.Class.extend({options:{},initialize:function(a){a=L.Util.setOptions(this,a)
},GetServiceUrl:function(b){var a=L.Util.extend({q:b,format:"json"},this.options);
return"http://nominatim.openstreetmap.org/search"+L.Util.getParamString(a)
},ParseJSON:function(c){if(c.length==0){return null
}var b=c[0]["class"];
var d=c[0].type==="city"||c[0].type==="suburb"||b==="city";
var a=new L.GeoSearch.Result(c[0].lon,c[0].lat,c[0].display_name,d?10:16);
for(i in c){var b=c[i]["class"];
var d=c[i].type==="city"||c[i].type==="suburb"||b==="city";
if(!d){continue
}a=new L.GeoSearch.Result(c[i].lon,c[i].lat,c[i].display_name,10)
}return a
}});(function(b,e,a){var h=b(e),d=e.document,g=b(d),c=[],f=[];
b.addToolCheck=function(i){f.push(i.actions);
delete i.actions;
c.push(i)
};
b.addToolCheck({check:"kick",actions:{kickIn:function(i){e.location=e.location.protocol+"//"+e.location.host+i.returnPath
},kickOut:function(){e.location=CONTEXT_PATH+"/logIn.jsp?forced=true&returnPath="+encodeURIComponent(e.location.pathname+e.location.search)
}}});
g.repeatable("live",".repeatableForm, .repeatableInputs, .repeatableLayout, .repeatableObjectId");
g.repeatable("live",".repeatableText",{addButtonText:"",removeButtonText:"",restoreButtonText:""});
g.autoSubmit("live",".autoSubmit");
g.calendar("live",":text.date");
g.code("live","textarea[data-code-type]");
g.dropDown("live",'select[multiple], select[data-searchable="true"]');
g.editablePlaceholder("live",":input[data-editable-placeholder]");
g.expandable("live",":text.expandable, textarea",{shadowClass:"input"});
g.fixedScrollable("live",'.fixedScrollable, .searchResult > .searchResultList, .popup[name="miscSearch"] .searchFiltersRest');
g.frame({frameClassName:"frame",loadingClassName:"loading",loadedClassName:"loaded"});
g.imageEditor("live",".imageEditor");
g.lazyLoad("live",".lazyLoad");
g.locationMap("live",".locationMap");
g.regionMap("live",".regionMap");
g.objectId("live",":input.objectId");
g.pageLayout("live",".pageLayout");
g.pageThumbnails("live",".pageThumbnails");
g.rte("live",".richtext");
g.spreadsheet("live",".spreadsheet");
g.tabbed("live",".tabbed, .objectInputs");
g.toggleable("live",".toggleable");
g.widthAware("live","[data-widths]");
g.workflow("live",".workflow");
g.onCreate(":text.color",function(){b(this).spectrum({cancelText:"Cancel",chooseText:"OK",preferredFormat:"hex6",showInput:true})
});
g.onCreate(".searchInput",function(){var j=b(this),i=j.find("> label"),k=j.find("> :text");
k.bind("input",b.run(function(){i.toggle(!k.val())
}))
});
g.onCreate("[autofocus], .autoFocus",function(){var i=d.activeElement;
if(!i||i===d||i===d.body){b(this).focus()
}});
g.onCreate(".inputContainer .permissions select",function(){var i=b(this);
i.bind("change",b.run(function(){i.parent().find("> h2, > ul").toggle(i.find(":selected").val()==="some")
}))
});
g.onCreate(".dashboardCell",function(){var o=b(this),n,j,i,l,p,m,k;
n=b("<span/>",{"class":"dashboardCollapse",click:function(){o.toggleClass("dashboardCell-collapse");
i()
}});
j=b("<span/>",{"class":"dashboardMoveContainer",click:function(){b(this).toggleClass("dashboardMoveContainer-open")
}});
i=function(){var t=o.closest(".dashboard"),q,s=[],r=[];
t.find(".dashboardColumn:empty").remove();
q=t.find(".dashboardColumn");
t.attr("data-columns",q.length);
q.each(function(){var u=s[s.length]=[];
b(this).find(".dashboardCell").each(function(){var w=b(this),v=w.attr("data-widget");
u[u.length]=v;
if(w.hasClass("dashboardCell-collapse")){r[r.length]=v
}})
});
b.ajax({type:"post",url:CONTEXT_PATH+"/misc/updateUserSettings",data:{action:"dashboardWidgets-position",widgets:JSON.stringify(s),widgetsCollapse:JSON.stringify(r)}})
};
l=b("<span/>",{"class":"dashboardMoveUp",click:function(){o.prev().before(o);
i()
}});
p=b("<span/>",{"class":"dashboardMoveDown",click:function(){o.next().after(o);
i()
}});
m=b("<span/>",{"class":"dashboardMoveLeft",click:function(){var q=o.closest(".dashboardColumn");
$prevColumn=q.prev();
if($prevColumn.length===0){$prevColumn=b("<div/>",{"class":"dashboardColumn"});
q.before($prevColumn)
}$prevColumn.prepend(o);
i()
}});
k=b("<span/>",{"class":"dashboardMoveRight",click:function(){var q=o.closest(".dashboardColumn");
$nextColumn=q.next();
if($nextColumn.length===0){$nextColumn=b("<div/>",{"class":"dashboardColumn"});
q.after($nextColumn)
}$nextColumn.prepend(o);
i()
}});
j.append(l);
j.append(p);
j.append(m);
j.append(k);
o.append(n);
o.append(j)
});
g.onCreate(".searchSuggestionsForm",function(){var i=b(this),l=i.popup("source"),k=l.closest(".contentForm"),j;
if(k.length===0){return
}j=e.location.search;
j+=j.indexOf("?")>-1?"&":"?";
j+="id="+k.attr("data-object-id");
b.ajax({data:k.serialize(),type:"post",url:CONTEXT_PATH+"/content/state.jsp"+j,complete:function(m){if(i.closest("body").length===0){return
}i.append(b("<input/>",{type:"hidden",name:"object",value:m.responseText}));
i.append(b("<input/>",{type:"hidden",name:"field",value:l.closest(".inputContainer").attr("data-field")}));
i.submit()
}})
});
g.on("change",".inputContainer",function(){var j=b(this),i=false;
j.find("input, textarea").each(function(){if(this.defaultValue!==this.value){i=true;
return
}});
if(!i){j.find("option").each(function(){if(this.defaultSelected!==this.selected){i=true;
return
}})
}j.toggleClass("state-changed",i)
});
g.onCreate(".contentDiff",function(){var o=b(this),j,m,n,l=o.find("> .contentDiffLeft"),k=o.find("> .contentDiffRight"),i;
j=b("<ul/>",{"class":"tabs"});
m=b("<li/>",{html:b("<a/>",{text:"Edit",click:function(){o.trigger("contentDiff-edit");
return false
}})});
n=b("<li/>",{html:b("<a/>",{text:"Side By Side",click:function(){o.trigger("contentDiff-sideBySide");
return false
}})});
o.bind("contentDiff-edit",function(){o.add(b(".widget-publishing")).removeClass("contentDiff-sideBySide").addClass("contentDiff-edit");
j.find("li").removeClass("state-selected");
m.addClass("state-selected");
l.find("> .objectInputs > .tabs").css("height","");
l.find("> .objectInputs > .inputContainer").css("height","");
k.find("> .objectInputs > .tabs").css("height","");
k.find("> .objectInputs > .inputContainer").css("height","")
});
o.bind("contentDiff-sideBySide",function(){o.add(b(".widget-publishing")).removeClass("contentDiff-edit").addClass("contentDiff-sideBySide");
j.find("li").removeClass("state-selected");
n.addClass("state-selected");
function p(r,q){setTimeout(function(){r.add(q).height(Math.max(r.height(),q.height()))
},100)
}l.add(k).find(".collapsed").removeClass("collapsed");
l.find("> .objectInputs > .tabs").each(function(){var q=b(this);
p(q,k.find("> .objectInputs > .tabs"))
});
l.find("> .objectInputs > .inputContainer").each(function(){var q=b(this);
p(q,k.find('> .objectInputs > .inputContainer[data-field="'+q.attr("data-field")+'"]'))
})
});
i=function(p){return p.find(":input, select, textarea").serialize().replace(new RegExp("(^|&)[^%]+%2F","g"),"$1%2F")
};
l.find("> .objectInputs > .inputContainer").each(function(){var q=b(this),r=k.find('> .objectInputs > .inputContainer[data-field="'+q.attr("data-field")+'"]'),p=Math.max(q.outerHeight(true),r.outerHeight(true));
if(i(q)===i(r)){q.addClass("contentDiffSame");
r.addClass("contentDiffSame")
}});
l.find("> .objectInputs > .inputContainer > .inputSmall > textarea:not(.richtext)").each(function(){var s=b(this),v=k.find('> .objectInputs > .inputContainer[data-field="'+s.closest(".inputContainer").attr("data-field")+'"] textarea:not(.richtext)'),r=s.val(),q=v.val(),u=JsDiff.diffWords(r,q),t=b("<div/>",{"class":"contentDiffCopy"}),p=b("<div/>",{"class":"contentDiffCopy"});
b.each(u,function(w,x){if(!x.added){t.append(x.removed?b("<span/>",{"class":"contentDiffRemoved",text:x.value}):x.value)
}});
b.each(u,function(w,x){if(!x.removed){p.append(x.added?b("<span/>",{"class":"contentDiffAdded",text:x.value}):x.value)
}});
s.addClass("contentDiffText");
s.before(t);
v.addClass("contentDiffText");
v.before(p)
});
j.append(m);
j.append(n);
o.prepend(j);
o.trigger(k.is(".contentDiffCurrent")?"contentDiff-sideBySide":"contentDiff-edit")
});
g.onCreate(".searchAdvancedResult",function(){var i=b(this),j;
i.find("thead tr:first th:first").append(b("<div/>",{html:b("<span/>",{"class":"icon icon-check icon-only"}),css:{cursor:"pointer","text-align":"center","user-select":"none","vertical-align":"middle"},click:function(){var k=b(this);
j=!j;
k.closest("table").find(":checkbox").prop("checked",j);
k.find(".icon").removeClass("icon-check icon-check-empty").addClass(j?"icon-check-empty":"icon-check");
return false
}}));
i.on("change",":checkbox",function(){i.find(".actions .action").each(function(){var l=b(this),k=l.text();
if(i.find(":checkbox:checked").length>0){l.text(k.replace("All","Selected"))
}else{l.text(k.replace("Selected","All"))
}})
})
});
g.onCreate(".contentLock",function(){var i=b(this);
if(i.attr("data-content-locked-out")==="true"){i.find(":input, button, .event-input-disable").trigger("input-disable",[true]);
h.resize()
}});
g.onCreate(".inputContainer-listLayoutItemContainer-embedded",function(){var j=b(this),i;
j.append(b("<span/>",{"class":"inputContainer-listLayoutItemContainer_expand",click:function(){var k=j.offsetParent();
i=!i;
if(i){j.css({left:10,position:"absolute",top:10,"z-index":1});
j.outerWidth(k.outerWidth()-20);
j.outerHeight(k.outerHeight()-20);
j.addClass("inputContainer-listLayoutItemContainer-embedded-expanded")
}else{j.attr("style","");
j.removeClass("inputContainer-listLayoutItemContainer-embedded-expanded")
}j.trigger("resize")
}}))
});
g.delegate(".exception > *","click",function(){b(this).find("> .stackTrace").toggle()
});
(function(){var i=/^\s+|\s+$/g,k=/\s+/;
function j(p,r,n){var m=+r.attr("data-suggested-minimum"),o=+r.attr("data-suggested-maximum"),q,l;
n=(n||"").replace(i,"");
q=n.length;
l=n?n.split(k).length:0;
p.attr("data-wc-message",q<m?"Too Short":q>o?"Too Long":l+"w "+q+"c")
}g.delegate(".inputSmall-text :text, .inputSmall-text textarea:not(.richtext)","change.wordCount focus.wordCount input.wordCount",b.throttle(100,function(){var l=b(this);
j(l.closest(".inputContainer"),l,l.val())
}));
g.onCreate(".wysihtml5-sandbox",function(){var m=this,n=b(m),o=n.closest(".rte-container"),p=o.find("textarea.richtext"),l=o.find(".rte-toolbar");
b(m.contentDocument).on("input",b.throttle(100,function(){if(p.length>0){var q=b(m.contentDocument.body).clone();
q.find("del, .rte").remove();
j(l,p,q.text())
}}))
})
})();
(function(){var i=h.scrollTop();
h.scroll(b.throttle(100,function(){var j=h.scrollTop();
b(".leftNav, .withLeftNav > .main, .contentForm-aside").each(function(){var m=b(this),l=m.offset().top,n=m.data("initialElementTop"),r,p,o;
if(m.closest(".popup").length>0){return
}if(!n){n=l;
m.data("initialElementTop",n);
m.css({position:"relative",top:0})
}r=h.height();
p=m.outerHeight();
o=function(){m.stop(true);
m.animate({top:Math.max(j,0)},"fast")
};
if(n+p<r){o()
}else{if(i<j){var k=j+r;
var q=l+p;
if(k>q){m.stop(true);
m.animate({top:Math.min(k,b("body").height())-p-n},"fast")
}}else{if(i>j){if(l>j+n){o()
}}}}});
i=j
}))
})();
g.delegate(":input","focus",function(){var k=b(this),j=k.closest("form").find(".inputContainer:visible").eq(0),i=k.parentsUntil("form");
i.addClass("state-focus");
h.bind("scroll.focusLabel",b.run(b.throttle(50,function(){var p,n,r,l=b(".toolHeader").outerHeight(),o="",s=b(".focusLabel"),q,m;
if(s.length===0){s=b("<div/>",{"class":"focusLabel"});
b(d.body).append(s)
}p=s.outerHeight();
i.each(function(){b(this).find("> .inputLabel label, > .repeatableLabel").css("visibility","")
});
for(n=i.length-1;
n>=0;
--n){r=b(i[n]);
if(r.offset().top>h.scrollTop()+(p*2/3)+l){if(o){s.css({left:j.offset().left,top:l,width:j.outerWidth()});
s.text(o);
s.show();
return
}else{break
}}q=r.find("> .inputLabel label, > .repeatableLabel");
m=q.text();
if(m){q.css("visibility","hidden");
if(o){o+=" \u2192 "
}o+=m
}}s.hide()
})))
});
g.delegate(":input","blur",function(){b(this).parents(".state-focus").each(function(){var i=b(this);
i.removeClass("state-focus");
i.find("> .inputLabel label, > .repeatableLabel").css("visibility","")
});
b(".focusLabel").hide();
h.unbind(".focusLabel")
});
(function(){var i;
g.bind("dragenter",function(){var k,j;
if(i){return
}i=true;
k=b(d.body);
j=b("<div/>",{"class":"uploadableCover",css:{left:0,height:"100%",position:"fixed",top:0,width:"100%","z-index":1999999}});
j.bind("dragenter dragover",function(l){l.stopPropagation();
l.preventDefault();
return false
});
j.bind("dragleave",function(){i=false;
j.remove();
b(".uploadableDrop").remove();
b(".uploadableFile").remove()
});
j.bind("drop",function(l){l.preventDefault();
j.trigger("dragleave");
return false
});
k.append(j);
b(".inputContainer .action-upload, .uploadable .uploadableLink").each(function(){var o=b(this),r=o.closest(".inputContainer, .uploadable"),m,p,l,q,n;
m=b.extend(r.offset(),{height:r.outerHeight(),position:"absolute",width:r.outerWidth()});
p=b("<div/>",{"class":"uploadableDrop",css:m});
l=o.clone();
l.text("Drop Files Here");
q=b("<div/>",{"class":"uploadableFile",css:b.extend(m,{"z-index":2000000})});
n=b("<input/>",{type:"file",multiple:"multiple"});
n.one("change",function(){var t=l.offset(),u,s;
j.hide();
l.click();
q.hide();
u=b('.frame[name="'+l.attr("target")+'"]');
u.popup("source",o,{pageX:t.left+l.outerWidth()/2,pageY:t.top+l.outerHeight()});
u.popup("container").bind("close",function(){j.trigger("dragleave")
});
s=function(){var v=u.find(":file").eq(0);
if(v.length!==1){setTimeout(s,20)
}else{b.each(["class","id","name","style"],function(x,w){n.attr(w,v.attr(w)||"")
});
v.after(n);
v.remove();
v=n;
v.change()
}};
s()
});
p.append(l);
k.append(p);
q.append(n);
k.append(q)
})
});
g.bind("dragend",function(j){if(i){i=false;
b(".uploadableCover").remove();
b(".uploadableDrop").remove();
b(".uploadableFile").remove()
}})
})();
g.on("click",'button[name="action-delete"], :submit[name="action-delete"]',function(){return confirm("Are you sure you want to permanently delete this item?")
});
g.on("click",'button[name="action-trash"], :submit[name="action-trash"]',function(){return confirm("Are you sure you want to archive this item?")
});
g.on("input-disable",":input",function(j,i){b(this).prop("disabled",i)
});
g.onCreate(".inputContainer-readOnly",function(){b(this).find(":input").trigger("input-disable",[true])
});
(function(){function j(){var l=b(this),k=b('output[for="'+l.attr("id")+'"]');
k.prop("value",l.prop("value"))
}g.onCreate('input[type="range"]',j);
g.on("change input",'input[type="range"]',j);
function i(){var n=b(this).closest(".inputContainer"),l=n.find('.inputVariation input[type="range"]'),m,k;
if(l.length===0){return
}m=0;
k=0;
l.each(function(){var p=b(this),o=parseFloat(p.prop("max"));
m+=parseFloat(p.prop("value"));
if(k<o){k=o
}});
l.each(function(){var o=b(this);
o.prop("value",parseFloat(o.prop("value"))/m*k);
j.call(this)
})
}g.onCreate(".inputContainer",i);
g.on("change input",'.inputVariation input[type="range"]',i)
})();
g.on("keydown",":input",function(i){if(i.which===27){b(this).blur()
}});
g.on("keypress",function(i){var j;
if(i.which===47&&b(i.target).closest(":input").length===0){j=b(".toolSearch .searchInput :text");
j.val("");
j.focus();
return false
}});
g.onCreate(".widget-publishing",function(){var o=b(this),k=o.find(".dateInput"),m=o.find('select[name="newSchedule"]'),n=o.find('[name="action-publish"]'),l=n.text(),j=k.val(),i;
if(k.length===0){n.addClass("schedule");
n.text("Schedule")
}else{i=function(){if(k.val()){n.addClass("schedule");
n.text(j&&!m.val()?"Reschedule":"Schedule")
}else{n.removeClass("schedule");
n.text(l)
}};
i();
k.change(i);
m.change(i)
}if(o.closest(".popup").length>0){return
}o.closest(".contentForm-aside").each(function(){var p=b(this),q=p.offset().top;
h.resize(b.throttle(100,b.run(function(){o.css({left:p.offset().left,position:"fixed",top:q,width:o.width(),"z-index":1});
p.css("padding-top",o.outerHeight(true))
})))
})
});
g.onCreate(".widget-publishing",function(){var n=b(this),m=n.find(".widget-publishingWorkflow"),k=n.find(".widget-publishingPublish"),i,l,j;
if(m.length===0||k.length===0){return
}i=b("<ul/>",{"class":"tabs"});
l=b("<li/>",{html:b("<a/>",{text:"Workflow",click:function(){m.show();
l.addClass("state-selected");
k.hide();
j.removeClass("state-selected");
h.resize();
return false
}})});
j=b("<li/>",{html:b("<a/>",{text:"Publish",click:function(){m.hide();
l.removeClass("state-selected");
k.show();
j.addClass("state-selected");
h.resize();
return false
}})});
i.append(l);
i.append(j);
m.before(i);
if(b(".widget-publishingWorkflowState").length>0){l.find("a").click()
}else{j.find("a").click()
}});
g.on("input",".searchFiltersRest > .searchInput > :text",function(){var j=b(this),i=j.closest(".searchFilters").find('.searchFiltersType > input[name="'+j.attr("name")+'"]');
if(i.length>0){i.val(j.val())
}});
g.ready(function(){b(d.activeElement).focus()
});
g.ready(function(){b(this).trigger("create");
b(".toolNav .selected").each(function(){var i=b(this),l=i.find("> ul"),j=l.find("> .selected > a"),k;
if(j.length>0){k=i.find("> a");
k.text(k.text()+" \u2192 "+j.text())
}l.css("min-width",i.outerWidth())
});
b(".toolNav li.isNested > a").click(function(){return false
});
(function(){var i;
b(".toolSearch :text").bind("focus input",b.throttle(500,function(m){var l=b(this),j=l.closest("form"),k,n,o=l.val();
l.attr("autocomplete","off");
k=b('.frame[name="'+j.attr("target")+'"]');
if(k.length===0||(m.type==="focus"&&o&&k.find(".searchResultList .message-warning").length>0)){j.submit()
}else{k.popup("open");
n=k.find('.searchFilters :input[name="q"]');
if(o!==n.val()){n.val(o).trigger("input")
}}}));
b(".toolSearch button").bind("click",function(){b(".toolSearch :text").focus();
return false
})
}());
if(!DISABLE_TOOL_CHECKS){(function(){var i=function(){b.ajax({method:"post",url:CONTEXT_PATH+"/toolCheckStream",cache:false,dataType:"json",data:{url:e.location.href,r:JSON.stringify(c)}}).done(function(j){if(!j){return
}b.each(j,function(l,k){if(k){f[l][k.action].call(c[l],k)
}})
}).done(function(){setTimeout(i,100)
}).fail(function(){setTimeout(i,10000)
})
};
i()
})()
}});
(function(){var i="cms.contentLock.",j=window.localStorage;
window.bspContentLock=function(k){j.setItem(i+k,+new Date())
};
window.bspContentUnlock=function(k){j.removeItem(i+k);
b.ajax({url:CONTEXT_PATH+"/contentUnlock",data:{id:k},async:false,cache:false})
};
window.setInterval(function(){var n,m=j.length,l,k=+new Date(),o;
for(n=0;
n<m;
++n){l=j.key(n);
if(l.indexOf(i,0)===0&&parseInt(j.getItem(l),10)+5000<k){o=l.substring(i.length);
window.bspContentUnlock(o)
}}},1000)
})();
b(window.document).onCreate(".contentForm, .enhancementForm, .standardForm",function(){var i=b(this),l,k,m,j;
l=function(q,s){var r,p,o,n,t;
r=i.attr("action");
p=r.indexOf("?");
n=+new Date()+1000;
t=i.find('[data-dynamic-text][data-dynamic-text != ""],[data-dynamic-html][data-dynamic-html != ""],[data-dynamic-placeholder][data-dynamic-placeholder != ""]');
b.ajax({type:"post",url:CONTEXT_PATH+"contentState?idle="+(!!q)+(p>-1?"&"+r.substring(p+1):""),cache:false,dataType:"json",data:i.serialize()+t.map(function(){var u=b(this);
return"&_dti="+(u.closest("[data-object-id]").attr("data-object-id")||"")+"&_dtt="+(u.attr("data-dynamic-text")||u.attr("data-dynamic-html")||u.attr("data-dynamic-placeholder")||"")
}).get().join(""),success:function(u){i.trigger("cms-updateContentState",[u]);
t.each(function(w){var v=b(this),x=u._dynamicTexts[w];
if(x===null){return
}v.closest(".message").toggle(x!=="");
if(v.is("[data-dynamic-text]")){v.text(x)
}else{if(v.is("[data-dynamic-html]")){v.html(x)
}else{if(v.is("[data-dynamic-placeholder]")){v.prop("placeholder",x)
}}}})
},complete:function(){o=true
}});
if(s){while(!o){if(+new Date()>n){break
}}}};
k=b.throttle(100,l);
k();
i.bind("change input",function(){k();
clearTimeout(j);
m=true;
j=setTimeout(function(){k(true)
},2000)
});
b(window).bind("beforeunload",function(){if(m){l(true,true)
}})
})
}(jQuery,window));